
<nav class="edit-bar" data-toggle="affix" scrollPoint #navigationBar *mobxAutorun>
   <app-breadcrumb-menu></app-breadcrumb-menu>
   <div class="module-name-block module-name-block-space float-left">
      <a class="dropdown module-title">{{'CEO_dashboard'|translate}}</a>
    </div>
   <app-sub-menu></app-sub-menu>
 </nav>
<main class="mt-3 acl-page db-small-space-boxes">
   <div class="container-fluid" *mobxAutorun>
      <app-filter-menu></app-filter-menu>
     <div class="widget" *ngIf="CeoRiskDashboardStore.dashboardLoaded">

        <!-- <div class="ceo-db-top" data-toggle="affix">
           <div class="box-cnt-one tab-type-btn-small justify-content-between d-flex" style="padding: 7px 0 0 15px;">
              <h6 class="mb-0">{{ 'CEO_dashboard' | translate}}</h6>
              <span class="mr-1" *ngIf="RightSidebarLayoutStore.isFilterSelected('is_functional', 1) && !RightSidebarLayoutStore.isFilterSelected('is_corporate', 1)
              || !RightSidebarLayoutStore.isFilterSelected('is_functional', 1) && !RightSidebarLayoutStore.isFilterSelected('is_corporate', 1)" 
              style="font-size: 13px;color: #0088ff;">{{ 'is_functional' | translate}}</span>
              <span class="mr-1" *ngIf="RightSidebarLayoutStore.isFilterSelected('is_corporate', 1)" 
              style="font-size: 13px;color: #0088ff;">{{ 'is_corporate' | translate}}</span>
           </div> -->
           <!-- <div class="box-cnt-one tab-type-btn-small"> 
            <label class="outline-tag active">All</label><label class="outline-tag">Corporate</label><label class="outline-tag">Functional</label>
           </div> -->
           <!-- <div class="small-type-db-btns ceo-db-right-top-btns" style="width: 300px;"> 
            <label class="db-btn pointer btn-color-dark-blue mr-2" 
            [routerLink]="['/risk-management/ceo-dashboard/top-risks']"
            >{{ 'top_20_risks' | translate}}<i class="fas fa-arrow-right"></i></label><label class="db-btn pointer btn-color-light-blue" 
            [routerLink]="['/risk-management/ceo-dashboard/risk-details']"
            >{{ 'risk_details' | translate}}<i class="fas fa-arrow-right"></i></label>
          </div> -->
        <!-- </div> -->

        

        

        <div class="row sm-row">
         <div class="col-xl-5 col-lg-12 col-sm-12 sm-col">
            <div class="bg-white btm-space-10 ceo-db-first-box-one db-shadow">
               <div class="row align-items-center">
                  <div class="col-md-4 border-right">
                     <div class="text-center pointer" 
                     (click)="redirectToRiskPage('all',CeoRiskDashboardStore?.riskCount?.total_risk)">
                     <h3 class="big-text-four">{{CeoRiskDashboardStore?.riskCount?.total_risk}}</h3>
                        <h5 class="mb-0">{{ 'risk' | translate}}</h5>
                     </div>
                  </div>
                  <div class="col-md-8 text-center">
                     <div class="clearfix round-type-status-main-bg">
                        <div class="round-type-status-main">
                           <div class="open-close-status-db d-flex align-items-center status-open">
                              <div class="round-type-status-value bg-white">
                                 <h6 class="mb-0">{{CeoRiskDashboardStore?.riskCount?.open_percentage}}%</h6>
                              </div>
                              <div [ngClass]="CeoRiskDashboardStore?.riskCount?.open!=0?'round-type-status-bg bg-white rounded-circle pointer':'round-type-status-bg bg-white rounded-circle'" 
                              (click)="redirectToRiskPage('open',CeoRiskDashboardStore?.riskCount?.open)">
                                 <div class="round-type-status rounded-circle">
                                    <h6 class="mb-0">{{CeoRiskDashboardStore?.riskCount?.open}}</h6>
                                    <h5>{{ 'open' | translate}}</h5>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="round-type-status-main">
                           <div class="open-close-status-db open-close-status-db-right d-flex align-items-center status-closed">
                              <div [ngClass]="CeoRiskDashboardStore?.riskCount?.close!=0?'round-type-status-bg bg-white rounded-circle pointer':'round-type-status-bg bg-white rounded-circle'" 
                              (click)="redirectToRiskPage('closed',CeoRiskDashboardStore?.riskCount?.close)">
                                 <div class="round-type-status rounded-circle">
                                    <h6 class="mb-0">{{CeoRiskDashboardStore?.riskCount?.close}}</h6>
                                    <h5>{{ 'closed' | translate}}</h5>
                                 </div>
                              </div>
                              <div class="round-type-status-value bg-white">
                                 <h6 class="mb-0">{{CeoRiskDashboardStore?.riskCount?.close_percentage}}%</h6>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>   
               </div> 
            </div>
         </div>
         <div class="col-xl-7 col-lg-12 col-sm-12 sm-col">
            <div class="clearfix">
               <div [ngClass]="extreme_count!=0?'bg-white btm-space-10 ceo-db-small-box-one db-shadow pointer':'bg-white btm-space-10 ceo-db-small-box-one db-shadow'"
                (click)="redirectRiskRateList(extreme_title,extreme_count)">
                  <div class="left-line-type-text">
                     <h3 class="big-text-one mb-0">{{extreme_count}}</h3>
                     <p class="dot-div-new mb-0 dot-red">{{extreme_title}}</p>
                     <!-- <span class="big-line-bdr-left bg-red"></span> -->
                     <!-- <h5>{{extreme_title}}</h5> -->
                     
                  </div>
               </div>
               <div [ngClass]="significant_count!=0?'bg-white btm-space-10 ceo-db-small-box-one db-shadow pointer':'bg-white btm-space-10 ceo-db-small-box-one db-shadow'"
                (click)="redirectRiskRateList(significant_title,significant_count)">
                  <div class="left-line-type-text">
                     <h3 class="big-text-one mb-0">{{significant_count}}</h3>
                     <p class="dot-div-new mb-0 dot-orange">{{significant_title}}</p>
                     <!-- <span class="big-line-bdr-left bg-orange"></span> -->
                     <!-- <h5>{{significant_title}}</h5> -->
                     
                  </div>
               </div>
               <div [ngClass]="high_count!=0?'bg-white btm-space-10 ceo-db-small-box-one db-shadow pointer':'bg-white btm-space-10 ceo-db-small-box-one db-shadow'"
                (click)="redirectRiskRateList(high_title,high_count)">
                  <div class="left-line-type-text">
                     <h3 class="big-text-one mb-0">{{high_count}}</h3>
                     <p class="dot-div-new mb-0 dot-yellow">{{high_title}}</p>
                     <!-- <span class="big-line-bdr-left bg-yellow"></span> -->
                     <!-- <h5>{{high_title}}</h5> -->
                     
                  </div>
               </div>
               <div [ngClass]="moderate_count!=0?'bg-white btm-space-10 ceo-db-small-box-one db-shadow pointer':'bg-white btm-space-10 ceo-db-small-box-one db-shadow'"
                (click)="redirectRiskRateList(moderate_title,moderate_count)">
                  <div class="left-line-type-text">
                     <h3 class="big-text-one mb-0">{{moderate_count}}</h3>
                     <p class="dot-div-new mb-0 dot-light-green">{{moderate_title}}</p>
                     <!-- <span class="big-line-bdr-left bg-light-green"></span> -->
                     <!-- <h5>{{moderate_title}}</h5> -->
                     
                  </div>
               </div>
               <div [ngClass]="low_count!=0?'bg-white btm-space-10 ceo-db-small-box-one db-shadow ceo-db-full-width-box pointer':'bg-white btm-space-10 ceo-db-small-box-one db-shadow ceo-db-full-width-box'"
               (click)="redirectRiskRateList(low_title,low_count)">
                  <div class="left-line-type-text">
                     <h3 class="big-text-one mb-0">{{low_count}}</h3>
                     <p class="dot-div-new mb-0 dot-green">{{low_title}}</p>
                     <!-- <span class="big-line-bdr-left bg-green"></span> -->
                     <!-- <h5>{{low_title}}</h5> -->
                     
                  </div>
               </div>
            </div>
         </div>
      </div>

        <div class="row sm-row" *ngIf="CeoRiskDashboardStore.ceoDivisions">
           <div class="col-lg-4 col-sm-12 sm-col" *ngFor="let divisions of CeoRiskDashboardStore.ceoDivisions">
              <div class="bg-white btm-space-10 widg-padding-cmn db-shadow ceo-db-box-three pointer" 
              (click)="navigateToDivisionDetails(divisions.title,divisions.id)">
                 <div class="row sm-row align-items-center">
                    <div class="col-sm-10 col-10 sm-col">
                       <h5 class="light-text-gray elips-1">{{divisions.title}}</h5>
                       <h5 class="cmn-head-style elips-1 mb-0">{{divisions.extreme_risk}} - {{ 'extreme_risks' | translate}}</h5>
                    </div>
                    <div class="col-sm-2 col-2 sm-col">
                       <span class="db-sec-row-icon"><i class="fas fa-arrow-right"></i></span>
                    </div>
                 </div>
              </div>
           </div>
        </div>

        <div class="row sm-row">
           <div class="col-lg-4 col-sm-12 sm-col" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division">
              <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-four db-shadow">
                 <h5 class="cmn-head-style elips-1 m-0">{{ 'division_wise_risk' | translate}}</h5>
                 <hr>
                 <div class="">
                     <div class="chart-new-round-pic text-right" *ngIf="CeoRiskDashboardStore.riskCountByDivisions && CeoRiskDashboardStore.riskCountByDivisions.length!=0">
                        <div id="chartDivision" style="width: 100%; height: 300px"></div>
                     </div>
                     <div class="chart-new-round-pic text-right" style="width: 100%; height: 300px" *ngIf="!CeoRiskDashboardStore.riskCountByDivisions || CeoRiskDashboardStore.riskCountByDivisions.length==0">
                        <app-no-chart-data [source]="'pie'">
                        </app-no-chart-data>
                    </div>
                  </div>
              </div>
           </div>
           <div [ngClass]="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division?'col-lg-8 col-sm-12 sm-col':'col-lg-12 col-sm-12 sm-col'">
              <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-five relative db-shadow">
                 <h5 class="cmn-head-style elips-1 m-0">{{ 'department_wise_risk_chart' | translate }}</h5>
                 <hr>
                 <div class="">
                     <div class="chart-new-round-pic text-right" *ngIf="!showNoDataBarChart">
                        <div id="chartdiv" style="width: 100%; height: 300px"></div>
                     </div>
                     <div class="chart-new-round-pic text-right" style="width: 100%; height: 300px" *ngIf="showNoDataBarChart">
                        <app-no-chart-data [source]="'bar'">
                        </app-no-chart-data>
                    </div>
                 </div>
                 <a class="bottom-right-value-box bottom-right-link-text db-light-light-color" (click)="setHorizontalScrollBar()">{{showTable ? getTranslateText('close_table') : getTranslateText('open_table')}}</a>
              </div>
           </div>
        </div>

        <div class="row sm-row" *ngIf="CeoRiskDashboardStore.riskDetailsByDepartments && showTable" #tableArea>
           <div class="col-sm-12 sm-col">
              <div class="ceo-db-table-one-main bg-white">
                 <table class="ceo-db-table-one">
                    <tr>
                       <th style="width: 12.5%;" class="db-table-bg-blue text-white">{{ 'risk_zone' | translate}}</th>
                       <th style="width: 12.5%;" class="db-table-bg-blue text-white" *ngFor="let titles of CeoRiskDashboardStore.riskDetailsByDepartments">{{titles.title}}</th>
                    </tr>
                    <tr>
                       <td class="db-table-bg-gray">{{ 'extreme' | translate}}</td>
                       <ng-container *ngFor="let extremes of CeoRiskDashboardStore.riskDetailsByDepartments;let i=index">
                        <td class="db-light-light-color">{{extremes.extreme?extremes.extreme:0}}</td>
                       </ng-container>
                    </tr>
                    <tr>
                       <td class="db-table-bg-gray">{{ 'significant' | translate}}</td>
                       <ng-container *ngFor="let significants of CeoRiskDashboardStore.riskDetailsByDepartments;let i=index">
                        <td class="db-light-light-color">{{significants.very_high?significants.very_high:0}}</td>
                       </ng-container>
                    </tr>
                    <tr>
                       <td class="db-table-bg-gray">{{ 'high' | translate}}</td>
                       <ng-container *ngFor="let highs of CeoRiskDashboardStore.riskDetailsByDepartments;let i=index">
                        <td class="db-light-light-color">{{highs.high?highs.high:0}}</td>
                       </ng-container>
                    </tr>
                    <tr>
                       <td class="db-table-bg-gray">{{ 'moderate' | translate}}</td>
                       <ng-container *ngFor="let moderates of CeoRiskDashboardStore.riskDetailsByDepartments;let i=index">
                        <td class="db-light-light-color">{{moderates.medium?moderates.medium:0}}</td>
                       </ng-container>
                    </tr>
                    <tr>
                       <td class="db-table-bg-gray">{{ 'low' | translate}}</td>
                       <ng-container *ngFor="let lows of CeoRiskDashboardStore.riskDetailsByDepartments;let i=index">
                        <td class="db-light-light-color">{{lows.low?lows.low:0}}</td>
                       </ng-container>
                    </tr>
                    <tr>
                       <td class="db-table-bg-gray">{{ 'grand_total' | translate}}</td>
                       <ng-container *ngFor="let total of CeoRiskDashboardStore.riskDetailsByDepartments;let i=index">
                        <td class="db-table-bg-gray">{{total.grand_total?total.grand_total:0}}</td>
                       </ng-container>
                    </tr>
                 </table>
              </div>
           </div>
        </div>

        







  </div>
  <ng-container *mobxAutorun>
      <div *ngIf="!CeoRiskDashboardStore.dashboardLoaded">
         <app-ceo-dashboard-main-loader></app-ceo-dashboard-main-loader>
      </div>
   </ng-container>
   </div>
 </main>