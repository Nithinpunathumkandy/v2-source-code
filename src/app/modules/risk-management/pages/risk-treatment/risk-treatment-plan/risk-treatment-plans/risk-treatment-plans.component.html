    <div class="relative" *ngIf="RiskTreatmentStore.loaded && RiskTreatmentStore?.riskTreatmentList.length>0">
        <div class="left-right-round-btns">
        <button id="left-button" class="btn-left" (click)="prev()"></button>
        <button id="right-button" class="btn-right" (click)="next()"></button>
        </div> 
            <div class="full-width-table table-scroll-first-time" id="container" *ngIf="RiskTreatmentStore.loaded && RiskTreatmentStore?.riskTreatmentList.length>0">
                <table class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll"  style="width:3800px">
                    <tr>
                        <th class="border-top-0 text-center" width="2%">#</th>
                        <th class="border-top-0 pointer" width="3%" (click) = "setRiskSort('reference_code')">{{'ref_no' | translate}}
                            <img *ngIf = "RisksStore.orderItem == 'reference_code'"
                            [attr.src]="RisksStore.orderBy == 'asc'?'assets/images/sort-down.png':'assets/images/sort-up.png'" class="sort-down-pics">
                        </th>
                        <th class="border-top-0 pointer" [style.width.%]="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division ? 12 : 18" (click) = "setRiskSort('risk_treatments.title')">{{'title' | translate}}
                            <img *ngIf = "RisksStore.orderItem == 'risk_treatments.title'"
                            [attr.src]="RisksStore.orderBy == 'asc'?'assets/images/sort-down.png':'assets/images/sort-up.png'" class="sort-down-pics">
                        </th>
                        <th class="border-top-0 pointer" width="12%" (click) = "setRiskSort('risks.title')">{{'risk' | translate}}
                            <img *ngIf = "RisksStore.orderItem == 'risks.title'"
                            [attr.src]="RisksStore.orderBy == 'asc'?'assets/images/sort-down.png':'assets/images/sort-up.png'" class="sort-down-pics">
                        </th>
                        <th class="border-top-0" width="16%">{{'rm_risk_description' | translate}}
                           
                        </th>
                        <th class="border-top-0" width="9%">{{'risk_treatment_action_plan' | translate}}
                           
                        </th>
                        <th class="border-top-0" width="5%">{{'frequency_of_report' | translate}}
                            
                        </th>
                        <th class="border-top-0 pointer" width="9%" (click) = "setRiskSort('responsible_user.image_token')">{{'risk_treatment_owner' | translate}}
                            <img *ngIf = "RisksStore.orderItem == 'responsible_user.image_token'"
                            [attr.src]="RisksStore.orderBy == 'asc'?'assets/images/sort-down.png':'assets/images/sort-up.png'" class="sort-down-pics">
                        </th>
                        <th class="border-top-0 pointer" width="8%" (click) = "setRiskSort('risks.risk_owner')">{{'risk_owner' | translate}}
                            <img *ngIf = "RisksStore.orderItem == 'risk_treatments.risk_owner'"
                            [attr.src]="RisksStore.orderBy == 'asc'?'assets/images/sort-down.png':'assets/images/sort-up.png'" class="sort-down-pics">
                        </th>

                        <th class="border-top-0 pointer" width="4%" (click) = "setRiskSort('risks.risk_rating_title')">{{'risk_rating' | translate}}
                            <img *ngIf = "RisksStore.orderItem == 'risks.risk_rating_title'"
                            [attr.src]="RisksStore.orderBy == 'asc'?'assets/images/sort-down.png':'assets/images/sort-up.png'" class="sort-down-pics">
                        </th>
                        
                        <th *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division" class="border-top-0 pointer" [style.width.%]="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division ? 6 : ''" (click) = "setRiskSort('risk_treatments.divisions')">{{'divisions' | translate}}
                            <img *ngIf = "RisksStore.orderItem == 'risk_treatments.divisions'"
                            [attr.src]="RisksStore.orderBy == 'asc'?'assets/images/sort-down.png':'assets/images/sort-up.png'" class="sort-down-pics">
                        </th>
                        <th class="border-top-0 pointer" width="6%" (click) = "setRiskSort('risk_treatments.departments')">{{'departments' | translate}}
                            <img *ngIf = "RisksStore.orderItem == 'risk_treatments.departments'"
                            [attr.src]="RisksStore.orderBy == 'asc'?'assets/images/sort-down.png':'assets/images/sort-up.png'" class="sort-down-pics">
                        </th>
                        <th class="border-top-0 pointer" width="4%" (click) = "setRiskSort('risk_treatments.target_date')">{{'target_date' | translate}}
                            <img *ngIf = "RisksStore.orderItem == 'risk_treatments.target_date'"
                            [attr.src]="RisksStore.orderBy == 'asc'?'assets/images/sort-down.png':'assets/images/sort-up.png'" class="sort-down-pics">
                        </th>
                      
                        <th class="border-top-0 pointer text-center" width="4%" (click) = "setRiskSort('risk_treatment_status_language.title')">{{'status' | translate}}
                            <img *ngIf = "RisksStore.orderItem == 'risk_treatment_status_language.title'"
                            [attr.src]="RisksStore.orderBy == 'asc'?'assets/images/sort-down.png':'assets/images/sort-up.png'" class="sort-down-pics">
                        </th>
                    </tr>
                    <tr class="pointer edit-and-delete-main"
                        *ngFor="let row of RiskTreatmentStore?.riskTreatmentList| paginate: {currentPage:RiskTreatmentStore?.currentPage, itemsPerPage:RiskTreatmentStore?.itemsPerPage,totalItems:RiskTreatmentStore?.totalItems}; let num = index">
                        <td class="pointer text-center" >{{(RiskTreatmentStore?.currentPage - 1) * RiskTreatmentStore?.itemsPerPage +
                            (num + 1)}}</td>
                        <td class="pointer" (click)="getDetails(row.id,row.risk_id)">#{{row.reference_code ? row.reference_code : 'XXXXX'}}</td>
                        <td class="pointer" (click)="getDetails(row.id,row.risk_id)">{{row.title}}</td>
                        <td class="pointer" (click)="getDetails(row.id,row.risk_id)">{{row.risk_reference_code}} - {{row.risk_title}}</td>
                        <td class="pointer" (click)="getDetails(row.id,row.risk_id)"><div class="pt-1" [innerHTML]="row.risk_description?row.risk_description:AppStore.noContentText"></div></td>
                        <td class="pointer" (click)="getDetails(row.id,row.risk_id)"><p style="white-space: pre-line;">{{row.description?row.description:AppStore.noContentText}}</p></td>
                        <td class="pointer" (click)="getDetails(row.id,row.risk_id)">{{row.risk_review_frequency_title?row.risk_review_frequency_title:AppStore.noContentText}}</td>
                        <td class="pointer" (click)="getDetails(row.id,row.risk_id)">
                          
                            <div class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg" *ngIf="row.responsible_user_id">
                                <img *ngIf="row.responsible_user_image_token"
                                    [attr.src]="createImagePreview('user-profile-picture',row.responsible_user_image_token)"
                                    width="40px" height="40px" class="rounded-circle">
                                <img *ngIf="!row.responsible_user_image_token" [attr.src]="getDefaultImage('user-logo')" width="40px"
                                    height="40px" class="rounded-circle">
                                <div>
                                    <h6>{{row.responsible_user_first_name}} {{row.responsible_user_last_name}}</h6>
                                    <span>{{row.responsible_user_designation}} </span>
                                </div>
                            </div>
                            <p *ngIf="row.responsible_user_id == null"> {{AppStore.noContentText}}</p>
                        </td>
                        <td class="pointer" (click)="getDetails(row.id,row.risk_id)">
                          
                            <div class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg" *ngIf="row.risk_owner_id">
                                <img
                                    [attr.src]="row.risk_owner_image_token?createImagePreview('user-profile-picture',row.risk_owner_image_token):getDefaultImage('user-logo')"
                                    width="40px" height="40px" class="rounded-circle">
                               
                                <div>
                                    <h6>{{row.risk_owner_first_name}} {{row.risk_owner_last_name}}</h6>
                                    <span>{{row.risk_owner_designation}} </span>
                                </div>
                            </div>
                            <p *ngIf="row.risk_owner_id == null"> {{AppStore.noContentText}}</p>
                        </td>
                        <td class="pointer" (click)="getDetails(row.id,row.risk_id)">{{row.risk_rating_title}}</td>
                      
                        <td  *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division" class="pointer" (click)="getDetails(row.id,row.risk_id)">{{row.divisions?row.divisions:AppStore.noContentText}}</td>
                      
                        <td class="pointer" (click)="getDetails(row.id,row.risk_id)">{{row.departments?row.departments:AppStore.noContentText}}</td>
                      
                        <td class="pointer" (click)="getDetails(row.id,row.risk_id)">{{row.target_date | date: OrganizationGeneralSettingsStore.organizationSettings?.date_format}}</td>
                       
                        <td class="pointer text-center">
                            <div class="edit-option-show" style="margin:6px 0 0 0" *ngIf="row.is_residual_analysis_performed!=1  && RiskTreatmentStore?.riskTreatmentDetails?.type!='closed'">
                                <!-- <a [attr.title]="'view'|translate" (click)="viewDetails(row.employee_id,row.id)"><i
                                        class="fas fa-eye"></i></a> -->
                                <a [attr.title]="'edit'|translate" (click)="editRisk(row.id,row.risk_id)"><i
                                        class="fas fa-pen"></i></a>
                                <!-- <a *ngIf="getResponsiblePresent(AuthStore.user?.id,num) && AuthStore.getActivityPermission(900,'DELETE_RISK_TREATMENT') && RiskTreatmentStore?.riskTreatmentDetails?.risk_treatment_status.type!='resolved'"  [attr.title]="'delete'|translate" (click)="deleteRisk(row.id,num)"
                                    ><i class="fas fa-trash"></i></a> -->
                            </div>
                            <div [ngClass]="'dot-div '+row.label+'-dot'">{{row.risk_treatment_status_title}}</div>
                        </td>
                        <!-- <td>
                            <div class="edit-option-table">
                                <button type="button" class="edit-btn-table fa-trash-clr" (click)="deleteRisk(row.id,num)"><i
                                        class="fas fa-trash"></i></button>
                                <button type="button" class="edit-btn-table" (click)="editRisk(row.id)"><i class="fas fa-pen"></i></button>
                            </div>
                        </td> -->
                    </tr>
                </table>
            </div>
    </div>
            <p class="float-right bold mb-0" *ngIf="RiskTreatmentStore?.loaded && RiskTreatmentStore.totalItems > 0">{{'total_Items' | translate}}:{{RiskTreatmentStore?.totalItems}}</p>

            <div *ngIf="RiskTreatmentStore.totalItems > RiskTreatmentStore.itemsPerPage && RiskTreatmentStore.loaded" class="col-sm-12">
                <ul class="pagination justify-content-center mt-3">
                    <div class="list">
                        <pagination-controls [previousLabel]="'previous' | translate" [nextLabel]="'next' | translate" (pageChange)="getItems($event)" class="my-pagination">
                        </pagination-controls>
                    </div>
                </ul>
            </div>
            <!-- </div> -->
        <!-- </div>
    </div>
</main> -->
<!-- loader -->

<!-- More Permission popup Start -->
<div class="modal modal-style-1 fade popup-full-width" id="more-permission-popup" data-keyboard="false"
data-backdrop="static" #exportFormModal>
<button type="button" class="close" (click)="closeExportModal()"><i class="lni-close"></i><span>{{'esc'|translate}}</span></button>
<div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
         
        </div>
        <!-- Modal body -->
        <div class="modal-body form-body">
            <div class="row">
                <div class="col-sm-12">
                    <div class="head-and-check mt-3">
                        <div class="Preview-checkbox clearfix">
                           <label class="container2 remember-txt float-left mb-0">
                           <input type="checkbox" [checked]="allSelected" (change)="selectAll($event)">
                           <span class="checkmark"></span>{{'risk_treatment_details' | translate}}</label>
                        </div>
                        <hr class="mt-1 mb-2">
                     </div>
                    <div class="row">
                       
                        <div class="col-md-3 col-6">
                            <div class="form-group mb-3">
                                <div class="Preview-checkbox clearfix new-check-box">
                                    <label class="container2 remember-txt float-left mb-0">
                                    <input type="checkbox" [checked]="allSelected || checkSelected('risk_number')" (change)="setSelectedField('risk_number',$event)">
                                    <span class="checkmark"></span>{{'risk_number'|translate}}</label>
                                 </div>
                            </div>
                        </div>
                        <div class="col-md-3 col-6">
                          <div class="form-group mb-3">
                              <div class="Preview-checkbox clearfix new-check-box">
                                  <label class="container2 remember-txt float-left mb-0">
                                  <input type="checkbox" [checked]="allSelected || checkSelected('risk_title')" (change)="setSelectedField('risk_title',$event)">
                                  <span class="checkmark"></span>{{'risk'|translate}}</label>
                               </div>
                          </div>
                      </div>
                      <div class="col-md-3 col-6">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('risk_description')" (change)="setSelectedField('risk_description',$event)">
                                <span class="checkmark"></span>{{'rm_risk_description'|translate}}</label>
                             </div>
                        </div>
                    </div>
                        <div class="col-md-3 col-6">
                            <div class="form-group mb-3">
                                <div class="Preview-checkbox clearfix new-check-box">
                                    <label class="container2 remember-txt float-left mb-0">
                                    <input type="checkbox" [checked]="allSelected || checkSelected('reference_code')" (change)="setSelectedField('reference_code',$event)">
                                    <span class="checkmark"></span>{{'reference_code' |
                                    translate}}</label>
                                 </div>
                            </div>
                        </div>
                        <div class="col-md-3 col-6">
                            <div class="form-group mb-3">
                                <div class="Preview-checkbox clearfix new-check-box">
                                    <label class="container2 remember-txt float-left mb-0">
                                    <input type="checkbox" [checked]="allSelected || checkSelected('title')" (change)="setSelectedField('title',$event)">
                                    <span class="checkmark"></span>{{'title' |
                                    translate}}</label>
                                 </div>
                            </div>
                        </div>
                        
                      <div class="col-md-3 col-6">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('risk_treatment_action_plan')" (change)="setSelectedField('risk_treatment_action_plan',$event)">
                                <span class="checkmark"></span>{{'description'|translate}}</label>
                             </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('risk_treatment_owner')" (change)="setSelectedField('risk_treatment_owner',$event)">
                                <span class="checkmark"></span>{{'risk_treatment_owner'}}</label>
                             </div>
                        </div>
                    </div>

                      <div class="col-md-3 col-6">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('risk_owner')" (change)="setSelectedField('risk_owner',$event)">
                                <span class="checkmark"></span>{{'risk_owner'|translate}}</label>
                             </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('budget')" (change)="setSelectedField('budget',$event)">
                                <span class="checkmark"></span>{{'budget'|translate}}</label>
                             </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('start_date')" (change)="setSelectedField('start_date',$event)">
                                <span class="checkmark"></span>{{'start_date'|translate}}</label>
                             </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('agreed_date')" (change)="setSelectedField('agreed_date',$event)">
                                <span class="checkmark"></span>{{'target_date'|translate}}</label>
                             </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('status')" (change)="setSelectedField('status',$event)">
                                <span class="checkmark"></span>{{'status'|translate}}</label>
                             </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('inherent_risk_rating')" (change)="setSelectedField('inherent_risk_rating',$event)">
                                <span class="checkmark"></span>{{'inherent_risk_rating'|translate}}</label>
                             </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('divisions')" (change)="setSelectedField('divisions',$event)">
                                <span class="checkmark"></span>{{'divisions'|translate}}</label>
                             </div>
                        </div>
                    </div>
                    
                      <div class="col-md-3 col-6" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_department">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('departments')" (change)="setSelectedField('departments',$event)">
                                <span class="checkmark"></span>{{'departments'|translate}}</label>
                             </div>
                        </div>
                    </div>

                    <div class="col-md-3 col-6">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('frequency_of_review')" (change)="setSelectedField('frequency_of_review',$event)">
                                <span class="checkmark"></span>{{'frequency_of_review'|translate}}</label>
                             </div>
                        </div>
                    </div>

                    <div class="col-md-3 col-6">
                        <div class="form-group mb-3">
                            <div class="Preview-checkbox clearfix new-check-box">
                                <label class="container2 remember-txt float-left mb-0">
                                <input type="checkbox" [checked]="allSelected || checkSelected('treatment_dependency')" (change)="setSelectedField('treatment_dependency',$event)">
                                <span class="checkmark"></span>{{'treatment_dependency'|translate}}</label>
                             </div>
                        </div>
                    </div>
                  
                 
              
                    </div>
                </div>
            </div>
            
          
       

            <div class="row">
                <div class="col-sm-12">
                    <div class="d-block justify-content-left border-0 mt-3">
                        <button type="button" data-toggle="modal" [disabled]="selectedFields.length==0" (click)="export()"
                            class="btn ordinary-btn mr-3 btn-active">{{ AppStore.loading  ? getButtonText('exporting') : getButtonText('export') }}</button>
                        <button type="button" data-toggle="modal" (click)="closeExportModal()"
                            class="btn ordinary-btn mr-2">{{ AppStore.loading  ? getButtonText('loading') : getButtonText('cancel') }}</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal footer -->
    </div>
</div>
</div>

<ng-container *mobxAutorun>
    <div *ngIf="!RiskTreatmentStore.loaded">
        <app-risk-list></app-risk-list>
    </div>
 </ng-container>
 <!-- nodata -->
<ng-container *mobxAutorun>
    <app-no-data *ngIf="RiskTreatmentStore.loaded && RiskTreatmentStore?.riskTreatmentList.length==0" [border]=false></app-no-data>
   </ng-container>
<!------------------- Delete Confirmation Modal Start --------------------------->

<div class="modal modal-style-1 fade" id="delete-popup" data-backdrop="static" data-keyboard="false" #deletePopup>
    <app-delete-popup [source] = "deleteObject"></app-delete-popup>
  </div>
  
  <!------------------- Delete Confirmation Modal End --------------------------->