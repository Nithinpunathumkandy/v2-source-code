<div #plainDev></div>
<nav class="edit-bar" data-toggle="affix" #navigationBar>
    <div class="module-name-block float-left">
        <app-breadcrumb-menu></app-breadcrumb-menu>

    </div>
    <app-sub-menu></app-sub-menu>
</nav>
<main class="mt-3 organization-page">
    <div class="container-fluid">
        <div class="organization-form-page" *mobxAutorun>
            <form [formGroup]="riskForm" id="regForm" class="organization-multi-stup-form multi-stup-form-common">
                <!-- Circles which indicates the steps of the form: -->
                <div id="header-sroll-form" class="form-indicates-sec clearfix" #formSteps>
                    <span class="step pointer" (click)="changeStep(0)"><span
                            class="multi-form-nbr">1</span>{{'info' | translate}}</span>
                    <span class="step pointer" (click)="changeStep(1)"><span
                            class="multi-form-nbr">2</span>{{'responsible' | translate}}</span>
                    <span class="step pointer" (click)="changeStep(2)"><span class="multi-form-nbr">3</span>{{'mapping'
                        | translate}}</span>
                    <span class="step pointer" (click)="changeStep(3)"><span
                            class="multi-form-nbr">4</span>{{'preview_save' | translate}}</span>
                </div>
                <!-- One "tab" for each step in the form: -->
                <div class="tab">
                    <!-- tab start -->
                    <div class="row">
                        <!-- <label
                            [ngClass]="riskForm.value.risk_classification_id==classification.id?'outline-tag active':'outline-tag'"
                            *ngFor="let classification of RiskClassificationStore.allItems;let i=index"
                            (click)="setClassification(classification.id)"><i
                                [ngClass]="classification.is_risk==1?'fa fa-exclamation-triangle':'fas fa-lightbulb'"
                                aria-hidden="true"></i>{{classification.risk_classification_language_title}}</label> -->
                        <!-- <label class="outline-tag"><i class="fas fa-lightbulb"></i>Opportunity</label> -->
                        <div class="col-sm-12">
                            <div class="form-group">
                                <div class="Preview-checkbox clearfix d-inline-block mr-3" *ngFor="let classification of RiskClassificationStore.allItems;let i=index">
                                    <label class="container2 float-left pl-4 mb-0 font-normal" style="font-size: 14px; padding-top:2px;">
                                        <input type="checkbox" (change)="setClassification(classification.id);setFieldnames(classification)"
                                            [checked]="riskForm.value.risk_classification_id == classification.id ? true : false">
                                        <span class="checkmark mt-1"></span>{{classification.risk_classification_language_title}}</label>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.risk_classification_id">
                                    {{formErrors.risk_classification_id}}</p>
                            </div>
                        </div>
                    </div>

                    <!-- <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="name">{{'risk_classification' | translate}}</label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [items]="RiskClassificationStore.allItems" [placeholder]="'risk_classification' | translate"
                                            [multiple]="false" searchable="false"
                                            formControlName="risk_classification_id"
                                            bindLabel="risk_classification_language_title" bindValue = "id" autocomplete="new-password">
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.risk_classification_language_title?.length > 60 ? (item.risk_classification_language_title | slice:0:60)+' ...' :
                                                item.risk_classification_language_title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.risk_classification_language_title?.length > 80 ? (item.risk_classification_language_title | slice:0:80)+' ...' :
                                                item.risk_classification_language_title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.risk_classification_id">
                                    {{formErrors.risk_classification_id}}</p>
                            </div>
                        </div>
                    </div> -->

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label class="d-inline-block" for="name">{{title | translate}}<sup>*</sup></label> <span class="text-grey ml-2 mr-1"> ( </span><div class="Preview-checkbox clearfix d-inline-block mb-0 pt-1" style="vertical-align:'middle';margin:-2px 0 0 0">
                                    <label class="container2 float-left pl-4  text-grey" style="font-size: 12px; padding-top:3px;">
                                        <input type="checkbox"
                                            [checked]="selectedRiskLibrary" (change)="setRiskLibrary($event)">
                                        <span class="checkmark mt-1"></span> {{'choose_from_risk_library'|translate}}</label>
                                  
                                </div> <span class="text-grey ml-1">)</span>
                                <input *ngIf="!selectedRiskLibrary" type="text" formControlName="title" class="form-control" [attr.placeholder]="'risk_management_rr_addform_title' | translate">
                                <!-- [items]="RiskLibraryMasterStore.allItems" formControlName="title"-->
                                <div class="clearfix"   *ngIf="selectedRiskLibrary">
                                    <div class="multiple-plain-ngselect">
                                       
                                        <ng-select
                                          
                                            [placeholder]="'select_title'|translate" searchable="true" [multiple]="false"
                                            formControlName="risk_library_id"
                                            (search)="searchRiskLibrary($event)"
                                            (clear)="getRiskLibrary()" (open)="getRiskLibrary()"
                                            (change)="setLibraryProperties($event)"
                                             [closeOnSelect]="true" bindLabel="title"
                                            autocomplete="new-password">
                                            <ng-option [value]="type.id"
                                                *ngFor="let type of RiskLibraryMasterStore.allItems">
                                                {{type.title}}
                                            </ng-option>
                                        
                                        </ng-select>
                                    
                                    </div>
                                    <!-- <button class="btn multi-add-user ml-2" style="width: 42px;"
                                        (click)="addLibrary()"><i class="fas fa-plus"></i></button> -->
                                </div>
                                
                                <p class="form-error pt-1"
                                    *ngIf="riskForm?.value.title && riskForm?.value.title.length > 500 && !formErrors">
                                    {{'maximum_500_characters'|translate}}</p>
                                <p class="form-error pt-1"
                                    *ngIf="formErrors && formErrors.risk_library_id && !formErrors.title">
                                    {{formErrors.risk_library_id}}</p>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.title">{{formErrors.title}}
                                </p>
                            </div>

                        </div>

                        <!-- <div class="col-sm-12">
                            <div class="form-group">
                                <div class="Preview-checkbox clearfix">
                                    <label class="container2 float-left pl-4" style="font-size: 10px; padding-top:2px;">
                                        <input type="checkbox"
                                            [checked]="selectedRiskLibrary" (change)="setRiskLibrary($event)">
                                        <span class="checkmark mt-1"></span> Choose From Risk Library</label>
                                   
                                </div>
                            </div>
                        </div> -->
                        <div class="col-sm-12"  *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(900,41501)">
                            <div class="form-group">
                                <div class="Preview-checkbox clearfix">
                                    <label class="container2 float-left pl-4 mb-0 font-normal" style="font-size: 14px; padding-top:2px;">
                                        <input type="checkbox" (change)="setCorporate($event)"
                                            [checked]="riskForm.value.is_corporate">
                                        <span class="checkmark mt-1"></span> {{'enable_corporate_risk' | translate}}?</label>
                                    <!-- <div class="question-circle-inp d-inline-block"
                                        style="vertical-align: middle; margin: -15px 0 0 15px; position: relative;">
                                        <i class="far fa-question-circle"></i>
                                        <div class="message-password-inp">
                                            <p class="mb-0">{{'risk_repeated_frequently' | translate}}</p>
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <span style="float: right; white-space: pre-wrap;"
                                    class="text-grey">{{riskForm?.value.risk_observation != null ?
                                    getObservationLength() : 0}} {{'characters' | translate}}</span>

                                <label for="risk_observation">{{risk_observation|translate}}</label>
                                <!-- <textarea formControlName="description" class="form-control" rows="11" id="comment"
                                    placeholder="Description"></textarea> -->
                                    <ckeditor class="image-width-texteditor text-editor-content bullet-point-list" id="risk_observation" (change)="descriptionValueChange($event)" [editor]="Editor" formControlName="risk_observation"></ckeditor>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.risk_observation">
                                    {{formErrors.risk_observation}}</p>
                            </div>

                        </div>
                    </div>
                    <div class="row">


                        <div class="col-sm-6">
                            <div class="form-group">
                                <span style="float: right;" class="text-grey mb-0">{{riskForm?.value.description != null
                                    ?
                                    getDescriptionLength() : 0}} {{'characters' | translate}}</span>

                                <label for="name">{{rm_risk_description|translate}}</label>
                                <!-- <textarea formControlName="description" class="form-control" rows="11" id="comment"
                                    placeholder="Description"></textarea> -->
                                <!-- <ckeditor formControlName="impact" id="impact" [config]="config"
                                    (change)="descriptionValueChange($event)"></ckeditor> -->
                                <textarea formControlName="description" class="form-control" rows="3" id="comment"
                                    [placeholder]="risk_management_rr_addform_description|translate"></textarea>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.description">
                                    {{formErrors.description}}
                                </p>
                            </div>

                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <span style="float: right;" class="text-grey mb-0">{{riskForm?.value.last_review_note != null
                                    ?
                                    getReviewLength() : 0}} {{'characters' | translate}}</span>

                                <label for="name">{{'last_review_note'|translate}}</label>
                                <!-- <textarea formControlName="description" class="form-control" rows="11" id="comment"
                                    placeholder="Description"></textarea> -->
                                <!-- <ckeditor formControlName="impact" id="impact" [config]="config"
                                    (change)="descriptionValueChange($event)"></ckeditor> -->
                                <textarea formControlName="last_review_note" class="form-control" rows="3" id="comment"
                                    [placeholder]="'risk_management_rr_addform_last_review_note'|translate"></textarea>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.last_review_note">
                                    {{formErrors.last_review_note}}
                                </p>
                            </div>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <!-- <span style="float: right;" class="text-grey">{{riskForm?.value.impact != null ?
                                    getImpactLength() : 0}} {{'characters' | translate}}</span> -->



                                <label>{{'impacts'|translate}}</label>
                                <div class="d-flex"> <input type="text" class="form-control w-100"
                                        [placeholder]="risk_management_rr_addform_impacts|translate" formControlName="impact">
                                    <button class="btn multi-add-user ml-2" [disabled]="!riskForm.value.impact" style="width: 42px;"
                                        (click)="addImpact()"><i class="fas fa-plus"></i></button>
                                </div>

                                <ul class="arrowlist pl-0 mt-2" *ngIf="RisksStore.impactList?.length>0">

                                    <li class="clearfix" *ngFor="let impact of RisksStore.impactList;let i=index">{{impact}}
                                        <Button type="button" (click) = "removeImpact(i)" class="btn btn-small float-right btn-small-delete" style="border: none;"><i class="fas fa-trash"></i></Button>
                  
                                    </li>

                                </ul>


                                <!-- <ckeditor formControlName="impact" id="impact" [config]="config"
                                    (change)="descriptionValueChange($event)"></ckeditor> -->
                                <!-- <textarea formControlName="impact" class="form-control" rows="11" id="comment"
                                    placeholder="Impact"></textarea> -->
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.impact">{{formErrors.impact}}
                                </p>
                            </div>

                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <span style="float: right;" class="text-grey">{{riskForm?.value.risk_cause != null ?
                                    getCauseLength() : 0}} {{'characters' | translate}}</span>

                                <label for="name">{{risk_causes|translate}}</label>
                                <div class="question-circle-inp d-inline-block"
                                        style="vertical-align: middle; margin: -15px 0 5px 15px; position: relative;">
                                        <i class="far fa-question-circle"></i>
                                        <div class="message-password-inp">
                                            <p class="mb-0">{{'risk_cause_info' | translate}}</p>
                                        </div>
                                    </div>
                                <div class="d-flex"> <input type="text" class="form-control w-100"
                                        [placeholder]="risk_management_rr_addform_risk_causes|translate" formControlName="risk_cause">
                                    <button class="btn multi-add-user ml-2" (click)="addRiskCause()" style="width: 42px;"
                                        [disabled]="!riskForm.value.risk_cause"><i class="fas fa-plus"></i></button>
                                </div>

                                <ul class="arrowlist pl-0 mt-2" *ngIf="RisksStore.riskCauseList?.length>0">

                                    <li class="clearfix" *ngFor="let cause of RisksStore.riskCauseList;let j=index">{{cause}}
                                        <Button type="button" (click) = "removeRiskCause(j)" class="btn btn-small float-right btn-small-delete" style="border: none;"><i class="fas fa-trash"></i></Button>
                  
                                    </li>

                                </ul>
                                <!-- <textarea formControlName="description" class="form-control" rows="11" id="comment"
                                    placeholder="Description"></textarea> -->
                                <!-- <ckeditor formControlName="impact" id="impact" [config]="config"
                                    (change)="descriptionValueChange($event)"></ckeditor> -->
                                <!-- <textarea formControlName="risk_cause" class="form-control" rows="11" id="comment"
                                    placeholder="Risk Cause"></textarea> -->
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.risk_cause">
                                    {{formErrors.risk_cause}}
                                </p>
                            </div>

                        </div>


                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="name">{{'risk_types' | translate}}</label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="RiskTypeStore.allItems" [placeholder]="'select_risk_types'|translate"
                                            multiple="true" 
                                            bindLabel="risk_type_language_title" 
                                            bindValue="id"
                                            [closeOnSelect]="false" 
                                            searchable="true" 
                                            formControlName="risk_type_ids"
                                            (search)="searchRiskType($event)" 
                                            (clear)="getRiskType()"
                                            (open)="getRiskType()" 
                                            autocomplete="new-password">
                                            <!-- <ng-option [value]="type.id" *ngFor="let type of RiskTypeStore.allItems">
                                                {{type.risk_type_language_title}}
                                            </ng-option> -->
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item?.risk_type_language_title?.length > 60 ?
                                                (item.risk_type_language_title | slice:0:60)+' ...' :
                                                item.risk_type_language_title}}<span aria-hidden="true"
                                                    (click)="clear(item)" style="border:none;"
                                                    class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item?.risk_type_language_title?.length > 80 ?
                                                (item.risk_type_language_title | slice:0:80)+' ...' :
                                                item.risk_type_language_title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.risk_type_ids">
                                    {{formErrors.risk_type_ids}}</p>
                            </div>
                        </div>
                        <!-- <div class="col-sm-6">
                            <div class="form-group">
                                <label for="name">{{'issue_domains' | translate}}</label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect select-width-plus">
                                        <ng-select 
                                            [items]="IssueDomainMasterStore.issueDomains"
                                            placeholder="Select Issue Domain" 
                                            multiple="true" 
                                            searchable="true"
                                            formControlName="issue_domain_ids" 
                                            (search)="searchDomain($event)"
                                            (clear)="getDomain()" 
                                            (open)="getDomain()" 
                                            [closeOnSelect]="false"
                                            bindLabel="title"
                                            autocomplete="new-password">          
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' : item.title}}<span aria-hidden="true" (click) = "clear(item)" style="border:none;" class="ng-value-icon left">Ã—</span>
                                             </ng-template>
                                             <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' : item.title}}
                                             </ng-template>
                                        </ng-select>
                                    </div>
                                    <button class="btn multi-add-user" (click) = "addIssueDomain()"><i class="fas fa-plus"></i></button>
                                </div>
                                <p class = "form-error pt-1" *ngIf="formErrors && formErrors.issue_domain_ids">{{formErrors.issue_domain_ids}}</p>
                            </div>
                        </div> -->
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="name">{{'risk_sources' | translate}}</label>
                                <div class="clearfix d-flex">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [items]="RiskSourceMasterStore.allItems" [placeholder]="'select_risk_sources' | translate"
                                            multiple="true" searchable="true"
                                            formControlName="risk_source_ids" (search)="searchRiskSource($event)"
                                            (clear)="getRiskSource()" (open)="getRiskSource()" [closeOnSelect]="false"
                                            bindLabel="title" autocomplete="new-password">
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' :
                                                item.title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' :
                                                item.title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                    <button class="btn multi-add-user ml-2" style="width: 42px;" (click)="addRiskSource()" *ngIf = "AuthStore.getActivityPermission(100,'CREATE_RISK_SOURCE')"><i
                                            class="fas fa-plus"></i></button>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.risk_source_ids">
                                    {{formErrors.risk_source_ids}}</p>
                            </div>
                        </div>

                        <!-- <div class="col-sm-6">
                            <div class="form-group">
                                <label for="name">Risk Library</label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="RiskLibraryMasterStore.allItems"
                                            placeholder="Select Risk Library" searchable="true" [multiple]="false"
                                            formControlName="risk_library_id" (search)="searchRiskLibrary($event)"
                                            (clear)="getRiskLibrary()" (open)="getRiskLibrary()" [closeOnSelect]="true"
                                            bindLabel="title" autocomplete="new-password">
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' :
                                                item.title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' :
                                                item.title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                   
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.risk_library_id">
                                    {{formErrors.risk_library_id}}</p>
                            </div>
                        </div> -->
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="name">{{'risk_category' | translate}}<sup>*</sup></label>
                                <div class="clearfix d-flex">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [items]="RiskCategoryStore.allItems"
                                            [placeholder]="'select_risk_category'|translate" [multiple]="false" searchable="true"
                                            bindLabel="title" formControlName="risk_category_id"
                                            (search)="searchRiskCategory($event)" (clear)="getRiskCategory()"
                                            (open)="getRiskCategory()" autocomplete="new-password">

                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' :
                                                item.title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' :
                                                item.title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                    <button class="btn multi-add-user ml-2" style="width: 42px;" (click)="addRiskCategory()" *ngIf = "AuthStore.getActivityPermission(100,'CREATE_RISK_CATEGORY')"><i
                                            class="fas fa-plus"></i></button>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.risk_category_id">
                                    {{formErrors.risk_category_id}}</p>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="name">{{'risk_sub_category' | translate}}</label>
                                <div class="clearfix d-flex">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [items]="RiskSubCategoryMasterStore.allItems" [placeholder]="'select_risk_sub_category'|translate"
                                            [multiple]="false" searchable="true" bindLabel="title"
                                            formControlName="risk_sub_category_id" (search)="searchRiskSubCategory($event)"
                                            (clear)="getRiskSubCategory()" (open)="getRiskSubCategory()" [closeOnSelect]="false"
                                            autocomplete="new-password">
                                           
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' :
                                                item.title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' :
                                                item.title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                    <button class="btn multi-add-user ml-2" style="width: 42px;" (click)="addRiskSubCategory()" *ngIf = "AuthStore.getActivityPermission(100,'CREATE_RISK_SUB_CATEGORY')"><i
                                            class="fas fa-plus"></i></button>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.risk_sub_Category_ids">
                                    {{formErrors.risk_sub_category_id}}</p>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="name">{{'risk_areas' | translate}}</label>
                                <div class="clearfix d-flex">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [items]="RiskAreaStore.allItems" [placeholder]="'select_risk_area'|translate"
                                            multiple="true" searchable="true" bindLabel="title"
                                            formControlName="risk_area_ids" (search)="searchRiskArea($event)"
                                            (clear)="getRiskArea()" (open)="getRiskArea()" [closeOnSelect]="false"
                                            autocomplete="new-password">
                                            <!-- <ng-option [value]="type.id" *ngFor="let type of RiskAreaStore.allItems">
                                                {{type.title}}
                                            </ng-option> -->
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' :
                                                item.title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' :
                                                item.title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                    <button class="btn multi-add-user ml-2" style="width: 42px;" (click)="addRiskArea()" *ngIf = "AuthStore.getActivityPermission(100,'CREATE_RISK_AREA')"><i
                                            class="fas fa-plus"></i></button>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.risk_area_ids">
                                    {{formErrors.risk_area_ids}}</p>
                            </div>
                        </div>



                        <div class="col-sm-6"
                            *ngIf="OrganizationGeneralSettingsStore?.organizationSettings?.is_ms_type">
                            <div class="form-group">
                                <label for="name">{{'ms_types' | translate}}</label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [placeholder]="'select_ms_types'|translate" bindLabel="ms_type_title"
                                            multiple="true" searchable="true" formControlName="ms_type_organization_ids"
                                            (search)="searchMsType($event)" (clear)="getMsType()" (open)="getMsType()"
                                            [closeOnSelect]="false" autocomplete="new-password">
                                            <ng-option [value]="type.id"
                                                *ngFor="let type of MsTypeOrganizationStore.msTypeDetails">
                                                {{type.ms_type_title}} <span class="small-text">V
                                                    {{type.ms_type_version_title}}</span>
                                            </ng-option>
                                        </ng-select>
                                    </div>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.ms_type_organization_ids">
                                    {{formErrors.ms_type_organization_ids}}</p>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>{{'risk_date' | translate}}<sup>*</sup></label>
                                <div class="input-group input-clear-btn-main">
                                    <!-- <div class="input-clear-btn-main"> -->
                                    <input formControlName="risk_date" class="form-control bg-white"
                                        placeholder="yyyy-mm-dd" id="risk_date" [readonly]="true"
                                        [maxDate]="riskForm.value.next_review_date?{year: riskForm.value.next_review_date?.year?riskForm.value.next_review_date?.year:null, month: riskForm.value.next_review_date?.month?riskForm.value.next_review_date?.month:null, day: riskForm.value.next_review_date?.day?riskForm.value.next_review_date?.day-1:null}:''"
                                       
                                        ngbDatepicker #riskDate="ngbDatepicker">
                                    <span aria-hidden="true" *ngIf="riskForm.value.risk_date"
                                        (click)="clear('risk_date')" style="border:none;"
                                        class="input-clear-btn">Ã—</span>
                                    <!-- </div> -->

                                    <div class="input-group-append">
                                        <button class="btn btn-outline-secondary calendar" (click)="riskDate.toggle()"
                                            type="button"><i class="fas fa-calendar-alt"></i></button>
                                    </div>



                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors&&formErrors.risk_date">
                                    {{formErrors.risk_date}}</p>

                            </div>

                        </div>

                        <!-- <div class="row"> -->
                        <div class="col-sm-12">
                            <div class="form-group">
                                <div class="Preview-checkbox clearfix">
                                    <label class="container2 float-left pl-4 font-normal" style="font-size: 14px; padding-top:2px;">
                                        <input type="checkbox" (change)="setRepetative($event)"
                                            [checked]="repetativeRisk">
                                        <span class="checkmark mt-1"></span> {{'repetative_risk' | translate}}?</label>
                                    <div class="question-circle-inp d-inline-block"
                                        style="vertical-align: middle; margin: -15px 0 0 15px; position: relative;">
                                        <i class="far fa-question-circle"></i>
                                        <div class="message-password-inp">
                                            <p class="mb-0">{{'risk_repeated_frequently' | translate}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- </div> -->

                        <div class="col-sm-6">
                            <div class="form-group" *ngIf="repetativeRisk && riskForm.value.risk_date">
                                <label for="name">{{'review_frequency' | translate}}</label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <!-- [items]="RiskReviewFrequencyStore.allItems" -->
                                        <ng-select [placeholder]="'select_review_frequency'|translate" [multiple]="false"
                                            searchable="true" bindLabel="risk_review_frequency_language_title"
                                            bindValue="id" formControlName="risk_review_frequency_id"
                                            (search)="searchRiskReviewFrequency($event)"
                                            (clear)="getRiskReviewFrequency()" (open)="getRiskReviewFrequency()"
                                            (change)="setNextReview()" autocomplete="new-password">
                                            <ng-option [value]="type.id"
                                                *ngFor="let type of RiskReviewFrequencyStore.allItems">
                                                {{type.risk_review_frequency_language_title}}
                                            </ng-option>
                                        </ng-select>
                                    </div>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors&&formErrors.risk_review_frequency_id">
                                    {{formErrors.risk_review_frequency_id}}</p>
                            </div>
                        </div>

                        <div class="col-sm-6" *ngIf="riskForm.value.risk_review_frequency_id && repetativeRisk">
                            <div class="form-group">
                                <label>{{'next_review_date' | translate}}<sup *ngIf="riskForm.value.risk_review_frequency_id">*</sup></label>
                                <div class="input-group input-clear-btn-main">
                                    <!-- <div class="relative"> -->
                                    <input formControlName="next_review_date" class="form-control bg-white"
                                        placeholder="yyyy-mm-dd" id="next_review_date" [readonly]="true"
                                        [minDate]="{year: riskForm.value.risk_date?.year, month: riskForm.value.risk_date?.month, day: riskForm.value.risk_date?.day+1}"
                                        ngbDatepicker #nextDate="ngbDatepicker"><span aria-hidden="true"
                                        *ngIf="riskForm.value.next_review_date" (click)="clear('next_review_date')"
                                        style="border:none;" class="input-clear-btn">Ã—</span>
                                    <!-- </div> -->

                                    <div class="input-group-append">
                                        <button class="btn btn-outline-secondary calendar" (click)="nextDate.toggle()"
                                            type="button"><i class="fas fa-calendar-alt"></i></button>
                                    </div>



                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors&&formErrors.next_review_date">
                                    {{formErrors.next_review_date}}</p>
                            </div>


                        </div>


                    </div>
                </div>
                <!-- tab end -->
                <div class="tab">
                    <!-- tab start -->
                    <div class="row">
                        <div class="col-sm-6" *ngIf = "OrganizationLevelSettingsStore.organizationLevelSettings?.is_subsidiary">
                            <div class="form-group">
                                <label for="name">{{'organizations' | translate}}<sup
                                        *ngIf="!riskForm.value.is_corporate">*</sup></label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">

                                        <ng-select [items]="SubsidiaryStore.subsidiaryList"
                                            [placeholder]="'select_organization'|translate"
                                            [multiple]="RisksStore.addCorporate?true:false" searchable="true"
                                            bindLabel="title" formControlName="organization_ids"
                                            (search)="searchSubsidiary($event)" (clear)="getSubsidiary()"
                                            (change)="setNull('division')" (open)="getSubsidiary()"
                                            [closeOnSelect]="false" autocomplete="new-password">
                                            <!-- <ng-option [value]="type.id"
                                                *ngFor="let type of SubsidiaryStore.subsidiaryList">
                                                {{type.title}}
                                            </ng-option> -->
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' :
                                                item.title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' :
                                                item.title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                    <p class="form-error pt-1" *ngIf="formErrors&&formErrors.organization_ids">
                                        {{formErrors.organization_ids[0]}}</p>

                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6"
                            [ngStyle]="{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_branch ? 'none':'block'}">
                            <div class="form-group">
                                <label for="name">{{'branches' | translate}}<sup
                                        *ngIf="!riskForm.value.is_corporate"></sup></label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="BranchesStore.branchDetails"
                                            [placeholder]="'select_branch'|translate"
                                            [multiple]="RisksStore.addCorporate?true:false" 
                                            searchable="true"
                                            bindLabel="title"
                                            formControlName="branch_ids" 
                                            (open)="getBranches()" 
                                            (search)="searchBranches($event)"
                                            autocomplete="new-password">
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' :
                                                item.title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' :
                                                item.title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                    <p class="form-error pt-1" *ngIf="formErrors&&formErrors.branch_ids">
                                        {{formErrors.branch_ids}}</p>
                                </div>
                            </div>
                        </div>

                        
                    <!-- </div>

                    <div class="row"> -->
                        <div class="col-sm-6"
                            [ngStyle]="{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_division ? 'none':'block'}">
                            <div class="form-group">
                                <label for="name">{{'divisions' | translate}}<sup
                                        *ngIf="!riskForm.value.is_corporate">*</sup></label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="DivisionStore.allItems" [placeholder]="'select_division'|translate"
                                            [multiple]="RisksStore.addCorporate?true:false" searchable="true"
                                            bindLabel="title" (search)="searchDivision($event)"
                                            formControlName="division_ids" (change)="setNull('department')"
                                            [closeOnSelect]="false" (clear)="getDivision()" (open)="getDivision()"
                                            autocomplete="new-password">
                                            <!-- <ng-option [value]="type.id" *ngFor="let type of DivisionStore.allItems">
                                                {{type.title}}
                                            </ng-option> -->
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' :
                                                item.title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' :
                                                item.title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                    <p class="form-error pt-1" *ngIf="formErrors&&formErrors.division_ids">
                                        {{formErrors.division_ids}}</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6" *ngIf = "OrganizationLevelSettingsStore.organizationLevelSettings?.is_department">
                            <div class="form-group">
                                <label for="name">{{'departments' | translate}}<sup
                                        *ngIf="!riskForm.value.is_corporate">*</sup></label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="DepartmentStore.allItems" [placeholder]="'select_department'|translate"
                                            [multiple]="RisksStore.addCorporate?true:false" searchable="true"
                                            bindLabel="title" (search)="searchDepartment($event)"
                                            formControlName="department_ids" (clear)="getDepartment()"
                                            [closeOnSelect]="false" (open)="getDepartment()"
                                            (change)="setNull('section')">
                                            <!-- <ng-option [value]="type.id" *ngFor="let type of DepartmentStore.allItems"
                                                autocomplete="new-password">
                                                {{type.title}}
                                            </ng-option> -->
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' :
                                                item.title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' :
                                                item.title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                    <p class="form-error pt-1" *ngIf="formErrors&&formErrors.department_ids">
                                        {{formErrors.department_ids}}</p>

                                </div>
                            </div>
                        </div>

                        
                    <!-- </div>
                    <div class="row"> -->
                        <div class="col-sm-6"
                            [ngStyle]="{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_section ? 'none':'block'}">
                            <div class="form-group">
                                <label for="name">{{'sections' | translate}}<sup
                                        *ngIf="!riskForm.value.is_corporate">*</sup></label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="SectionStore.allItems" [placeholder]="'select_section'|translate"
                                            [multiple]="RisksStore.addCorporate?true:false" searchable="true"
                                            bindLabel="title" (search)="searchSection($event)"
                                            formControlName="section_ids" (clear)="getSection()" [closeOnSelect]="false"
                                            (open)="getSection()" autocomplete="new-password"
                                            (change)="setNull('sub_section')">
                                            <!-- <ng-option [value]="type.id" *ngFor="let type of SectionStore.allItems">
                                                {{type.title}}
                                            </ng-option> -->
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' :
                                                item.title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' :
                                                item.title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                    <p class="form-error pt-1" *ngIf="formErrors&&formErrors.section_ids">
                                        {{formErrors.section_ids}}</p>

                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6"
                            [ngStyle]="{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_sub_section ? 'none':'block'}">
                            <div class="form-group">
                                <label for="name">{{'sub_sections' | translate}}<sup
                                        *ngIf="!riskForm.value.is_corporate">*</sup></label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="SubSectionStore.allItems" [placeholder]="'select_sub_sections'|translate"
                                            [multiple]="RisksStore.addCorporate?true:false" searchable="true"
                                            bindLabel="title" formControlName="sub_section_ids"
                                            (clear)="getSubSection()" (search)="searchSubSection($event)"
                                            (open)="getSubSection()" [closeOnSelect]="false"
                                            autocomplete="new-password">
                                            <!-- <ng-option [value]="type.id" *ngFor="let type of SubSectionStore.allItems">
                                                {{type.title}}
                                            </ng-option> -->
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' :
                                                item.title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">Ã—</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' :
                                                item.title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                    <p class="form-error pt-1" *ngIf="formErrors&&formErrors.sub_section_ids">
                                        {{formErrors.sub_section_ids}}</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="name">{{'responsible_users' | translate}}</label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="UsersStore.usersList" bindLabel="email"
                                            [placeholder]="'select_responsible_users'|translate" formControlName="user_ids"
                                            (clear)="getUsers()" (search)="searchUsers($event)" multiple="true"
                                            (open)="getUsers()" (remove)="setSelectedUsers($event,'remove')"
                                            (add)="setSelectedUsers($event,'add')" [searchFn]="customSearchFn">
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                <img class="ng-select-user-display"
                                                    *ngIf="item.image?.token||item.image_token" height="15" width="15"
                                                    [attr.src]="item.image?.token?createImageUrl(item.image?.token):createImageUrl(item.image_token)" />
                                                <img class="ng-select-user-display"
                                                    *ngIf="!item.image?.token && !item.image_token" height="15"
                                                    width="15" [attr.src]="getDefaultImage('user-logo')" />
                                                <b style="padding-left: 3px;">{{getStringsFormatted([item.first_name,item.last_name],50,' ') | titlecase}}</b><span aria-hidden="true"
                                                    (click)="clear(item)" style="border:none;"
                                                    class="ng-value-icon left">Ã—</span>
                                            </ng-template>

                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                <div class="user-post-department-pic">
                                                    <img class="ng-select-user-display"
                                                        *ngIf="item.image?.token || item.image_token" height="25"
                                                        width="25"
                                                        [attr.src]="item.image?.token?createImageUrl(item.image?.token):createImageUrl(item.image_token)" />
                                                    <img class="ng-select-user-display"
                                                        *ngIf="!item.image?.token && !item.image_token" height="25"
                                                        width="25" [attr.src]="getDefaultImage('user-logo')" />
                                                </div>
                                                <div class="user-post-department-div">
                                                    <b>{{getStringsFormatted([item.first_name,item.last_name],50,' ') | titlecase}}</b>
                                                    <p class="user-post-department-multiple">
                                                        {{getStringsFormatted([item.designation_title,' '+item.department],50,',')}}</p>
                                                </div>
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors&&formErrors.user_ids">
                                    {{formErrors.user_ids}}</p>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="name">{{'risk_owner' | translate}}<sup>*</sup></label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="UsersStore.usersList" bindLabel="email"
                                            [placeholder]="'select_risk_owner'|translate" formControlName="risk_owner_id" [multiple]="false"
                                            (clear)="getUsers()" (search)="searchUsers($event)" multiple="false"
                                            (open)="getUsers()" [searchFn]="customSearchFn">
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                <img class="ng-select-user-display"
                                                    *ngIf="item.image?.token||item.image_token" height="15" width="15"
                                                    [attr.src]="item.image?.token?createImageUrl(item.image?.token):createImageUrl(item.image_token)" />
                                                <img class="ng-select-user-display"
                                                    *ngIf="!item.image?.token && !item.image_token" height="15"
                                                    width="15" [attr.src]="getDefaultImage('user-logo')" />
                                                <b style="padding-left: 3px;">{{getStringsFormatted([item.first_name,item.last_name],50,' ') | titlecase}}</b><span aria-hidden="true"
                                                    (click)="clear(item)" style="border:none;"
                                                    class="ng-value-icon left">Ã—</span>
                                            </ng-template>

                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                <div class="user-post-department-pic">
                                                    <img class="ng-select-user-display"
                                                        *ngIf="item.image?.token || item.image_token" height="25"
                                                        width="25"
                                                        [attr.src]="item.image?.token?createImageUrl(item.image?.token):createImageUrl(item.image_token)" />
                                                    <img class="ng-select-user-display"
                                                        *ngIf="!item.image?.token && !item.image_token" height="25"
                                                        width="25" [attr.src]="getDefaultImage('user-logo')" />
                                                </div>
                                                <div class="user-post-department-div">
                                                    <b>{{getStringsFormatted([item.first_name,item.last_name],50,' ') | titlecase}}</b>
                                                    <p class="user-post-department-multiple">
                                                        {{getStringsFormatted([item.designation_title,' '+item.department],50,',')}}</p>
                                                </div>
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors&&formErrors.risk_owner_id">
                                    {{formErrors.risk_owner_id}}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- tab end -->
                <div class="tab">
                    <!-- tab start -->
                    <div class="row process-form-tab mb-4">
                        <div class="col-sm-12">

                            <div class="common-tab-md clearfix tab-same-height mb-3">
                                <div class="tab-common-left-md">
                                    <!-- tab menu start -->
                                    <ul class="nav nav-tabs nav-tabs--vertical nav-tabs--left vertical-tab"
                                        role="navigation">
                                        <li class="nav-item"> <a (click)="gotoMappingSection('control')"
                                                class="nav-link text-left active show" data-toggle="tab" role="tab"
                                                aria-controls="ipsum" aria-selected="false" data-original-title=""
                                                title="">{{'controls' | translate}}</a></li>
                                        <li class="nav-item"> <a (click)="gotoMappingSection('issue')"
                                                class="nav-link text-left" data-toggle="tab" role="tab"
                                                aria-controls="lorem" aria-selected="true" data-original-title=""
                                                title="">{{'issues' | translate}}</a></li>

                                        <li class="nav-item"> <a (click)="gotoMappingSection('process')"
                                                class="nav-link text-left" data-toggle="tab" role="tab"
                                                aria-controls="ipsum" aria-selected="false" data-original-title=""
                                                title="">{{'processes' | translate}}</a></li>

                                        <!-- <li class="nav-item"> <a (click)="gotoMappingSection('location')"
                                                class="nav-link text-left" data-toggle="tab" role="tab"
                                                aria-controls="ipsum" aria-selected="false" data-original-title=""
                                                title="">{{'locations' | translate}}</a></li> -->
                                        <li class="nav-item" *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(400,8101)"> <a (click)="gotoMappingSection('project')"
                                                class="nav-link text-left" data-toggle="tab" role="tab"
                                                aria-controls="ipsum" aria-selected="false" data-original-title=""
                                                title="">{{'projects' | translate}}</a></li>
                                        <li class="nav-item" *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(100,2901)"> <a (click)="gotoMappingSection('product')"
                                                class="nav-link text-left" data-toggle="tab" role="tab"
                                                aria-controls="ipsum" aria-selected="false" data-original-title=""
                                                title="">{{'products' | translate}}</a></li>
                                        <li class="nav-item" *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(300,4101)"> <a (click)="gotoMappingSection('customer')"
                                                class="nav-link text-left" data-toggle="tab" role="tab"
                                                aria-controls="ipsum" aria-selected="false" data-original-title=""
                                                title="">{{'customers' | translate}}</a></li>
                                        <li class="nav-item"> <a (click)="gotoMappingSection('objective')"
                                                class="nav-link text-left" data-toggle="tab" role="tab"
                                                aria-controls="ipsum" aria-selected="false" data-original-title=""
                                                title="">{{'strategic_objectives' | translate}}</a></li>

                                        <li class="nav-item" *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(1900,34801)"> <a (click)="gotoMappingSection('incident')"
                                                class="nav-link text-left" data-toggle="tab" role="tab"
                                                aria-controls="ipsum" aria-selected="false"
                                                data-original-title="" title="">{{'incident' | translate}}</a>
                                        </li>


                                    </ul>
                                </div>
                                <div class="tab-common-left-content-m">
                                    <div class="tab-content widg-padding-cmn bg-white cmn-bdr min-height-64">
                                        <div *ngIf="selectedSection=='control'"
                                            [ngClass]="ControlStore?.selectedControlsList.length==0?'tab-pane fade active show':'tab-pane fade active show'"
                                            id="tab-one" role="tabpanel">
                                                <!-- *ngIf="ControlStore?.selectedControlsList.length> 0" -->
                                                <div *ngIf="!(RisksStore.individualRiskDetails?.is_analysis_performed==1) && ControlStore?.selectedControlsList?.length> 0" class="d-flex align-items-center processes-issue audit-processes-issue clearfix bg-white cmn-bdr mb-3">
                                                    <h5 class="w-100">{{'map_controls_with_risk'|translate}}</h5>
                                                    <div class="float-right text-right" style="width: 294px;"
                                                        *ngIf="RisksStore.individualRiskDetails?.is_analysis_performed != 1">
                                                        <a (click)="selectControls()" data-toggle="modal"
                                                            class="btn btn-small">{{'select' | translate}}</a>
                                                        <a class="btn btn-small mr-0" (click) = "addControl()">{{'add_control' | translate}}</a>
                                                    </div>
                                                </div>
                                                <div class="audit-form-table w-100 risk-form-mapping-table mb-3"
                                                    *ngIf="ControlStore?.selectedControlsList.length> 0">
                                                    <table class="table table-bordered ordinary-table word-break cmn-table-style mb-1">
                                                        <tr>
                                                            <th class="border-top-0 text-center" width="5%">#</th>
                                                            <th class="border-top-0" width="20%">{{'ref_id' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="75%">{{'title' | translate}}
                                                            </th>
                                                            <!-- <th class="border-top-0" width="12%">{{'issue_types' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="20%">{{'issue_categories' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="19%">{{'issue_domains' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="32%">{{'departments' |
                                                                translate}}</th> -->
                                                        </tr>
                                                        <tr class="edit-and-delete-main"
                                                            *ngFor="let cntrl of ControlStore?.selectedControlsList; let list=index">
                                                            <td class="text-center">{{list+1}}</td>
                                                            <td>{{cntrl.reference_code}}</td>
                                                            <td>
                                                                <div class="edit-option-show"
                                                                    *ngIf="RisksStore.individualRiskDetails?.is_analysis_performed != 1">
                                                                    <a [attr.title]="'delete'|translate"
                                                                        (click)="deleteItem('control',list)"><i
                                                                            class="fas fa-trash"></i></a>
                                                                </div>
                                                                {{cntrl.issues_title?cntrl.issues_title:cntrl.title}}
                                                            </td>

                                                            <!-- <td [attr.title]="cntrl.issue_categories">
                                                                {{ cntrl.issue_categories?.length > 25 ?
                                                                    cntrl.issue_categories.substring(0,25)+'...' :
                                                                    cntrl.issue_categories }}
                                                            </td>
                                                            <td [attr.title]="cntrl.issue_domains">
                                                                {{ cntrl.issue_domains?.length > 25 ?
                                                                    cntrl.issue_domains.substring(0,25)+'...' :
                                                                    cntrl.issue_domains }}
                                                            </td>
                                                            <td>
                                                                {{cntrl.departments}}

                                                            </td> -->
                                                        </tr>




                                                    </table>

                                                </div>
                                                <div *ngIf="ControlStore?.selectedControlsList.length == 0"
                                                    style="height: 300px">

                                                    <app-no-data [height]=true [border]=false></app-no-data>

                                                </div>
                                        </div>

                                        <div *ngIf="selectedSection=='issue'"
                                            [ngClass]="IssueListStore?.selectedIssuesList.length==0?'tab-pane fade active show':'tab-pane fade active show'"
                                            id="tab-one" role="tabpanel">
                                                <div class="processes-issue audit-processes-issue clearfix bg-white cmn-bdr mb-3"
                                                    *ngIf="IssueListStore?.selectedIssuesList.length> 0">
                                                    <h5>{{'map_organization_issues_with_risk' | translate}}</h5>
                                                    <div class="float-right">
                                                        <a (click)="selectIssues()" data-toggle="modal"
                                                            class="btn btn-small">{{'select' | translate}}</a>
                                                    </div>
                                                </div>
                                                <div class="audit-form-table w-100 not-fixed-table mb-0 table-scroll-first-time"
                                                    *ngIf="IssueListStore?.selectedIssuesList.length> 0">
                                                    <table class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll" style="width:1500px !important;">
                                                        <tr>
                                                            <th class="border-top-0 text-center" width="2%">#</th>
                                                            <th class="border-top-0" width="9%">{{'ref_id' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="18%">{{'issue' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="12%">{{'issue_types' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="20%">{{'issue_categories' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="19%">{{'issue_domains' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="32%">{{'departments' |
                                                                translate}}</th>
                                                        </tr>
                                                        <tr class="edit-and-delete-main"
                                                            *ngFor="let selected of IssueListStore?.selectedIssuesList; let list=index">
                                                            <td class="text-center">{{list+1}}</td>
                                                            <td>{{selected.reference_code}}</td>
                                                            <td>{{selected.issues_title?selected.issues_title:selected.title}}
                                                            </td>
                                                            <td> <span *ngFor="let types of selected.issue_types_list"
                                                                    class="risk-type-bx risk-type-bx-drop">
                                                                    <i><img
                                                                            [attr.src]="types == 'Internal' ? 'assets/images/internal.svg' : 'assets/images/external.svg'" style="width: 15px;">{{types}}</i>&nbsp;
                                                                </span>
                                                            </td>
                                                            <td [attr.title]="selected.issue_categories">
                                                                {{ selected.issue_categories?.length > 25 ?
                                                                selected.issue_categories.substring(0,25)+'...' :
                                                                selected.issue_categories }}
                                                            </td>
                                                            <td [attr.title]="selected.issue_domains">
                                                                {{ selected.issue_domains?.length > 25 ?
                                                                selected.issue_domains.substring(0,25)+'...' :
                                                                selected.issue_domains }}
                                                            </td>

                                                            <td>
                                                                <div class="edit-option-show">
                                                                    <a [attr.title]="'delete'|translate"
                                                                        (click)="deleteItem('issue',list)"><i
                                                                            class="fas fa-trash"></i></a>
                                                                </div>
                                                                {{selected.departments}}

                                                            </td>
                                                        </tr>




                                                    </table>


                                                </div>
                                                <div *ngIf="IssueListStore?.selectedIssuesList.length == 0"
                                                    style="height: 300px">
                                                    <!-- <div class="no-policy-demo">
                                                    <div class="no-file-icon">
                                                        <i class="far fa-file"></i>
                                                    </div> -->
                                                    <app-no-data [height]=true [border]=false></app-no-data>
                                                    <!-- </div> -->
                                                </div>
                                        </div>
                                        
                                        <div *ngIf="selectedSection=='process'"
                                            [ngClass]="ProcessStore?.selectedProcessesList.length==0?'tab-pane fade active show':'tab-pane fade active show'"
                                            id="tab-one" role="tabpanel">

                                                <div *ngIf="!(RisksStore.individualRiskDetails?.is_analysis_performed==1) && ProcessStore?.selectedProcessesList.length> 0"
                                                    class="processes-issue audit-processes-issue clearfix bg-white cmn-bdr mb-3">
                                                    <h5>{{'map_processes_with_risk' | translate}}</h5>
                                                    <div class="float-right"
                                                        *ngIf="RisksStore.individualRiskDetails?.is_analysis_performed != 1">
                                                        <a (click)="selectProcesses()" data-toggle="modal"
                                                            class="btn btn-small">{{'select' | translate}}</a>
                                                    </div>
                                                </div>
                                                <div class="audit-form-table w-100 risk-form-mapping-table form-table-scroll"
                                                    *ngIf="ProcessStore?.selectedProcessesList.length>0">
                                                    <table class="table table-bordered ordinary-table word-break cmn-table-style mb-2">
                                                        <tr>
                                                            <th class="border-top-0 text-center" width="2%">#</th>
                                                            <th class="border-top-0" width="9%">{{'ref_id' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="12%">{{'department' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="25%">{{'process_group' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="27%">{{'process' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="16%">{{'process_category' |
                                                                translate}}</th>
                                                            
                                                            <th class="border-top-0" width="19%">{{'risk_rating' |
                                                                translate}}</th>
                                                            <!-- <th class="border-top-0" width="33%">Status</th> -->
                                                        </tr>
                                                        <tr class="edit-and-delete-main"
                                                            *ngFor="let selected of ProcessStore?.selectedProcessesList; let list=index">
                                                            <td class="text-center">{{list+1}}</td>
                                                            <td>{{selected.reference_code}}</td>
                                                            <td>{{selected.department}}</td>
                                                            <td>{{selected.process_group_title}}</td>
                                                            <td> {{selected.title}}
                                                            </td>
                                                            <td>{{selected.process_category_title}}</td>
                                                            
                                                            <td>
                                                                <div class="edit-option-show"
                                                                    *ngIf="RisksStore.individualRiskDetails?.is_analysis_performed != 1">
                                                                    <a [attr.title]="'delete'|translate"
                                                                        (click)="deleteItem('process',list)"><i
                                                                            class="fas fa-trash"></i></a>
                                                                </div>
                                                                {{ selected.risk_rating_title ? selected.risk_rating_title :
                                                                AppStore.noContentText }}
                                                            </td>
                                                            <!-- <td>
                                                                {{selected.status}}

                                                            </td> -->
                                                        </tr>



                                                    </table>


                                                </div>
                                                <div *ngIf="ProcessStore?.selectedProcessesList.length == 0"
                                                    style="height: 300px">

                                                    <app-no-data [height]=true [border]=false></app-no-data>

                                                </div>
                                        </div>

                                        <div *ngIf="selectedSection=='location'"
                                            [ngClass]="LocationMasterStore?.selectedLocationList.length==0?'tab-pane fade active show':'tab-pane fade active show'"
                                            id="tab-one" role="tabpanel">

                                                <div *ngIf="LocationMasterStore?.selectedLocationList.length> 0"
                                                    class="processes-issue audit-processes-issue clearfix bg-white cmn-bdr mb-3">
                                                    <h5>{{'connect_location_with_risk'|translate}}</h5>
                                                    <div class="float-right">
                                                        <a (click)="selectLocations()" data-toggle="modal"
                                                            class="btn btn-small">{{'select' | translate}}</a>
                                                    </div>
                                                </div>
                                                <div class="audit-form-table w-100 risk-form-mapping-table form-table-scroll"
                                                    *ngIf="LocationMasterStore?.selectedLocationList.length> 0">
                                                    <table class="table table-bordered ordinary-table word-break cmn-table-style mb-2">
                                                        <tr>

                                                            <th class="border-top-0 text-center" width="9%">{{'sl' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="25%">{{'title' |
                                                                translate}}</th>
                                                            <!-- <th class="border-top-0" width="32%">{{'process' | translate}}
                                                            </th> -->

                                                        </tr>
                                                        <tr class="edit-and-delete-main"
                                                            *ngFor="let loc of LocationMasterStore?.selectedLocationList; let list=index">
                                                            <td class="text-center">{{list+1}}</td>
                                                            <td>
                                                                <div class="edit-option-show">
                                                                    <a [attr.title]="'delete'|translate"
                                                                        (click)="deleteItem('location',list)"><i
                                                                            class="fas fa-trash"></i></a>
                                                                </div>
                                                                {{loc.title}}
                                                            </td>
                                                            <!-- <td>{{loc.status}}</td> -->


                                                        </tr>



                                                    </table>


                                                </div>
                                                <div *ngIf="LocationMasterStore?.selectedLocationList.length == 0"
                                                    style="height: 300px">

                                                    <app-no-data [height]=true [border]=false></app-no-data>

                                                </div>

                                        </div>

                                        <div *ngIf="selectedSection=='project'"
                                            [ngClass]="BusinessProjectsStore?.selectedProjectsList.length==0?'tab-pane fade active show':'tab-pane fade active show'"
                                            id="tab-one" role="tabpanel">

                                                <div *ngIf="BusinessProjectsStore?.selectedProjectsList.length> 0"
                                                    class="processes-issue audit-processes-issue clearfix bg-white cmn-bdr mb-3">
                                                    <h5>{{'map_projects_with_risk'|translate}}</h5>
                                                    <div class="float-right">
                                                        <a (click)="selectProjects()" data-toggle="modal"
                                                            class="btn btn-small">{{'select' | translate}}</a>
                                                    </div>
                                                </div>
                                                <div class="audit-form-table w-100 risk-form-mapping-table form-table-scroll"
                                                    *ngIf="BusinessProjectsStore?.selectedProjectsList.length> 0">
                                                    <table class="table table-bordered ordinary-table word-break cmn-table-style mb-2">
                                                        <tr>

                                                            <th class="border-top-0 text-center" width="9%">{{'sl' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="25%">{{'title' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="32%">{{'manager_name'|translate}}

                                                            </th>
                                                            <th class="border-top-0" width="9%">{{'member_count' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="9%">{{'location' | translate}}
                                                            </th>

                                                        </tr>
                                                        <tr class="edit-and-delete-main"
                                                            *ngFor="let proj of BusinessProjectsStore?.selectedProjectsList; let list=index">
                                                            <td class="text-center">{{list+1}}</td>
                                                            <td> {{proj.title}}
                                                            </td>
                                                            <td>
                                                                <div class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg"
                                                                    *ngIf="proj.project_manager_first_name">
                                                                    <img [attr.src]="proj.project_manager_image_token?createImageUrl(proj.project_manager_image_token):getDefaultImage('user-logo')"
                                                                        width="30px" height="30px" class="rounded-circle">

                                                                    <div>
                                                                        <h6>{{proj.project_manager_first_name}}
                                                                            {{proj.project_manager_last_name}}</h6>
                                                                        <span>{{proj.project_manager_designation?proj.project_manager_designation:AppStore.noContentText}}
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <p *ngIf="!proj.project_manager_first_name">
                                                                    {{AppStore.noContentText}}</p>
                                                            </td>
                                                            <td>{{proj.member_count}}</td>
                                                            <td>
                                                                <div class="edit-option-show">
                                                                    <a [attr.title]="'delete'|translate"
                                                                        (click)="deleteItem('project',list)"><i
                                                                            class="fas fa-trash"></i></a>
                                                                </div>
                                                                {{proj.location_title?proj.location_title:AppStore.noContentText}}
                                                            </td>

                                                        </tr>
                                                    </table>
                                                </div>
                                                <div *ngIf="BusinessProjectsStore?.selectedProjectsList.length == 0"
                                                    style="height: 300px">

                                                    <app-no-data [height]=true [border]=false></app-no-data>

                                                </div>

                                        </div>

                                        <div *ngIf="selectedSection=='product'"
                                            [ngClass]="BusinessProductsStore?.selectedProductList.length==0?'tab-pane fade active show':'tab-pane fade active show'"
                                            id="tab-one" role="tabpanel">

                                                <div *ngIf="BusinessProductsStore?.selectedProductList.length> 0"
                                                    class="processes-issue audit-processes-issue clearfix bg-white cmn-bdr mb-3">
                                                    <h5>{{'map_products_with_risk'|translate}}</h5>
                                                    <div class="float-right">
                                                        <a (click)="selectProducts()" data-toggle="modal"
                                                            class="btn btn-small">{{'select' | translate}}</a>
                                                    </div>
                                                </div>
                                                <div class="audit-form-table w-100 risk-form-mapping-table form-table-scroll"
                                                    *ngIf="BusinessProductsStore?.selectedProductList.length> 0">
                                                    <table class="table table-bordered ordinary-table word-break cmn-table-style mb-2">
                                                        <tr>

                                                            <th class="border-top-0 text-center" width="9%">{{'sl' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="25%">{{'title' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="32%">{{'description' |
                                                                translate}}
                                                            </th>
                                                            <!-- <th class="border-top-0" width="9%">{{'member_count' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="9%">{{'location' | translate}}
                                                            </th> -->

                                                        </tr>
                                                        <tr class="edit-and-delete-main"
                                                            *ngFor="let prod of BusinessProductsStore?.selectedProductList; let list=index">
                                                            <td class="text-center">{{list+1}}</td>
                                                            <td> {{prod.title}}
                                                            </td>
                                                            <td>
                                                                <div class="edit-option-show">
                                                                    <a [attr.title]="'delete'|translate"
                                                                        (click)="deleteItem('product',list)"><i
                                                                            class="fas fa-trash"></i></a>
                                                                </div>
                                                                {{prod.description?prod.description:AppStore.noContentText}}
                                                            </td>
                                                            <!-- <td>{{prod.member_count}}</td>
                                                            <td>{{prod.location_title?prod.location_title:AppStore.noContentText}}
                                                            </td> -->

                                                        </tr>
                                                    </table>
                                                </div>
                                                <div *ngIf="BusinessProductsStore?.selectedProductList.length == 0"
                                                    style="height: 300px">

                                                    <app-no-data [height]=true [border]=false></app-no-data>

                                                </div>

                                        </div>

                                        <div *ngIf="selectedSection=='customer'"
                                            [ngClass]="BusinessCustomersStore?.selectedCustomerList.length==0?'tab-pane fade active show':'tab-pane fade active show'"
                                            id="tab-one" role="tabpanel">

                                                <div *ngIf="BusinessCustomersStore?.selectedCustomerList.length> 0"
                                                    class="processes-issue audit-processes-issue clearfix bg-white cmn-bdr mb-3">
                                                    <h5>{{'map_customers_with_risk'|translate}}</h5>
                                                    <div class="float-right">
                                                        <a (click)="selectCustomers()" data-toggle="modal"
                                                            class="btn btn-small">{{'select' | translate}}</a>
                                                    </div>
                                                </div>
                                                <div class="audit-form-table w-100 risk-form-mapping-table form-table-scroll"
                                                    *ngIf="BusinessCustomersStore?.selectedCustomerList.length> 0">
                                                    <table class="table table-bordered ordinary-table word-break cmn-table-style mb-2">
                                                        <tr>

                                                            <th class="border-top-0 text-center" width="9%">{{'sl' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="25%">{{'title' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="32%">{{'contact_person' |
                                                                translate}}
                                                            </th>
                                                            <th class="border-top-0" width="9%">{{'address' |
                                                                translate}}</th>
                                                            <!-- <th class="border-top-0" width="9%">{{'location' | translate}}
                                                            </th> -->

                                                        </tr>
                                                        <tr class="edit-and-delete-main"
                                                            *ngFor="let cust of BusinessCustomersStore?.selectedCustomerList; let list=index">
                                                            <td class="text-center">{{list+1}}</td>
                                                            <td> {{cust.title}}
                                                            </td>
                                                            <td>{{cust.contact_person?cust.contact_person:AppStore.noContentText}}
                                                            </td>
                                                            <td>
                                                                <div class="edit-option-show">
                                                                    <a [attr.title]="'delete'|translate"
                                                                        (click)="deleteItem('customer',list)"><i
                                                                            class="fas fa-trash"></i></a>
                                                                </div>
                                                                {{cust.address?cust.address:AppStore.noContentText}}
                                                            </td>
                                                            <!-- <td>{{cust.location_title?cust.location_title:AppStore.noContentText}}
                                                            </td> -->

                                                        </tr>
                                                    </table>
                                                </div>
                                                <div *ngIf="BusinessCustomersStore?.selectedCustomerList.length == 0"
                                                    style="height: 300px">

                                                    <app-no-data [height]=true [border]=false></app-no-data>

                                                </div>

                                        </div>
                                        <div *ngIf="selectedSection=='objective'"
                                            [ngClass]="StrategicObjectiveMasterStore?.selectedStrategic.length==0?'tab-pane fade active show':'tab-pane fade active show'"
                                            id="tab-one" role="tabpanel">

                                                <div *ngIf="StrategicObjectiveMasterStore?.selectedStrategic.length>0"
                                                    class="processes-issue audit-processes-issue clearfix bg-white cmn-bdr mb-3">
                                                    <h5>{{'map_strategic_objectives_with_risk'|translate}}</h5>
                                                    <div class="float-right">
                                                        <a (click)="selectObjectives()" data-toggle="modal"
                                                            class="btn btn-small">{{'select' | translate}}</a>
                                                    </div>
                                                </div>
                                                <div class="audit-form-table w-100 risk-form-mapping-table form-table-scroll"
                                                    *ngIf="StrategicObjectiveMasterStore?.selectedStrategic.length> 0">
                                                    <table class="table table-bordered ordinary-table word-break cmn-table-style mb-2">
                                                        <tr>

                                                            <th class="border-top-0 text-center" width="10%">{{'sl' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="90%">{{'title' |
                                                                translate}}</th>

                                                            <!-- <th class="border-top-0" width="9%">{{'location' | translate}}
                                                            </th> -->

                                                        </tr>
                                                        <tr class="edit-and-delete-main"
                                                            *ngFor="let obj of StrategicObjectiveMasterStore?.selectedStrategic; let list=index">
                                                            <td class="text-center">{{list+1}}</td>
                                                            <td>
                                                                <div class="edit-option-show">
                                                                    <a [attr.title]="'delete'|translate"
                                                                        (click)="deleteItem('strategic',list)"><i
                                                                            class="fas fa-trash"></i></a>
                                                                </div>
                                                                {{obj.title}}
                                                            </td>


                                                        </tr>
                                                    </table>
                                                </div>
                                                <div *ngIf="StrategicObjectiveMasterStore?.selectedStrategic.length == 0"
                                                    style="height: 300px">

                                                    <app-no-data [height]=true [border]=false></app-no-data>

                                                </div>

                                        </div>


                                        <div *ngIf="selectedSection=='incident'"
                                        [ngClass]="StrategicObjectiveMasterStore?.selectedStrategic.length==0?'tab-pane fade active show':'tab-pane fade active show'"
                                        id="tab-one" role="tabpanel">

                                            <div *ngIf="IncidentStore?.selectedIincidentForMapping.length>0"
                                                class="processes-issue audit-processes-issue clearfix bg-white cmn-bdr mb-3">
                                                <h5>{{'map_strategic_objectives_with_risk'|translate}}</h5>
                                                <div class="float-right">
                                                    <a (click)="selectincident()" data-toggle="modal"
                                                        class="btn btn-small">{{'select' | translate}}</a>
                                                </div>
                                            </div>
                                            <div class="audit-form-table w-100 risk-form-mapping-table form-table-scroll"
                                                *ngIf="IncidentStore?.selectedIincidentForMapping.length> 0">
                                                <table class="table table-bordered ordinary-table word-break cmn-table-style mb-2">
                                                    <tr>
                                                        <th class="border-top-0 text-center" width="10%">#</th>
                                                        <th class="border-top-0" width="15%">{{'ref_id' | translate}}</th>
                                                        <th class="border-top-0" width="75%">{{'title' | translate}}</th>
                                                    </tr>
                                                    <tr class="edit-and-delete-main"
                                                        *ngFor="let obj of IncidentStore?.selectedIincidentForMapping; let list=index">
                                                        <td class="text-center">{{list+1}}</td>
                                                        <td>{{obj.reference_code}}</td>
                                                        <td>
                                                            <div class="edit-option-show">
                                                                <a [attr.title]="'delete'|translate"
                                                                    (click)="deleteItem('incident',list)"><i
                                                                        class="fas fa-trash"></i></a>
                                                            </div>
                                                            {{obj.title}}
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div *ngIf="IncidentStore?.selectedIincidentForMapping.length == 0" style="height: 300px">
                                                <app-no-data [height]=true [border]=false></app-no-data>
                                            </div>

                                    </div>




                                    </div>
                                </div>
                                <!-- <div class="tab-content"> -->


                                <!-- </div> -->
                            </div>


                        </div>
                    </div>
                </div>
                <!-- tab end -->
                <div class="tab">
                    <!-- tab start -->
                    <div class="row issuue-new-style p-0">
                        <div class="col-md-12 bg-white pb-3">
                            <div class="issue-top-sec">
                                <div class="clearfix">
                                    <h5 class="d-inline-block cmn-head-style label-tag-style"><span
                                            class="issue-smoal-head-text">#{{riskForm.value.reference_code?riskForm.value.reference_code:'XXXX'}}</span>
                                        {{riskForm.value.title ? riskForm.value.title : AppStore.noContentText}}</h5>
                                </div>

                                <!-- <h6>Risk Observation</h6> -->
                                <!-- <p style="white-space:pre-wrap">{{riskForm.value.description?riskForm.value.description:AppStore.noContentText}}</p> -->
                                <div style="white-space: pre-line;" class="text-editor-content bullet-point-list pt-1 table-and-image-edit-editor clearfix"
                                    [innerHTML]="riskForm.value.risk_observation | safeHtml"></div>

                            </div>

                            <div class="mb-2 mt-2"
                                *ngIf="OrganizationGeneralSettingsStore?.organizationSettings?.is_ms_type"> <label
                                    class="outline-tag" *ngFor="let type of RisksStore.msTypes">{{type.ms_type_title}}
                                    <span>V
                                        {{type.ms_type_version_title}}</span></label>
                            </div>
                            <!-- <div class="row">
                                <div class="col-md-10">
                                    <h6>Root Cause</h6>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                                        incididunt.Lorem ipsum dolor sit amet, consectetur adipisicing lit, sed do
                                        eiusmod </p>
                                </div>
                            </div> -->
                            <div class="row">
                                <div class="col-md-12">
                                    <h6>{{'rm_risk_description'|translate}}</h6>
                                    <!-- <div class="text-editor-content bullet-point-list pt-1"
                                        [innerHTML]="riskForm.value.impact"></div> -->
                                    <p style="white-space:pre-line">
                                        {{riskForm.value.description?riskForm.value.description:AppStore.noContentText}}
                                    </p>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <h6>{{'impacts'|translate}}</h6>
                                    <!-- <div class="text-editor-content bullet-point-list pt-1"
                                        [innerHTML]="riskForm.value.impact"></div> -->
                                        <ul class="arrowlist pl-0 mt-2" *ngIf="RisksStore.impactList?.length>0">

                                            <li class="clearfix" *ngFor="let impact of RisksStore.impactList">{{impact}}
                                            </li>
        
                                        </ul>
                                        <p *ngIf="RisksStore.impactList?.length==0">{{AppStore.noContentText}}</p>
                            
                                    <!-- <p style="white-space:pre-line">
                                        {{riskForm.value.impact?riskForm.value.impact:AppStore.noContentText}}</p> -->
                                </div>
                            </div>

                          
                            <div class="row">
                                <div class="col-md-12">
                                    <h6>{{'risk_causes'|translate}}</h6>
                                    <!-- <div class="text-editor-content bullet-point-list pt-1"
                                        [innerHTML]="riskForm.value.impact"></div> -->
                                    <!-- <p style="white-space:pre-line">
                                        {{riskForm.value.risk_cause?riskForm.value.risk_cause:AppStore.noContentText}}
                                    </p> -->
                                    <ul class="arrowlist pl-0 mt-2" *ngIf="RisksStore.riskCauseList?.length>0">

                                        <li class="clearfix" *ngFor="let cause of RisksStore.riskCauseList">{{cause}}
                                        </li>
    
                                    </ul>
                                    <p *ngIf="RisksStore.riskCauseList?.length==0">{{AppStore.noContentText}}</p>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4">
                                    <h6>{{'risk_sources' | translate}}</h6>
                                    <p>{{riskForm.value.risk_source_ids?.length>0?getArrayFormatedString('title',riskForm.value.risk_source_ids):AppStore.noContentText}}
                                    </p>
                                </div>
                                <!-- <div class="col-md-4">
                                    
                                    <h6>{{'issue_domains' | translate}}</h6>
                                    <p>{{riskForm.value.issue_domain_ids.length>0?getArrayFormatedString('title',riskForm.value.issue_domain_ids):AppStore.noContentText}}</p>
                                </div> -->
                                <div class="col-md-4">
                                    <h6>{{'risk_category' | translate}}</h6>
                                    <p>{{riskForm.value.risk_category_id?riskForm.value.risk_category_id.title:AppStore.noContentText}}
                                    </p>
                                </div>

                                <div class="col-md-4">
                                    <h6>{{'risk_sub_category' | translate}}</h6>
                                    <p>{{riskForm.value.risk_sub_category_id?riskForm.value.risk_sub_category_id?.title:AppStore.noContentText}}
                                    </p>
                                </div>

                                <!-- <div class="col-md-4">
                                    <h6>Risk Library</h6>
                                    <p>{{riskForm.value.risk_library_id?riskForm.value.risk_library_id.title:AppStore.noContentText}}
                                    </p>
                                </div> -->
                                <div class="col-md-4">
                                    <h6>{{'risk_types' | translate}}</h6>
                                    <p>{{RisksStore.riskTypes.length>0?getArrayFormatedString('risk_type_language_title',RisksStore.riskTypes):AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-md-4">
                                    <h6>{{'risk_areas' | translate}}</h6>
                                    <p>{{riskForm.value.risk_area_ids?.length>0?getArrayFormatedString('title',riskForm.value.risk_area_ids):AppStore.noContentText}}
                                    </p>
                                </div>

                                <div class="col-md-4">
                                    <h6>{{'corporate' | translate}}/{{'functional' | translate}}</h6>

                                    <p>{{riskForm.value.is_corporate?'Corporate':'Functional'}}</p>
                                </div>


                                <!-- <div class="col-md-4">
                                    <h6>{{'review_frequency' | translate}}</h6>
                                    <p>{{ RisksStore.riskReviewFrequency?RisksStore.riskReviewFrequency.risk_review_frequency_language_title:AppStore.noContentText}}</p>
                                </div> -->

                                <div class="col-md-4" *ngIf="nextButtonText == 'Save'">
                                    <h6>{{'date' | translate}}</h6>
                                    <p *ngIf="saveData.risk_date">{{saveData.risk_date|date:
                                        OrganizationGeneralSettingsStore.organizationSettings?.date_format}}
                                    </p>
                                    <p *ngIf="!saveData.risk_date">
                                        {{AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-md-4" *ngIf="nextButtonText == 'Save'">
                                    <h6>{{'next_review_date' | translate}} ({{'review_frequency' | translate}})</h6>
                                    <p *ngIf="saveData.next_review_date">{{saveData.next_review_date|date:
                                        OrganizationGeneralSettingsStore.organizationSettings?.date_format}} ({{
                                        RisksStore.riskReviewFrequency?RisksStore.riskReviewFrequency.risk_review_frequency_language_title:AppStore.noContentText}})
                                    </p>
                                    <p *ngIf="!saveData.next_review_date">
                                        {{AppStore.noContentText}}
                                    </p>
                                </div>
                                <!-- <div class="row"> -->
                                <div class="col-md-12">
                                    <h6>{{'last_review_note'|translate}}</h6>
                                    <!-- <div class="text-editor-content bullet-point-list pt-1"
                                            [innerHTML]="riskForm.value.impact"></div> -->
                                    <p style="white-space:pre-wrap">
                                        {{riskForm.value.last_review_note?riskForm.value.last_review_note:AppStore.noContentText}}
                                    </p>
                                </div>
                                <!-- </div> -->
                            </div>

                            <div class="row">
                                <div class="col-md-4"
                                    *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_subsidiary">
                                    <h6>{{'organizations' | translate}}</h6>
                                    <p>{{riskForm.value.organization_ids?RisksStore.addCorporate?getArrayFormatedString('title',riskForm.value.organization_ids):riskForm.value.organization_ids.title:AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-md-4"
                                    *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_branch">
                                    <h6>{{'branches' | translate}}</h6>
                                    <p>{{riskForm.value.branch_ids ? RisksStore.addCorporate ? getArrayFormatedString('title',riskForm.value.branch_ids):riskForm.value.branch_ids.title:AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-md-4"
                                    *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division">
                                    <h6>{{'divisions' | translate}}</h6>
                                    <p>{{riskForm.value.division_ids?RisksStore.addCorporate?getArrayFormatedString('title',riskForm.value.division_ids):riskForm.value.division_ids.title:AppStore.noContentText}}
                                    </p>
                                </div>

                                <div class="col-md-4" *ngIf = "OrganizationLevelSettingsStore.organizationLevelSettings?.is_department">
                                    <h6>{{'departments' | translate}}</h6>
                                    <p>{{riskForm.value.department_ids?RisksStore.addCorporate?getArrayFormatedString('title',riskForm.value.department_ids):riskForm.value.department_ids.title:AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-md-4"
                                    *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_section">
                                    <h6>{{'sections' | translate}}</h6>
                                    <p>{{riskForm.value.section_ids?RisksStore.addCorporate?getArrayFormatedString('title',riskForm.value.section_ids):riskForm.value.section_ids.title:AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-md-4"
                                    *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_sub_section">
                                    <h6>{{'sub_sections' | translate}}</h6>
                                    <p>{{riskForm.value.sub_section_ids?RisksStore.addCorporate?getArrayFormatedString('title',riskForm.value.sub_section_ids):riskForm.value.sub_section_ids.title:AppStore.noContentText}}
                                    </p>
                                </div>
                            </div>

                            <!-- <div class="row">
                                <div class="col-md-12">
                                    <h6>Risk Existing Controls</h6>
                                    <div class="drop-detail-sec mb-2">
                                        <ul class="banking-issue">
                                            <li class="clearfix"><a href="#">Control 1</a></li>
                                            <li class="clearfix"><a href="#">Control 2 </a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div> -->

                            <div class="row">
                                <div class="col-md-12">
                                    <h6>{{'responsible_users' | translate}}</h6>
                                    <div class="row">
                                        <div class="col-sm-6 col-lg-3 animation-pulse"
                                            *ngFor="let user of riskForm.value.user_ids;let i=index">
                                            <div class="label-and-user-pic">
                                            <app-user-popup-box [source]="getPopupDetails(user)"
                                                [activateButtons]="false">
                                            </app-user-popup-box>
                                        </div>
                                        </div>


                                        <div class="col-sm-12" *ngIf="riskForm.value.user_ids.length==0">

                                            <p> {{AppStore.noContentText}}</p>
                                        </div>

                                        <!-- </ul> -->
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <div class="label-and-user-pic">
                                    <h6>{{'risk_owner' | translate}}</h6>
                                    <div class="row">
                                        <div class="col-lg-3 col-sm-6 animation-pulse" *ngIf="riskForm.value.risk_owner_id">
                                            <app-user-popup-box
                                                [source]="getOwnerPopupDetails(riskForm.value.risk_owner_id)"
                                                [activateButtons]="false">
                                            </app-user-popup-box>
                                        </div>


                                        <div class="col-sm-12" *ngIf="!riskForm.value.risk_owner_id">

                                            <p> {{AppStore.noContentText}}</p>
                                        </div>

                                        <!-- </ul> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <h6>{{'risk_mapping' | translate}}</h6>
                                    <div class="common-tab-md clearfix tab-same-height mb-3">
                                        <div class="tab-common-left-md">
                                            <!-- tab menu start -->
                                            <ul class="nav nav-tabs nav-tabs--vertical nav-tabs--left vertical-tab"
                                                role="navigation">
                                                <li class="nav-item"> <a *ngIf="ControlStore?.selectedControlsList.length != 0" (click)="gotoMappingSection('control')"
                                                        class="nav-link text-left active show" data-toggle="tab"
                                                        role="tab" aria-controls="lorem" aria-selected="true"
                                                        data-original-title="" title="">{{'controls' | translate}}</a>
                                                </li>
                                                <li class="nav-item"> <a *ngIf="IssueListStore?.selectedIssuesList.length != 0" (click)="gotoMappingSection('issue')"
                                                        class="nav-link text-left" data-toggle="tab" role="tab"
                                                        aria-controls="lorem" aria-selected="true"
                                                        data-original-title="" title="">{{'issues' | translate}}</a>
                                                </li>
                                                <li class="nav-item"> <a *ngIf="ProcessStore?.selectedProcessesList.length != 0" (click)="gotoMappingSection('process')"
                                                        class="nav-link text-left" data-toggle="tab" role="tab"
                                                        aria-controls="ipsum" aria-selected="false"
                                                        data-original-title="" title="">{{'process' | translate}} </a>
                                                </li>
                                                <!-- <li class="nav-item"> <a (click)="gotoMappingSection('location')"
                                                        class="nav-link text-left" data-toggle="tab" role="tab"
                                                        aria-controls="ipsum" aria-selected="false"
                                                        data-original-title="" title="">{{'locations' | translate}}</a>
                                                </li> -->
                                                <li class="nav-item"> <a *ngIf="BusinessProjectsStore?.selectedProjectsList.length != 0" (click)="gotoMappingSection('project')"
                                                        class="nav-link text-left" data-toggle="tab" role="tab"
                                                        aria-controls="ipsum" aria-selected="false"
                                                        data-original-title="" title="">{{'projects' | translate}}</a>
                                                </li>
                                                <li class="nav-item"> <a *ngIf="BusinessProductsStore?.selectedProductList.length != 0" (click)="gotoMappingSection('product')"
                                                        class="nav-link text-left" data-toggle="tab" role="tab"
                                                        aria-controls="ipsum" aria-selected="false"
                                                        data-original-title="" title="">{{'products' | translate}}</a>
                                                </li>
                                                <li class="nav-item"> <a *ngIf="BusinessCustomersStore?.selectedCustomerList != 0" (click)="gotoMappingSection('customer')"
                                                        class="nav-link text-left" data-toggle="tab" role="tab"
                                                        aria-controls="ipsum" aria-selected="false"
                                                        data-original-title="" title="">{{'customers' | translate}}</a>
                                                </li>

                                                <li class="nav-item"> <a *ngIf="StrategicObjectiveMasterStore?.selectedStrategic.length != 0" (click)="gotoMappingSection('objective')"
                                                        class="nav-link text-left" data-toggle="tab" role="tab"
                                                        aria-controls="ipsum" aria-selected="false"
                                                        data-original-title="" title="">{{'strategic_objectives' | translate}}</a>
                                                </li>
                                                <li class="nav-item"> <a *ngIf="IncidentStore?.selectedIincidentForMapping.length != 0" (click)="gotoMappingSection('incident')"
                                                        class="nav-link text-left" data-toggle="tab" role="tab"
                                                        aria-controls="ipsum" aria-selected="false"
                                                        data-original-title="" title="">{{'incident' | translate}}</a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="tab-common-left-content-m">
                                        <div class="tab-content widg-padding-cmn bg-white cmn-bdr">

                                            <div *ngIf="selectedSection=='control'"
                                                class="tab-pane fade scroll-tab-table-media-scr active show"
                                                id="inner-tab-one" role="tabpanel">
                                                <div class="audit-form-table w-100 not-fixed-table mb-3"
                                                *ngIf="ControlStore?.selectedControlsList.length>0">
                                                    <table
                                                        class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll"
                                                        >
                                                        <tr>
                                                            <th class="border-top-0" width="2%">#</th>
                                                            <th class="border-top-0" width="10%">{{'ref_id' |
                                                                translate}}
                                                            </th>
                                                            <th class="border-top-0" width="88%">{{'title' | translate}}
                                                            </th>

                                                        </tr>
                                                        <tr
                                                            *ngFor="let cntrl of ControlStore?.selectedControlsList; let list=index">
                                                            <td>{{list+1}}</td>
                                                            <td>{{cntrl.reference_code}}</td>
                                                            <td>{{cntrl.issues_title?cntrl.issues_title:cntrl.title}}
                                                            </td>


                                                        </tr>



                                                    </table>
                                                    
                                                </div>
                                                <div *ngIf="ControlStore?.selectedControlsList.length == 0"
                                                        style="min-height: 300px">
                                                        <!-- <div class="no-policy-demo">
                                                    <div class="no-file-icon">
                                                        <i class="far fa-file"></i>
                                                    </div> -->
                                                        <app-no-data-list [source]="commonEmptyList" [height]=true
                                                            [border]=false></app-no-data-list>
                                                        <!-- </div> -->
                                                    </div>
                                            </div>

                                            <div *ngIf="selectedSection=='issue'"
                                                class="tab-pane fade scroll-tab-table-media-scr active show"
                                                id="inner-tab-one" role="tabpanel">
                                                <div class="audit-form-table w-100 not-fixed-table mb-3"
                                                *ngIf=" IssueListStore?.selectedIssuesList.length>0">
                                                    <table
                                                        class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll"
                                                        >
                                                        <tr>
                                                            <th class="border-top-0" width="2%">#</th>
                                                            <th class="border-top-0" width="9%">{{'ref_id' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="18%">{{'issue' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="12%">{{'issue_types' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="20%">{{'issue_categories' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="19%">{{'issue_domains' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="32%">{{'departments' |
                                                                translate}}</th>
                                                        </tr>
                                                        <tr
                                                            *ngFor="let issue of IssueListStore?.selectedIssuesList; let list=index">
                                                            <td>{{list+1}}</td>
                                                            <td>{{issue.reference_code}}</td>
                                                            <td>{{issue.issues_title?issue.issues_title:issue.title}}
                                                            </td>
                                                            <td> <span *ngFor="let types of issue.issue_types_list"
                                                                    class="risk-type-bx risk-type-bx-drop">
                                                                    <i><img
                                                                            [attr.src]="types == 'Internal' ? 'assets/images/internal.svg' : 'assets/images/external.svg'" style="width: 15px;">{{types}}</i>&nbsp;
                                                                </span>
                                                            </td>
                                                            <td [attr.title]="issue.issue_categories">
                                                                {{ issue.issue_categories?.length > 25 ?
                                                                issue.issue_categories.substring(0,25)+'...' :
                                                                issue.issue_categories }}
                                                            </td>
                                                            <td [attr.title]="issue.issue_domains">
                                                                {{ issue.issue_domains?.length > 25 ?
                                                                issue.issue_domains.substring(0,25)+'...' :
                                                                issue.issue_domains }}
                                                            </td>
                                                            <td>
                                                                {{issue.departments}}

                                                            </td>
                                                        </tr>


                                                    </table>
                                                   
                                                </div>
                                                <div *ngIf="IssueListStore?.selectedIssuesList.length == 0"
                                                style="min-height: 300px">
                                                <!-- <div class="no-policy-demo">
                                                <div class="no-file-icon">
                                                    <i class="far fa-file"></i>
                                                </div> -->
                                                <app-no-data-list [source]="commonEmptyList" [height]=true
                                                    [border]=false></app-no-data-list>
                                                <!-- </div> -->
                                            </div>
                                            </div>
                                            <div *ngIf="selectedSection=='process'"
                                                class="tab-pane fade scroll-tab-table-media-scr active show"
                                                id="inner-tab-two" role="tabpanel">
                                                <div class="audit-form-table w-100 not-fixed-table mb-3"
                                                *ngIf="ProcessStore?.selectedProcessesList.length>0">
                                                    <table
                                                        class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll"
                                                       >
                                                        <tr>
                                                            <th class="border-top-0" width="2%">#</th>
                                                            <th class="border-top-0" width="9%">{{'ref_id' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="25%">{{'process_group' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="32%">{{'process' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="16%">{{'process_category' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="12%">{{'department' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="19%">{{'risk_rating' |
                                                                translate}}</th>
                                                            <!-- <th class="border-top-0" width="33%">Status</th> -->
                                                        </tr>
                                                        <tr
                                                            *ngFor="let selected of ProcessStore?.selectedProcessesList; let p=index">
                                                            <td>{{p+1}}</td>
                                                            <td>{{selected.reference_code}}</td>
                                                            <td>{{selected.process_group_title}}</td>
                                                            <td> {{selected.title}}
                                                            </td>
                                                            <td>{{selected.process_category_title}}</td>
                                                            <td>
                                                                {{selected.department}}
                                                            </td>
                                                            <td>
                                                                {{ selected.risk_rating_title ?
                                                                selected.risk_rating_title : AppStore.noContentText }}
                                                            </td>
                                                            <!-- <td>
                                                                {{selected.status}}

                                                            </td> -->
                                                        </tr>

                                                    </table>
                                                    
                                                </div>
                                                <div *ngIf="ProcessStore?.selectedProcessesList.length == 0"
                                                        style="min-height: 300px">
                                                        <!-- <div class="no-policy-demo">
                                                            <div class="no-file-icon">
                                                                <i class="far fa-file"></i>
                                                            </div> -->
                                                        <app-no-data-list [source]="commonEmptyList" [height]=true
                                                            [border]=false></app-no-data-list>
                                                        <!-- </div> -->
                                                    </div>
                                            </div>

                                            <div *ngIf="selectedSection=='location'"
                                                [ngClass]="LocationMasterStore?.selectedLocationList.length==0?'tab-pane fade active show':'tab-pane fade active show'"
                                                id="tab-one" role="tabpanel">

                                                <div class="audit-form-table w-100 not-fixed-table mb-3"
                                                *ngIf="LocationMasterStore?.selectedLocationList.length>0">
                                                
                                                    <table
                                                        class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll"
                                                        >
                                                        <tr>

                                                            <th class="border-top-0" width="9%">{{'ref_id' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="25%">{{'title' |
                                                                translate}}</th>
                                                            <!-- <th class="border-top-0" width="32%">{{'status' |
                                                                translate}}
                                                            </th> -->

                                                        </tr>
                                                        <tr
                                                            *ngFor="let loc of LocationMasterStore?.selectedLocationList; let list=index">
                                                            <td>{{list+1}}</td>
                                                            <td> {{loc.title}}
                                                            </td>
                                                            <!-- <td>{{loc.status}}</td> -->


                                                        </tr>



                                                    </table>


                                                    <!-- </div> -->
                                                    

                                                </div>
                                                <div *ngIf="LocationMasterStore?.selectedLocationList.length == 0"
                                                        style="min-height: 300px">

                                                        <app-no-data-list [source]="commonEmptyList" [height]=true
                                                            [border]=false></app-no-data-list>

                                                    </div>
                                            </div>

                                            <div *ngIf="selectedSection=='project'"
                                                class="tab-pane fade scroll-tab-table-media-scr active show"
                                                id="inner-tab-two" role="tabpanel">
                                                <div class="audit-form-table w-100 not-fixed-table mb-3"
                                                *ngIf="BusinessProjectsStore?.selectedProjectsList.length>0">
                                                    <table
                                                        class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll"
                                                        >
                                                        <tr>

                                                            <th class="border-top-0" width="9%">{{'sl' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="25%">{{'title' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="32%">{{'manager_name'|translate}}
                                                            </th>
                                                            <th class="border-top-0" width="9%">{{'member_count' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="9%">{{'location' |
                                                                translate}}
                                                            </th>

                                                        </tr>
                                                        <tr
                                                            *ngFor="let proj of BusinessProjectsStore?.selectedProjectsList; let list=index">
                                                            <td>{{list+1}}</td>
                                                            <td> {{proj.title}}
                                                            </td>
                                                            <td>
                                                                <div class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg"
                                                                    *ngIf="proj.project_manager_first_name">
                                                                    <img [attr.src]="proj.project_manager_image_token?createImageUrl(proj.project_manager_image_token):getDefaultImage('user-logo')"
                                                                        width="30px" height="30px"
                                                                        class="rounded-circle">

                                                                    <div>
                                                                        <h6>{{proj.project_manager_first_name}}
                                                                            {{proj.project_manager_last_name}}</h6>
                                                                        <span>{{proj.project_manager_designation?proj.project_manager_designation:AppStore.noContentText}}
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <p *ngIf="!proj.project_manager_first_name">
                                                                    {{AppStore.noContentText}}</p>
                                                            </td>
                                                            <td>{{proj.member_count}}</td>
                                                            <td>{{proj.location_title?proj.location_title:AppStore.noContentText}}
                                                            </td>

                                                        </tr>

                                                    </table>
                                                   
                                                </div>
                                                <div *ngIf="BusinessProjectsStore?.selectedProjectsList.length == 0"
                                                style="min-height: 300px">
                                                <!-- <div class="no-policy-demo">
                                                    <div class="no-file-icon">
                                                        <i class="far fa-file"></i>
                                                    </div> -->
                                                <app-no-data-list [source]="commonEmptyList" [height]=true
                                                    [border]=false></app-no-data-list>
                                                <!-- </div> -->
                                            </div>
                                            </div>

                                            <div *ngIf="selectedSection=='product'"
                                                class="tab-pane fade scroll-tab-table-media-scr active show"
                                                id="inner-tab-two" role="tabpanel">
                                                <div class="audit-form-table w-100 not-fixed-table mb-3"
                                                *ngIf="BusinessProductsStore?.selectedProductList.length>0">
                                                    <table
                                                        class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll"
                                                       >
                                                        <tr>

                                                            <th class="border-top-0" width="9%">{{'sl' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="25%">{{'title' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="32%">{{'description' |
                                                                translate}}
                                                            </th>
                                                            <!-- <th class="border-top-0" width="9%">{{'member_count' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="9%">{{'location' | translate}}
                                                            </th> -->

                                                        </tr>
                                                        <tr
                                                            *ngFor="let prod of BusinessProductsStore?.selectedProductList; let list=index">
                                                            <td>{{list+1}}</td>
                                                            <td> {{prod.title}}
                                                            </td>
                                                            <td>{{prod.description?prod.description:AppStore.noContentText}}
                                                            </td>
                                                            <!-- <td>{{prod.member_count}}</td>
                                                            <td>{{prod.location_title?prod.location_title:AppStore.noContentText}}
                                                            </td> -->

                                                        </tr>
                                                    </table>
                                                    
                                                </div>
                                                <div *ngIf="BusinessProductsStore?.selectedProductList.length == 0"
                                                        style="min-height: 300px">

                                                        <app-no-data-list [source]="commonEmptyList" [height]=true
                                                            [border]=false></app-no-data-list>

                                                    </div>
                                            </div>


                                            <div *ngIf="selectedSection=='customer'"
                                                class="tab-pane fade scroll-tab-table-media-scr active show"
                                                id="inner-tab-two" role="tabpanel">
                                                <div class="audit-form-table w-100 not-fixed-table mb-3"
                                                *ngIf="BusinessCustomersStore?.selectedCustomerList.length>0">
                                                    <table
                                                        class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll"
                                                       >
                                                        <tr>

                                                            <th class="border-top-0" width="9%">{{'sl' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="25%">{{'title' |
                                                                translate}}</th>
                                                            <th class="border-top-0" width="32%">{{'contact_person' |
                                                                translate}}
                                                            </th>
                                                            <th class="border-top-0" width="9%">{{'address' |
                                                                translate}}</th>
                                                            <!-- <th class="border-top-0" width="9%">{{'location' | translate}}
                                                            </th> -->

                                                        </tr>
                                                        <tr
                                                            *ngFor="let cust of BusinessCustomersStore?.selectedCustomerList; let list=index">
                                                            <td>{{list+1}}</td>
                                                            <td> {{cust.title}}
                                                            </td>
                                                            <td>{{cust.contact_person?cust.contact_person:AppStore.noContentText}}
                                                            </td>
                                                            <td>{{cust.address?cust.address:AppStore.noContentText}}
                                                            </td>
                                                            <!-- <td>{{cust.location_title?cust.location_title:AppStore.noContentText}}
                                                            </td> -->

                                                        </tr>

                                                    </table>
                                                  
                                                </div>
                                                <div *ngIf="BusinessCustomersStore?.selectedCustomerList.length == 0" style="min-height: 300px">

                                                    <app-no-data-list [source]="commonEmptyList" [height]=true
                                                    [border]=false></app-no-data-list>
                                                </div>
                                            </div>

                                            <div *ngIf="selectedSection=='objective'"
                                                class="tab-pane fade scroll-tab-table-media-scr active show"
                                                id="inner-tab-two" role="tabpanel">
                                                <div class="audit-form-table w-100 not-fixed-table mb-3"
                                                *ngIf="StrategicObjectiveMasterStore?.selectedStrategic.length>0">
                                                    <table
                                                        class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll"
                                                        >
                                                        <tr>

                                                            <th class="border-top-0" width="9%">{{'sl' | translate}}
                                                            </th>
                                                            <th class="border-top-0" width="25%">{{'title' |
                                                                translate}}</th>

                                                            <!-- <th class="border-top-0" width="9%">{{'location' | translate}}
                                                            </th> -->

                                                        </tr>
                                                        <tr
                                                            *ngFor="let obj of StrategicObjectiveMasterStore?.selectedStrategic; let list=index">
                                                            <td>{{list+1}}</td>
                                                            <td> {{obj.title}}
                                                            </td>


                                                        </tr>

                                                    </table>
                                                    
                                                </div>
                                                <div *ngIf="StrategicObjectiveMasterStore?.selectedStrategic.length == 0"
                                                        style="min-height: 300px">

                                                        <app-no-data-list [source]="commonEmptyList" [height]=true
                                                            [border]=false></app-no-data-list>
                                                        <!-- </div> -->
                                                    </div>
                                            </div>



                                            <div *ngIf="selectedSection=='incident'"
                                            class="tab-pane fade scroll-tab-table-media-scr active show"
                                            id="inner-tab-two" role="tabpanel">
                                                <div class="audit-form-table w-100 not-fixed-table mb-3"
                                                    *ngIf="IncidentStore?.selectedIincidentForMapping.length>0">
                                                    <table class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll">
                                                        <tr>
                                                            <th class="border-top-0" width="10%">#</th>
                                                            <th class="border-top-0" width="15%">{{'ref_id' | translate}}</th>
                                                            <th class="border-top-0" width="75%">{{'title' | translate}}</th>
                                                        </tr>
                                                        <tr *ngFor="let obj of IncidentStore?.selectedIincidentForMapping; let list=index">
                                                            <td>{{list+1}}</td>
                                                            <td>{{obj.reference_code}}</td>
                                                            <td>{{obj.title}}</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                                <div *ngIf="IncidentStore?.selectedIincidentForMapping.length == 0" style="min-height: 300px">
                                                        <app-no-data-list [source]="commonEmptyList" [height]=true [border]=false>
                                                        </app-no-data-list>
                                                </div>
                                            </div>



                                        </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-xl-12">
                                    <hr>
                                    <div class="d-flex flex-row user-list-sm">
                                        <img [attr.src]="AuthStore.user?.image_token ? createImageUrl(AuthStore.user?.image_token) : getDefaultImage('user-logo')"
                                           onerror="this.src='/assets/images/user-demo2.png'" width="30px" height="30px" class="rounded-circle">
                                        <div>
                                            <h6>{{AuthStore.user?.name}} {{AuthStore.user?.last_name}}</h6>
                                            <span>{{ AuthStore.user?.designation?.title }}| {{'uploaded_at' |
                                                translate}}
                                                {{getTodaysDate() | date:
                                                OrganizationGeneralSettingsStore.organizationSettings?.date_time_format}}</span>

                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>

                    </div>

                </div>
                <!-- tab end -->
                <div style="overflow:auto;">
                    <div class="form-next-page-btns pt-0 mt-3" style="float:left;">
                        <button class="btn btn-active" type="button" id="nextBtn" (click)="nextPrev(1)"
                        [disabled]="AppStore.loading || !checkFormObject()">{{getButtonText(nextButtonText)}}</button>
                        
                        <button class="btn" type="button" id="prevBtn" (click)="nextPrev(-1)"
                            [disabled]="AppStore.loading">{{getButtonText(previousButtonText)}}</button>
                       
                            <button class="btn" type="button" (click)="confirmCancel()">{{'cancel' | translate}}</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</main>


<div class="modal modal-style-1 popup-full-width fade" id="add-four-popup" data-keyboard="false" data-backdrop="static"
    #issueDomainFormModal *mobxAutorun>
    <!-- <button type="button" class="close" data-dismiss="modal" (click) = "closeIssueDomainModal()"><i class="lni-close"></i><span>esc</span></button> -->
    <app-add-issue-domain *ngIf="issueDomainObject.type" [source]="issueDomainObject"></app-add-issue-domain>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="add-four-popup" data-keyboard="false" data-backdrop="static"
    #riskLibraryFormModal *mobxAutorun>
    <!-- <button type="button" class="close" data-dismiss="modal" (click) = "closeIssueDomainModal()"><i class="lni-close"></i><span>esc</span></button> -->
    <app-risk-library-modal *ngIf="riskLibraryObject.type" [source]="riskLibraryObject"></app-risk-library-modal>
</div>


<div class="modal modal-style-1 popup-full-width fade" id="add-four-popup" data-keyboard="false" data-backdrop="static"
    #riskAreaModal *mobxAutorun>
    <!-- <button type="button" class="close" data-dismiss="modal" (click) = "closeRiskAreaModal()"><i class="lni-close"></i><span>esc</span></button> -->
    <app-risk-area-modal *ngIf="riskAreaObject.type" [source]="riskAreaObject"></app-risk-area-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="add-four-popup" data-keyboard="false" data-backdrop="static"
    #riskSubCategoryModal *mobxAutorun>
    <!-- <button type="button" class="close" data-dismiss="modal" (click) = "closeRiskAreaModal()"><i class="lni-close"></i><span>esc</span></button> -->
    <app-risk-sub-category-modal *ngIf="riskSubCategoryObject.type" [source]="riskSubCategoryObject"></app-risk-sub-category-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="add-five-popup" data-keyboard="false" data-backdrop="static"
    #riskCategoryFormModal *mobxAutorun>
    <!-- <button type="button" class="close" data-dismiss="modal" (click) = "closeRiskCategoryModal()"><i class="lni-close"></i><span>esc</span></button> -->
    <app-risk-category-modal *ngIf="riskCategoryObject.type" [source]="riskCategoryObject"></app-risk-category-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="process-popup" data-keyboard="false" data-backdrop="static"
    #processFormModal *mobxAutorun>
    <app-addprocess *ngIf="IssueListStore.processes_form_modal" [processModalTitle]="modalObject">
    </app-addprocess>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="issue-popup" data-keyboard="false" data-backdrop="static"
    #issueFormModal *mobxAutorun>
    <app-issues-modal *ngIf="IssueListStore.issue_select_form_modal" [issuesModalTitle]="modalObject">
    </app-issues-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="location-popup" data-keyboard="false" data-backdrop="static"
    #locationFormModal *mobxAutorun>
    <app-location-list-modal *ngIf="LocationMasterStore.location_select_form_modal"
        [locationModalTitle]="modalObject"></app-location-list-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="project-popup" data-keyboard="false" data-backdrop="static"
    #projectFormModal *mobxAutorun>
    <app-projects-modal *ngIf="BusinessProjectsStore.project_select_form_modal"
        [projectsModalTitle]="modalObject"></app-projects-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="project-popup" data-keyboard="false" data-backdrop="static"
    #productFormModal *mobxAutorun>
    <app-product-modal *ngIf="BusinessProductsStore.product_select_form_modal" [productModalTitle]="modalObject">
    </app-product-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="project-popup" data-keyboard="false" data-backdrop="static"
    #customerFormModal *mobxAutorun>
    <app-customer-modal *ngIf="BusinessCustomersStore.customer_select_form_modal"
        [customerModalTitle]="modalObject"></app-customer-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="project-popup" data-keyboard="false" data-backdrop="static"
    #objectiveFormModal *mobxAutorun>
    <app-strategic-objective-mapping *ngIf="StrategicObjectiveMasterStore?.objective_select_form_modal"
        [strategicModalTitle]="modalObject"></app-strategic-objective-mapping>
</div>

<!-- -------Control Choose Popup -->
<div class="modal modal-style-1 popup-full-width fade" id="process-popup" data-keyboard="false" data-backdrop="static"
    #controlFormModal *mobxAutorun>
    <app-control-popup *ngIf="ControlStore?.control_select_form_modal" [controlsModalTitle]="modalObject">
    </app-control-popup>
</div>
<!-- -------Control Choose Popup -->

<!-- Modal part -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #riskSourceModal>

    <app-risk-source-modal *ngIf="riskSourceObject.type" [source]="riskSourceObject">

    </app-risk-source-modal>

</div>

<!------------------- Cancel Confirmation Modal Start --------------------------->

<div class="modal modal-style-1 fade" id="delete-popup" #cancelPopup>
    <app-delete-popup [source]="cancelObject"></app-delete-popup>
</div>

<!------------------- Cancel Confirmation Modal End --------------------------->

<!-- Control Add Modal Starts Here -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #controlAddFormModal>
 
    <app-add-control *ngIf = "controlObject.type" [source] = "controlObject"></app-add-control>
  
  </div>
 <!-- Control Add Modal Ends Here -->

<!-- -------incident Choose Popup -->
<div class="modal modal-style-1 popup-full-width fade" id="incident-popup" data-keyboard="false" data-backdrop="static"
    #incidentFormModal *mobxAutorun>
    <app-incident-mapping *ngIf="IncidentStore.incident_select_form_modal" [incidentModalTitle]="modalObject">
    </app-incident-mapping>
</div>
<!-- -------incident Choose Popup -->