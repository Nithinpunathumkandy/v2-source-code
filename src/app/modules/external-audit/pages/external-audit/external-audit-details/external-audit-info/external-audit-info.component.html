<!-- <main class="audit-program-details-page mt-20">
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-12">
                <div class="tab-content"> -->
<!-- Profille -->
<div class="tab-pane active" id="info">
    <div class="widget">
        <div class="row" *mobxAutorun>
            <div class="col-lg-8 col-sm-12 padding-right-0" *ngIf="ExternalAuditMasterStore.individualLoaded">
                <div class=" bg-white widg-padding-cmn">
                    <div class="min-height-64">
                    <div class="issue-top-sec">
                        <div class="clearfix">
                            <h5 class="d-inline-block cmn-head-style label-tag-style"><span
                                    class="issue-smoal-head-text">#{{ExternalAuditMasterStore?.individualExternalAuditItemId?.reference_code}}</span>
                                {{ExternalAuditMasterStore?.individualExternalAuditItemId?.title}}
                                <span *ngIf = "ExternalAuditMasterStore?.individualExternalAuditItemId?.status" class="draft-tag label-tag-style-tag label-left-arow-tag" [ngClass]="ExternalAuditMasterStore?.individualExternalAuditItemId?.status ? getStatusColor(ExternalAuditMasterStore?.individualExternalAuditItemId?.status.label) : ''" style="line-height: 16px; vertical-align: middle; margin-top: -4px; display: inline-block;">
                                    {{ExternalAuditMasterStore?.individualExternalAuditItemId?.status?.title[0].pivot.title}}</span>
                            </h5>
                            <!-- <h5 class="d-inline-block cmn-head-style label-tag-style">#
                                                {{ExternalAuditMasterStore?.individualExternalAuditItemId.reference_code}}
                                            </h5>
                                            <label
                                                class="indication-label indication-label-blue">{{ExternalAuditMasterStore?.individualExternalAuditItemId.title}}</label> -->
                        </div>
                        <div class="clearfix">
                            <p class="label-tag-style mb-2"><i class="fas fa-calendar-alt date-pics-two"></i>
                                {{ExternalAuditMasterStore?.individualExternalAuditItemId?.start_date | date:
                                OrganizationGeneralSettingsStore.organizationSettings?.date_format }}
                                -
                                {{ExternalAuditMasterStore?.individualExternalAuditItemId?.end_date | date:
                                OrganizationGeneralSettingsStore.organizationSettings?.date_format }}
                            </p>
                        </div>
                    </div>
                    <p style="white-space: pre-wrap;">
                        {{ExternalAuditMasterStore?.individualExternalAuditItemId?.description ? ExternalAuditMasterStore?.individualExternalAuditItemId?.description : AppStore.noContentText}}</p>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>{{'auditor' | translate}}</h6>
                            <p>{{ExternalAuditMasterStore?.individualExternalAuditItemId?.auditor_name}}
                            </p>
                        </div>

                        <div class="col-md-6">
                            <h6>{{'external_audit_type' | translate}}</h6>
                            <p>{{ExternalAuditMasterStore?.individualExternalAuditItemId?.external_audit_type?.title}}
                            </p>
                        </div>

                        <div class="col-md-12">
                            <!-- <div *ngFor="let ms of ExternalAuditMasterStore?.individualExternalAuditItemId?.ms_type_organizations"> -->
                            <h6 *ngIf = "OrganizationGeneralSettingsStore.organizationSettings?.is_ms_type">{{'ms_types' | translate}}</h6>
                            <div class="mb-2" *ngIf = "ExternalAuditMasterStore?.individualExternalAuditItemId?.ms_type_organizations && OrganizationGeneralSettingsStore.organizationSettings?.is_ms_type">
                                <p
                                *ngIf="ExternalAuditMasterStore?.individualExternalAuditItemId?.ms_type_organizations?.length==0">
                                {{AppStore.noContentText}}</p>
                                <label class="outline-tag outline-tag-small" *ngFor="let ms of ExternalAuditMasterStore?.individualExternalAuditItemId?.ms_type_organizations">{{ms?.ms_type?.title}} <span>V {{ms?.ms_type_version?.title}}</span></label>
                        </div>
                            <!-- <p
                                *ngIf="ExternalAuditMasterStore?.individualExternalAuditItemId?.ms_type_organizations.length==0">
                                {{AppStore.noContentText}}</p>
                            <p
                                *ngFor="let ms of ExternalAuditMasterStore?.individualExternalAuditItemId?.ms_type_organizations">
                                {{ms.ms_type.title}} <span style="color: #b2b2b2;">V
                                    {{ms.ms_type_version?.title}}</span></p> -->
                                <!-- </div> -->
                        </div>


                        <div class="col-md-12">
                            <h6>{{'ea_add_responsible_users' | translate}}</h6>
                            
                            <p *ngIf="ExternalAuditMasterStore?.individualExternalAuditItemId?.responsible_users?.length == 0">
                                {{AppStore.noContentText}}</p>
                            <div class="rounde-hov-bg" *ngIf="ExternalAuditMasterStore?.individualExternalAuditItemId?.responsible_users?.length == 1">
                                    <app-user-popup-box [showDepartment]="true"
                                        [source]="assignUserValues(ExternalAuditMasterStore?.individualExternalAuditItemId?.responsible_users[0])">
                                    </app-user-popup-box>
                            </div> 
                            <ul class="arci-user-tab-dtl workflow-lst-pics-loop clearfix"
                                    *ngIf="ExternalAuditMasterStore?.individualExternalAuditItemId?.responsible_users?.length > 1">
                                <li class="rounde-hov-bg"
                                    *ngFor="let ruser of ExternalAuditMasterStore?.individualExternalAuditItemId?.responsible_users">
                                        <app-user-popup-box [source]="assignUserValues(ruser)" [showName]="false">
                                        </app-user-popup-box>
                                </li>
                            </ul>
                            <!-- <ul class="arci-user-tab-dtl workflow-lst-pics-loop clearfix">
                                <li class="rounde-hov-bg"
                                    *ngFor="let user of ExternalAuditMasterStore?.individualExternalAuditItemId?.responsible_users; let i = index">
                                    <app-user-popup-box [source]="assignUserValues(user)" [showName]="false"></app-user-popup-box>
                                </li>
                            </ul> -->
                            <!-- <div class="row">
                                                <div class="col-sm-4" *ngFor = "let users of responsibleUserObject">
                                                    <app-user-popup-box [source]="getPopupDetails(du)"></app-user-popup-box> 
                                                </div>
                                            </div> -->
                        </div>

                        
                    </div>
                    <div class="thumb-pics-bg thumb-pics-bg-5 clearfix pl-2 edit-and-delete-main">
                    <h6 class="mt-3">{{'audit_report' | translate}}</h6>
                    <p *ngIf="ExternalAuditMasterStore?.individualExternalAuditItemId?.documents.length==0">{{AppStore.noContentText}}</p>
                    <!-- <div class="thumb-pics-bg thumb-pics-col-4 clearfix">
                        <div class="thumb-pics"
                            *ngFor="let doc of ExternalAuditMasterStore?.individualExternalAuditItemId?.documents">
                            <div class="upload-pics edit-option"
                                (click)="AuthStore.getActivityPermission(1700,'PREVIEW_EXTERNAL_AUDIT_DOCUMENT_FILE') ? viewAuditDocument('viewDocument',ExternalAuditMasterStore?.individualExternalAuditItemId,doc) : ''">
                                <div class="browse-form-pic"
                                    [ngStyle]="{'background': 'url(' + createImageUrl('audit-document',doc.token) + '), url(' + getDefaultImage('no-preview') + ') no-repeat 0 0 / cover '}">
                                </div>
                                <div class="browse-form-name clearfix">
                                    <div class="float-left">
                                        <h6 [attr.title]="doc.title">
                                            {{doc?.title?.length > 13 ? doc.title.substring(0,13)+' ...': doc.title}}
                                        </h6>
                                        <span>{{doc.size/1048576 | number:'0.2-2'}}MB</span>
                                    </div>
                                    <div class="browse-logo">
                                        <img *ngIf="checkExtension(doc.ext,'image') != -1" src="/assets/images/md-jpg.png">
                                        <img *ngIf="checkExtension(doc.ext,'doc') != -1" src="/assets/images/word-icone.png">
                                        <img *ngIf="checkExtension(doc.ext,'pdf') != -1" src="/assets/images/pdf-icone.png">
                                        <img *ngIf="checkExtension(doc.ext,'excel') != -1" src="/assets/images/excel-icone.png">
                                        <img *ngIf="checkExtension(doc.ext,'video') != -1" src="/assets/images/md-video.png">
                                        <img *ngIf="checkExtension(doc.ext,'audio') != -1" src="/assets/images/md-audio.png">
                                        <img *ngIf="checkExtension(doc.ext,'ppt') != -1" src="/assets/images/md-ppt.png">
                                    </div>
                                </div>
                                <div class="edit-option-show-inner" *ngIf="AuthStore.getActivityPermission(1700,'DOWNLOAD_EXTERNAL_AUDIT_DOCUMENT')">
                                    <a><i class="fas fa-download" title="Download Report"
                                            (click)="downloadAuditDocument('downloadAuditDocument',ExternalAuditMasterStore?.individualExternalAuditItemId,doc)"></i></a>
                                </div>
                            </div>
                        </div>
                    </div> -->

                    <div class="thumb-pics-bg thumb-pics-col-4 thumb-pics-fix-text" style="padding-top: 0">
                        <div class="thumb-pics" *ngFor="let docs of ExternalAuditMasterStore?.individualExternalAuditItemId?.documents;let i = index">

                           <!-- System Files Starts Here -->
                            <div class="upload-pics edit-option" *ngIf="!docs.document_id"  (click) =  "viewDocument('viewDocument',ExternalAuditMasterStore?.individualExternalAuditItemId,docs)">
                              <div class="browse-form-pic" style="height: 110px !important;" [ngStyle]="{'background': 'url('+createImageUrl('audit-document',docs?.token)+') no-repeat'}">
                              </div>
                               <div class="browse-form-name clearfix">
                                <div class="float-left">
                                 <h6>{{docs.title?docs.title:docs.name?docs.name:docs.version_title?docs.version_title:"NA"}}
                                 </h6>
                                 <span>{{docs.size/1048576 | number:'0.2-2'}}MB</span><span class="text-blue bold pl-2">System</span>
                                </div>
                                <div class="browse-logo">
                                 <img *ngIf="checkExtension(docs.ext,'image') != -1"
                                     class="folder-picher" src="/assets/images/jpg-icone.png">
                                 <img *ngIf="checkExtension(docs.ext,'doc') != -1"
                                     class="folder-picher" src="/assets/images/word-icone.png">
                                 <img *ngIf="checkExtension(docs.ext,'pdf') != -1"
                                     class="folder-picher" src="/assets/images/pdf-icone.png">
                                 <img *ngIf="checkExtension(docs.ext,'excel') != -1"
                                     class="folder-picher" src="/assets/images/excel-icone.png">
                                 <img *ngIf="checkExtension(docs.ext,'video') != -1"
                                     class="folder-picher" src="/assets/images/md-video.png">
                                 <img *ngIf="checkExtension(docs.ext,'audio') != -1"
                                     class="folder-picher" src="/assets/images/md-audio.png">
                                 <img *ngIf="checkExtension(docs.ext,'ppt') != -1"
                                     class="folder-picher" src="/assets/images/md-ppt.png">
                             </div>
                               </div>
                               <div class="edit-option-show-inner" style="margin: 0 -7px 0 0;">
                                 <a><i class="fas fa-download" (click) = "downloadDocumentFile('audit-document',docs)"></i></a>
                              </div>
                            </div> 

 <!-- System Files Starts Here -->
    <!-- KnowledgeHub Files Starts Here -->
                            <div class="upload-pics edit-option" *ngIf="docs.document_id">

                              <div *ngFor="let mainDoc of docs.kh_document.versions" (click) =  "viewDocument('document-version',docs,mainDoc)">
                                 <div *ngIf="mainDoc.is_latest">
                                    <div  class="browse-form-pic" style="height: 110px !important;" [ngStyle]="{'background': 'url('+createImageUrl('document-version',mainDoc?.token)+') no-repeat'}">
                                    </div>
                                     <div class="browse-form-name clearfix">
                                      <div class="float-left">
                                       <h6>{{docs.kh_document?.title}}.{{mainDoc.ext}}
                                       </h6>
                                       <span>{{mainDoc.size/1048576 | number:'0.2-2'}}MB</span><span class="text-blue bold pl-2">Knowledge Hub</span>
                                      </div>
                                      <div class="browse-logo">
                                       <img *ngIf="checkExtension(mainDoc.ext,'image') != -1"
                                           class="folder-picher" src="/assets/images/jpg-icone.png">
                                       <img *ngIf="checkExtension(mainDoc.ext,'doc') != -1"
                                           class="folder-picher" src="/assets/images/word-icone.png">
                                       <img *ngIf="checkExtension(mainDoc.ext,'pdf') != -1"
                                           class="folder-picher" src="/assets/images/pdf-icone.png">
                                       <img *ngIf="checkExtension(mainDoc.ext,'excel') != -1"
                                           class="folder-picher" src="/assets/images/excel-icone.png">
                                       <img *ngIf="checkExtension(mainDoc.ext,'video') != -1"
                                           class="folder-picher" src="/assets/images/md-video.png">
                                       <img *ngIf="checkExtension(mainDoc.ext,'audio') != -1"
                                           class="folder-picher" src="/assets/images/md-audio.png">
                                       <img *ngIf="checkExtension(mainDoc.ext,'ppt') != -1"
                                           class="folder-picher" src="/assets/images/md-ppt.png">
                                   </div>
                                     </div>
                                     <div class="edit-option-show-inner" style="margin: 0 -7px 0 0;">
                                       <a><i class="fas fa-download" (click) = "downloadDocumentFile('document-version',docs,mainDoc)"></i></a>
                                    </div>
                                 </div>
                              </div>

                            
                            </div>
<!-- KnowledgeHub Files Ends Here -->

                         </div>
                     </div>
                    </div>
                </div>
                    <div class="row">
                        <div class="col-xl-12">
                            <hr class="mb-2">
                            
                                <app-user-popup-box
                                    [source]=" getCreatedByPopupDetails(ExternalAuditMasterStore?.individualExternalAuditItemId?.created_by, ExternalAuditMasterStore?.individualExternalAuditItemId?.created_at)">
                                </app-user-popup-box>
                            
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-sm-12" wfd-id="310" *ngIf="ExternalAuditMasterStore.individualLoaded">
                <div class="bg-white widg-padding-cmn-small mb-3 text-left">
                    <h6 class="text-left">{{'ea_finding_category' | translate}}</h6>
                    <hr class="mt-0 mb-3">
                    <div wfd-id="318">
                        <!-- <h6>Findings</h6> -->
                        <div id="chartdiv" style="width: 80%; height: 321px; margin: 0 auto;" *ngIf="ExternalAuditMasterStore?.individualExternalAuditItemId?.finding_chart_data?.findings_category_details?.length>0"></div>

                        <app-no-chart-data  *ngIf="ExternalAuditMasterStore?.individualExternalAuditItemId?.finding_chart_data?.findings_category_details?.length==0" [source]="eaInfoPage"></app-no-chart-data>
                        <!-- <img src="assets/images/external-graph.png"> -->
                    </div>
                 </div>
            </div>   
        </div>
        <ng-container *mobxAutorun>
            <div *ngIf="!ExternalAuditMasterStore?.individualLoaded">
                <app-external-audit-info-loader></app-external-audit-info-loader>
              </div>
          </ng-container>

    </div>
</div>
<!-- </div>
            </div>
        </div>

    </div>
</main> -->

<!-- ---------File Preview-------------- -->
<div class="modal modal-style-1 popup-full-width fade popup-new-type" id="add-three-popup" data-keyboard="false"
    data-backdrop="static" #filePreviewModal *mobxAutorun>
    <button type="button" class="close" data-dismiss="modal" (click)="closePreviewModal($event)"><i
            class="lni-close"></i><span>{{'esc' | translate}}</span></button>
    <app-preview *ngIf="previewObject" [source]="previewObject" (close)="closePreviewModal($event)"></app-preview>
</div>