<!-- document-history-popup Start -->
<!-- <div class="modal modal-style-1 popup-full-width fade" id="document-history-popup" data-keyboard="false"  data-backdrop="static"> -->
<button type="button" class="close" data-dismiss="modal"><i class="lni-close"></i><span>{{'esc' | translate}}</span></button>
<div class="modal-dialog modal-lg modal-dialog-centered" *ngIf="SLAContractStore?.document_history_loaded && SLAContractStore.slaContractHistory?.length > 0 && AuthStore.getActivityPermission(1900,'LIST_SERVICE_LEVEL_AGREEMENT_AND_CONTRACT_HISTORY')">
    <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
            <h4 class="modal-title">{{'history' | translate}}</h4>
            <!--<button type="button" class="close" data-dismiss="modal">&times;</button>-->
        </div>
        <!-- Modal body -->
        <div class="modal-body form-body">
            <!-- <p class="head-details">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                incididunt ut labore et dolore magna aliqua. Excepteur sint occaecat cupidatat non proident.</p> -->

            <div class="row">
                <div class="col-sm-12">
                    <div class="compliance-history-box cmn-bdr widg-padding-cmn-small pb-2 mb-3" *ngFor="let history of SLAContractStore.slaContractHistory;let num= index">
                        <div class="d-flex align-items-center mb-3">
                            <div class="w-100 mr-2">
                                <!-- <div class="d-flex flex-row user-list-sm p-0">
                                    <img src="/assets/images/user-gate.jpg" width="30px" height="30px" class="rounded-circle">
                                    <div>
                                        <h6>Mohammed Shihabudheen</h6>
                                        <span>Project Manger | Created on jan 31,2020 11:41:AM</span>
                                    </div>
                                </div> -->
                                <div class="d-flex flex-row user-list-sm p-0">
                                    <app-user-popup-box
                                        [source]=" getCreatedByPopupDetails(history, history?.created_at)">
                                    </app-user-popup-box>
                                </div>
                            </div>
                            <!-- <div class="col-lg-6 col-sm-12 tab-and-mbl-space">
                                <p class="dot-color-p mb-0"><span *ngIf="history.sla_status_title != null" [attr.class]="'dot-div '+history.sla_status_label"></span>{{history?.sla_status_title}}</p>
                            </div> -->
                            <div class="text-right" style="width: 128px;">
                                <div [attr.class]="'dot-div '+history.sla_status_label"> {{history?.sla_status_title}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-4 col-sm-12">
                                <h6>{{'issue_date' | translate}}</h6>
                                <p>{{history?.issue_date | date: OrganizationGeneralSettingsStore.organizationSettings?.date_format}}</p>
                                <p *ngIf="!history?.issue_date">{{AppStore.noContentText}}</p>
                            </div>
                            <div class="col-lg-4 col-sm-12">
                                <h6>{{'expiry_date' | translate}}</h6>
                                <p>{{history?.expiry_date | date: OrganizationGeneralSettingsStore.organizationSettings?.date_format}}</p>
                                <p *ngIf="!history?.expiry_date">{{AppStore.noContentText}}</p>
                            </div>
                        </div>

                        <h6>{{'attachments' | translate}}</h6>
                        <div class="thumb-pics-bg thumb-pics-col-4 clearfix">
                            <div class="thumb-pics" *ngIf="history?.token != null">
                                <div class="upload-pics upload-pics-small edit-option">
                                    <div class="browse-form-pic"
                                        [ngStyle]="{'background': 'url('+createImageUrl('sla-contract-document',history.token)+') no-repeat'}"
                                        (click)="viewCertificate(history)">
                                    </div>
                                    <div class="browse-form-name clearfix">
                                        <div class="float-left">
                                            <h6>{{history?.title?.length>20 ? history?.title.substring(0,20)+'
                                                ...' : history?.title}}</h6>
                                            <span>{{history?.size/1048576 | number:'0.2-2'}}MB</span>
                                        </div>
                                        <div class="browse-logo">
                                            <img *ngIf="checkExtension(history?.ext,'excel') != -1"
                                                src="/assets/images/md-xl.png" width="30px"
                                                height="30px">
                                            <img *ngIf="checkExtension(history.ext,'image') != -1"
                                                src="/assets/images/md-jpg.png" width="30px"
                                                height="30px">
                                            <img *ngIf="checkExtension(history.ext,'doc') != -1"
                                                src="/assets/images/md-doc.png" width="30px"
                                                height="30px">
                                            <img *ngIf="checkExtension(history.ext,'pdf') != -1"
                                                src="/assets/images/md-pdf.png" width="30px"
                                                height="30px">
                                            <img *ngIf="checkExtension(history.ext,'video') != -1"
                                                src="/assets/images/md-video.png" width="30px"
                                                height="30px">
                                            <img *ngIf="checkExtension(history.ext,'audio') != -1"
                                                src="/assets/images/md-audio.png" width="30px"
                                                height="30px">
                                            <img *ngIf="checkExtension(history.ext,'ppt') != -1"
                                                src="/assets/images/md-ppt.png" width="30px"
                                                height="30px">
                                        </div>
                                    </div>
                                    <div class="edit-option-show-inner">
                                        <a [attr.title]="'download'|translate"
                                            (click)="downloadCertificate(history)">
                                            <i class="fas fa-download"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 mb-2 edit-option"
                                *ngIf="history?.token == null">
                                <p> {{AppStore.noContentText}}</p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- <div class="row">
                <div class="col-sm-12">
                    <div class="d-block justify-content-left border-0 mt-3">
                        <button type="button" data-dismiss="modal" class="btn btn-primary mr-2">{{'close' | translate}}</button>
                    </div>
                </div>
            </div> -->
        </div>
        <!-- Modal footer -->
    </div>
</div>
<!-- </div> -->
<!-- document-history-popup End -->
<ng-container *mobxAutorun>
    <app-no-data-list *ngIf="SLAContractStore?.document_history_loaded && SLAContractStore.slaContractHistory?.length==0" [source]="emptyDocHistory" [border]=false></app-no-data-list>
</ng-container>
<ng-container *mobxAutorun>
    <div *ngIf="!SLAContractStore?.document_history_loaded">
        <app-compliance-status-history-loader></app-compliance-status-history-loader>
    </div>
 </ng-container>
<!-- preview component for image preview -->
<div class="modal modal-style-1 popup-full-width fade popup-new-type" id="add-three-popup" data-keyboard="false"
    data-backdrop="static" #filePreviewModal *mobxAutorun>
    <app-compliance-mangement-preview *ngIf="previewObject" [source]="previewObject">
    </app-compliance-mangement-preview>
</div>
<!-- preview modal end -->