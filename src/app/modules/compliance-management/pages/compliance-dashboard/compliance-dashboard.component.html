<nav class="edit-bar" data-toggle="affix" scrollPoint #navigationBar *mobxAutorun>
   <app-breadcrumb-menu></app-breadcrumb-menu>
   <div class="module-name-block module-name-block-space float-left">
      <a class="dropdown module-title">{{'dashboard'|translate}}</a>
   </div>
</nav>
<main class="mt-3 db-small-space-boxes">
   <div class="container-fluid" *mobxAutorun>
      <app-filter-menu></app-filter-menu>
      <div class="widget" *ngIf="ComplianceDashboardStore.dashboardLoaded">

         <div class="row sm-row" *ngIf="AuthStore.getActivityPermission(2500,'DASHBOARD_COMPLIANCE_COUNTS')">

            <div class="bcm-small-box5 sm-col">
               <div class="bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center ">
                  <div class="text-center">
                     <h3 class="big-text-three">
                        {{ComplianceDashboardStore?.ComplianceCount?.overall_compliance_percentage}}%</h3>
                     <p class="mb-0 elips-1">{{'overall_compliance_rating' | translate}}</p>
                  </div>
               </div>
            </div>
            <div class="bcm-small-box5 sm-col">
               <div class="bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center ">
                  <div class="text-center">
                     <h3 class="big-text-three">{{ComplianceDashboardStore?.ComplianceCount?.total_compliance}}</h3>
                     <p class="mb-0 elips-1">{{'total_compliance' | translate}}</p>
                  </div>
               </div>
            </div>
            <div class="bcm-small-box5 sm-col">
               <div
                  class="bg-white relative widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center ">
                  <div class="bottom-right-value-box db-light-light-color top-right-value-box">
                     {{ComplianceDashboardStore?.ComplianceCount?.fully_compliance_percentage}}%</div>
                  <div class="text-center">
                     <h3 class="big-text-three">{{ComplianceDashboardStore?.ComplianceCount?.fully_compliance}}</h3>
                     <p class="mb-0 elips-1">{{'fully_compliance' | translate}}</p>
                  </div>
               </div>
            </div>
            <div class="bcm-small-box5 sm-col">
               <div
                  class="bg-white relative widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center ">
                  <div class="bottom-right-value-box db-light-light-color top-right-value-box">
                     {{ComplianceDashboardStore?.ComplianceCount?.partialy_compliance_percentage}}%</div>
                  <div class="text-center">
                     <h3 class="big-text-three">{{ComplianceDashboardStore?.ComplianceCount?.partialy_compliance}}</h3>
                     <p class="mb-0 elips-1">{{'partially_compliance' | translate}}</p>
                  </div>
               </div>
            </div>
            <div class="bcm-small-box5 sm-col">
               <div
                  class="bg-white relative widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center ">
                  <div class="bottom-right-value-box db-light-light-color top-right-value-box">
                     {{ComplianceDashboardStore?.ComplianceCount?.non_compliance_percentage}}%</div>
                  <div class="text-center">
                     <h3 class="big-text-three">{{ComplianceDashboardStore?.ComplianceCount?.non_compliance}}</h3>
                     <p class="mb-0 elips-1">{{'non_compliance' | translate}}</p>
                  </div>
               </div>
            </div>
            <div class="bcm-small-box5 sm-col" *ngIf="ComplianceDashboardStore?.ComplianceCount?.exception_granted">
               <div
                  class="bg-white relative widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center">
                  <div class="bottom-right-value-box db-light-light-color top-right-value-box">
                     {{ComplianceDashboardStore?.ComplianceCount?.exception_granted_percentage}}%</div>
                  <div class="text-center">
                     <h3 class="big-text-three">{{ComplianceDashboardStore?.ComplianceCount?.exception_granted}}</h3>
                     <p class="mb-0 elips-1">{{'exception_granted' | translate}}</p>
                  </div>
               </div>
            </div>
         </div>

         <div class="row sm-row"
            *ngIf="OrganizationModulesStore.checkOrganizationModules(2500) && AuthStore.getActivityPermission(2500,'DASHBOARD_COMPLIANCE_STATUS')">
            <div class="col-lg-6 col-sm-12 sm-col"
               *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(2500,40401)">
               <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-aut-four">
                  <h5 class="cmn-head-style m-0">{{'compliance_status' | translate}}</h5>
                  <hr>

                  <div class="">
                     <div class="dpt-pic-ceo" *ngIf="!showPieNoDataMap">
                        <div id="chartdivcompliancestatus" style="width: 100%; height: 250px"></div>
                     </div>
                     <div class="dpt-pic-ceo db-md-screen-center" *ngIf="showPieNoDataMap" style="min-height: 250px;">
                        <app-no-chart-data [source]="complianceStatusPieChart">
                        </app-no-chart-data>
                     </div>
                  </div>

               </div>
            </div>

            <div class="col-lg-6 col-sm-12 sm-col"
               *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(2500,46501) && AuthStore.getActivityPermission(2500,'DASHBOARD_COMPLIANCE_REQUIREMENT_TYPE')">
               <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-aut-four">
                  <h5 class="cmn-head-style m-0">{{'requirement_type' | translate}}</h5>
                  <hr>

                  <div class="" *ngIf="!showNoDataMap">
                     <div class="dpt-pic-ceo">
                        <div id="barChartRequirementType" style="width: 100%; height: 250px"
                           #chartElementForRequirement></div>
                     </div>
                     <div class="dpt-pic-ceo db-md-screen-center" *ngIf="showNoDataMap" style="min-height: 250px;">
                        <app-no-chart-data [source]="complianceStatusChart">
                        </app-no-chart-data>
                     </div>
                  </div>

               </div>
            </div>

         </div>

         <div class="row sm-row"
            *ngIf="OrganizationModulesStore.checkOrganizationModules(2500) && AuthStore.getActivityPermission(2500,'DASHBOARD_LEVEL_OF_COMPLIANCE')">

            <div class="col-lg-8 col-sm-12 sm-col"
               *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(2500,46501)">
               <div class="bg-white widg-padding-cmn btm-space-10 ">
                  <h5 class="cmn-head-style m-0">{{'level_of_compliance' | translate}}</h5>
                  <hr>
                  <!-- [ngClass] = "row.color ? 'top-ten-risk-db mb-1 bg-'+row.color : 'top-ten-risk-db mb-1' " -->
                  <div class="level-compliance complance-db-sectwo-height">
                     <div class="top-ten-risk-db mb-1 cmn-bdr bg-white"
                        *ngFor="let row of ComplianceDashboardStore?.LevelOfCompliance">
                        <div class="d-flex align-items-center compliance-db-compliance-level">
                           <!-- <h4>{{row?.title}}</h4> -->
                           <div class="compliance-db-compliance-level-status" style="width: 115px;">
                              <div [attr.class]="'dot-div '+row.color+'-dot'">{{row?.title}}</div>
                           </div>
                           <div class="middle-text-sec-risk-db w-100 compliance-db-compliance-level-middle">
                              <p *ngFor="let data of row.descriptions;let num=index" class="mb-2"> <strong
                                    class="mr-2 list-style"> {{num+1}}</strong>
                                 {{data}}</p>
                              <!-- <p> <strong class="mr-2 list-style">b)</strong> 
                                    {{ComplianceDashboardStore?.LevelOfCompliance[0]?.descriptions[0]?.length}} </p> -->
                           </div>
                           <div class="level-compliance">

                              <div class="mb-1"><label>{{'rating' | translate}}</label> <span>-</span> <span
                                    class="white-value-bx">
                                    {{row?.rating}}</span></div>
                              <div><label>{{'weight' | translate}}</label> <span>-</span> <span
                                    class="white-value-bx">{{row?.Weight}}</span></div>

                           </div>
                        </div>
                     </div>
                  </div>

               </div>
            </div>

            <div class="col-lg-4 col-sm-12 sm-col"
               *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(2500,43201) && AuthStore.getActivityPermission(2500,'DASHBOARD_SLA_AND_CONTRACT_BY_CATEGORY')">
               <div class="bg-white widg-padding-cmn btm-space-10 ">
                  <h5 class="cmn-head-style m-0">{{'sla&contracts_by_category' | translate}}</h5>
                  <hr>
                  <div class="complance-db-sectwo-height" *ngIf="!showContractPieNoDataMap">
                     <div id="chartdivslabycategory" style="width: 100%; height: 405px"></div>
                  </div>
                  <div class="ceo-db-aut-sec-row-height db-md-screen-center" *ngIf="showContractPieNoDataMap"
                     style="min-height: 407px;">
                     <app-no-chart-data [source]="slaCategoryPieChart">
                     </app-no-chart-data>
                  </div>

               </div>
            </div>

         </div>

         <div class="row sm-row"
            *ngIf="OrganizationModulesStore.checkOrganizationModules(2500) && AuthStore.getActivityPermission(2500,'DASHBOARD_COMPLIANCE_PER_DEPARTMENT')">
            <div class="col-lg-12 col-sm-12 sm-col"
               *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(2500,40401)">
               <div class="bg-white widg-padding-cmn btm-space-10 ">
                  <h5 class="cmn-head-style m-0">{{'compliance' | translate}}</h5>
                  <hr>
                  <div class="dpt-pic-ceo w-100" *ngIf="!showComplianceNoDataMap">
                     <div id="barChartCompliance" style="width: 100%; height: 250px" #chartElementForCompliance></div>
                  </div>
                  <div class="dpt-pic-ceo w-100" *ngIf="showComplianceNoDataMap" style="min-height: 250px;">
                     <app-no-chart-data [source]="complianceChart">
                     </app-no-chart-data>
                  </div>

               </div>
            </div>
         </div>

         <div class="row sm-row"
            *ngIf="OrganizationModulesStore.checkOrganizationModules(2500) && AuthStore.getActivityPermission(2500,'DASHBOARD_SLA_AND_CONTRACT_STATUS')">

            <div class="col-lg-4 col-sm-12 sm-col"
               *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(2500,43201)">
               <div class="bg-white widg-padding-cmn btm-space-10 ">
                  <h5 class="cmn-head-style m-0">{{'sla_document_status' | translate}}</h5>
                  <hr>
                  <div class="dpt-pic-ceo w-100" *ngIf="!showSlaStatusPieNoDataMap">
                     <div id="chartdivsladocumentstatus" style="width: 100%; height: 250px"></div>
                  </div>
                  <div class="dpt-pic-ceo w-100" *ngIf="showSlaStatusPieNoDataMap" style="min-height: 250px;">
                     <app-no-chart-data [source]="slaDocumentStatusPieChart">
                     </app-no-chart-data>
                  </div>

               </div>
            </div>

            <div class="col-lg-8 col-sm-12 sm-col"
               *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(2500,43201) && AuthStore.getActivityPermission(2500,'DASHBOARD_SLA_AND_CONTRACT_PER_DEPARTMENT')">
               <div class="bg-white widg-padding-cmn btm-space-10 ">
                  <h5 class="cmn-head-style m-0">{{'sla_contracts' | translate}}</h5>
                  <hr>
                  <div class="dpt-pic-ceo w-100" *ngIf="!showSlaContractNoDataMap">
                     <div id="barChartSlaContract" style="width: 100%; height: 250px" #chartElementForSlaContract></div>
                  </div>
                  <div class="dpt-pic-ceo w-100" *ngIf="showSlaContractNoDataMap" style="min-height: 250px;">
                     <app-no-chart-data [source]="slaContractChart">
                     </app-no-chart-data>
                  </div>

               </div>

            </div>
         </div>

         <div class="row sm-row"
            *ngIf="OrganizationModulesStore.checkOrganizationModules(2500) && AuthStore.getActivityPermission(2500,'DASHBOARD_COMPLIANCE_STATUS')">
            <!-- *ngIf = "OrganizationModulesStore.checkOrganizationSubModulesPermission(2500,40401)" -->
            <div class="col-lg-6 col-sm-12 sm-col"
               *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(2500,40401)">
               <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-aut-four">
                  <h5 class="cmn-head-style m-0">{{'compliance_by_products' | translate}}</h5>
                  <hr>

                  <div class="">
                     <div class="dpt-pic-ceo w-100" *ngIf="!showNoComplianceByProducts">
                        <div id="chartdivcomplianceProduct" style="width: 100%; height: 250px"></div>
                     </div>
                     <div class="dpt-pic-ceo w-100" *ngIf="showNoComplianceByProducts" style="min-height: 250px;">
                        <app-no-chart-data [source]="complianceStatusPieChart">
                        </app-no-chart-data>
                     </div>
                  </div>

               </div>
            </div>
            <div class="col-lg-6 col-sm-12 sm-col"
               *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(2500,43201)">
               <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-aut-four">
                  <h5 class="cmn-head-style m-0">{{'sla_by_products' | translate}}</h5>
                  <hr>

                  <div class="">
                     <div class="dpt-pic-ceo w-100" *ngIf="!showNoSlaByProducts">
                        <div id="chartdivSlaProduct" style="width: 100%; height: 250px"></div>
                     </div>
                     <div class="dpt-pic-ceo w-100" *ngIf="showNoSlaByProducts" style="min-height: 250px;">
                        <app-no-chart-data [source]="complianceStatusPieChart">
                        </app-no-chart-data>
                     </div>
                  </div>

               </div>
            </div>

         </div>

      </div>
      <ng-container *mobxAutorun>
         <div *ngIf="!ComplianceDashboardStore.dashboardLoaded">
            <app-compliance-dashboard-loader></app-compliance-dashboard-loader>
         </div>
      </ng-container>
   </div>

</main>