<div #plainDev></div>
<nav class="edit-bar" data-toggle="affix" style="z-index: 9999;" #navigationBar *mobxAutorun>
    <app-breadcrumb-menu></app-breadcrumb-menu>

    <!-- START FOR SMALL SCREENS -->
    <div class="dropdown edit-dropdown d-lg-none drop-menu-left-head">
        <a class="btn btn-primary float-left three-dots-dropdown dropdown-toggle"
            data-toggle="dropdown">{{AppStore.pageTitle}}<i class="fas fa-chevron-circle-down ml-2"></i></a>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
            <!-- <a class="dropdown-item active" data-toggle="pill" [routerLink]="['/human-capital/users/',UsersStore.user_id]">Profile</a>
                <a class="dropdown-item" data-toggle="pill" [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/documents']">Documents</a>
                <a class="dropdown-item" data-toggle="pill" [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/job-descriptions']">{{'jds'|translate}}</a>
                <a class="dropdown-item" data-toggle="pill" [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/roles-and-responsibilities']">R&R</a>
                <a class="dropdown-item" data-toggle="pill" [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/key-performances']">{{'kpis'|translate}}</a>
                <a class="dropdown-item" data-toggle="pill" [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/competencies']">{{'competencies'|translate}}</a>
                <a class="dropdown-item" data-toggle="pill" [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/reports']">Reports</a>
                <a class="dropdown-item" data-toggle="pill"[routerLink]="['/human-capital/users/'+UsersStore.user_id+'/settings']">Settings</a> -->
            <a (click)="dropdownItemClicked(items)"
                *ngFor="let items of OrganizationModulesStore.getOrganizationSubModules(200,6101)" class="dropdown-item"
                data-toggle="pill" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"
                [routerLink]="[items.client_side_url=='human-capital/users'?'/'+items.client_side_url+'/'+UsersStore.user_id:'/human-capital/users/'+UsersStore.user_id+'/'+items.client_side_url]">{{items.title}}</a>
        </div>
    
    
    </div>
    
    <!-- END FOR SMALL SCREENS -->

    <div *ngIf="UsersStore.individual_user_loaded && UsersStore.individualUser && UsersStore.individualUser?.status.id != AppStore.activeStatusId"
        class="active-tag deactivate-tag">
        <!-- {{'deactive'|translate}} -->
        {{UsersStore.individualUser?.status.title[0].pivot.title}}
    </div>
    <div *ngIf="UsersStore.individual_user_loaded && UsersStore.individualUser && UsersStore.individualUser?.status.id == AppStore.activeStatusId"
        class="active-tag">
        {{UsersStore.individualUser?.status.title[0].pivot.title}}
        <!-- {{'active'|translate}} -->
    </div>


    <!-- START FOR NORMAL SCREEN -->

    <ul class="nav nav-pills float-left d-none d-lg-block" role="tablist" (click)="tabListUlClick($event)">
        <!-- <li class="nav-item"> <a class="nav-link nav-link-show"
                    [routerLink]="['/human-capital/users/',UsersStore.user_id]" routerLinkActive="active"
                    [routerLinkActiveOptions]="{exact: true}"> Profile</a>
            </li>
    
            <li class="nav-item">
                <a class="nav-link nav-link-show" [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/documents']"
                    routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Documents </a>
            </li>
    
            <li class="nav-item"> <a class="nav-link nav-link-show"
                    [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/job-descriptions']"
                    routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">{{'jds'|translate}}</a>
            </li>
    
            <li class="nav-item"> <a class="nav-link nav-link-show"
                    [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/roles-and-responsibilities']"
                    routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">R&R</a>
            </li>
    
    
            <li class="nav-item"> <a class="nav-link nav-link-show"
                    [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/key-performances']" routerLinkActive="active"
                    [routerLinkActiveOptions]="{exact: true}">{{'kpis'|translate}}</a> </li>
            <li class="nav-item"> <a class="nav-link nav-link-show"
                    [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/competencies']" routerLinkActive="active"
                    [routerLinkActiveOptions]="{exact: true}">{{'competencies'|translate}}</a> </li>
            <li class="nav-item"> <a class="nav-link nav-link-show"
                    [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/reports']" routerLinkActive="active"
                    [routerLinkActiveOptions]="{exact: true}">Reports</a> </li>
            <li class="nav-item"> <a class="nav-link full-screen-click user-setting-link"
                    [routerLink]="['/human-capital/users/'+UsersStore.user_id+'/settings']" routerLinkActive="active"
                    [routerLinkActiveOptions]="{exact: true}">Settings</a> </li> -->
    
        <li class="nav-item"
            *ngFor="let items of OrganizationModulesStore.getOrganizationSubModules(200,6101);let num=index">
            <a [ngClass]="num==0? 'nav-link nav-link-show' : 'nav-link full-screen-click'" data-toggle="tab"
                data-original-title="Customer" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"
                [routerLink]="[items.client_side_url=='human-capital/users'?'/'+items.client_side_url+'/'+UsersStore.user_id:'/human-capital/users/'+UsersStore.user_id+'/'+items.client_side_url]">{{items.title}}</a>
            <!-- <p>{{items.client_side_url}}</p> -->
            <!-- <a class="nav-link full-screen-click" data-toggle="tab" data-original-title="Customer" *ngIf="items.client_side_url!='/human-capital/users'"
                        routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" [routerLink]="['/'+items.client_side_url+'/'+UsersStore.user_id]">{{items.title}}</a>  -->
        </li>
    
    
    </ul>

    <app-sub-menu></app-sub-menu>
    <!-- <app-sub-menu-drop-down></app-sub-menu-drop-down> -->


    <!-- END BUTTONS -->


</nav>

<main class="organization-page user-details-page mt-3" *mobxAutorun>
    <div class="container-fluid">

        <div class="row user-main-sec">

            <div [ngClass]="AuthStore.getActivityPermission(200,'USER_PROFILE_LIST')?'col-xl-3 col-lg-4 col-md-12 user-side-bar user-side-left':'col-xl-3 col-lg-4 col-md-12 user-side-bar user-side-left user-side-bar-hd'" style="z-index: 999;" #userSideBar>

                <div class="widget bg-white" *ngIf="UsersStore.individual_user_loaded && UsersStore.individualUser && AuthStore.getActivityPermission(200,'USER_PROFILE_LIST')">
                    <div class="organization-profile-sidebar p-0" *ngIf="UsersStore.individual_user_loaded">

                        <div class="profile-img text-center">
                            <figure class="w-100 d-block"><img width="100"
                                    [attr.src]="UsersStore.individualUser.image_token?createImageUrl(UsersStore.individualUser.image_token):getDefaultGeneralImage()"
                                    onerror="this.src='/assets/images/placeholder.png'"
                                    class="d-block mx-auto img-fluid rounded-circle zoomIn" /></figure>

                            <div>
                                <h5>{{UsersStore.individualUser.name}} {{UsersStore.individualUser.last_name}}</h5>
                                <p *ngIf = "UsersStore.individualUser.designation">{{UsersStore.individualUser.designation.title}}</p>

                                <small *ngIf="UsersStore.individualUser.is_auditor">{{'auditor'|translate}}</small>
                                <small
                                    *ngIf="UsersStore.individualUser.is_auditor && UsersStore.individualUser.is_top_user">,</small>
                                <small *ngIf="UsersStore.individualUser.is_top_user">{{'top_user'|translate}}</small>

                                <a class="curve-toggle" (click)="collapseSide()" #curveToggle></a>
                            </div>
                            <div class="user-beginer-block d-flex" *ngIf = "OrganizationGeneralSettingsStore.organizationSettings?.is_user_reward">
                                <div class="beginner-icon d-flex align-items-center zoom-animation"> <i
                                        class="fas fa-star"></i> </div>
                                <div class="progress  flex-grow-1">
                                    <div class="progress-bar progress-bar-animation" role="progressbar"
                                    
                                    aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="max-width: 70%">
                                    </div>
                                </div>
                                <div class="master-icon d-flex align-items-center zoom-animation"> <i
                                        class="fas fa-trophy"></i> </div>
                            </div>
                            <div class="mt-1" *ngIf = "OrganizationGeneralSettingsStore.organizationSettings?.is_user_reward"> <small class="float-left">{{'beginner'|translate}}</small> <small
                                    class="float-right">{{'master'|translate}}</small>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="p-4">
                            <div class="row">
                                <div class="col-sm-12" *ngIf = "OrganizationLevelSettingsStore.organizationLevelSettings?.is_subsidiary">
                                    <h6>{{'subsidiaries' | translate}}</h6>
                                    <p>{{UsersStore.individualUser.organization?.title?UsersStore.individualUser.organization?.title:AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-sm-6" [ngStyle] = "{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_division ? 'none':'block'}">
                                    <h6>{{'division' | translate}}</h6>
                                    <p>{{UsersStore.individualUser.division?.title?UsersStore.individualUser.division?.title:AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-sm-12" [ngStyle] = "{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_department ? 'none':'block'}">
                                    <h6>{{'department' | translate}}</h6>
                                    <p>{{UsersStore.individualUser.department?.title?UsersStore.individualUser.department?.title:AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-sm-6" [ngStyle] = "{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_section ? 'none':'block'}">
                                    <h6>{{'section' | translate}}</h6>
                                    <p>{{UsersStore.individualUser.section?.title?UsersStore.individualUser.section?.title:AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-sm-12" [ngStyle] = "{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_sub_section ? 'none':'block'}">
                                    <h6>{{'sub_section' | translate}}</h6>
                                    <p>{{UsersStore.individualUser.sub_section?.title?UsersStore.individualUser.sub_section?.title:AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-sm-12" [ngStyle] = "{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_branch ? 'none':'block'}">
                                    <h6>{{'branch' | translate}}</h6>
                                    <p>{{UsersStore.individualUser.branch?.title?UsersStore.individualUser.branch?.title:AppStore.noContentText}}</p>
                                </div>
                                <div class="col-sm-12">
                                    <h6>{{'mobile' | translate}}</h6>
                                    <p>{{UsersStore.individualUser.mobile?UsersStore.individualUser.mobile:AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-sm-12">
                                    <h6>{{'office' | translate}}</h6>
                                    <p>{{UsersStore.individualUser.office_number?UsersStore.individualUser.office_number:AppStore.noContentText}}
                                    </p>
                                </div>
                                <div class="col-sm-12">
                                    <h6>{{'email_id' | translate}} </h6>
                                    <p *ngIf="!UsersStore.individualUser.email">{{AppStore.noContentText}}</p>
                                    <a *ngIf="UsersStore.individualUser.email" target="_blank"
                                        class="cmn-clr mb-3 d-block"
                                        [attr.href]="'mailto:'+UsersStore.individualUser.email">{{UsersStore.individualUser.email}}</a>

                                </div>

                                <div class="col-sm-12">
                                    <h6>{{'personal_email' | translate}} </h6>
                                    <p *ngIf="!UsersStore.individualUser.personal_email">{{AppStore.noContentText}}</p>
                                    <a *ngIf="UsersStore.individualUser.personal_email" target="_blank"
                                        class="cmn-clr mb-3 d-block"
                                        [attr.href]="'mailto:'+UsersStore.individualUser.personal_email">{{UsersStore.individualUser.personal_email}}</a>

                                </div>

                                <div class="col-sm-12">
                                    <h6>{{'reporting_user' | translate}}</h6>
                                    <div class="d-flex flex-row user-list-sm bg-white pt-2" *ngIf="UsersStore.individualUser?.reporting_user">
                                        <img [attr.src]="UsersStore.individualUser?.reporting_user?.image_token?createImageUrl(UsersStore.individualUser?.reporting_user?.image_token):getDefaultImage('user-logo')"
                                        onerror = "this.src='/assets/images/user-demo2.png'"
                                            width="30px" height="30px" class="rounded-circle">
                                        <div>
                                            <h6>
                                                {{UsersStore.individualUser.reporting_user?.first_name}} {{UsersStore.individualUser.reporting_user?.last_name}}
                                            </h6>
                                            <span>{{UsersStore.individualUser.reporting_user?.designation?.title}} </span>
                                        </div>
                                    </div>
                                    <p *ngIf="!UsersStore.individualUser.reporting_user">
                                        {{AppStore.noContentText}}
                                    </p>
                                </div>

                                <div class="col-sm-12">
                                    <h6>{{'roles' | translate}} </h6>
                                    <p class="mb-0">{{UsersStore.roles?UsersStore.roles:AppStore.noContentText}}</p>
                                </div>

                                <div class="col-sm-6 mt-2" *ngIf = "OrganizationGeneralSettingsStore.organizationSettings?.is_user_license_activation">
                                    <h6>{{'user_type' | translate}} </h6>
                                    <p>{{UsersStore.individualUser?.is_license_active==0 ? getLanguageTranslate('passive') : getLanguageTranslate('active')}}</p>
                                </div>

                                <div class="col-sm-12 mt-2" *ngIf = "UsersStore.individualUser?.is_license_active==1">
                                    <h6>{{'activation_key' | translate}} </h6>
                                    <p>{{UsersStore.individualUser?.user_license ? UsersStore.individualUser?.user_license?.key : AppStore.noContentText}}</p>
                                </div>
                                <div class="col-sm-12 mt-2" >
                                    <h6>{{'date_of_birth' | translate}} </h6>
                                    <p>{{UsersStore.individualUser?.date_of_birth ? (UsersStore.individualUser?.date_of_birth | date : OrganizationGeneralSettingsStore.organizationSettings?.date_format) : AppStore.noContentText}}</p>
                                </div>
                                <div class="col-sm-12 mt-2" >
                                    <h6>{{'national_insurance_number' | translate}} </h6>
                                    <p>{{UsersStore.individualUser?.national_insurance_number ? UsersStore.individualUser?.national_insurance_number : AppStore.noContentText}}</p>
                                </div>
                                <div class="col-sm-6" >
                                    <h6>{{'joining_date' | translate}} </h6>
                                    <p>{{UsersStore.individualUser?.joining_date ? (UsersStore.individualUser?.joining_date | date : OrganizationGeneralSettingsStore.organizationSettings?.date_format): AppStore.noContentText}}</p>
                                </div>
                                <div class="col-sm-6 " >
                                    <h6>{{'leaving_date' | translate}} </h6>
                                    <p>{{UsersStore.individualUser?.leaving_date ? (UsersStore.individualUser?.leaving_date | date : OrganizationGeneralSettingsStore.organizationSettings?.date_format) : AppStore.noContentText}}</p>
                                </div>
                                <!-- <div class="col-sm-12">
                                  
                                        <hr class="mb-2">
                                        <div class="d-flex flex-row user-list-sm p-0">

                                            <div>
                                                <app-user-popup-box
                                                    [source]=" getCreatedByPopupDetails(UsersStore.individualUser?.created_by)">
                                                </app-user-popup-box>
                                            </div>
                                        </div>
                                   
                                </div> -->
                                <div class="clearfix"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <ng-container *ngIf="!UsersStore.individual_user_loaded">
                    <app-profile-left-loader></app-profile-left-loader>
                </ng-container>
            </div>

            <div [ngClass]="AuthStore.getActivityPermission(200,'USER_PROFILE_LIST')?'col-xl-9 col-lg-8 col-md-12 user-right-details user-right-fill': 'col-xl-9 col-lg-8 col-md-12 user-right-details user-right-fill flex-98-width'" #userRightDetails>

                <div class="tab-content">
                    <router-outlet></router-outlet>
                </div>
            </div>
        </div>
    </div>
</main>

<div [ngClass]="AuthStore.getActivityPermission(200,'USER_PROFILE_LIST')?'side-bar-round':''" (click)="unCollapseSide()" #sideBarRound>
    <figure class="w-100 d-block">
        <img width="100"
            [attr.src]="(UsersStore.individual_user_loaded && UsersStore.individualUser && UsersStore.individualUser.image_token) ? createImageUrl(UsersStore.individualUser.image_token) : getDefaultImage('general')"
            class="d-block mx-auto img-fluid rounded-circle" onerror="this.src='/assets/images/user-demo2.png'">
    </figure>
</div>