<!-- Profille -->
<ng-container *mobxAutorun>
    <div class="tab-pane active" id="profile"
        *ngIf="UsersStore.individual_user_loaded && UsersStore.individualUser && AuthStore.getActivityPermission(200,'USER_PROFILE_LIST')">
        <div class="row">
            <div class="col-sm-12">
                <div class="widget bg-white">
                    <!-- Nav tabs -->
                    <!-- Tab panes -->
                    <div class="widget-body-light right-block pb-0">
                        <div class="row">
                            <div class="col-sm-12">
                                <h5 class="mt-0"> <span> {{'permanent_address'|translate}} </span> </h5>
                            </div>
                        </div>

                        <div class="row" *ngIf="UsersStore.contactAddress">
                            <div class="col-sm-4">
                                <h6>{{'address'|translate}}</h6>
                                <p style="white-space: pre-wrap;">
                                    {{UsersStore.contactAddress.address?UsersStore.contactAddress.address:AppStore.noContentText}}
                                </p>

                            </div>
                            <div class="col-sm-4">
                                <h6>{{'state'|translate}}</h6>
                                <p>{{UsersStore.contactAddress.state?UsersStore.contactAddress.state:AppStore.noContentText}}
                                </p>

                            </div>
                            <div class="col-sm-4">
                                <h6>{{'city'|translate}}</h6>
                                <p>{{UsersStore.contactAddress.city?UsersStore.contactAddress.city:AppStore.noContentText}}
                                </p>

                            </div>
                            <div class="col-sm-4">
                                <h6>{{'country'|translate}}</h6>
                                <p>{{UsersStore.contactAddress.country?UsersStore.contactAddress.country.title:AppStore.noContentText}}
                                </p>
                            </div>

                            <!-- </div>
                    <div class="row" *ngIf="UsersStore.contactAddress"> -->
                            <div class="col-sm-4">
                                <h6>{{'street'|translate}}</h6>
                                <p>{{UsersStore.contactAddress.street?UsersStore.contactAddress.street:AppStore.noContentText}}
                                </p>

                            </div>
                            <div class="col-sm-4">
                                <h6>{{'postal_code'|translate}}</h6>
                                <p>{{UsersStore.contactAddress.zip?UsersStore.contactAddress.zip:AppStore.noContentText}}
                                </p>

                            </div>
                            <div class="col-sm-4">
                                <h6>{{'contact'|translate}}</h6>
                                <p>{{UsersStore.contactAddress.contact?UsersStore.contactAddress.contact:AppStore.noContentText}}
                                </p>

                            </div>
                        </div>
                        <div *ngIf="!UsersStore.contactAddress">
                            <p> {{'contact_address_not_available'|translate}}</p>
                        </div>

                        <div class="row">
                            <div class="col-sm-12">
                                <h5 class="mt-3"> <span> {{'emergency_address'|translate}} </span> </h5>
                            </div>
                        </div>
                        <div class="row" *ngIf="UsersStore.emergencyAddress">
                            <div class="col-sm-8">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <h6>{{'contact_person'|translate}}</h6>
                                        <p>{{UsersStore.emergencyAddress.relative_name?UsersStore.emergencyAddress.relative_name:AppStore.noContentText}}
                                        </p>

                                    </div>
                                    <div class="col-sm-6">
                                        <h6>{{'contact_person_number'|translate}} </h6>
                                        <p>
                                            {{UsersStore.emergencyAddress.relative_mobile?UsersStore.emergencyAddress.relative_mobile:AppStore.noContentText}}
                                        </p>

                                    </div>
                                    <div class="col-sm-6">
                                        <h6>{{'relationship'|translate}}</h6>
                                        <p>{{UsersStore.emergencyAddress.relationship?UsersStore.emergencyAddress.relationship:AppStore.noContentText}}
                                        </p>

                                    </div>
                                    <div class="col-sm-6">
                                        <h6>{{'mobile'|translate}}</h6>
                                        <p>
                                            {{UsersStore.emergencyAddress.relative_mobile?UsersStore.emergencyAddress.relative_mobile:AppStore.noContentText}}
                                        </p>

                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <h6>{{'address'|translate}}</h6>
                                <p style="white-space: pre-wrap;">
                                    {{UsersStore.emergencyAddress.address?UsersStore.emergencyAddress.address:AppStore.noContentText}}
                                </p>

                            </div>
                        </div>

                        <div *ngIf="!UsersStore.emergencyAddress">
                            <p> {{'emergency_address_not_available'|translate}}</p>
                        </div>

                        <div class="edit-and-delete-main">
                            <div *ngIf="AuthStore.getActivityPermission(200,'CREATE_USER_QUALIFICATION')"
                                class="edit-option-show" style="margin:20px -15px 0 0;">
                                <a [attr.title]="'add_qualification' | translate" data-toggle="modal"
                                    data-target="#add-qualification-popup" (click)="openQualificationFormModal()"><i
                                        class="fas fa-plus"></i></a>

                            </div>
                            <h5 *ngIf="AuthStore.getActivityPermission(200,'USER_QUALIFICATIONS')" class="mt-3">
                                <span>{{'qualifications'|translate}} </span>
                                <!-- <a class="add-button-outlined"
                                *ngIf="AuthStore.getActivityPermission(200,'CREATE_USER_QUALIFICATION')"
                                [attr.title]="'Add Qualification'" (click)="openQualificationFormModal()"
                                data-toggle="modal" data-target="#add-qualification-popup"><i class="fas fa-plus"></i>
                            </a> -->
                            </h5>
                            <div class="row" *ngIf="AuthStore.getActivityPermission(200,'USER_QUALIFICATIONS')">
                                <div class="col-sm-4 edit-option"
                                    *ngFor="let qualification of UserQualificationStore.qualification">
                                    <div class="clearfix">
                                        <h6>{{qualification.school}}</h6>

                                        <p>{{qualification.degree}}
                                        </p>
                                        <p *ngIf="qualification.end!=null">{{qualification.start}}-{{qualification.end}}
                                        </p>
                                        <p *ngIf="qualification.end==null">{{qualification.start}}-Present</p>
                                        <div class="edit-option-show" style="margin-top: 15px;">
                                            <a [attr.title]="'edit'|translate"
                                                *ngIf="AuthStore.getActivityPermission(200,'UPDATE_USER_QUALIFICATION')"
                                                (click)="editQualification(qualification.id)"><i
                                                    class="fas fa-pen"></i></a>
                                            <a [attr.title]="'delete'|translate"
                                                *ngIf="AuthStore.getActivityPermission(200,'DELETE_USER_QUALIFICATION')"
                                                (click)="deleteQualification(qualification.id)"><i
                                                    class="fas fa-trash"></i></a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12 edit-option mb-2">
                                    <ng-container>
                                        <app-context-no-data [sourceData] = "getNoDataSource('left')" *ngIf="UserQualificationStore.qualification.length==0"></app-context-no-data>
                                     </ng-container>
                                    <!-- <p> {{'qualification_details_not_available'|translate}}</p> -->

                                </div>


                            </div>
                        </div>
                        <div class="edit-and-delete-main">
                            <div *ngIf="AuthStore.getActivityPermission(200,'CREATE_USER_WORK_EXPERIENCE')"
                                class="edit-option-show" style="margin:20px -15px 0 0;">
                                <a [attr.title]="'add_experience' | translate" data-toggle="modal"
                                    data-target="#add-experience-popup" (click)="openWorkFormModal()"><i
                                        class="fas fa-plus"></i></a>

                            </div>
                            <h5 class="mt-3" *ngIf="AuthStore.getActivityPermission(200,'USER_WORK_EXPERIENCES')">
                                <span>
                                    {{'work_experiences'|translate}} </span>
                                <!-- <a class="add-button-outlined" (click)="openWorkFormModal()"
                            data-toggle="modal" [attr.title]="'Add Experience'" data-target="#add-experience-popup"
                            *ngIf="AuthStore.getActivityPermission(200,'CREATE_USER_WORK_EXPERIENCE')"><i
                                class="fas fa-plus"></i> </a> -->
                            </h5>
                            <div class="row" *ngIf="AuthStore.getActivityPermission(200,'USER_WORK_EXPERIENCES')">
                                <div class="col-sm-4 edit-option"
                                    *ngFor="let experience of UserWorkExperienceStore.workExperience">
                                    <h6>{{experience?.company}}</h6>
                                    <p>{{experience.designation}}</p>
                                    <p>{{experience.location}}
                                    <p *ngIf="experience.end!=null">
                                        {{experience.start|date : OrganizationGeneralSettingsStore.organizationSettings.date_format}}
                                        -
                                        {{experience.end|date : OrganizationGeneralSettingsStore.organizationSettings.date_format}}
                                    </p>
                                    <p *ngIf="experience.end==null">
                                        {{experience.start|date : OrganizationGeneralSettingsStore.organizationSettings.date_format}}
                                        - {{'present'|translate}}</p>
                                    <div class="edit-option-show" style="margin-top: 15px;">
                                        <a [attr.title]="'edit'|translate" (click)="editExperience(experience.id)"
                                            *ngIf="AuthStore.getActivityPermission(200,'UPDATE_USER_WORK_EXPERIENCE')"><i
                                                class="fas fa-pen"></i></a>
                                        <a [attr.title]="'delete'|translate" (click)="deleteWork(experience.id)"
                                            *ngIf="AuthStore.getActivityPermission(200,'DELETE_USER_WORK_EXPERIENCE')"><i
                                                class="fas fa-trash"></i></a>
                                    </div>
                                </div>
                                <div class="col-sm-12 edit-option mb-2">
                                    <!-- <p> {{'experience_details_not_available'|translate}}</p> -->
                                    <ng-container>
                                        <app-context-no-data [sourceData] = "getNoDataSource('left')" *ngIf="UserWorkExperienceStore.workExperience.length==0"></app-context-no-data>
                                     </ng-container>
                                </div>


                            </div>
                        </div>
                        <div class="edit-and-delete-main">
                            <div *ngIf="AuthStore.getActivityPermission(200,'CREATE_USER_CERTIFICATE')"
                                class="edit-option-show" style="margin:20px -15px 0 0;">
                                <a [attr.title]="'add_certification' | translate" data-toggle="modal"
                                    data-target="#add-certificate-popup" (click)="openCertificateFormModal()"><i
                                        class="fas fa-plus"></i></a>

                            </div>
                            <h5 class="mt-3" *ngIf="AuthStore.getActivityPermission(200,'USER_CERTIFICATES')"><span>
                                    {{'certificates'|translate}} </span>
                              
                            </h5>
                            <!-- <div class="row document-file-pic"
                                *ngIf="AuthStore.getActivityPermission(200,'USER_CERTIFICATES')">

                                <div class="col-sm-4 col-md-3 col-lg-2 doc-fancy-box-bg edit-option"
                                    *ngFor="let certificate of UserCertificateStore?.certificate">
                                  

                                    <div class="upload-pics upload-pics-small edit-option">
                                        <div class="browse-form-pic"
                                            [ngStyle]="{'background': 'url('+createImageUrl(certificate.token)+') no-repeat'}"
                                            (click)="viewCertificate(certificate)">
                                        </div>
                                        <div class="browse-form-name clearfix">
                                            <div class="float-left">
                                                <h6>{{certificate.certificate_name.length>20?certificate.certificate_name.substring(0,20)+' ...':certificate.certificate_name}}
                                                </h6>
                                                <span>{{certificate.size/1048576 | number:'0.2-2'}}MB</span>
                                            </div>
                                            <div class="browse-logo">
                                                <img *ngIf="checkExtension(certificate.ext,'excel') != -1"
                                                    src="/assets/images/md-xl.png" width="30px" height="30px">
                                                <img *ngIf="checkExtension(certificate.ext,'image') != -1"
                                                    src="/assets/images/md-jpg.png" width="30px" height="30px">
                                                <img *ngIf="checkExtension(certificate.ext,'doc') != -1"
                                                    src="/assets/images/md-doc.png" width="30px" height="30px">
                                                <img *ngIf="checkExtension(certificate.ext,'pdf') != -1"
                                                    src="/assets/images/md-pdf.png" width="30px" height="30px">
                                                <img *ngIf="checkExtension(certificate.ext,'video') != -1"
                                                    src="/assets/images/md-video.png" width="30px" height="30px">
                                                <img *ngIf="checkExtension(certificate.ext,'audio') != -1"
                                                    src="/assets/images/md-audio.png" width="30px" height="30px">
                                                <img *ngIf="checkExtension(certificate.ext,'ppt') != -1"
                                                    src="/assets/images/md-ppt.png" width="30px" height="30px">
                                            </div>
                                        </div>
                                        <div class="edit-option-show-inner">
                                            <a [attr.title]="'edit'|translate" (click)="editCertificate(certificate.id)"
                                                *ngIf="AuthStore.getActivityPermission(200,'UPDATE_USER_CERTIFICATE')"><i
                                                    class="fas fa-pen"></i></a>
                                            <a [attr.title]="'delete'|translate"
                                                (click)="deleteCertificate(certificate.id)"
                                                *ngIf="AuthStore.getActivityPermission(200,'DELETE_USER_CERTIFICATE')"><i
                                                    class="fas fa-trash"></i></a>
                                            <a [attr.title]="'download'"
                                                (click)="downloadCertificate(certificate.id,certificate.title,certificate)"
                                                *ngIf="AuthStore.getActivityPermission(200,'DOWNLOAD_USER_CERTIFICATE_DOCUMENT_FILE')"><i
                                                    class="fas fa-download"></i></a>
                                           
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12 edit-option" *ngIf="UserCertificateStore?.certificate.length==0">
                                    <p> Certification Details Not Available</p>

                                </div>


                            </div> -->

                            
                            <div class="thumb-pics-bg clearfix thumb-pics-fix-text thump-pics-full pb-3"
                            *ngIf="UserCertificateStore?.certificate.length > 0">
                                <div class="thumb-pics"
                                  *ngFor="let certificate of UserCertificateStore?.certificate">
                                  <div class="upload-pics upload-pics-small edit-option">
                                    <div class="browse-form-pic"
                                    [ngStyle]="{'background': 'url('+createImageUrl(certificate.token)+') no-repeat'}"
                                    (click)="viewCertificate(certificate)">
                                    </div>
                                    <div class="browse-form-name clearfix">
                                      <div class="float-left">
                                        <h6>{{certificate.certificate_name.length>20?certificate.certificate_name.substring(0,20)+' ...':certificate.certificate_name}}
                                        </h6>
                                        <span>{{certificate.size/1048576 | number:'0.2-2'}}MB</span>
                                      </div>
                                      <div class="browse-logo">
                                        <img *ngIf="checkExtension(certificate.ext,'excel') != -1"
                                            src="/assets/images/md-xl.png" width="30px" height="30px">
                                        <img *ngIf="checkExtension(certificate.ext,'image') != -1"
                                            src="/assets/images/md-jpg.png" width="30px" height="30px">
                                        <img *ngIf="checkExtension(certificate.ext,'doc') != -1"
                                            src="/assets/images/md-doc.png" width="30px" height="30px">
                                        <img *ngIf="checkExtension(certificate.ext,'pdf') != -1"
                                            src="/assets/images/md-pdf.png" width="30px" height="30px">
                                        <img *ngIf="checkExtension(certificate.ext,'video') != -1"
                                            src="/assets/images/md-video.png" width="30px" height="30px">
                                        <img *ngIf="checkExtension(certificate.ext,'audio') != -1"
                                            src="/assets/images/md-audio.png" width="30px" height="30px">
                                        <img *ngIf="checkExtension(certificate.ext,'ppt') != -1"
                                            src="/assets/images/md-ppt.png" width="30px" height="30px">
                                    </div>
                                    </div>
                                    <div class="edit-option-show-inner">
                                        <a [attr.title]="'edit'|translate" (click)="editCertificate(certificate.id)"
                                            *ngIf="AuthStore.getActivityPermission(200,'UPDATE_USER_CERTIFICATE')"><i
                                                class="fas fa-pen"></i></a>
                                        <a [attr.title]="'delete'|translate"
                                            (click)="deleteCertificate(certificate.id)"
                                            *ngIf="AuthStore.getActivityPermission(200,'DELETE_USER_CERTIFICATE')"><i
                                                class="fas fa-trash"></i></a>
                                        <a [attr.title]="'download'|translate"
                                            (click)="downloadCertificate(certificate.id,certificate.title,certificate)"
                                            *ngIf="AuthStore.getActivityPermission(200,'DOWNLOAD_USER_CERTIFICATE_DOCUMENT_FILE')"><i
                                                class="fas fa-download"></i></a>
                                       
                                    </div>
                                  </div>
                                </div>
                                
          
          
                              </div>
                              <div class="pb-4 edit-option" >
                                <!-- <p class="mb-0"> {{'certification_details_not_available'|translate}}</p> -->
                                <ng-container>
                                    <app-context-no-data [sourceData] = "getNoDataSource('left')" *ngIf="UserCertificateStore?.certificate.length==0"></app-context-no-data>
                                 </ng-container>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-container>
<ng-container *ngIf="!UsersStore.individual_user_loaded">
    <app-user-profile-loader></app-user-profile-loader>
</ng-container>

<!-- Experience modal start -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #workFormModal>
    <button type="button" class="close" (click)="closeWorkFormModal()"><i
            class="lni-close"></i><span>{{'esc'|translate}}</span></button>
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">{{'work_experience'|translate}}</h4>

            </div>
            <!-- Modal body -->
            <div class="modal-body form-body">

                <p class="head-details"></p>

                <form [formGroup]="form" *mobxAutorun>

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>{{'company'|translate}}<sup>*</sup></label>
                                <input type="text" formControlName="company" class="form-control"
                                    [attr.placeholder]="'enter_company'|translate" id="company" #companyInput>
                                <p class="form-error pt-1"
                                    *ngIf="form.value?.company && form.value?.company?.length>500 && !formErrors">{{'maximum_500_characters'|translate}}</p>

                                <p class="form-error pt-1" *ngIf="formErrors&&formErrors?.company">
                                    {{formErrors?.company}}
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>{{'designation'|translate}}<sup>*</sup></label>
                                <input type="text" formControlName="designation" class="form-control"
                                    [attr.placeholder]="'enter_designation'|translate" id="designation" #designationInput>
                                <p class="form-error pt-1"
                                    *ngIf="form.value.designation && form.value.designation.length>500 && !formErrors">
                                    {{'maximum_500_characters'|translate}}</p>
                                <p class="form-error pt-1" *ngIf="formErrors&&formErrors.designation">
                                    {{formErrors.designation}}</p>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>{{'location'|translate}}</label>
                                <input type="text" formControlName="location" class="form-control"
                                    [attr.placeholder]="'enter_location'|translate" id="location" #locationInput>
                                <!-- <p class="form-error pt-1"
                                    *ngIf="form.value.location && form.value.location.length>500 && !formErrors">
                                   </p> -->
                                <p class="form-error pt-1" *ngIf="formErrors&&formErrors.location">
                                    {{formErrors.location}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">

                            <div class="form-group">
                                <label>{{'start'|translate}}<sup>*</sup></label>
                                <div class="input-group">
                                    <input [readonly]="true"  (click)="startInput.toggle()" formControlName="start" class="form-control bg-white" placeholder="yyyy-mm-dd"
                                        id="start"
                                        [maxDate]="{year: UsersStore.currentDate.getFullYear(), month: UsersStore.currentDate.getMonth()+1, day: UsersStore.currentDate.getDate()}"
                                        ngbDatepicker #startInput="ngbDatepicker">
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-secondary calendar" (click)="startInput.toggle()"
                                            type="button"><i class="fas fa-calendar-alt"></i></button>
                                    </div>
                                </div>
                                <p style="color: red;" *ngIf="formErrors&&formErrors.start"> {{formErrors.start}}</p>
                            </div>
                        </div>

                        <div class="col-sm-6">

                            <div class="form-group">
                                <label>{{'end'|translate}}</label>
                                <div class="input-group">
                                    <input  [readonly]="true"  (click)="endInput.toggle()" formControlName="end" class="form-control bg-white" placeholder="yyyy-mm-dd" id="end"
                                        ngbDatepicker
                                        [minDate]="form.value.start?{year: this.form.value.start.year, month: this.form.value.start.month, day: this.form.value.start.day+1}:''"
                                        #endInput="ngbDatepicker">
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-secondary calendar" (click)="endInput.toggle()"
                                            type="button"><i class="fas fa-calendar-alt"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="clearfix"></div>

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="d-block justify-content-left border-0 mt-3">
                                <button type="submit" class="btn ordinary-btn mr-3 btn-active" (click)="saveWork()"
                                    [disabled]="form.invalid || AppStore.loading">{{ AppStore.loading  ? getButtonText('loading') : getButtonText('save') }}</button>
                                <button type="button" data-toggle="modal" data-target="#signal-lost"
                                    class="btn ordinary-btn mr-3" (click)="saveWork(true)"
                                    [disabled]="form.invalid || AppStore.loading">{{ AppStore.loading  ? getButtonText('loading') : getButtonText('save_close') }}</button>
                                <button type="button" data-toggle="modal" data-target="#error-message"
                                    class="btn ordinary-btn mr-2"
                                    (click)="closeWorkFormModal()">{{ AppStore.loading  ? getButtonText('loading') : getButtonText('cancel') }}</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <!-- Modal footer -->
        </div>
    </div>
</div>
<!-- Experience Modal end -->

<!-- Qualification modal start -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static"
    #qualificationFormModal>
    <button type="button" class="close" (click)="closeQualificationFormModal()"><i
            class="lni-close"></i><span>{{'esc'|translate}}</span></button>
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">{{'qualification'|translate}}</h4>
            </div>
            <!-- Modal body -->
            <div class="modal-body form-body">

                <p class="head-details"></p>

                <form [formGroup]="qualificationForm" *mobxAutorun>

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>{{'school'|translate}}<sup>*</sup></label>
                                <input type="text" formControlName="school" class="form-control"
                                    [attr.placeholder]="'enter_school'|translate" id="school" #schoolInput>
                                <p class="form-error pt-1"
                                    *ngIf="qualificationForm.value.school && qualificationForm.value.school.length>500 && !formErrors">
                                    {{'maximum_500_characters'|translate}}</p>
                                <p class="form-error pt-1" *ngIf="formErrors&&formErrors.school"> {{formErrors.school}}
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>{{'degree'|translate}}<sup>*</sup></label>
                                <input type="text" formControlName="degree" class="form-control"
                                    [attr.placeholder]="'enter_degree'|translate" id="degree" #degreeInput>
                                <p class="form-error pt-1"
                                    *ngIf="qualificationForm.value.degree && qualificationForm.value.degree.length>500 && !formErrors">
                                    {{'maximum_500_characters'|translate}}</p>
                                <p class="form-error pt-1" *ngIf="formErrors&&formErrors.degree"> {{formErrors.degree}}
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">

                            <div class="form-group">
                                <label>{{'start'|translate}}<sup>*</sup>(year)</label>
                                <div class="plain-select">
                                    <select class="form-control" name="start" formControlName="start" id="start_date" [attr.placeholder]="'select_start_date'|translate">
                                        <option value="">{{'select_start_date'|translate}}</option>
                                        <option [attr.value]="type" *ngFor="let type of qualification_year">
                                            {{type}}</option>
                                    </select>
                                </div>
                                <p style="color: red;" *ngIf="formErrors&&formErrors.start"> {{formErrors.start}}</p>
                            </div>
                        </div>

                        <div class="col-sm-6">

                            <div class="form-group">
                                <label>{{'end'|translate}} (year)</label>
                                <!-- <div class="input-group"> -->
                                <div class="plain-select">
                                    <select class="form-control" name="end" formControlName="end" id="end_date" [attr.placeholder]="'select_end_date'|translate">
                                        <option value="">{{'select_end_date'|translate}}</option>
                                        <option [disabled]="(this.qualificationForm.value.start>type)"
                                            [style.color]="(this.qualificationForm.value.start>type)? '#ccc9':''"
                                            [attr.value]="type" *ngFor="let type of qualification_year">
                                            {{type}}</option>
                                    </select>

                                </div>

                                <p style="color: red;" *ngIf="formErrors&&formErrors.end"> {{formErrors.end}}</p>
                            </div>
                        </div>
                    </div>


                    <div class="clearfix"></div>

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="d-block justify-content-left border-0 mt-3">
                                <button type="submit" class="btn ordinary-btn mr-3 btn-active"
                                    (click)="saveQualification()"
                                    [disabled]="qualificationForm.invalid || AppStore.loading">{{ AppStore.loading  ? getButtonText('loading') : getButtonText('save') }}</button>
                                <button type="button" data-toggle="modal" data-target="#signal-lost"
                                    class="btn ordinary-btn mr-3" (click)="saveQualification(true)"
                                    [disabled]="qualificationForm.invalid || AppStore.loading">{{ AppStore.loading  ? getButtonText('loading') : getButtonText('save_close') }}</button>
                                <button type="button" data-toggle="modal" data-target="#error-message"
                                    class="btn ordinary-btn mr-2"
                                    (click)="closeQualificationFormModal()">{{ AppStore.loading  ? getButtonText('loading') : getButtonText('cancel') }}</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <!-- Modal footer -->
        </div>
    </div>
</div>
<!-- qualification modal end -->

<!-- Certificate Modal start -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static"
    #certificateFormModal>
    <button type="button" class="close" (click)="closeCertificateFormModal()"><i
            class="lni-close"></i><span>{{'esc'|translate}}</span></button>
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">{{'certificate'|translate}}</h4>

            </div>
            <!-- Modal body -->
            <div class="modal-body form-body">

                <p class="head-details"></p>

                <form [formGroup]="certificateForm" *mobxAutorun>
                    <label for="name" class="label-style mb-0">{{'certificate_upload'|translate}}<sup class="red">*</sup></label>

                    <div class="row m-0 upload-section" style="padding-top: 0">
                        <div class="col-sm-4 costmz-logo-new mt-2">
                            <div class="question-circle-inp" *ngIf = "OrganizationGeneralSettingsStore.organizationSettings?.support_file_allowed_types.length > 0" style="margin-right: 7px;">
                                <i class="far fa-question-circle"></i>
                                <div class="message-password-inp">
                                    <p class="mb-0">{{'allowed_file_types' | translate}} {{OrganizationGeneralSettingsStore.organizationSettings?.support_file_allowed_types.toString()}}</p>
                                </div>
                             </div>
                            <div class="form-group form-group-upload">
                                <div class="darag-dropifile-upload">
                                    <div class="d-flex justify-content-center align-items-center text-center">
                                        <div class="drag-file-sec">
                                            <img src="assets/images/drag-pic.png" class="drag-pic-files">
                                            <div class="drag-file-name"> {{'select_upload_your_file_here'|translate}} </div>
                                            <div class="upload-btn-wrapper">
                                                <input type="file" name="myfile"
                                                    (change)="onFileChange($event,'support-file')"
                                                    accept="application/msword, application/pdf, image/*" />
                                                <button class="btn">{{'browse_files'|translate}}</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="col-sm-4 up-pic-cf mt-2" *ngIf="UserCertificateStore.certificate_preview_available">

                            <div class="upload-pics edit-option">
                                <circle-progress class="browse-form-pic" [percent]=fileUploadProgress
                                    [title]=fileUploadProgress></circle-progress>
                            </div>
                        </div>


                        <div [ngClass]="UserCertificateStore.certificateImage?.is_deleted ? 'col-sm-4 up-pic-cf mt-2 image_deleted':'col-sm-4 up-pic-cf mt-2'"
                            *ngIf="UserCertificateStore.certificateImage">
                            <div class="upload-pics edit-option">
                                <div class="browse-form-pic"
                                    [ngStyle]="{'background': 'url(' + UserCertificateStore.preview_url + '),url(' + getDefaultImage('no-preview') + ') no-repeat 0 0 / cover'}">
                                </div>
                                <div class="browse-form-name clearfix">
                                    <div class="float-left">
                                        <h6>{{UserCertificateStore.certificateImage.name.length > 15 ? UserCertificateStore.certificateImage.name.substring(0,15)+' ...': UserCertificateStore.certificateImage.name}}
                                        </h6>
                                        <span>{{UserCertificateStore.certificateImage.size/1000}}KB</span>
                                    </div>
                                    <div class="browse-logo">
                                        <img *ngIf="checkExtension(UserCertificateStore.certificateImage?.ext,'excel') != -1"
                                            src="/assets/images/md-xl.png">
                                        <img *ngIf="checkExtension(UserCertificateStore.certificateImage?.ext,'image') != -1"
                                            src="/assets/images/md-jpg.png">
                                        <img *ngIf="checkExtension(UserCertificateStore.certificateImage?.ext,'doc') != -1"
                                            src="/assets/images/md-doc.png">
                                        <img *ngIf="checkExtension(UserCertificateStore.certificateImage?.ext,'pdf') != -1"
                                            src="/assets/images/md-pdf.png">
                                        <img *ngIf="checkExtension(UserCertificateStore.certificateImage?.ext,'video') != -1"
                                            src="/assets/images/md-video.png">
                                        <img *ngIf="checkExtension(UserCertificateStore.certificateImage?.ext,'audio') != -1"
                                            src="/assets/images/md-audio.png">
                                        <img *ngIf="checkExtension(UserCertificateStore.certificateImage?.ext,'ppt') != -1"
                                            src="/assets/images/md-ppt.png">

                                    </div>
                                </div>
                                <div class="edit-option-show">
                                    <a [attr.title]="'delete'|translate"
                                        (click)="deleteCertificateImage()"><i
                                            class="fas fa-trash"></i></a>
                                </div>
                            </div>
                        </div>

                    </div>
                    <p style="color: red;" *ngIf="formErrors&&formErrors.name"> {{formErrors.name}}</p>

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>{{'certificate_name'|translate}}<sup>*</sup></label>
                                <input type="text" formControlName="certificate_name" class="form-control"
                                    [attr.placeholder]="'enter_certificate_name'|translate" id="title" #certificateNameInput>
                                <p class="form-error pt-1"
                                    *ngIf="certificateForm.value.certificate_name && certificateForm.value.certificate_name.length>500 && !formErrors">
                                    {{'maximum_500_characters'|translate}}</p>
                                <p class="form-error pt-1" *ngIf="formErrors&&formErrors.certificate_name">
                                    {{formErrors.certificate_name[0]}}</p>
                            </div>
                        </div>
                    </div>


                    <div class="clearfix"></div>

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="d-block justify-content-left border-0 mt-3">
                                <button type="submit" class="btn ordinary-btn mr-3 btn-active"
                                    (click)="saveCertificate()"
                                    [disabled]="certificateForm.invalid || AppStore.loading ||  (fileUploadProgress != 0 && fileUploadProgress != 100) || !UserCertificateStore.certificateImage">{{ AppStore.loading  ? getButtonText('loading') : getButtonText('save') }}</button>
                                <button type="button" data-toggle="modal" data-target="#signal-lost"
                                    class="btn ordinary-btn mr-3" (click)="saveCertificate(true)"
                                    [disabled]="certificateForm.invalid || AppStore.loading || (fileUploadProgress != 0 && fileUploadProgress != 100) || !UserCertificateStore.certificateImage">{{ AppStore.loading  ? getButtonText('loading') : getButtonText('save_close') }}</button>
                                <button type="button" data-toggle="modal" data-target="#error-message"
                                    class="btn ordinary-btn mr-2"
                                    (click)="closeCertificateFormModal()">{{ AppStore.loading  ? getButtonText('loading') : getButtonText('cancel') }}</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <!-- Modal footer -->
        </div>
    </div>
</div>
<!-- certificate modal end -->

<!-- preview component for image preview -->
<div class="modal modal-style-1 popup-full-width fade popup-new-type" id="add-three-popup" data-keyboard="false"
    data-backdrop="static" #filePreviewModal *mobxAutorun>
    <button type="button" class="close" data-dismiss="modal" (click)="closePreviewModal($event)"><i
            class="lni-close"></i><span>{{'esc'|translate}}</span></button>
    <app-previewcomponent
        *ngIf="previewObject && AuthStore.getActivityPermission(200,'PREVIEW_USER_CERTIFICATE_DOCUMENT_FILE')"
        [source]="previewObject" (close)="closePreviewModal($event)">
    </app-previewcomponent>
</div>
<!-- preview modal end -->


<!------------------- Delete Confirmation Modal Start --------------------------->

<div class="modal modal-style-1 fade" id="delete-popup" data-backdrop="static" data-keyboard="false" #deletePopup>
    <app-delete-popup [source]="deleteObject"></app-delete-popup>
</div>

<!------------------- Delete Confirmation Modal End --------------------------->