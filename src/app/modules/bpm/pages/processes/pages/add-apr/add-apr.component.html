<div #plainDev></div>
<nav class="edit-bar" data-toggle="affix" #navigationBar>

    <app-breadcrumb-menu></app-breadcrumb-menu>
    <app-sub-menu></app-sub-menu>

</nav>
<main class="mt-3 organization-page tab-btns-five">
    <div class="container-fluid">
        <div class="organization-form-page" *mobxAutorun>

            <form id="regForm" [formGroup]="form"
                class="organization-multi-stup-form issue-multi-stup-form two-line-head-form">
                <!-- Circles which indicates the steps of the form: -->
                <div id="header-sroll-form" class="form-indicates-sec clearfix" #formSteps>
                    <span class="step pointer" style="height: 80px;" (click)="changeStep(0)"><span
                            class="multi-form-nbr">1</span>{{'critical_process' | translate}} <br> {{'operation' |
                        translate}}</span>
                    <span class="step pointer" style="height: 80px;" (click)="changeStep(1)"><span
                            class="multi-form-nbr">2</span>{{'resource_level' | translate}} <br> {{'information' |
                        translate}}</span>
                    <!-- <span class="step pointer" style="height: 80px;" (click)="changeStep(2)"><span
                            class="multi-form-nbr">3</span>{{'app_tool'
                        | translate}}<br> </span> -->
                        <span class="step pointer" style="height: 80px;" (click)="changeStep(2)"><span
                            class="multi-form-nbr">3</span>{{'asset_mapping'
                        | translate}}<br> </span>
                    <span class="step pointer" style="height: 80px;" (click)="changeStep(3)"><span
                            class="multi-form-nbr">4</span>{{'dependencies' | translate}}<br> </span>
                    <span class="step pointer" style="height: 80px;" (click)="changeStep(4)"><span
                            class="multi-form-nbr">5</span>{{'vital_record' | translate}}<br> </span>
                </div>
                <!-- One "tab" for each step in the form: -->
                <div class="tab">
                    <!-- tab start -->

                    <div class="row">
                        <div class="col-sm-12">
                            
                            <h5 class="cmn-head-style"><span class="font-normal">{{'process' | translate}} -</span>
                                {{ProcessStore?.processDetails?.title}}</h5>
                        </div>
                        <br>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'normal_working_hours_from' | translate}}</label>
                                <div class="input-group">
                                    <input class="form-control" id="startId"
                                        formControlName="normal_working_hours_from" [owlDateTime]="dt1"
                                        [owlDateTimeTrigger]="dt1" placeholder="Select normal working hours from">
                                    <owl-date-time [pickerType]="'timer'" [hour12Timer]="true" #dt1></owl-date-time>
                                    <div class="input-group-append">
                                        <button class="btn ordinary-btn" [owlDateTimeTrigger]="dt1" id="startIdButton1"
                                            type="button"><i class="fas fa-clock"></i></button>

                                    </div>

                                </div>
                                <p class="pt-1" style="color: red;"
                                    *ngIf="formErrors && formErrors.normal_working_hours_from">
                                    {{formErrors.normal_working_hours_from}}</p>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'normal_working_hours_to' | translate}}</label>
                                <div class="input-group">
                                    <input class="form-control" id="startId2" formControlName="normal_working_hours_to"
                                        [owlDateTime]="dt2" [owlDateTimeTrigger]="dt2" placeholder="Select normal working hours to">
                                    <owl-date-time [pickerType]="'timer'" [hour12Timer]="true" #dt2></owl-date-time>
                                    <div class="input-group-append">
                                        <button class="btn ordinary-btn" [owlDateTimeTrigger]="dt2" id="startIdButton2"
                                            type="button"><i class="fas fa-clock"></i></button>

                                    </div>

                                </div>
                                <p class="pt-1" style="color: red;"
                                    *ngIf="formErrors && formErrors.normal_working_hours_to">
                                    {{formErrors.normal_working_hours_to}}</p>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'peak_period_from' | translate}}</label>
                                <div class="input-group">
                                    <input class="form-control" id="startId3" formControlName="peak_period_from"
                                        [owlDateTime]="dt3" [owlDateTimeTrigger]="dt3" placeholder="Select peak period from">
                                    <owl-date-time [pickerType]="'timer'" [hour12Timer]="true" #dt3></owl-date-time>
                                    <div class="input-group-append">
                                        <button class="btn ordinary-btn" [owlDateTimeTrigger]="dt3" id="startIdButton3"
                                            type="button"><i class="fas fa-clock"></i></button>

                                    </div>

                                </div>
                                <p class="pt-1" style="color: red;" *ngIf="formErrors && formErrors.peak_period_from">
                                    {{formErrors.peak_period_from}}</p>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'peak_period_to' | translate}}</label>
                                <div class="input-group">
                                    <input class="form-control" id="startId4" formControlName="peak_period_to" [min]="form?.value?.peak_period_from"
                                        [owlDateTime]="dt4" [owlDateTimeTrigger]="dt4" placeholder="Select peak period to">
                                    <owl-date-time [pickerType]="'timer'" [hour12Timer]="true" #dt4></owl-date-time>
                                    <div class="input-group-append">
                                        <button class="btn ordinary-btn" [owlDateTimeTrigger]="dt4" id="startIdButton4"
                                            type="button"><i class="fas fa-clock"></i></button>

                                    </div>

                                </div>
                                <p class="pt-1" style="color: red;" *ngIf="formErrors && formErrors.peak_period_to">
                                    {{formErrors.peak_period_to}}</p>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'process_operation_frequency' | translate}}</label>
                                <div class="clearfix d-flex">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [placeholder]="'process_operation_frequency_dropdown' | translate"
                                            [multiple]="false" formControlName="operation_freq"
                                            (search)="getOperationFrequency()" (open)="getOperationFrequency()"
                                            (change)="getOperationFrequency()">
                                            <ng-option [value]="operation_freq.id"
                                                *ngFor="let operation_freq of ProcessOperationFrequencyMasterStore.processOperationFrequency">
                                                {{operation_freq.title.length > 60 ?
                                                operation_freq.title.substring(0,60)+' ...' : operation_freq.title}}
                                            </ng-option>
                                        </ng-select>
                                        <p class="pt-1" style="color: red;"
                                            *ngIf="formErrors && formErrors.process_operation_frequency_id">
                                            {{formErrors.process_operation_frequency_id}}</p>
                                    </div>
                                    <button class="btn multi-add-user ml-2" (click)="addOperationFreq()" *ngIf = "AuthStore.getActivityPermission(100,'CREATE_PROCESS_OPERATION_FREQUENCY')"
                                        style="width: 42px;"><i class="fas fa-plus"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'process_operation_mode' | translate}}</label>
                                <div class="clearfix d-flex">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [placeholder]="'process_operation_mode_dropdown' | translate"
                                            [multiple]="false" searchable="true" formControlName="mode"
                                            (search)="getOperationModes()" (open)="getOperationModes()"
                                            (change)="getOperationModes()">
                                            <ng-option [value]="type.id"
                                                *ngFor="let type of OperationModesMasterStore.ProcessOperationModes">
                                                {{type.title.length > 50 ? type.title.substring(0,50)+'...' :
                                                type.title}}
                                            </ng-option>
                                        </ng-select>
                                        <p class="pt-1" style="color: red;" *ngIf="formErrors && formErrors.process_operation_mode_id">
                                            {{formErrors.process_operation_mode_id}}</p>
                                    </div>
                                    <button class="btn multi-add-user ml-2" (click)="addOperationMode()" *ngIf = "AuthStore.getActivityPermission(100,'CREATE_PROCESS_OPERATION_MODE')"
                                        style="width: 42px;"><i class="fas fa-plus"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'location' | translate}}</label>
                                <div class="clearfix d-flex">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [placeholder]="'location_dropdown'| translate" [multiple]="false"
                                            formControlName="location" (search)="getLocationMaster()"
                                            (open)="getLocationMaster()" (change)="getLocationMaster()">
                                            <ng-option [value]="location.id"
                                                *ngFor="let location of LocationMasterStore.allItems">
                                                {{location.title.length > 60 ? location.title.substring(0,60)+' ...' :
                                                location.title}}
                                            </ng-option>
                                        </ng-select>
                                        <p class="pt-1" style="color: red;" *ngIf="formErrors && formErrors.location_id">
                                            {{formErrors.location_id}}</p>
                                    </div>
                                    <!-- *ngIf="AuthStore.getActivityPermission(1100,'CREATE_ESKOM_INCIDENT_CLASSIFICATION')" -->
                                    <button class="btn multi-add-user ml-2" (click)="addLocation()" *ngIf = "AuthStore.getActivityPermission(100,'CREATE_LOCATION')"
                                        style="width: 42px;"><i class="fas fa-plus"></i></button>
                                </div>
                            </div>
                        </div>


                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'high_availabilty_status' | translate}}<span
                                        class="form-error">*</span></label>
                                <div class="clearfix d-flex">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [placeholder]="'high_availabilty_status_dropdown' | translate"
                                            [multiple]="false" searchable="true"
                                            formControlName="high_availabililty_status"
                                            (search)="getHighAvailablityStatus()" (open)="getHighAvailablityStatus()"
                                            (change)="getHighAvailablityStatus()">
                                            <ng-option [value]="type.id"
                                                *ngFor="let type of HighAvailabilityStatusMasterStore.HighAvailabilityStatus">
                                                {{type.title.length > 50 ? type.title.substring(0,50)+'...' :
                                                type.title}}
                                            </ng-option>
                                        </ng-select>
                                        <p class="pt-1" style="color: red;"
                                            *ngIf="formErrors && formErrors.high_availability_status_id">
                                            {{formErrors.high_availability_status_id}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'single_point_failure' | translate}}<span class="form-error">*</span></label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [placeholder]="'single_point_failure_dropdown' | translate" [multiple]="false"
                                            searchable="true" formControlName="is_single_point_of_failure">
                                            <ng-option [value]="type.id"
                                                *ngFor="let type of singlePointFailure">
                                                {{type.value.length > 50 ? type.value.substring(0,50)+'...' :
                                                type.value}}
                                            </ng-option>
                                        </ng-select>
                                        <p class="pt-1" style="color: red;"
                                            *ngIf="formErrors && formErrors.is_single_point_of_failure">
                                            {{formErrors.is_single_point_of_failure}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-sm-12" *ngIf="this.form?.value?.is_single_point_of_failure==1">
                            <div class="form-group">
                                <label>{{'description' | translate}} (If yes)</label>
                                <textarea class="form-control" rows="3" formControlName="cpo_description"
                                    [placeholder]="'description_cpo' | translate"></textarea>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- tab end -->
                <div class="tab">
                    <!-- tab start -->

                    <div class="row">
                        <div class="col-sm-12">
                            
                            <h5 class="cmn-head-style"><span class="font-normal">{{'process' | translate}} -</span>
                                {{ProcessStore?.processDetails?.title}}</h5>
                        </div>
                        <br>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'total_number_staff' | translate}}<span class="form-error">*</span></label>
                                <button type="button" (click)="showArciCount()" class="btn btn-active btn-small ml-3"
                                    data-toggle="modal" data-target="#show-arci-popup" style="margin-top: -5px;">ARCI</button>

                                <input type="text" class="form-control" formControlName="total_number_of_staff"
                                    placeholder="Enter total number of staff">
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label> {{'accessiblity' | translate}}</label>
                                <div class="clearfix d-flex">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [placeholder]="'accessiblity_dropdown' | translate" [multiple]="false"
                                            searchable="true" formControlName="accessibility"
                                            (search)="getProcessAccessibility()" (open)="getProcessAccessibility()"
                                            (change)="getProcessAccessibility()">
                                            <ng-option [value]="type.id"
                                                *ngFor="let type of ProcessAccessibilityMasterStore.ProcessAccessibility">
                                                {{type.title.length > 50 ? type.title.substring(0,50)+'...' :
                                                type.title}}
                                            </ng-option>
                                        </ng-select>
                                        <p class="pt-1" style="color: red;"
                                            *ngIf="formErrors && formErrors.process_accessibility_id">
                                            {{formErrors.process_accessibility_id}}</p>
                                    </div>
                                    <button class="btn multi-add-user ml-2" (click)="addAccessibilityModal()" *ngIf = "AuthStore.getActivityPermission(100,'CREATE_PROCESS_ACCESSIBILITY')"
                                        style="width: 42px;"><i class="fas fa-plus"></i></button>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="col-lg-12 col-sm-12">
                            <div class="form-group">
                                <label>{{'recovery_details' | translate}}</label>
                                <textarea class="form-control" formControlName="recovery_procedure_details" rows="3"
                                    [placeholder]="'recovery_details_rli' | translate"></textarea>
                            </div>
                        </div> -->
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'sla_status' | translate}}</label>
                                <div class="clearfix d-flex">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [placeholder]="'sla_status_dropdown' | translate" [multiple]="false"
                                            searchable="true" formControlName="sla_status" (search)="getSlaStatus()"
                                            (open)="getSlaStatus()" (change)="getSlaStatus()">
                                            <ng-option [value]="type.id"
                                                *ngFor="let type of SlaStatusesMasterStore.slaStatuses">
                                                {{type.sla_status_language.length > 50 ?
                                                type.sla_status_language.substring(0,50)+'...' :
                                                type.sla_status_language}}
                                            </ng-option>
                                        </ng-select>
                                        <p class="pt-1" style="color: red;"
                                            *ngIf="formErrors && formErrors.sla_status_id">
                                            {{formErrors.sla_status_id}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'primary_process_owner' | translate}}</label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="UsersStore.usersList" bindLabel="email" [multiple]="false"
                                            [placeholder]="'primary_process_owner_dropdown'|translate"
                                            formControlName="primary_process_owner" (clear)="getUsers()"
                                            (search)="searchUers($event)" (open)="getUsers()"
                                            autocomplete="new-password" [searchFn]="customSearchFn">

                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                <img *ngIf="item.image_token" class="ng-select-user-display" height="15"
                                                    width="15" [attr.src]="createImagePreview(item?.image_token)"
                                                    onerror="this.src='/assets/images/user-demo2.png'" />
                                                <img *ngIf="!item.image_token" class="ng-select-user-display"
                                                    height="15" width="15" [attr.src]="getDefaultImage('user-logo')" />
                                                <b style="padding-left: 3px;">{{getStringsFormatted([item.first_name,item.last_name],50,'
                                                    ') | titlecase}}</b><span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">×</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                <div class="user-post-department-pic">
                                                    <img *ngIf="item.image_token" class="ng-select-user-display"
                                                        height="25" width="25"
                                                        [attr.src]="createImagePreview(item?.image_token)"
                                                        onerror="this.src='/assets/images/user-demo2.png'" />
                                                    <img *ngIf="!item.image_token" class="ng-select-user-display"
                                                        height="25" width="25"
                                                        [attr.src]="getDefaultImage('user-logo')" />
                                                </div>
                                                <div class="user-post-department-div">
                                                    <b>{{getStringsFormatted([item.first_name,item.last_name],50,' ') |
                                                        titlecase}}</b>
                                                    <p class="user-post-department-multiple">
                                                        {{getStringsFormatted([item.designation_title,'
                                                        '+item.department],50,',')}}</p>
                                                </div>
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'secondary_process_owner' | translate}}</label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="UsersStore.usersList" bindLabel="email" [multiple]="false"
                                            [placeholder]="'secondary_process_owner_dropdown'|translate"
                                            formControlName="secondary_process_owner" (clear)="getUsers()"
                                            (search)="searchUers($event)" (open)="getUsers()"
                                            autocomplete="new-password" [searchFn]="customSearchFn">

                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                <img *ngIf="item.image_token" class="ng-select-user-display" height="15"
                                                    width="15" [attr.src]="createImagePreview(item?.image_token)"
                                                    onerror="this.src='/assets/images/user-demo2.png'" />
                                                <img *ngIf="!item.image_token" class="ng-select-user-display"
                                                    height="15" width="15" [attr.src]="getDefaultImage('user-logo')" />
                                                <b style="padding-left: 3px;">{{getStringsFormatted([item.first_name,item.last_name],50,'
                                                    ') | titlecase}}</b><span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">×</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                <div class="user-post-department-pic">
                                                    <img *ngIf="item.image_token" class="ng-select-user-display"
                                                        height="25" width="25"
                                                        [attr.src]="createImagePreview(item?.image_token)"
                                                        onerror="this.src='/assets/images/user-demo2.png'" />
                                                    <img *ngIf="!item.image_token" class="ng-select-user-display"
                                                        height="25" width="25"
                                                        [attr.src]="getDefaultImage('user-logo')" />
                                                </div>
                                                <div class="user-post-department-div">
                                                    <b>{{getStringsFormatted([item.first_name,item.last_name],50,' ') |
                                                        titlecase}}</b>
                                                    <p class="user-post-department-multiple">
                                                        {{getStringsFormatted([item.designation_title,'
                                                        '+item.department],50,',')}}</p>
                                                </div>
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'data_backup_owner' | translate}}</label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="UsersStore.usersList" bindLabel="email" [multiple]="false"
                                            [placeholder]="'data_backup_owner_dropdown'|translate"
                                            formControlName="data_backup_owner" (clear)="getUsers()"
                                            (search)="searchUers($event)" (open)="getUsers()"
                                            autocomplete="new-password" [searchFn]="customSearchFn">

                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                <img *ngIf="item.image_token" class="ng-select-user-display" height="15"
                                                    width="15" [attr.src]="createImagePreview(item?.image_token)"
                                                    onerror="this.src='/assets/images/user-demo2.png'" />
                                                <img *ngIf="!item.image_token" class="ng-select-user-display"
                                                    height="15" width="15" [attr.src]="getDefaultImage('user-logo')" />
                                                <b style="padding-left: 3px;">{{getStringsFormatted([item.first_name,item.last_name],50,'
                                                    ') | titlecase}}</b><span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">×</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                <div class="user-post-department-pic">
                                                    <img *ngIf="item.image_token" class="ng-select-user-display"
                                                        height="25" width="25"
                                                        [attr.src]="createImagePreview(item?.image_token)"
                                                        onerror="this.src='/assets/images/user-demo2.png'" />
                                                    <img *ngIf="!item.image_token" class="ng-select-user-display"
                                                        height="25" width="25"
                                                        [attr.src]="getDefaultImage('user-logo')" />
                                                </div>
                                                <div class="user-post-department-div">
                                                    <b>{{getStringsFormatted([item.first_name,item.last_name],50,' ') |
                                                        titlecase}}</b>
                                                    <p class="user-post-department-multiple">
                                                        {{getStringsFormatted([item.designation_title,'
                                                        '+item.department],50,',')}}</p>
                                                </div>
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-sm-12">
                            <div class="form-group">
                                <label>{{'remarks' | translate}}</label>
                                <textarea class="form-control" formControlName="rli_remark" rows="3"
                                    [placeholder]="'remarks_rli' | translate"></textarea>
                            </div>
                        </div>

                    </div>

                </div>
                
                <div class="tab">
                    <div class="row">
                    <div class="col-sm-12">
                            
                        <h5 class="cmn-head-style"><span class="font-normal">{{'process' | translate}} -</span>
                            {{ProcessStore?.processDetails?.title}}</h5>
                    </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-12">
                            <div class="processes-issue clearfix mb-3 ">
                                <h5><img src="assets/images/issue-processes.png">{{'choose_assets'|translate}}</h5>
                                <a data-toggle="modal" (click)="showAseetModal()" class="btn">{{'choose'|translate}}</a>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="row" *ngIf="AdvanceProcessStore.assets.length!=0 ">
                        <div class="col-sm-12">
                            <div class="panel-group panel-drop-sections panel-drop-white" id="jdn" role="tablist"
                                aria-multiselectable="true">
                                <div class="panel-group panel-drop-sections pt-0" id="cc" role="tablist"
                                    aria-multiselectable="true">
                                    <div class="panel panel-default edit-and-delete-main"
                                        *ngFor="let application of AdvanceProcessStore.assets;let num = index">
                                        <div class="edit-option-show" style="margin: 32px 27px 0 0;">
                                            <a title="Delete" (click)="deleteAssets(num)"><i
                                                    class="fas fa-trash pointer"></i></a>
                                            <a title="Edit" (click)="assetEdit(application)"><i
                                                    class="fas fa-pen pointer"></i></a>
                                        </div>
                                        <div class="pointer"
                                            [ngClass]="application.is_asset_active == true? 'panel-heading active' : 'panel-heading'"
                                            role="tab" id="activityHeader">
                                            <div class="panel-title">
                                                <a role="button" data-toggle="collapse" aria-expanded="true"
                                                    aria-controls="collapseOne"
                                                    (click)="assetAccordianClick(num)">
                                                    <h5 class="width96pc mt-0"> <span>{{num+1}}.</span>
                                                        <span>{{application.title}}</span><span
                                                            class="drop-down-icone"><i
                                                                class="fas fa-chevron-down"></i></span> </h5>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="drop-detail-sec"
                                            [ngClass]="application.is_asset_active == true? 'panel-collapse collapse show' : 'panel-collapse collapse'"
                                            role="tabpanel" aria-labelledby="activityHeader" #controlShow>
                                            <div class="panel-body bg-white pb-0">
                                                <div class="row">
                                                   
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'asset_type'|translate}}</h6>
                                                        <p>{{application.asset_type?application.asset_type?.title:AppStore.noContentText}}
                                                        </p>
                                                    </div>
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'asset' | translate}}</h6>
                                                        <p>{{application.title?application.title:AppStore.noContentText}}
                                                        </p>
                                                    </div>

                                                    <!-- <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'availability_maintane_contract' | translate}}</h6>
                                                        <p>{{application.maintainance_contract==1?'Yes':'No'}}</p>
                                                    </div> -->
                                                    <div class="col-sm-12">
                                                        <h6>{{'description' | translate}}</h6>
                                                        <p style="white-space:pre-wrap">{{application.description?application.description:AppStore.noContentText}}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
<!-- 
                <div class="tab">

                    <div class="row">
                        <div class="col-md-12">
                            <div class="processes-issue clearfix mb-3 ">
                                <h5><img src="assets/images/issue-processes.png">{{'choose_tools'|translate}}</h5>
                                <a data-toggle="modal" (click)="showAppTypeModal()" class="btn">{{'choose'|translate}}</a>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="row" *ngIf="AdvanceProcessStore.applicationFormTools.length!=0 ">
                        <div class="col-sm-12">
                            <div class="panel-group panel-drop-sections panel-drop-white" id="jdn" role="tablist"
                                aria-multiselectable="true">
                                <div class="panel-group panel-drop-sections pt-0" id="cc" role="tablist"
                                    aria-multiselectable="true">
                                    <div class="panel panel-default edit-and-delete-main"
                                        *ngFor="let application of AdvanceProcessStore.applicationFormTools;let num = index">
                                        <div class="edit-option-show" style="margin: 32px 27px 0 0;">
                                            <a title="Delete" (click)="deleteApp(num)"><i
                                                    class="fas fa-trash pointer"></i></a>
                                            <a title="Edit" (click)="applicationEdit(application)"><i
                                                    class="fas fa-pen pointer"></i></a>
                                        </div>
                                        <div class="pointer"
                                            [ngClass]="application.is_accordion_active == true? 'panel-heading active' : 'panel-heading'"
                                            role="tab" id="activityHeader">
                                            <div class="panel-title">
                                                <a role="button" data-toggle="collapse" aria-expanded="true"
                                                    aria-controls="collapseOne"
                                                    (click)="applicationAccordianClick(num)">
                                                    <h5 class="width96pc mt-0"> <span>{{num+1}}.</span>
                                                        <span>{{application.software_name}}</span><span
                                                            class="drop-down-icone"><i
                                                                class="fas fa-chevron-down"></i></span> </h5>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="drop-detail-sec"
                                            [ngClass]="application.is_accordion_active == true? 'panel-collapse collapse show' : 'panel-collapse collapse'"
                                            role="tabpanel" aria-labelledby="activityHeader" #controlShow>
                                            <div class="panel-body bg-white">
                                                <div class="row">
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>Type</h6>
                                                        <p>{{application.type?application.type:AppStore.noContentText}}
                                                        </p>
                                                    </div>
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'qty_in_use' | translate}}</h6>
                                                        <p>{{application.qty_in_use?application.qty_in_use:AppStore.noContentText}}
                                                        </p>
                                                    </div>

                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'availability_maintane_contract' | translate}}</h6>
                                                        <p>{{application.maintainance_contract==1?'Yes':'No'}}</p>
                                                    </div>
                                                    <div class="col-sm-12">
                                                        <h6>{{'reason_for_using_software' | translate}}</h6>
                                                        <p style="white-space:pre-wrap">{{application.pivot?.description?application.pivot?.description:AppStore.noContentText}}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div> -->
                <!-- tab end -->
                <!-- tab end -->
                <div class="tab">
                    <!-- tab start -->

                    <div class="row">
                        <div class="col-sm-12">
                            
                            <h5 class="cmn-head-style"><span class="font-normal">{{'process' | translate}} -</span>
                                {{ProcessStore?.processDetails?.title}}</h5>
                        </div>
                        <br>
                        <div class="col-lg-12 col-sm-12">
                            <div class="form-group">

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="processes-issue clearfix mb-3 ">
                                            <h5><img src="assets/images/issue-processes.png">{{'choose_dependent_process'|translate}}
                                            </h5>
                                            <a data-toggle="modal" (click)="showProcessModal()" class="btn">{{'choose'|translate}}</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel-group panel-drop-sections panel-drop-white" id="jdn" role="tablist"
                                    aria-multiselectable="true" *ngIf="relatedProcessArray.length!=0">
                                    <div class="panel-group panel-drop-sections pt-0" id="cc" role="tablist"
                                        aria-multiselectable="true">
                                        <div class="panel panel-default edit-and-delete-main"
                                            *ngFor="let process of relatedProcessArray;let num = index">
                                            <div class="edit-option-show" style="margin: 32px 27px 0 0;">
                                                <a title="Delete" (click)="deleteProcess(num,process.id)"><i class="fas fa-trash pointer"></i></a>
                                                <a title="Edit" (click)="showProcessModal()"><i class="fas fa-pen pointer"></i></a>                               
                                             </div>
                                            <div class="pointer"
                                                [ngClass]="process.is_accordion_active == true? 'panel-heading active' : 'panel-heading'"
                                                role="tab" id="activityHeader">
                                                <div class="panel-title">
                                                    <a role="button" data-toggle="collapse" aria-expanded="true"
                                                        aria-controls="collapseOne" (click)="accordianClick(num)">
                                                        <h5 class="width96pc mt-0">
                                                            <span>#{{process.related_process.reference_code}}</span> -
                                                            <span>{{process.related_process.title}}</span><span
                                                                class="drop-down-icone"><i
                                                                    class="fas fa-chevron-down"></i></span> </h5>
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="drop-detail-sec"
                                                [ngClass]="process.is_accordion_active == true? 'panel-collapse collapse show' : 'panel-collapse collapse'"
                                                role="tabpanel" aria-labelledby="activityHeader" #controlShow>
                                                <div class="panel-body bg-white">
                                                    <div class="row">
                                                        <div class="col-md-12"
                                                            *ngIf="process.dependancy_related_process_activities.length!=0">
                                                            <h6 class="mb-3 ">{{'process_activities'|translate}}</h6>
                                                            <div class="relative">
                                                                <div class="process-activity-main clearfix"
                                                                    *ngFor="let activity of process.dependancy_related_process_activities;let i=index">
                                                                    <div class="process-activities-left">
                                                                        <div class="activities-nbr-small" [ngClass]="process.dependancy_related_process_activities.length==i+1?'mb-0':''">{{i+1}}</div>
                                                                    </div>
                                                                    <div class="Process-activity">
                                                                        {{activity.title}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12"
                                                            *ngIf="process.dependancy_related_process_activities.length==0">
                                                            <app-no-data-list [source]="processEmptyList"
                                                                [height]="false" [border]=false>
                                                            </app-no-data-list>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- <div class="form-group">
                                <label>{{'description'|translate}}</label>
                                <textarea class="form-control" rows="3" formControlName="dependencies_description"
                                    [placeholder]="'dependencies_description_placeholder'|translate"></textarea>
                            </div> -->
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'internal_dependencies'|translate}}</label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [placeholder]="'select_internal_dependencies' | translate" multiple="true"
                                            formControlName="internal_dependencies" (search)="searchDepartment($event)"
                                            (clear)="getDepartment();" (open)="getDepartment()">
                                            <ng-option [value]="type.id"
                                                *ngFor="let type of DepartmentMasterStore.allItems">
                                                {{type.title}}
                                            </ng-option>
                                        </ng-select>
                                    </div>
                                    <p class="form-error pt-1" *ngIf="formErrors&&formErrors.department_id">
                                        {{formErrors.department_id}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label>{{'external_dependencies'|translate}}</label>
                                <div class="clearfix d-flex">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [placeholder]="'select_external_dependencies' | translate" multiple="true"
                                            formControlName="external_dependencies"
                                            (search)="getExternalDependencies($event)"
                                            (clear)="getExternalDependencies();" (open)="getExternalDependencies()">
                                            <ng-option [value]="type.id"
                                                *ngFor="let type of SuppliersMasterStore.suppliers">
                                                {{type.title.length > 50 ? type.title.substring(0,50)+'...' :
                                                type.title}}
                                            </ng-option>
                                        </ng-select>
                                    </div>
                                    <button class="btn multi-add-user ml-2" (click)="showSupplierModal()" *ngIf = "AuthStore.getActivityPermission(100,'CREATE_SUPPLIER')"
                                        style="width: 42px;"><i class="fas fa-plus"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- tab end -->
                <div class="tab">
                    <div class="row">
                    <!-- tab start -->
                    <div class="col-sm-12">
                            
                        <h5 class="cmn-head-style"><span class="font-normal">{{'process' | translate}} -</span>
                            {{ProcessStore?.processDetails?.title}}</h5>
                    </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="processes-issue clearfix mb-3 ">
                                <h5><img src="assets/images/issue-processes.png">{{'add_vital_record'|translate}}</h5>
                                <a data-toggle="modal" (click)="showVitalModal()" class="btn">{{'add'|translate}}</a>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row"
                        *ngIf="AdvanceProcessStore?.advanceProcessDiscovery?.process_vital_record?.length!=0">
                        <div class="col-sm-12">
                            <div class="panel-group panel-drop-sections panel-drop-white" id="jdn" role="tablist"
                                aria-multiselectable="true">
                                <div class="panel-group panel-drop-sections pt-0" id="cc" role="tablist"
                                    aria-multiselectable="true">
                                    <div class="panel panel-default edit-and-delete-main"
                                        *ngFor="let vital of AdvanceProcessStore.advanceProcessDiscovery?.process_vital_record;let num = index">
                                        <div class="edit-option-show" style="margin: 32px 27px 0 0;">
                                            <a title="Delete" (click)="deleteVital(vital.id)"><i
                                                    class="fas fa-trash pointer"></i></a>
                                            <a title="Edit" (click)="vitalRecordEdit(vital)"><i
                                                    class="fas fa-pen pointer"></i></a>
                                        </div>
                                        <div class="pointer"
                                            [ngClass]="vital.is_accordion_active == true? 'panel-heading active' : 'panel-heading'"
                                            role="tab" id="activityHeader">
                                            <div class="panel-title">
                                                <a role="button" data-toggle="collapse" aria-expanded="true"
                                                    aria-controls="collapseOne" (click)="vitalAccordianClick(num)">
                                                    <h5 class="width96pc mt-0"> <span>{{num+1}}.</span>
                                                        <span>{{vital.title}}</span><span class="drop-down-icone"><i
                                                                class="fas fa-chevron-down"></i></span> </h5>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="drop-detail-sec"
                                            [ngClass]="vital.is_accordion_active == true? 'panel-collapse collapse show' : 'panel-collapse collapse'"
                                            role="tabpanel" aria-labelledby="activityHeader" #controlShow>
                                            <div class="panel-body bg-white">
                                                <div class="row">
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'storage_type' | translate}}</h6>
                                                        <p>{{vital.storage_type?.title}}</p>
                                                    </div>
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'storage_location' | translate}}</h6>
                                                        <p>{{vital.storage_location?.title}}</p>
                                                    </div>
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'backup_storage' | translate}}</h6>
                                                        <p>{{vital.backup_storage_location?.title?vital.backup_storage_location?.title:'NA'}}
                                                        </p>
                                                    </div>
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'periodic_backup' | translate}}</h6>
                                                        <p>{{vital.periodic_backup?.title?vital.periodic_backup?.title:'NA'}}
                                                        </p>
                                                    </div>
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'frequancy_backup' | translate}}</h6>
                                                        <p>{{vital.backup_freequency?.title?vital.backup_freequency?.title:'NA'}}
                                                        </p>
                                                    </div>
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'backup_offsite' | translate}}</h6>
                                                        <p>{{vital.backup_at_offsite_status?.type?vital.backup_at_offsite_status?.type:'NA'}}
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-12">
                                                        <h6>{{'details_backup_offsite' | translate}}</h6>
                                                        <p>{{vital.offsite_backup_details?vital.offsite_backup_details:'NA'}}
                                                        </p>
                                                    </div>
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'advance_procees_discover_retention_policy_label' | translate}}</h6>
                                                        <p>{{vital.record_retension_policy?.title?vital.record_retension_policy?.title:'NA'}}
                                                        </p>
                                                    </div>
                                                    <!-- <div class="col-lg-6 col-sm-12">
                                                            <h6>Availability of storing documents in Fireproof Cabinet</h6>
                                                            <p>{{vital.availability_storing_documents.value}}</p>
                                                        </div> -->
                                                    <!-- <div class="col-lg-6 col-sm-12">
                                                            <h6>Recovery & verification Process </h6>
                                                            <p>{{vital.recovery_verififcarion_process.value}}</p>
                                                        </div> -->
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'single_point_failure' | translate}}</h6>
                                                        <p>{{vital.is_single_point_of_failure==1?'Yes':'No'}}</p>
                                                    </div>
                                                    <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'is_fireproof_cabin' | translate}}</h6>
                                                        <p>{{vital.is_fireproof_cabin==1?'Yes':'No'}}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- tab end -->
                <div style="overflow:auto;">
                    <div class="form-next-page-btns" style="float:left;">
                        <button class="btn btn-active" type="button" id="nextBtn"
                            [disabled]="AppStore.loading||!checkFormObject()"
                            (click)="nextPrev(1,true)">{{getButtonText(nextButtonText)}}</button>
                        <button class="btn" type="button" id="prevBtn" (click)="saveTabDetails()"
                            [disabled]="AppStore.loading||!checkFormObject()">{{getButtonText('save')}}</button>
                        <button class="btn" type="button" (click)="confirmCancel()">{{getButtonText('cancel')}}</button>
                    </div>
                </div>

            </form>
        </div>
    </div>
</main>

<div class="modal modal-style-1 fade" id="delete-popup" #cancelPopup data-backdrop="static" data-keyboard="false">
    <app-delete-popup [source]="confirmationObject"></app-delete-popup>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #locationMaster>
    <app-location-modal *ngIf="popupObject.type" [source]="popupObject">
    </app-location-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #operationFreq>
    <app-process-operation-frequency-modal *ngIf="popupObject.type" [source]="popupObject">
    </app-process-operation-frequency-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #operationMode>
    <app-process-operation-mode-modal *ngIf="popupObject.type" [source]="popupObject">
    </app-process-operation-mode-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #accessibilityModal>
    <app-process-accessibility-modal *ngIf="popupObject.type" [source]="popupObject">
    </app-process-accessibility-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #arciCountModal>
    <app-show-arci-count-matrix *ngIf="arciObject.type" [source]="arciObject">
    </app-show-arci-count-matrix>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #processModal>
    <app-choose-related-process *ngIf="popupObject.type=='dependencies'" [source]="popupObject">
    </app-choose-related-process>
</div>

<div class="modal modal-style-1 popup-full-width fade" style="overflow-y: scroll;z-index: 99999;" data-keyboard="false"
    data-backdrop="static" #appTypeModal>
    <app-app-type-add-modal *ngIf="applicationObject.type" [source]="applicationObject">
    </app-app-type-add-modal>
</div>
<div class="modal modal-style-1 popup-full-width fade" style="overflow-y: scroll;z-index: 99999;" data-keyboard="false"
    data-backdrop="static" #assetModal>
    <app-bpm-asset-modal *ngIf="assetObject.type" [source]="assetObject">
    </app-bpm-asset-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade show" data-keyboard="false" data-backdrop="static" #slaModal>
    <app-sla-contract-model *ngIf="popupObject.type != null" [source]="popupObject">
    </app-sla-contract-model>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #supplierModal>
    <app-suppliers-modal *ngIf="popupObject.type" [source]="popupObject">
    </app-suppliers-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" style="overflow-y: scroll;z-index: 99999;" data-keyboard="false"
    data-backdrop="static" #vitalModal>
    <app-add-vital-records *ngIf="vitalObject.type" [source]="vitalObject">
    </app-add-vital-records>
</div>