<button type="button" class="close" (click)="cancel()"><i class="lni-close"></i><span>{{'esc' |
        translate}}</span></button>

<div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content">
        <div class="modal-header">
            <!-- <h4 class="modal-title">{{strategyAreaSource?.value?.title}}</h4> -->
        </div>
        <!-- Modal body -->
        <div class="modal-body form-body">
            <p class="head-details"></p>
            <div class="row" *ngIf="StrategyMappingStore?.focusAreaDetailLoaded">
                <div class="col-sm-12">
                    <div class="widg-padding-cmn bg-white">
                        <div class="min-height-440">

                            <div class="issue-top-sec">
                                <div class="clearfix">
                                    <h5 class="d-inline-block cmn-head-style label-tag-style">
                                        {{StrategyMappingStore?.getFocusAreaDetails?.focus_area?.title}} <span
                                            class="draft-tag label-tag-style-tag label-left-arow-tag"
                                            style="line-height: 16px; vertical-align: middle; margin-top: -4px; display: inline-block;">
                                            {{StrategyMappingStore?.getFocusAreaDetails?.focus_area?.status?.title[0]?.pivot?.title}}</span>
                                    </h5>
                                </div>                              
                                <p>{{StrategyMappingStore?.getFocusAreaDetails?.focus_area?.description}}</p>                         
                            </div>

                            <div class="row">
                                <div class="col-lg-3 col-sm-6">
                                    <h6>{{'profile' | translate}}</h6>
                                    <p>{{StrategyMappingStore?.getFocusAreaDetails?.strategy_profile?.title}}</p>
                                </div>
                                <div class="col-lg-3 col-sm-6">
                                    <h6>{{'score' | translate}}</h6>
                                    <p>{{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction
                                        ? (StrategyMappingStore?.getFocusAreaDetails.score ?
                                        StrategyMappingStore?.getFocusAreaDetails?.score : AppStore.noContentText) :
                                        (StrategyMappingStore?.getFocusAreaDetails?.score ?
                                        (StrategyMappingStore?.getFocusAreaDetails.score | number : '1.0-0') :
                                        AppStore.noContentText)}}{{StrategyMappingStore?.getFocusAreaDetails?.score ?
                                        '%' : ''}}</p>
                                </div>
                                <div class="col-lg-3 col-sm-6">
                                    <h6>{{'weightage' | translate}}</h6>
                                    <p>{{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction
                                        ? (StrategyMappingStore?.getFocusAreaDetails.weightage ?
                                        StrategyMappingStore?.getFocusAreaDetails?.weightage : AppStore.noContentText) :
                                        (StrategyMappingStore?.getFocusAreaDetails?.weightage ?
                                        (StrategyMappingStore?.getFocusAreaDetails.weightage | number : '1.0-0') :
                                        AppStore.noContentText)}}{{StrategyMappingStore?.getFocusAreaDetails?.score ?
                                        '%' : ''}}</p>
                                </div>
                                <div class="col-lg-3 col-sm-6"
                                    [ngStyle]="{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_subsidiary ? 'none':'block'}">
                                    <h6>{{'subsidiary' | translate}}</h6>
                                    <p>{{StrategyMappingStore?.getFocusAreaDetails?.organizations ?
                                        getArrayFormatedString('title',StrategyMappingStore?.getFocusAreaDetails?.organizations)
                                        :
                                        AppStore.noContentText}}</p>
                                </div>
                                <div *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division"
                                    class="col-lg-3 col-sm-6">
                                    <h6>{{'division' | translate}}</h6>
                                    <p>{{StrategyMappingStore?.getFocusAreaDetails?.divisions?.length>0 ?
                                        getArrayFormatedString('title',StrategyMappingStore?.getFocusAreaDetails?.divisions):
                                        AppStore.noContentText}}
                                    </p>
                                </div>
                                <div *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_department"
                                    class="col-lg-3 col-sm-6">
                                    <h6>{{'department' | translate}}</h6>
                                    <p>{{StrategyMappingStore?.getFocusAreaDetails?.departments?.length>0 ?
                                        getArrayFormatedString('title',StrategyMappingStore?.getFocusAreaDetails?.departments)
                                        :
                                        AppStore.noContentText
                                        }}</p>
                                </div>
                                <div *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_section"
                                    class="col-lg-3 col-sm-6">
                                    <h6>{{'section' | translate}}</h6>
                                    <p>{{StrategyMappingStore?.getFocusAreaDetails?.sections?.length>0 ?
                                        getArrayFormatedString('title',StrategyMappingStore?.getFocusAreaDetails?.sections)
                                        :
                                        AppStore.noContentText}}
                                    </p>
                                </div>
                                <div *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_sub_section"
                                    class="col-lg-3 col-sm-6">
                                    <h6>{{'sub_section' | translate}}</h6>
                                    <p>{{StrategyMappingStore?.getFocusAreaDetails?.sub_sections?.length>0 ?
                                        getArrayFormatedString('title',StrategyMappingStore?.getFocusAreaDetails?.sub_sections)
                                        :
                                        AppStore.noContentText}}</p>
                                </div>
                                <div class="col-lg-3 col-sm-6">
                                    <div class="label-and-user-pic user-big-pic"  >
                                        <h6>{{'accountable_user' | translate}}</h6>              
                                        <div class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg" *ngIf="StrategyMappingStore?.getFocusAreaDetails?.accountable_user">
                                            <img [attr.src]="StrategyMappingStore?.getFocusAreaDetails?.accountable_user.image_token ? createImageUrl(StrategyMappingStore?.getFocusAreaDetails?.accountable_user.image_token) : getDefaultImage('user-logo')" 
                                            onerror = "this.src='/assets/images/user-demo2.png'" data-toggle="modal" data-target="#user500" class="rounded-circle rounde-hov details-show-popup" width="40px" height="40px">                                         
                                            <div class="new-size-text">
                                                <h6 class="d-flex">{{StrategyMappingStore?.getFocusAreaDetails?.accountable_user?.first_name}} {{StrategyMappingStore?.getFocusAreaDetails?.accountable_user?.last_name}}</h6>
                                                <span>{{StrategyMappingStore?.getFocusAreaDetails?.accountable_user?.designation?.title}}</span>
                                            </div> 
                                        </div>
                                    </div>
                                    <div *ngIf="!StrategyMappingStore?.getFocusAreaDetails?.accountable_user">
                                        {{AppStore.noContentText}}</div>
                                </div>
                            </div>
                            <div class="row">

                                <div class="col-xl-3 col-lg-4 col-sm-6">
                                    <h6>{{'objectives' | translate}}</h6>
                                    <ul class="arrowlist mt-0 p-0" *ngIf="StrategyMappingStore?.getFocusAreaDetails?.objectives?.length > 0">
                                        <li
                                            *ngFor="let objectives of StrategyMappingStore?.getFocusAreaDetails?.objectives">
                                            {{objectives?.objective?.title}}</li>
                                    </ul>
                                    <p *ngIf="StrategyMappingStore?.getFocusAreaDetails?.objectives?.length == 0">{{AppStore.noContentText}}</p>
                                </div>
                                <div class="col-xl-3 col-lg-4 col-sm-6">
                                    <h6>{{'themes' | translate}}</h6>
                                    <ul class="arrowlist mt-0 p-0" *ngIf="StrategyMappingStore?.getFocusAreaDetails?.themes?.length > 0">
                                        <li *ngFor="let themes of StrategyMappingStore?.getFocusAreaDetails?.themes">
                                            {{themes?.title}}</li>
                                    </ul>
                                    <p *ngIf="StrategyMappingStore?.getFocusAreaDetails?.themes?.length == 0">{{AppStore.noContentText}}</p>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xl-12">
                                <hr>
                                <div class="d-flex flex-row user-list-sm">
                                    <!-- <app-user-popup-box
                                        [source]="getPopupDetails(StrategyMappingStore?.getFocusAreaDetails.created_by,StrategyMappingStore?.getFocusAreaDetails.created_at)"
                                        [showName]="true" [activateButtons]="false">
                                    </app-user-popup-box> -->
                                    
                                    <img [attr.src]="StrategyMappingStore?.getFocusAreaDetails.created_by.image?.token ? createImageUrl(StrategyMappingStore?.getFocusAreaDetails.created_by?.image?.token) : getDefaultImage('user-logo')" 
                                        onerror = "this.src='/assets/images/user-demo2.png'" width="40px" height="40px" class="rounded-circle">
                                    <div>
                                        <h6>{{StrategyMappingStore?.getFocusAreaDetails.created_by?.first_name}} 
                                            {{StrategyMappingStore?.getFocusAreaDetails.created_by?.last_name}}
                                        </h6>
                                        <span>{{StrategyMappingStore?.getFocusAreaDetails?.created_by?.designation}} | Created on {{StrategyMappingStore?.getFocusAreaDetails.created_at|date:
                                            OrganizationGeneralSettingsStore.organizationSettings?.date_format}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <app-mapping-focus-area-info-loader *ngIf="!StrategyMappingStore?.focusAreaDetailLoaded"></app-mapping-focus-area-info-loader>
        </div>
        <!-- Modal footer -->
    </div>
</div>
 
