<button type="button" class="close" (click)="cancel()"><i class="lni-close"></i><span>{{'esc' |
        translate}}</span></button>

<div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content">
        <div class="modal-header">
        </div>
        <div class="modal-body form-body">
            <p class="head-details"></p>
            <div class="row">
                <div class="col-sm-12">
                    <div class="bg-white widg-padding-cmn" *ngIf="StrategyInitiativeStore.induvalInitiativeLoaded">
                        <div >

                            <div class="issue-top-sec">
                                <div class="clearfix">
                                    <h5 class="d-inline-block cmn-head-style label-tag-style"><span
                                            class="issue-smoal-head-text">#{{StrategyInitiativeStore.induvalInitiative?.reference_code}}</span>{{StrategyInitiativeStore.induvalInitiative?.strategy_initiative_action?.title
                                        ? StrategyInitiativeStore.induvalInitiative?.strategy_initiative_action?.title :
                                        ''}} {{StrategyInitiativeStore.induvalInitiative?.title ?
                                        StrategyInitiativeStore.induvalInitiative?.title : AppStore.noContentText
                                        }}<span
                                            class="draft-tag label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one ml-3">{{StrategyInitiativeStore.induvalInitiative?.strategy_initiative_status
                                            ?
                                            StrategyInitiativeStore.induvalInitiative?.strategy_initiative_status?.language[0].pivot.title
                                            : 'NA' }}</span></h5>
                                </div>
                                <div class="clearfix">
                                    <p class="label-tag-style mb-2"><i
                                            class="fas fa-calendar-alt date-pics-two"></i>{{StrategyInitiativeStore.induvalInitiative?.start_date
                                        | date:
                                        OrganizationGeneralSettingsStore.organizationSettings?.date_format}} -
                                        {{StrategyInitiativeStore.induvalInitiative?.end_date | date:
                                        OrganizationGeneralSettingsStore.organizationSettings?.date_format}} </p>
                                </div>
                                <p style="white-space: pre-wrap;">
                                    {{StrategyInitiativeStore.induvalInitiative?.description ?
                                    StrategyInitiativeStore.induvalInitiative?.description : AppStore.noContentText }}
                                </p>

                                <h5 class="mb-4" style="font-weight: 600;">{{'budget' | translate}} :
                                    {{OrganizationGeneralSettingsStore?.organizationSettings?.currency}}
                                    {{StrategyInitiativeStore.induvalInitiative?.budget ?
                                    StrategyInitiativeStore.induvalInitiative?.budget : AppStore.noContentText }} </h5>

                            </div>

                            <div class="row">
                                <div class="col-lg-4 col-sm-6">
                                    <h6>{{'strategy_profile' | translate}}</h6>
                                    <p>{{StrategyInitiativeStore.induvalInitiative?.strategy_profile ?
                                        StrategyInitiativeStore.induvalInitiative?.strategy_profile?.title :
                                        AppStore.noContentText }}</p>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xl-3 col-lg-4 col-sm-6"
                                    *ngIf="StrategyInitiativeStore.induvalInitiative?.strategy_profile_objectives?.length > 0 && OrganizationModulesStore.checkIndividualSubModule(3200,53101)">
                                    <h5 class="cmn-head-style mb-3">{{'objective' | translate}}</h5>
                                    <ul class="arrowlist mt-0 p-0">
                                        <li
                                            *ngFor="let objective of StrategyInitiativeStore.induvalInitiative?.strategy_profile_objectives">
                                            {{objective?.objective?.title}}</li>
                                    </ul>
                                </div>
                                <div class="col-xl-3 col-lg-4 col-sm-6"
                                    *ngIf="StrategyInitiativeStore.induvalInitiative?.kpis?.length > 0">
                                    <h5 class="cmn-head-style mb-3">{{'kpi' | translate}}</h5>
                                    <ul class="arrowlist pl-0 mt-0">
                                        <li *ngFor="let data of StrategyInitiativeStore.induvalInitiative?.kpis">
                                            {{data.kpi ? data.kpi?.title : AppStore.noContentText }}</li>
                                    </ul>
                                </div>
                                <div class="col-xl-3 col-lg-4 col-sm-6"
                                    *ngIf="StrategyInitiativeStore.induvalInitiative?.strategy_profile_focus_areas?.length > 0">
                                    <h5 class="cmn-head-style mb-3">{{'focus_area' | translate}}</h5>
                                    <ul class="arrowlist mt-0 p-0">
                                        <li
                                            *ngFor="let focus of StrategyInitiativeStore.induvalInitiative?.strategy_profile_focus_areas">
                                            {{focus?.focus_area?.title}}</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xl-3 col-lg-4 col-sm-6">
                                    <h6>{{'target' | translate}} </h6>
                                    <p>{{StrategyInitiativeStore.induvalInitiative?.target ?
                                        StrategyInitiativeStore.induvalInitiative?.target : AppStore.noContentText }}
                                    </p>
                                </div>
                                <div class="col-xl-3 col-lg-4 col-sm-6">
                                    <h6>{{'target_value' | translate}}</h6>
                                    <p>{{StrategyInitiativeStore.induvalInitiative?.target_unit_id ?
                                        StrategyInitiativeStore.induvalInitiative?.target_unit_id?.title :
                                        AppStore.noContentText }}</p>
                                </div>
                                <div class="col-xl-3 col-lg-4 col-sm-6"
                                    *ngIf="StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage">
                                    <h6>{{'weightage' | translate}}</h6>
                                    <p>{{StrategyInitiativeStore.induvalInitiative?.weightage ? (
                                        StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction
                                        ? StrategyInitiativeStore.induvalInitiative?.weightage :
                                        (StrategyInitiativeStore.induvalInitiative?.weightage | number : '1.0-0')) :
                                        AppStore.noContentText}}%</p>
                                </div>
                                <div class="col-xl-3 col-lg-4 col-sm-6"
                                    [ngStyle]="{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_subsidiary ? 'none':'block'}">
                                    <h6>{{'subsidiary' | translate}}</h6>
                                    <p>{{StrategyInitiativeStore.induvalInitiative?.organizations ?
                                        getArrayFormatedString('title',StrategyInitiativeStore.induvalInitiative?.organizations)
                                        : AppStore.noContentText }}</p>
                                </div>
                                <div class="col-xl-3 col-lg-4 col-sm-6"
                                    *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division">
                                    <h6>{{'division' | translate}}</h6>
                                    <p>{{StrategyInitiativeStore.induvalInitiative?.divisions ?
                                        getArrayFormatedString('title',StrategyInitiativeStore.induvalInitiative?.divisions)
                                        : AppStore.noContentText }}</p>
                                </div>
                                <div class="col-xl-3 col-lg-4 col-sm-6"
                                    *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_department">
                                    <h6>{{'department' | translate}}</h6>
                                    <p>{{StrategyInitiativeStore.induvalInitiative?.departments ?
                                        getArrayFormatedString('title',StrategyInitiativeStore.induvalInitiative?.departments)
                                        : AppStore.noContentText }}</p>
                                </div>
                                <div class="col-xl-3 col-lg-4 col-sm-6"
                                    *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_section">
                                    <h6>{{'section' | translate}}</h6>
                                    <p>{{StrategyInitiativeStore.induvalInitiative?.sections ?
                                        getArrayFormatedString('title',StrategyInitiativeStore.induvalInitiative?.sections)
                                        : AppStore.noContentText }}</p>
                                </div>
                                <div class="col-xl-3 col-lg-4 col-sm-6"
                                    *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_sub_section">
                                    <h6>{{'sub_section' | translate}}</h6>
                                    <p>{{StrategyInitiativeStore.induvalInitiative?.sub_sections ?
                                        getArrayFormatedString('title',StrategyInitiativeStore.induvalInitiative?.sub_sections)
                                        : AppStore.noContentText }}</p>
                                </div>

                                <div class="col-xl-3 col-lg-4 col-sm-6">
                                    <h6>{{'review_frequency' | translate}}</h6>
                                    <p>{{StrategyInitiativeStore.induvalInitiative?.strategy_review_frequency ?
                                        StrategyInitiativeStore.induvalInitiative?.strategy_review_frequency?.strategy_kpi_data_type_language[0].pivot.title
                                        : AppStore.noContentText }}</p>
                                </div>
                            </div>
                        </div>
                        <h6>{{'responsible_user' | translate}}</h6>
                        <div class="row">
                            <div class="col-xl-3 col-lg-4 col-sm-6"
                                *ngFor=" let user of StrategyInitiativeStore.induvalInitiative?.responsible_users">
                                <!-- <div class="label-and-user-pic">
                                    <div
                                        class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
                                        <app-user-popup-box [source]="getPopupDetails(user)" [showName]="true"
                                            [activateButtons]="false">
                                        </app-user-popup-box>
                                    </div>
                                </div> -->
                                <div class="label-and-user-pic" >
                                    <div class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
                                        <img [attr.src]="(user?.image_token || user?.image?.token) ? createImageUrl(user.image_token ? user?.image_token : user?.image?.token) : getDefaultImage('user-logo')" onerror = "this.src='/assets/images/user-demo2.png'" data-toggle="modal" data-target="#user500" class="rounded-circle rounde-hov details-show-popup" width="40px" height="40px">
                                        
                                        <div class="new-size-text">
                                            <h6 class="d-flex">{{user.first_name ? user.first_name : user.created_by_first_name}} {{user.last_name ? user.last_name : user.created_by_last_name}}</h6>
                                            <span>{{user.designation_title ? user.designation_title : user?.designation?.title}}</span>
                                        </div> 
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- <h6>{{'review_users' | translate}}</h6>
                        <div class="row">
                          <div class="col-xl-3 col-lg-4 col-sm-6" *ngFor=" let user of StrategyInitiativeStore.induvalInitiative?.review_users">
                             <div class="label-and-user-pic">
                                <div  class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
                                <app-user-popup-box [source]="getPopupDetails(user)" [showName]="true" [activateButtons]="false">
                                </app-user-popup-box>
                                 </div>
                            </div>
                          </div>
                        </div> -->
                        <div class="row">
                            <div class="col-xl-12">
                                <hr>
                                <div *ngIf="AuthStore.user" class="d-flex flex-row user-list-sm">
                                    <!-- <app-user-popup-box [source]="getPopupDetails(AuthStore.user,true)"
                                        [showName]="true" [activateButtons]="false">
                                    </app-user-popup-box> -->
                                    <img [attr.src]="StrategyInitiativeStore.induvalInitiative.created_by.image?.token ? createImageUrl(StrategyInitiativeStore.induvalInitiative.created_by?.image?.token) : getDefaultImage('user-logo')" 
                                        onerror = "this.src='/assets/images/user-demo2.png'" width="40px" height="40px" class="rounded-circle">
                                    <div>
                                        <h6>{{StrategyInitiativeStore.induvalInitiative.created_by?.first_name}} 
                                            {{StrategyInitiativeStore.induvalInitiative.created_by?.last_name}}
                                        </h6>
                                        <span>{{StrategyInitiativeStore.induvalInitiative?.created_by?.designation}} | Created on {{StrategyInitiativeStore.induvalInitiative.created_at|date:
                                            OrganizationGeneralSettingsStore.organizationSettings?.date_format}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!----------------------- History ----------------------->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #historyPopup>
    <app-initiative-activity-history-popup *ngIf="historyObject.type" [source]="historyObject">
    </app-initiative-activity-history-popup>
 </div>