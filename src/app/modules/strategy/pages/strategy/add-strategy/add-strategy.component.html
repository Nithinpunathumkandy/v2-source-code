<div #plainDev></div>
<nav class="edit-bar" data-toggle="affix" #navBar>
    <app-breadcrumb-menu></app-breadcrumb-menu>
    <app-sub-menu>-</app-sub-menu>
</nav>
<main class="mt-3 organization-page" *mobxAutorun>
    <div class="container-fluid">
        <div class="organization-form-page">
            <form id="regForm" [formGroup]="strategyForm" class="organization-multi-stup-form issue-multi-stup-form">
                <!-- Circles which indicates the steps of the form: -->
                <div id="header-sroll-form" class="form-indicates-sec clearfix" #formSteps>
                    <span class="step pointer" (click)="changeStep(0)"><span class="multi-form-nbr">1</span>{{'info' |
                        translate}}</span>
                    <span class="step pointer" (click)="changeStep(1)"><span
                            class="multi-form-nbr">2</span>{{'horizon_scanning' | translate}}</span>
                    <span class="step pointer" (click)="changeStep(2)" *ngIf="OrganizationModulesStore.checkIndividualSubModule(3200,53001)"><span
                            class="multi-form-nbr">3</span>{{'focus_area' | translate}}</span>
                    <span class="step pointer" (click)="changeStep(3)" *ngIf="OrganizationModulesStore.checkIndividualSubModule(3200,53101)"><span
                            class="multi-form-nbr">4</span>{{'objectives' | translate}}</span>
                    <span class="step pointer" (click)="changeStep(4)"><span
                            class="multi-form-nbr">5</span>{{'preview' | translate}}</span>
                </div>
                <!-- One "tab" for each step in the form: -->
                <div class="tab">
                    <!-- tab start -->
                    <div class="row">




                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="name">{{'title' | translate}}<span class="form-error">*</span></label>
                                <div class="plain-select input-add-report">
                                    <input type="text" class="form-control" formControlName="title"
                                        [placeholder]="'sm_title_place_holder'| translate">
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.title">{{formErrors.title[0]}}
                                </p>

                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="name">{{'description' | translate}}</label>
                                <textarea class="form-control" formControlName="description" rows="3" id="comment"
                                    [placeholder]="'sm_description_placeholder'| translate"></textarea>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.description">
                                    {{formErrors.description}}
                                </p>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="name">{{'start_date' | translate}}<span class="form-error">*</span></label>
                                <!-- <div class="input-group date-picker">
                                    <input class="form-control cal3" placeholder="Enter Field Name">
                                </div> -->
                                <div class="input-group">
                                    <!-- (focus) = "d.toggle()" -->
                                    <input class="form-control" id="start_date"
                                        [placeholder]="'select_start_date' | translate" name="start_date" ngbDatepicker
                                        #s="ngbDatepicker" formControlName="start_date"
                                        [minDate]="{year: 1950, month: 1, day: 1}">
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-secondary calendar" (click)="s.toggle()"
                                            type="button"><i class="fas fa-calendar-alt"></i></button>
                                    </div>
                                    <p class="form-error pt-1" *ngIf="formErrors && formErrors.start_date">
                                        {{formErrors.start_date}}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="name">{{'end_date' | translate}}<span class="form-error">*</span></label>
                                <!-- <div class="input-group date-picker">
                                    <input class="form-control cal4" placeholder="Enter Field Name">
                                </div> -->
                                <div class="input-group">
                                    <!-- (focus) = "d.toggle()" -->
                                    <input class="form-control" id="end_date"
                                        [placeholder]="'select_end_date' | translate" name="end_date" ngbDatepicker
                                        #e="ngbDatepicker" formControlName="end_date"
                                        [minDate]="strategyForm.value.start_date">
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-secondary calendar" (click)="e.toggle()"
                                            type="button"><i class="fas fa-calendar-alt"></i></button>
                                    </div>
                                    <p class="form-error pt-1" *ngIf="formErrors && formErrors.end_date">
                                        {{formErrors.end_date}}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="name">{{'budget' |
                                    translate}}({{OrganizationGeneralSettingsStore?.organizationSettings?.currency}})</label>
                                <div class="plain-select input-add-report">
                                    <input type="text" class="form-control" formControlName="budget"
                                        [placeholder]="'sm_budget_placeholder' | translate">
                                    <p class="form-error pt-1"
                                        *ngIf="strategyForm?.get('budget').invalid && strategyForm.value.budget">
                                        {{'numeric_value' | translate}}</p>
                                    <p class="form-error pt-1" *ngIf="formErrors && formErrors.budget">
                                        {{formErrors.budget}}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="name">{{'accountable_user' | translate}}</label>
                                <div class="clearfix">
                                    <div class="multiple-plain-ngselect">
                                        <ng-select [items]="UsersStore.usersList" bindLabel="email"
                                            [placeholder]="'select_accountable_user' | translate"
                                            formControlName="accountable_user_id" [multiple]="false"
                                            (clear)="getUsers()" (search)="searchUsers($event)" multiple="false"
                                            (open)="getUsers()" [searchFn]="customSearchFn">
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                <img *ngIf="item?.image_token" class="ng-select-user-display"
                                                    height="15" width="15"
                                                    [attr.src]="createImagePreview('user-profile-picture',item?.image_token)"
                                                    onerror="this.src='/assets/images/user-demo2.png'" />
                                                <img *ngIf="!item?.image_token" class="ng-select-user-display"
                                                    height="15" width="15"  [attr.src]="getDefaultImage('user-logo')" />
                                                <b style="padding-left: 3px;">{{getStringsFormatted([item.first_name,item.last_name],50,'
                                                    ') |
                                                    titlecase}}</b><span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">×</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                <div class="user-post-department-pic">
                                                    <img *ngIf="item?.image_token" class="ng-select-user-display"
                                                        height="25" width="25"
                                                        [attr.src]="createImagePreview('user-profile-picture',item?.image_token)"
                                                        onerror="this.src='/assets/images/user-demo2.png'" />
                                                    <img *ngIf="!item?.image_token" class="ng-select-user-display"
                                                        height="25" width="25"
                                                        [attr.src]="getDefaultImage('user-logo')" />
                                                </div>
                                                <div class="user-post-department-div">
                                                    <b>{{getStringsFormatted([item.first_name,item.last_name],35,' ') |
                                                        titlecase}}</b>
                                                    <p class="user-post-department-multiple">
                                                        {{getStringsFormatted([item.designation_title,'
                                                        '+item.department],35,',')}}</p>
                                                </div>
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.accountable_user_id">
                                    {{formErrors.accountable_user_id}}</p>
                            </div>
                        </div>

                        <div class="col-lg-6 col-sm-12">
                            <div class="form-group">
                                <label for="name">{{'review_users' | translate}}<span
                                        class="form-error">*</span></label>
                                <div class="clearfix">
                                    <div class="dropdown-filter">
                                        <div class="multiple-plain-ngselect">
                                            <ng-select [items]="UsersStore.usersList" bindLabel="email" multiple="true"
                                                formControlName="review_user_ids"
                                                [placeholder]="'select_review_users' | translate"
                                                (search)="searchUsers($event)" (open)="getUsers()"
                                                [searchFn]="customSearchFn">
                                                <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                    <img class="ng-select-user-display"
                                                        *ngIf="item.image?.token||item.image_token" height="15" width="15"
                                                        [attr.src]="item.image?.token?createImageUrl('user-profile-picture',item.image?.token):createImageUrl('user-profile-picture',item.image_token)" onerror = "this.src='/assets/images/user-demo2.png'" />
                                                    <img class="ng-select-user-display"
                                                        *ngIf="!item.image?.token && !item.image_token" height="15" width="15"
                                                        [attr.src]="getDefaultImage('user-logo')"  />
                                                    <b style="padding-left: 3px;">{{getStringsFormatted([item.first_name,item.last_name],300,'
                                                        ') | titlecase}}</b><span aria-hidden="true" (click)="clear(item)"
                                                        style="border:none;" class="ng-value-icon left">×</span>
                                                </ng-template>
                                                <ng-template ng-option-tmp let-item="item" let-index="index">
                                                    <div class="user-post-department-pic">
                                                        <img *ngIf="item.image_token" class="ng-select-user-display"
                                                            height="25" width="25"
                                                            [attr.src]="createImageUrl('user-profile-picture',item.image_token)"
                                                            onerror="this.src='/assets/images/user-demo2.png'" />
                                                        <img *ngIf="!item.image_token" class="ng-select-user-display"
                                                            height="25" width="25"
                                                            [attr.src]="getDefaultImage('user-logo')" />
                                                    </div>
                                                    <div class="user-post-department-div">
                                                        <b>{{getStringsFormatted([item.first_name,item.last_name],50,'
                                                            ') | titlecase}}</b>
                                                        <p class="user-post-department-multiple">
                                                            {{getStringsFormatted([item.designation_title,'
                                                            '+item.department],30,',')}}
                                                        </p>
                                                    </div>
                                                </ng-template>
                                            </ng-select>
                                        </div>
                                    </div>
                                    <p class="form-error pt-1" *ngIf="formErrors && formErrors.review_user_ids">
                                        {{formErrors.review_user_ids}}</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="name">{{'strategy_theme' | translate}}</label>
                                <div class="clearfix d-flex">
                                    <div class="multiple-plain-ngselect w-100">
                                        <ng-select [items]="StrategicThemesMasterStore?.allItems"
                                            [placeholder]="'strategy_profile_select_theme_placeholder' | translate"
                                            formControlName="theme_ids" (search)="searchTheme($event)"
                                            (open)="getTheme()" bindLabel="title" multiple="true">
                                            <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                {{item.title?.length > 60 ? (item.title | slice:0:60)+' ...' :
                                                item.title}}<span aria-hidden="true" (click)="clear(item)"
                                                    style="border:none;" class="ng-value-icon left">×</span>
                                            </ng-template>
                                            <ng-template ng-option-tmp let-item="item" let-index="index">
                                                {{item.title?.length > 80 ? (item.title | slice:0:80)+' ...' :
                                                item.title}}
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                    <button class="btn multi-add-user ml-2" style="width: 42px;"
                                        (click)="strategyThemeAdd()"><i class="fas fa-plus"></i></button>
                                </div>
                                <p class="form-error pt-1" *ngIf="formErrors && formErrors.theme_ids">
                                    {{formErrors.theme_ids}}</p>
                            </div>
                        </div>

                        <div class="col-lg-12 col-sm-12">
                            <div class="form-group">
                                <a class="text-light-blue" data-toggle="modal" (click)="organisationChanges()"
                                    style="border-bottom: 1px solid;">{{'change_organization_unit' | translate}}<span
                                        class="form-error">*</span></a>
                            </div>
                        </div>

                        <div class="col-lg-12 col-sm-12">
                            <div class="form-group">
                                <div class="Preview-checkbox clearfix">
                                    <label class="container2 float-left pl-4 mb-0 font-normal"
                                        style="font-size: 15px; padding-top: 2px; display: inline-block;">
                                        <input type="checkbox" [checked]="strategyForm.value.is_default"
                                            (change)="setDefaultProfile($event)">
                                        <span class="checkmark mt-1"></span> {{'default_profile'|translate}}?</label>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <label class="label-style mb-0">{{'sm_profile_icon' | translate}}</label>
                            <div class="scroll-documents" #uploadArea>
                                <div class="row m-0 upload-section" style="padding-top: 0">
                                    <div class="col-sm-2 col-lg-3 costmz-logo-new mt-2">

                                        <div class="question-circle-inp" style="margin-right: 7px;">
                                            <i class="far fa-question-circle"></i>
                                            <div class="message-password-inp">
                                                <p class="mb-0">{{'allowed_file_types' | translate}}
                                                    {{OrganizationGeneralSettingsStore.organizationSettings?.logo_allowed_types.toString()}}
                                                </p>
                                            </div>
                                        </div>
                                        <div class="form-group form-group-upload">
                                            <div class="darag-dropifile-upload">
                                                <div
                                                    class="d-flex justify-content-center align-items-center text-center">
                                                    <div>
                                                        <img src="assets/images/drag-pic.png" class="drag-pic-files">
                                                        <div class="drag-file-name">{{'drag_drop_file_here' |
                                                            translate}}</div>
                                                        <div class="upload-btn-wrapper">
                                                            <input id="file" type="file" name="myfile"
                                                                (change)="onFileChange($event,'logo')"
                                                                [accept]="checkAcceptFileTypes('logo')" />
                                                            <button class="btn">{{'browse_files' | translate}}</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div [ngClass]="files.success? 'col-sm-2 col-lg-3 up-pic-cf mt-2 hide_loader' : 'col-sm-2 col-lg-3 up-pic-cf mt-2'"
                                        *ngFor="let files of fileUploadsArray">
                                        <div class="upload-pics edit-option file-upload-loader">
                                            <circle-progress class="browse-form-pic" [percent]=files.uploadProgress
                                                [title]=files.uploadProgress>
                                            </circle-progress>
                                        </div>
                                    </div>

                                    <div [ngClass]="StrategyStore.docDetails?.is_deleted ? 'col-sm-2 col-lg-3 up-pic-cf mt-2 image_deleted':'col-sm-2 col-lg-3 up-pic-cf mt-2'"
                                        *ngIf="StrategyStore.docDetails">
                                        <div class="upload-pics edit-option">
                                            <div class="browse-form-pic"
                                                [ngStyle]="{'background': 'url(' + StrategyStore.docDetails?.preview + ') no-repeat 0 0 / cover'}">
                                            </div>
                                            <!-- <div *ngIf="!StrategyStore.docDetails?.preview" class="browse-form-pic"
                                            [ngStyle]="{'background': 'url(' + createImageUrl('investigation-item',StrategyStore.docDetails?.token) + '), url(' + getDefaultImage('no-preview') + ') no-repeat 0 0 / cover '}">
                                        </div> -->
                                            <div class="browse-form-name clearfix">
                                                <div class="float-left">
                                                    <h6 [attr.title]="StrategyStore.docDetails?.name">
                                                        {{StrategyStore.docDetails?.name?.length > 13 ?
                                                        StrategyStore.docDetails?.name.substring(0,13)+'
                                                        ...': StrategyStore.docDetails?.name}}
                                                    </h6>
                                                    <!-- <h6>{{StrategyStore.docDetails?.name?.length>15 ? StrategyStore.docDetails?.name.substring(0,15)+' ...':StrategyStore.docDetails?.name}}</h6>                                                <span>{{StrategyStore.docDetails?.size/1048576 | number:'0.2-2'}}MB</span> -->
                                                </div>
                                                <div class="browse-logo">
                                                    <img *ngIf="checkExtension(StrategyStore.docDetails?.ext,'excel') != -1"
                                                        src="/assets/images/md-xl.png">
                                                    <img *ngIf="checkExtension(StrategyStore.docDetails?.ext,'image') != -1"
                                                        src="/assets/images/md-jpg.png">
                                                    <img *ngIf="checkExtension(StrategyStore.docDetails?.ext,'doc') != -1"
                                                        src="/assets/images/md-StrategyStore.docDetails?.png">
                                                    <img *ngIf="checkExtension(StrategyStore.docDetails?.ext,'pdf') != -1"
                                                        src="/assets/images/md-pdf.png">
                                                </div>
                                            </div>
                                            <div class="edit-option-show">
                                                <a (click)="StrategyStore.unsetDocumentDetails()"><i
                                                        class="fas fa-trash"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- tab end -->

                <div class="tab">
                    <app-horizon-line-loader *ngIf="isNoteLoaded"></app-horizon-line-loader>


                    <div class="row" *ngIf="!isNoteLoaded">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>{{'notes' | translate}}</label>
                                <button *ngIf="AuthStore.getActivityPermission(3200, 'CREATE_STRATEGY_PROFILE_NOTE')"
                                    type="button" class="btn btn-active btn-small ml-3" data-toggle="modal"
                                    (click)="openNoteModal()">{{'add_new' | translate}}</button>
                            </div>

                            <div *ngIf="AuthStore.getActivityPermission(3200, 'STRATEGY_PROFILE_NOTES_LIST')"
                                class="panel-group panel-drop-sections pt-0" id="jd" role="tablist"
                                aria-multiselectable="true">
                                <div class="panel panel-default "
                                    *ngFor="let notes of StrategyStore.profileNotes;let mIndex = index">
                                    <div [ngClass]="selectedIndex == mIndex ? 'panel-heading active' : 'panel-heading'"
                                        role="tab" id="headingOne">
                                        <div class="panel-title">
                                            <a role="button" aria-expanded="false" aria-controls="collapseOne"
                                                class="collapsed" (click)="selectedIndexChange(mIndex,notes.id)">
                                                <h5 class="width96pc mt-0"> {{notes.title}} <span
                                                        class="drop-down-icone"><i
                                                            class="fas fa-chevron-down"></i></span> </h5>
                                            </a>
                                        </div>
                                    </div>
                                    <div [ngClass]="selectedIndex == mIndex ? 'drop-detail-sec panel-collapse collapse show' : 'drop-detail-sec panel-collapse collapse'"
                                        role="tabpanel" aria-labelledby="headingOne">
                                        <div class="panel-body bg-white edit-and-delete-main">
                                            <div class="edit-option-show" style="margin: -9px 25px 0 0;">
                                                <!-- edit-and-delete starts -->
                                                <a *ngIf="AuthStore.getActivityPermission(3200, 'UPDATE_STRATEGY_PROFILE_NOTE')" (click)="editNotes(notes.id)"><i
                                                        class="fas fa-pen"></i></a>
                                                <a *ngIf="AuthStore.getActivityPermission(3200, 'DELETE_STRATEGY_PROFILE_NOTE')"
                                                    (click)="deleteProfileNotes(notes.id)"><i class="fas fa-trash"></i></a>
                                                <!-- <a><i class="far fa-times-circle"></i></a> -->

                                            </div>


                                            <div class="row" *ngIf="swot_availability">
                                                <div class="col-sm-12">
                                                    <h5 class="cmn-head-style">{{'swot_analys' | translate}}</h5>
                                                </div>
                                                <ng-container *ngFor="let cate of StrategyStore.noteDetails?.category">
                                                    <div *ngIf="cate.is_swot == 1" class="col-xl-4 col-lg-6 col-sm-12">
                                                        <div>
                                                            <h5 [ngStyle]="{'color': cate.color_code }">{{cate.title}}
                                                            </h5>
                                                            <ul class="arrowlist mt-0 p-0">
                                                                <li *ngFor="let issues of cate?.issue">{{issues.title}}
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                            </div>
                                            <div class="row" *ngIf="pestel_availabale">
                                                <div class="col-sm-12">
                                                    <h5 class="cmn-head-style">{{'pestel_analysis' | translate}}</h5>
                                                </div>
                                                <ng-container *ngFor="let cate of StrategyStore.noteDetails?.category">
                                                    <div *ngIf="cate.is_pestel == 1"
                                                        class="col-xl-4 col-lg-6 col-sm-12">
                                                        <div>
                                                            <h5 [ngStyle]="{'color': cate.color_code }"
                                                                class="brown-text-color">{{cate.title}}</h5>
                                                            <ul class="arrowlist mt-0 p-0">
                                                                <li *ngFor="let issues of cate?.issue">{{issues.title}}
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                            </div>


                                        </div>
                                    </div>
                                </div>
                            </div>

                            <ng-container *mobxAutorun>
                                <app-no-data-list [source]="strategyEmptyList" [height]="false"
                                    *ngIf="StrategyStore.profileNotes?.length == 0 "></app-no-data-list>
                            </ng-container>

                        </div>

                    </div>

                    <div *ngIf="!isNoteLoaded && AuthStore.getActivityPermission(3200, 'STRATEGY_PROFILE_WHITESHEET_UPDATE')"
                        class="row mt-3">
                        <div class="col-sm-12">
                            <div class="form-group" *mobxAutorun>
                                <span style="float: right" class="text-grey">{{description != null
                                    ? getDescriptionLength()
                                    : 0
                                    }}Characters</span>
                                <label>{{'white_sheet' | translate}} </label>
                                <ckeditor id="description" (change)="descriptionChange($event)"
                                    (ready)="onReady($event)" [editor]="Editor" [data]="description"></ckeditor>
                            </div>
                        </div>
                    </div>
                </div><!-- tab end -->


                <div class="tab" *ngIf="OrganizationModulesStore.checkIndividualSubModule(3200,53001)">
                    <!-- tab start -->

                    <app-focus-area-loader *ngIf=" isFocusArea"></app-focus-area-loader>



                    <div class="row" *ngIf="!isFocusArea">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>{{'focus_area' | translate}} </label>
                                <button
                                    *ngIf="AuthStore.getActivityPermission(3200, 'CREATE_STRATEGY_PROFILE_FOCUS_AREA')"
                                    type="button" class="btn btn-active btn-small ml-2" data-toggle="modal"
                                    (click)="openFocusAreaModal()">{{'choose_focus_area' | translate}}</button>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="audit-form-table w-100 table-align-top not-fixed-table">
                                <table
                                    *ngIf="StrategyStore.focusAreas?.length > 0 && AuthStore.getActivityPermission(3200, 'STRATEGY_PROFILE_FOCUS_AREA_LIST')"
                                    class="table table-bordered ordinary-table audit-page-table mb-3 table-scroll">
                                    <thead>
                                        <tr>
                                            <th class="border-top-0 text-center" width="4%">#</th>
                                            <th class="border-top-0" width="80%">{{'focus_area' | translate}}</th>
                                            <th class="border-top-0" width="10%">{{'score' | translate}}</th>
                                            <th class="border-top-0" width="16%" *ngIf="StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage">{{'weightage' | translate}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="edit-and-delete-main"
                                            *ngFor="let f of focusAreas(StrategyStore.focusAreas);let i = index">
                                            <td class="text-center">{{i+1}}</td>
                                            <td>{{f.title}}</td>
                                            <td>
                                                {{f.score ? f.score : AppStore.noContentText}}{{f.score ? '%' : ''}}
                                                <div class="edit-option-show" style="margin: 34px 0 0 0; "
                                                *ngIf="StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage == 0">
                                                    <!-- edit-and-delete starts -->
                                                    <a *ngIf="AuthStore.getActivityPermission(3200, 'UPDATE_STRATEGY_PROFILE_FOCUS_AREA')"
                                                        (click)="editfocusArea(f)"><i class="fas fa-pen"></i></a>
                                                    <a *ngIf="AuthStore.getActivityPermission(3200, 'DELETE_STRATEGY_PROFILE_FOCUS_AREA')"
                                                        (click)="deleteProfilFocusArea(f.id)"><i class="fas fa-trash"></i></a>
                                                    <!-- <a><i class="far fa-times-circle"></i></a> -->
                                                </div>
                                            </td>
                                            <td *ngIf="StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage == 1">{{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction ? (f.weightage ? f.weightage :AppStore.noContentText) : (f.weightage ? (f.weightage | number : '1.0-0') : AppStore.noContentText)}}%
                                                <div class="edit-option-show" style="margin: 34px 0 0 0; ">
                                                    <!-- edit-and-delete starts -->
                                                    <a *ngIf="AuthStore.getActivityPermission(3200, 'UPDATE_STRATEGY_PROFILE_FOCUS_AREA')"
                                                        (click)="editfocusArea(f)"><i class="fas fa-pen"></i></a>
                                                    <a *ngIf="AuthStore.getActivityPermission(3200, 'DELETE_STRATEGY_PROFILE_FOCUS_AREA')"
                                                        (click)="deleteProfilFocusArea(f.id)"><i class="fas fa-trash"></i></a>
                                                    <!-- <a><i class="far fa-times-circle"></i></a> -->
                                                </div>
                                            </td>
                                        </tr>
                                        <!-- <tr>
                                     <td class="text-center">2</td>
                                     <td>Marketing</td>
                                     <td>20</td>
                                  </tr>
                                  <tr>
                                     <td class="text-center">3</td>
                                     <td>Campaign Management</td>
                                     <td>10</td>
                                  </tr> -->
                                    </tbody>
                                </table>
                                <ng-container *mobxAutorun>
                                    <app-no-data-list [source]="strategyEmptyList" [height]="false"
                                        *ngIf="StrategyStore.focusAreas?.length == 0">
                                    </app-no-data-list>
                                </ng-container>
                            </div>
                        </div>
                        <div class="col-sm-12" *ngIf="StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage">
                            <hr>
                            <div class="form-group">
                                <p class="bold mb-2">{{'total_weightage' | translate}}: {{calculateWeightage()}}/100</p>
                                <div class="progress" style="height: 10px;">
                                    <div class="progress-bar" [ngStyle]="{'width' : calculateWeightage() + '%'}">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>





                </div>

                <!-- tab end -->

                <div class="tab" *ngIf="OrganizationModulesStore.checkIndividualSubModule(3200,53101)">
                    <app-objectives-loader *ngIf="isObjectivesLoaded"></app-objectives-loader>


                    <div class="clearfix small-tab-small-main d-flex"
                        *ngIf="!isObjectivesLoaded">
                        <!-- <div class="small-list-tab small-tab-small small-list-tab-md" style="width: 200px;">
                            
                            <ul class="nav nav-tabs nav-tabs--vertical nav-tabs--left vertical-tab m-0"
                                role="navigation">
                                <li class="nav-item" (click)="selectKpiItem(i,f.id)"
                                    *ngFor="let f of StrategyStore.focusAreas;let i = index"> <a
                                        [ngClass]="StrategyStore.selectedKpiItem == i ? 'nav-link text-left active show' : 'nav-link text-left'"
                                        data-toggle="tab" role="tab" aria-controls="lorem" aria-selected="true"
                                        data-original-title="" [title]="f.title" title=""
                                        style="white-space: pre-wrap;">{{f.title.length > 15 ?
                                        f.title.substring(0,15)+'...' : f.title}}</a></li>
                            </ul>
                        </div> -->
                        <div class="tab-content w-100">
                        
                            <div class="p-3">
                                <div class="min-height-365">
                                    <div class="processes-issue audit-processes-issue clearfix bg-white cmn-bdr mb-3 d-flex align-items-center">
                                        <h5 class="mb-0 w-100">{{'sm_strategic_objective_mapped_message' |
                                            translate}}</h5>
                                        <div class="float-right text-right" style="width: 80px;">
                                            <button [disabled]="caluculateObjectWeightage() == 100"
                                                *ngIf="AuthStore.getActivityPermission(3200, 'CREATE_STRATEGY_PROFILE_OBJECTIVE')"
                                                (click)="openStrategyModal()"
                                                [ngClass]="caluculateObjectWeightage() == 100 ? 'btn btn-small1' : 'btn btn-small'"
                                                [attr.title]="caluculateObjectWeightage() == 100 ? 'Cannot add objective.Weightage to focus area exceeded 100' : ''">{{'add'
                                                | translate}}</button>
                                        </div>
                                    </div>
                        
                                    <div class="row">
                                        <div class="col-md-12">
                                            <!-- <ng-container *mobxAutorun>
                                                                            <app-no-data-list [source]="strategyEmptyList"
                                                                                *ngIf="StrategyStore.objectives.length == 0"></app-no-data-list>
                                                                        </ng-container> -->
                                            <!-- test -->
                                            <div class="panel-group panel-drop-sections panel-drop-white" id="jd" role="tablist"
                                                aria-multiselectable="true"
                                                *ngIf="AuthStore.getActivityPermission(3200, 'STRATEGY_PROFILE_OBJECTIVE_LIST')">
                                                <div class="panel panel-default" *ngFor="let o of StrategyStore.objectives; let ind = index">
                                                    <div [ngClass]="selectedObjectiveIndex == ind ? 'panel-heading active' : 'panel-heading'"
                                                        role="tab" id="headingOne">
                                                        <div class="panel-title">
                                                            <a role="button" data-toggle="collapse"
                                                                [attr.aria-expanded]="selectedObjectiveIndex == ind ? 'true' : 'false'"
                                                                aria-controls="collapseOne" (click)="selectObjectiveIndexChange(ind,o.id)"
                                                                [ngClass]="selectedObjectiveIndex == ind ? '' : 'collapsed'">
                                                                <h5 class="width96pc mt-0">{{ind+1}}.
                                                                    {{o.title}}<span class="drop-down-icone"><i
                                                                            class="fas fa-chevron-down"></i></span>
                                                                </h5>
                                                            </a>
                                                        </div>
                                                    </div>
                                                    <div [attr.id]="'objective'+ind"
                                                        [ngClass]="selectedObjectiveIndex == ind ? 'drop-detail-sec panel-collapse collapse show' : 'drop-detail-sec panel-collapse collapse'"
                                                        role="tabpanel" aria-labelledby="headingOne" [attr.data-parent]="'#objective'+ind">
                                                        <app-objective-accordion-loader *ngIf="!StrategyStore.induvalObjectivesLoaded">
                                                        </app-objective-accordion-loader>
                                                        <div *ngIf="StrategyStore.induvalObjectivesLoaded"
                                                            class="panel-body bg-white edit-and-delete-main">
                                                            <div class="edit-option-show" style="margin: -17px 25px 0 0;">
                                                                <!-- edit-and-delete starts -->
                                                                <a *ngIf="AuthStore.getActivityPermission(3200, 'UPDATE_STRATEGY_PROFILE_OBJECTIVE')"
                                                                    (click)="editObjective(StrategyStore.induvalObjectives)"><i class="fas fa-pen"></i></a>
                                                                <a *ngIf="AuthStore.getActivityPermission(3200, 'DELETE_STRATEGY_PROFILE_OBEJCTIVE')"
                                                                    (click)="deleteProfileObjectives(StrategyStore.induvalObjectives?.id)"><i class="fas fa-trash"></i></a>
                                                                <!-- <a><i class="far fa-times-circle"></i></a> -->
                                                            </div><!-- edit-and-delete end -->
                        
                                                            <div class="row">
                        
                                                                <div class="col-lg-4 col-sm-6">
                                                                    <h6>{{'start_date' | translate}}</h6>
                                                                    <p>{{StrategyStore.induvalObjectives?.start_date ? (StrategyStore.induvalObjectives?.start_date | date :
                                                                        OrganizationGeneralSettingsStore.organizationSettings?.date_format):
                                                                        AppStore.noContentText}}</p>
                                                                </div>
                                                                <div class="col-lg-4 col-sm-6">
                                                                    <h6>{{'end_date' | translate}}</h6>
                                                                    <p>{{StrategyStore.induvalObjectives?.end_date ? (StrategyStore.induvalObjectives?.end_date | date :
                                                                        OrganizationGeneralSettingsStore.organizationSettings?.date_format):
                                                                        AppStore.noContentText}}</p>
                                                                </div>
                                                                <div class="col-lg-4 col-sm-6"
                                                                    *ngIf="StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage">
                                                                    <h6>{{'weightage' | translate}}</h6>
                                                                    <!-- <p>{{o.weightage ? o.weightage : AppStore.noContentText}}{{o.weightage ? '%' : ''}}</p> -->
                                                                    <p>{{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction ? (StrategyStore.induvalObjectives?.weightage ? StrategyStore.induvalObjectives?.weightage : '0') : StrategyStore.induvalObjectives?.weightage ? (StrategyStore.induvalObjectives?.weightage | number : '1.0-0') : '0'}}%</p>
                        
                                                                </div>
                                                                <div class=" col-lg-4 col-sm-6">
                                                                    <h6>{{'target' | translate}}</h6>
                                                                    <p>{{StrategyStore.induvalObjectives?.target ? StrategyStore.induvalObjectives?.target : AppStore.noContentText}} {{StrategyStore.induvalObjectives?.target ?
                                                                        StrategyStore.induvalObjectives?.target_unit_id?.title : ''}}</p>
                        
                                                                </div>
                                                                <!-- <div class="col-lg-4 col-sm-6">
                                                                                               
                                                                                            </div> -->
                                                            </div>
                                                            <h6>{{'responsible_users' | translate}}</h6>
                                                            <div class="row">
                                                                <div class="col-lg-4 col-sm-6"
                                                                    *ngFor="let user of StrategyStore.induvalObjectives?.responsible_users">
                                                                    <div class="label-and-user-pic">
                        
                                                                        <div
                                                                            class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
                                                                            <app-user-popup-box [source]="getPopupDetails(user)"
                                                                                [showName]="true" [activateButtons]="true">
                                                                            </app-user-popup-box>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <h6>focus area</h6>
                                                            <div class="row">
                                                                <div class="col-lg-4 col-sm-6">
                                                                <ng-container *ngFor="let row of StrategyStore.induvalObjectives?.strategy_profile_focus_areas">
                                                                    <div>
                                                                        <ul class="arrowlist mt-0 p-0">
                                                                            <li>{{row.focus_area?.title}}</li>
                                                                        </ul>
                                                                    </div>
                                                                </ng-container>
                                                            </div>
                                                            </div>
                                                            <div class="col-lg-12 col-sm-12">
                                                                <div class="form-group">
                                                                    <a class="text-light-blue" data-toggle="modal"
                                                                        (click)="reviewFrequencyPopupOpen(StrategyStore.induvalObjectives?.id)"
                                                                        style="border-bottom: 1px solid;">{{'review_frequencies' |
                                                                        translate}}</a>
                                                                </div>
                                                            </div>
                                                            <div class="form-group mb-2">
                                                                <label class="mt-3">{{'kpi_measures' | translate}}
                        
                                                                </label>
                                                                <button
                                                                    *ngIf="AuthStore.getActivityPermission(3200, 'CREATE_STRATEGY_PROFILE_OBJECTIVE_KPI')"
                                                                    type="button" data-toggle="modal" (click)="openStrategyKpiModal(StrategyStore.induvalObjectives,ind)"
                                                                    class="btn btn-active btn-small ml-3">{{'add_kpi'
                                                                    | translate}}</button>
                                                            </div>
                                                            <div *ngIf="StrategyStore.objectives?.length > 0 && AuthStore.getActivityPermission(3200, 'STRATEGY_PROFILE_OBJECTIVE_KPI_LIST')"
                                                                class="audit-form-table w-100 table-align-top not-fixed-table">
                                                                <table *ngIf="StrategyStore.kpis?.length > 0"
                                                                    class="table table-bordered ordinary-table audit-page-table mb-0">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-top-0 text-center" width="4%">#</th>
                                                                            <th class="border-top-0" width="40%">KPI
                                                                            </th>
                                                                            <th class="border-top-0" width="12%">
                                                                                {{'minimum_value' | translate}}</th>
                                                                            <th class="border-top-0" width="12%">
                                                                                {{'maximum_value' | translate}}</th>
                                                                            <th class="border-top-0" width="12%">
                                                                                {{'target' | translate}}</th>
                                                                            <th class="border-top-0" width="20%">
                                                                                {{'action' | translate}}</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr class="edit-option" style="cursor: auto;"
                                                                            *ngFor="let k of StrategyStore.kpis;let num = index">
                                                                            <td class="text-center">{{num+1}}</td>
                                                                            <td>{{k.kpi_title}}</td>
                                                                            <td *ngIf="k.minimum">{{k.minimum}}%</td>
                                                                            <td *ngIf="k.minimum == null">{{AppStore.noContentText}}</td>
                                                                            <td *ngIf="k.maximum == null">{{AppStore.noContentText}}</td>
                                                                            <td *ngIf="k.maximum">{{k.maximum}}%</td>
                                                                            <td>{{k.target ? k.target :
                                                                                AppStore.noContentText}} {{k.target?k.target_unit_title:''}}</td>
                                                                            <td><button type="button" class="btn btn-small" data-toggle="modal"
                                                                                    (click)="openStrategyKpiDetailsModal(k.id)">{{'view' |
                                                                                    translate}}</button>
                                                                                <div class="edit-option-show-inner" style="margin: 0 0 0 0; ">
                                                                                    <a *ngIf="AuthStore.getActivityPermission(3200, 'UPDATE_STRATEGY_PROFILE_OBJECTIVE_KPI')"
                                                                                        (click)="deleteProfileKpi(k.id)"><i
                                                                                            class="fas fa-trash"></i></a>
                                                                                    <a *ngIf="AuthStore.getActivityPermission(3200, 'DELETE_STRATEGY_PROFILE_OBJECTIVE_KPI')"
                                                                                        (click)="editKpi(StrategyStore.induvalObjectives,k.id)"><i class="fas fa-pen"></i></a>
                                                                                    <!-- <a><i class="far fa-times-circle"></i></a> -->
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                        
                                                        </div>
                                                    </div>
                                                </div>
                        
                        
                        
                                            </div>
                        
                        
                                        </div>
                                    </div>
                        
                        
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <hr>
                                        <div class="form-group">
                                            <p class="bold mb-2">{{'total_weightage' | translate}}:
                                                {{caluculateObjectWeightage()}}/100</p>
                                            <div class="progress" style="height: 10px;">
                                                <div class="progress-bar" [ngStyle]="{'width' : caluculateObjectWeightage() + '%'}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        
                        </div>
                    </div>



                </div><!-- tab end -->


                <div class="tab">
                    <!-- tab start -->
                    <div class="bg-white">
                        <div class="issue-top-sec">
                            <div class="clearfix">

                                <h5 class="d-inline-block cmn-head-style label-tag-style mr-2"><span
                                        class="issue-smoal-head-text">#0003</span>{{strategyForm.value.title}}<span
                                        class="draft-tag label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one ml-3">{{'new' | translate}}</span>
                                </h5>
                            </div>
                            <div class="clearfix">
                                <!-- <span class="blinking">( 28 Days )</span> -->
                                <p class="label-tag-style mb-2"><i class="fas fa-calendar-alt date-pics-two"></i>
                                    {{ startDate | date:
                                    OrganizationGeneralSettingsStore.organizationSettings?.date_format}}-{{ endDate |
                                    date: OrganizationGeneralSettingsStore.organizationSettings?.date_format}}
                                </p>
                            </div>
                            <p style="white-space: pre-wrap;">{{strategyForm.value.description ?
                                strategyForm.value.description : 'NA'}}</p>
                            <h5 class="mb-4" style="font-weight: 600;">{{'budget' | translate}} :
                                {{OrganizationGeneralSettingsStore?.organizationSettings?.currency}}
                                {{strategyForm.value.budget ?
                                strategyForm.value.budget : 'NA'}} </h5>
                        </div>

                        <div class="row">
                            <div class="col-lg-3 col-sm-6"
                                [ngStyle]="{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_subsidiary ? 'none':'block'}">
                                <h6>{{'subsidiary' | translate}}</h6>
                                <p>{{strategyForm.value.organization_ids ?
                                    getArrayFormatedString('title',strategyForm.value.organization_ids) :
                                    AppStore.noContentText}}</p>
                            </div>
                            <div class="col-lg-3 col-sm-6"
                                [ngStyle]="{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_division ? 'none':'block'}">
                                <h6>{{'division' | translate}}</h6>
                                <p>{{strategyForm.value.division_ids ?
                                    getArrayFormatedString('title',strategyForm.value.division_ids) :
                                    AppStore.noContentText}}</p>
                            </div>
                            <div class="col-lg-3 col-sm-6"
                                [ngStyle]="{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_department ? 'none':'block'}">
                                <h6>{{'department' | translate}}</h6>
                                <p>{{strategyForm.value.department_ids ?
                                    getArrayFormatedString('title',strategyForm.value.department_ids) :
                                    AppStore.noContentText}}
                                </p>
                            </div>
                            <div class="col-lg-3 col-sm-6"
                                [ngStyle]="{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_section ? 'none':'block'}">
                                <h6>{{'section' | translate}}</h6>
                                <p>{{strategyForm.value.section_ids ?
                                    getArrayFormatedString('title',strategyForm.value.section_ids) :
                                    AppStore.noContentText}}</p>
                            </div>
                            <div class="col-lg-3 col-sm-6"
                                [ngStyle]="{display: !OrganizationLevelSettingsStore.organizationLevelSettings?.is_sub_section ? 'none':'block'}">
                                <h6>{{'sub_section' | translate}}</h6>
                                <p>{{strategyForm.value.sub_section_ids ?
                                    getArrayFormatedString('title',strategyForm.value.sub_section_ids) :
                                    AppStore.noContentText}}</p>
                            </div>
                        </div>

                        <hr>

                        <h6 *ngIf="OrganizationModulesStore.checkIndividualSubModule(3200,53001)">{{'focus_areas' | translate}}</h6>
                        <div class="mb-3" *ngIf="OrganizationModulesStore.checkIndividualSubModule(3200,53001) && StrategyStore.focusAreas?.length > 0">
                            <button type="button" (click)="selectKpiItem(i,f.id)"
                                *ngFor="let f of  StrategyStore.focusAreas; let i = index"
                                [ngClass]="StrategyStore.selectedKpiItem == i ? 'btn btn-small btn-active' : 'btn btn-small'">{{f.title?.length
                                > 20 ? f.title.substring(0,20)+'...' : f.title}}</button>
                        </div>
                        <p *ngIf="StrategyStore.focusAreas?.length == 0">{{AppStore.noContentText}}</p>


                        <div class="row" *ngIf="OrganizationModulesStore.checkIndividualSubModule(3200,53101)">
                            <div class="col-md-12">
                                <h6>{{'objectives' | translate}} & KPI's</h6>
                                <p *ngIf="StrategyStore.objectives?.length == 0">{{AppStore.noContentText}}</p>
                                <div class="panel-group panel-drop-sections panel-drop-white" id="jd" role="tablist"
                                    aria-multiselectable="true">
                                    <div class="panel panel-default"
                                        *ngFor="let o of StrategyStore.objectives; let ind = index">
                                        <div [ngClass]="selectedObjectiveIndexDetails == ind ? 'panel-heading active' : 'panel-heading'"
                                            role="tab" id="headingOne">
                                            <div class="panel-title">
                                                <a role="button" data-toggle="collapse" aria-expanded="false"
                                                    aria-controls="collapseOne" class="collapsed"
                                                    (click)="selectObjectiveIndexChangeDetails(ind,o.id)"
                                                    [ngClass]="selectedObjectiveIndexDetails == ind ? '' : 'collapsed'">
                                                    <h5 class="width96pc mt-0">{{ind+1}}. {{o.title}}<span
                                                            class="drop-down-icone"><i
                                                                class="fas fa-chevron-down"></i></span> </h5>
                                                </a>
                                            </div>
                                        </div>
                                        <div [attr.id]="'objectives'+ind"
                                            [ngClass]="selectedObjectiveIndexDetails == ind ? 'drop-detail-sec panel-collapse collapse show' : 'drop-detail-sec panel-collapse collapse'"
                                            role="tabpanel" aria-labelledby="headingOne"
                                            [attr.data-parent]="'#objectives'+ind">
                                            <div class="panel-body bg-white edit-and-delete-main">
                                                <div class="row">
                                                    <!-- <div class="col-lg-4 col-sm-12">
                                                        <h6>{{'responsible_user' | translate}}</h6>
                                                        <div class="label-and-user-pic">

                                                            <div
                                                                class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
                                                                <app-user-popup-box
                                                                    [source]="getPopupDetails(StrategyStore.induvalObjectives?.responsible_user)"
                                                                    [showName]="true" [activateButtons]="false">
                                                                </app-user-popup-box>
                                                            </div>
                                                        </div>
                                                    </div> -->
                                                    <div class="col-lg-4 col-sm-6">
                                                        <h6>{{'start_date' | translate}}</h6>
                                                        <p>{{o.start_date ? (o.start_date | date : OrganizationGeneralSettingsStore.organizationSettings?.date_format): AppStore.noContentText}}</p>
                                                    </div>
                                                    <div class="col-lg-4 col-sm-6">
                                                        <h6>{{'end_date' | translate}}</h6>
                                                        <p>{{o.end_date ? (o.end_date | date : OrganizationGeneralSettingsStore.organizationSettings?.date_format): AppStore.noContentText}}</p>
                                                    </div>
                                                    <div class="col-lg-4 col-sm-6" *ngIf="StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage">
                                                        <h6>{{'weightage' | translate}}</h6>
                                                        <div class="d-flex">
                                                            <span class="progress-right-value"
                                                                style="width: 30px;">
                                                                {{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction ? (o.weightage ? o.weightage : '0') : o.weightage? (o.weightage | number : '1.0-0') : '0'}}%</span>
                                                        </div>
                                                    </div>
                                                    <div class=" col-lg-4 col-sm-6">
                                                        <h6>{{'target' | translate}}</h6>
                                                        <p>{{o.target ? o.target : 'NA'}} {{o.target ? o.target_unit_title : ''}}</p>
                                                   
                                                    </div>
                                                    <!-- <div class="col-lg-4 col-sm-6">
                                                        <h6>{{'target' | translate}}</h6>
                                                        <div class="d-flex">
                                                            <span 
                                                                >{{o.target ? o.target : 'NA'}} {{o.target ? o.target_unit_title : ''}}</span>
                                                        </div>
                                                    </div> -->
                                                    <!-- <div class="col-lg-4 col-sm-6">
                                                        <button type="button" data-toggle="modal"
                                                            class="btn btn-small mt-2">Add KPI</button>
                                                    </div> -->
                                                </div>
                                                <h6>{{'responsible_users' | translate}}</h6>
                                                <div class="row">
                                                    <div class="col-lg-4 col-sm-6"
                                                        *ngFor="let user of StrategyStore.induvalObjectives?.responsible_users">
                                                        <div class="label-and-user-pic">

                                                            <div
                                                                class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
                                                                <app-user-popup-box [source]="getPopupDetails(user)"
                                                                    [showName]="true" [activateButtons]="false">
                                                                </app-user-popup-box>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-12 col-sm-12">
                                                    <div class="form-group">
                                                        <a class="text-light-blue" data-toggle="modal" (click)="reviewFrequencyPopupOpen(o.id)"
                                                            style="border-bottom: 1px solid;">{{'review_frequencies' | translate}}</a>
                                                    </div>
                                                </div>

                                                <h6 class="mt-3">{{'kpi_measures' | translate}}</h6>
                                                <div *ngIf="StrategyStore.objectives?.length > 0"
                                                    class="audit-form-table w-100 table-align-top not-fixed-table">
                                                    <table *ngIf="StrategyStore.kpis?.length > 0"
                                                        class="table table-bordered ordinary-table audit-page-table mb-0">
                                                        <thead>
                                                            <tr>
                                                                <th class="border-top-0 text-center" width="4%">#</th>
                                                                <th class="border-top-0" width="39%">KPI</th>
                                                                <th class="border-top-0" width="15%">{{'minimum_value' |
                                                                    translate}}</th>
                                                                <th class="border-top-0" width="15%">{{'maximum_value' |
                                                                    translate}}</th>
                                                                <th class="border-top-0" width="15%">{{'target' |
                                                                    translate}}</th>
                                                                <th class="border-top-0" width="12%">{{'action' |
                                                                    translate}}</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr class="edit-option"
                                                                *ngFor="let k of StrategyStore.kpis;let num = index">
                                                                <td class="text-center">{{num+1}}</td>
                                                                <td>{{k.kpi_title}}</td>
                                                                <td>{{k.minimum}}</td>
                                                                <td>{{k.maximum}}</td>
                                                                <td>{{k.target}}</td>
                                                                <td class="text-center">
                                                                    <button type="button"
                                                                        class="btn btn-small float-none"
                                                                        data-toggle="modal"
                                                                        (click)="openStrategyKpiDetailsModal(k.id)">{{'view'
                                                                        | translate}}</button>

                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div *ngIf="StrategyStore.objectives?.length == 0">{{AppStore.noContentText}}</div>
                                            </div>
                                        </div>
                                    </div>



                                </div>

                            </div>
                        </div>


                    </div>


                </div><!-- tab end -->


                <div style="overflow:auto;">
                    <div class="form-next-page-btns" style="float:left;">
                        <button class="btn btn-active" type="button" id="nextBtn"
                            [disabled]="AppStore.loading||!checkFormObject()"
                            (click)="nextPrev(1,true)">{{getButtonText(nextButtonText)}}</button>
                        <button class="btn" type="button" id="prevBtn" (click)="saveTabDetails()"
                            [disabled]="AppStore.loading||!checkFormObject()">{{
                            AppStore.loading ? getButtonText('loading') : getButtonText('save') }}</button>
                        <button class="btn" type="button" (click)="cancelClicked()">{{currentTab == 4 ? getButtonText('close') : getButtonText('cancel')}}</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</main>

<!-- <div class="modal modal-style-1 fade" id="delete-popup" #confirmationPopup data-backdrop="static" data-keyboard="false">
  <app-delete-popup [source] = "confirmationObject"></app-delete-popup>
</div>   -->



<div class="modal modal-style-1 popup-full-width fade" id="add-new-notes-popup" data-keyboard="false"
    data-backdrop="static" #noteModal>
    <app-add-note *ngIf="noteObject.type" [source]="noteObject"></app-add-note>
</div>
<!-- style="z-index: 999999; overflow-x: hidden; overflow-y: auto;" -->
<div class="modal modal-style-1 popup-full-width fade" style="overflow: hidden auto; z-index: 999999;"
    id="focus-area-choose-popup" data-keyboard="false" data-backdrop="static" #focusAreaModal>
    <app-add-focus-area *ngIf="focusAreaObject.type" [source]="focusAreaObject"></app-add-focus-area>
</div>
<!-- style="z-index: 999999; overflow-x: hidden; overflow-y: auto;" -->
<div class="modal modal-style-1 popup-full-width fade" style="overflow: hidden auto; z-index: 999999;"
    id="add-strategic-objective-popup" data-keyboard="false" data-backdrop="static" #strategyAreaModal>
    <app-strategy-objective-modal *ngIf="strategyModalObject.type" [source]="strategyModalObject">
    </app-strategy-objective-modal>
</div>
<!-- style="z-index: 999999; overflow-x: hidden; overflow-y: auto;" -->
<div class="modal modal-style-1 popup-full-width fade" id="kpi-measures-popup-two" data-keyboard="false"
    data-backdrop="static" #strategyKpiModal>
    <app-add-strategy-kpi *ngIf="strategyKpiObject.type" [source]="strategyKpiObject"></app-add-strategy-kpi>
</div>
<!-- style="z-index: 999999; overflow-x: hidden; overflow-y: auto;" -->
<div class="modal modal-style-1 popup-full-width fade" id="view-kpi-measures-popup" data-keyboard="false"
    data-backdrop="static" #strategyKpiDetailsModal>
    <app-strategy-kpi-details *ngIf="kpiDetailsObject.type" [source]="kpiDetailsObject"></app-strategy-kpi-details>
</div>
<!------------------- Delete Confirmation Modal Start --------------------------->

<div class="modal modal-style-1 fade" id="delete-popup" #confirmationPopUp data-backdrop="static" data-keyboard="false">
    <app-delete-popup [source]="deleteObjects"></app-delete-popup>
</div>

<!-----------------------Form Modal Start--------------------------->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static"
    #organisationChangeFormModal *mobxAutorun>
    <app-organisation-change-modal *ngIf="openModelPopup" [source]="strategyForm.value"
        (organizationChangeEvent)="closeModal($event)"></app-organisation-change-modal>
</div>
<!-----------------------Form Modal End--------------------------->

<!------------------------------->
<!-- * Documetn Attach/Upload Common Component Starts Here -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #fileUploadModal>

    <app-file-upload-popup *ngIf="fileUploadPopupStore.openPopup"></app-file-upload-popup>

</div>
<!-- * Documetn Attach/Upload Common Component Ends Here -->

<!-- strategy theme modal -->
<div class="modal modal-style-1 popup-full-width fade" style="overflow: hidden auto; z-index: 999999;"
     data-keyboard="false" data-backdrop="static" #addStrategyTheme>
    <app-strategy-theme-modal *ngIf="strategicThemesObject.type" [source]="strategicThemesObject">
    </app-strategy-theme-modal>
</div>
<!-- strategy theme modal -->

<!-- review frequency modal -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #addReviewFrequency>
    <app-review-frequency-popup *ngIf="openReviewFrequencyPopup" [source]="reviewFrequencyObject">
    </app-review-frequency-popup>
</div>
<!-- review frequency modal -->