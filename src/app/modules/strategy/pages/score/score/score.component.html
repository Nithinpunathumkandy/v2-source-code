<nav class="edit-bar" data-toggle="affix" #navBar>
    <!-- <app-breadcrumb-menu></app-breadcrumb-menu> -->
    <app-sub-menu>-</app-sub-menu>

    <ul class="nav nav-pills float-left d-none d-lg-block" role="tablist">
        <li class="nav-item">
            <a class="nav-link nav-link-show" [routerLink]="['/strategy-management/strategy-scoring']"
                routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"> {{'strategy_scoring' |
                translate}}</a>
        </li>
    </ul>
    <!-- <ul class="nav nav-pills edit-icons float-right d-none d-xl-block" role="tablist">
        <li>
            <ng-select style="width: 150px; top: 0px;left: -25px;" bindLabel="title" [(ngModel)]="profile_id"
                [placeholder]="'choose_strategy_profile' | translate" [multiple]="false" class="disable-clear-all"
                [clearable]="false" (change)="changeProfile()" (search)="serarchProfile($event)" (open)="openProfile()">

                <ng-option [value]="prod.id" *ngFor="let prod of StrategyStore.allItems">
                    {{prod.title}}
                </ng-option>
            </ng-select>
        </li>
    </ul> -->
</nav>

<main class="mt-3 acl-page" *mobxAutorun>
    <div class="container-fluid widget">
        <div class="tab-pane tab-edit-class" id="asset-mapping">

            <div class="common-tab-md clearfix tab-same-height">
                <div class="tab-common-left-md ">
                    <div class=" issues-tab">
                        <ul class="nav nav-tabs nav-tabs--vertical nav-tabs--left vertical-tab" role="navigation">
                            <li class="nav-item"> <a (click)="gotoSection('object')"
                                    [ngClass]="ObjectiveScoreStore.selectedTab =='object' ? 'nav-link active':'nav-link'"
                                    data-toggle="tab" role="tab" aria-controls="lorem"
                                    aria-selected="false">{{'objectives' | translate}}</a>
                            </li>
                            <li class="nav-item" *ngIf = "OrganizationModulesStore.checkOrganizationSubModulesPermission(3200,56901)"> <a (click)="gotoSection('kpi')"
                                    [ngClass]="ObjectiveScoreStore.selectedTab =='kpi' ? 'nav-link active':'nav-link'"
                                    href="#tab-one" data-toggle="tab" role="tab" aria-controls="ipsum"
                                    aria-selected="false"> {{'KPI' |
                                    translate}}</a>
                            </li>
                            <li class="nav-item"> <a (click)="gotoSection('action-plan')"
                                    [ngClass]="ObjectiveScoreStore.selectedTab =='action-plan' ? 'nav-link active':'nav-link'"
                                    data-toggle="tab" role="tab" aria-controls="lorem"
                                    aria-selected="false">{{'action_plan' | translate}}</a>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="tab-common-left-content-m cmn-bdr p-3 bg-white min-height-83">
                    <div class="tab-content">
                        <div *ngIf="ObjectiveScoreStore.selectedTab =='object'" class="tab-pane fade active show"
                            id="tab-two" role="tabpanel">
                            <!-- list view of objective start here -->
                            <!-- <div class="'audit-form-table w-100 risk-form-mapping-table form-table-scroll table-scroll-small-device'">

                                <table *ngIf="ObjectiveScoreStore.allItems.length > 0"
                                    class="table table-bordered ordinary-table cmn-table-style mb-1">
                                    <tr>
                                        <th class="border-top-0 text-center" width="2%">#</th>
                                        <th class="border-top-0 " width="43%">{{'objective' | translate}}</th>
                                        <th class="border-top-0 " width="15%">{{'achieved' | translate}}</th>
                                        <th class="border-top-0 " width="15%">{{'target' | translate}}</th>
                                        <th class="border-top-0 " width="25%">{{'date' | translate}}</th>
                                    </tr>
                                    <tr (click)="gotoObjectiveDetails(o)"
                                        *ngFor="let o of ObjectiveScoreStore.allItems| paginate: {currentPage:ObjectiveScoreStore.currentPage, itemsPerPage:ObjectiveScoreStore.itemsPerPage,totalItems:ObjectiveScoreStore.totalItems};let num = index"
                                        class="pointer edit-and-delete-main">
                                        <td>{{(ObjectiveScoreStore.currentPage - 1) * ObjectiveScoreStore.itemsPerPage +
                                            (num + 1)}}</td>
                                        <td>
                                            <div
                                                class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
                                                <div class="pointer">
                                                    <h6>{{o.title}}</h6>
                                                    <span>{{o.strategy_profile_title}} | {{o.focus_area_title}}</span>
                                                </div>
                                            </div>
                                        </td>
                                        <td
                                            [ngClass]="(o.score  <= 30 ||  o.score == null) ? 'blinking' : (o.score <= 90)? 'text-yellow' : 'text-green'">
                                            {{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction
                                            ? (o.score ? o.score : '0') : o.score? (o.score | number : '1.0-0') :
                                            '0'}}{{o.score ? o.target_unit_title : ''}}
                                        </td>
                                        <td> {{o.target ? o.target : AppStore.noContentText}}{{o.target ?
                                            o.target_unit_title : ''}}
                                        </td>
                                        <td>{{o.start_date | date:
                                            OrganizationGeneralSettingsStore.organizationSettings?.date_format}} to
                                            {{o.end_date | date:
                                            OrganizationGeneralSettingsStore.organizationSettings?.date_format}}</td>
                                    </tr>
                                </table>

                                <ng-container *mobxAutorun>
                                    <app-no-data
                                        *ngIf="ObjectiveScoreStore.loaded && ObjectiveScoreStore.allItems?.length == 0"
                                        [border]=false>
                                    </app-no-data>
                                </ng-container>
                            </div> -->
                            <!-- list view of objective end here -->

                            <!-- grid view of objective start here -->
                            <div class="row sm-row pointer" *ngIf="ObjectiveScoreStore.allItems.length > 0 && ObjectiveScoreStore.loaded ">
                                <div class="col-xl-6 col-lg-6 col-sm-12 sm-col" 
                                    *ngFor="let objective of ObjectiveScoreStore.allItems| paginate: {currentPage:ObjectiveScoreStore.currentPage, itemsPerPage:ObjectiveScoreStore.itemsPerPage,totalItems:ObjectiveScoreStore.totalItems};let num = index">
                                    <div class="widg-padding-cmn-small bg-white btm-space-10 hover-shadow list-page-grid-box relative cmn-bdr border-radius">
                                        
                                        <div (click)="gotoObjectiveDetails(objective)">
                                            <div [attr.class]="'status-tag-new-two bg-'+objective.strategy_profile_status_label"
                                                *ngIf="objective.strategy_profile_status_title">
                                                {{objective.strategy_profile_status_title}}
                                            </div>
                                        
                                            <!-- <div class="d-flex align-items-center mb-3">
                                                <div class="w-100 ml-3">
                                                    <h5 class="cmn-head-style mb-0" [attr.title]="objective.title?.length > 25 ? objective.title :''">{{objective.title?.length > 25 ? objective.title?.substring(0,25)+' ...' :objective.title}} <span
                                                            [ngClass]="objective.score && objective.score > objective.minimum ? objective.score > objective.maximum ? 'draft-tag draft-tag-green label-left-arow-tag' : 'draft-tag draft-tag-orange label-left-arow-tag' : 'draft-tag draft-tag-red label-left-arow-tag'"
                                                            style="line-height: 16px; vertical-align: middle; margin-top: -4px; display: inline-block;">
                                                            {{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction
                                                            ? (objective.score ? objective.score : 0) : (objective.score ?
                                                            (objective.score | number : '1.0-0') : 0)}}%</span><br><span
                                                            class="text-14 font-normal elips-1">{{objective.start_date | date:
                                                            OrganizationGeneralSettingsStore.organizationSettings?.date_format}} to
                                                            {{objective.end_date | date:
                                                            OrganizationGeneralSettingsStore.organizationSettings?.date_format}}</span></h5>
                                                </div>
                                            </div> -->
                                            <div class="issue-top-sec mb-3">
                                                <div class="clearfix">
                                                    <h5 class="d-inline-block cmn-head-style label-tag-style mr-2"
                                                        [attr.title]="objective.title?.length > 25 ? objective.title :''">{{objective.title?.length > 25 ?
                                                        objective.title?.substring(0,25)+' ...' :objective.title}}<span
                                                            class="draft-tag label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one"
                                                            [ngClass]="objective.score && objective.score > objective.minimum ? objective.score > objective.maximum ? 'draft-tag-green' : 'draft-tag-orange' : 'draft-tag-red'">
                                                            {{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction
                                                            ? (objective.score ? objective.score : 0) : (objective.score ?
                                                            (objective.score | number : '1.0-0') : 0)}}%</span><br><span
                                                            class="text-14 font-normal elips-1">{{objective.start_date | date:
                                                            OrganizationGeneralSettingsStore.organizationSettings?.date_format}} to
                                                            {{objective.end_date | date: OrganizationGeneralSettingsStore.organizationSettings?.date_format}}</span>
                                                    </h5>
                                                </div>
                                            </div>
                                        
                                            <div class="row sm-row">
                                                <div class="col-lg-4 col-sm-12 sm-col">
                                                    <h6>{{'profile' | translate}}</h6>
                                                    <p class="elips-1">{{objective.strategy_profile_title}}</p>
                                                </div>
                                                <div class="col-lg-4 col-sm-12 sm-col">
                                                    <h6>{{'achieved' | translate}}</h6>
                                                    <p
                                                        [ngClass]="(objective.score  <= 30 ||  objective.score == null) ? 'blinking' : (objective.score <= 90)? 'text-yellow' : 'text-green'">
                                                        {{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction
                                                        ? (objective.score ? objective.score : '0') : objective.score? (objective.score | number : '1.0-0') :
                                                        '0'}} {{objective.target_unit_title}}
                                                    </p>
                                                </div>
                                                <div class="col-lg-4 col-sm-12 sm-col">
                                                    <h6>{{'target' | translate}}</h6>
                                                    <p>{{objective.target ? objective.target : AppStore.noContentText}} {{objective.target ?
                                                        objective.target_unit_title : ''}}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row user-list-sm-pdg-remove">
                                            <div class="col-xl-12">
                                                <hr class="mb-2">
                                                <div class="d-flex flex-row user-list-sm align-items-center">
                                                    <app-user-popup-box [source]="getCreatedPopupDetails(objective)" [showName]="true"
                                                        [activateButtons]="false"></app-user-popup-box>
                                                </div>
                                            </div>
                                        </div>
                            
                                    </div>
                                </div>
                            </div>
                            <ng-container *mobxAutorun>
                                <div *ngIf="!ObjectiveScoreStore.loaded">
                                    <!-- <app-profile-list-loader></app-profile-list-loader> -->
                                    <app-strategy-grid-view-loader></app-strategy-grid-view-loader>
                                </div>
                                <app-no-data *ngIf="ObjectiveScoreStore.loaded && ObjectiveScoreStore.allItems?.length == 0 "></app-no-data>
                            </ng-container>

                            <div *ngIf="ObjectiveScoreStore.totalItems>ObjectiveScoreStore.itemsPerPage"
                                class="col-sm-12">
                                <ul class="pagination justify-content-center mt-3">
                                    <div class="list">
                                        <pagination-controls [previousLabel]="'previous' | translate"
                                            [nextLabel]="'next' | translate" class="my-pagination"
                                            (pageChange)="getObjectiveList($event)">
                                        </pagination-controls>
                                    </div>
                                </ul>
                            </div>
                            <!-- grid view of objevtive end here -->                        
                        </div>

                        <div *ngIf="ObjectiveScoreStore.selectedTab =='kpi'" class="tab-pane fade active show"
                            id="tab-one" role="tabpanel">
                            <!-- list viewof kpi start here -->
                            <!-- <div
                                [ngClass]="KpiStore.loaded && KpiStore.allItems.length == 0?'audit-form-table w-100 risk-form-mapping-table form-table-scroll':'audit-form-table w-100 risk-form-mapping-table form-table-scroll table-scroll-small-device'">

                                <table *ngIf="KpiStore.loaded && KpiStore.allItems.length > 0"
                                    class="table table-bordered ordinary-table audit-page-table mb-4 table-scroll">
                                    <thead>
                                        <tr>
                                            <th class="border-top-0 text-center" width="2%">#</th>
                                            <th class="border-top-0 " width="38%">KPI</th>
                                            <th class="border-top-0 " width="30%">{{'objective' | translate}}</th>
                                            <th class="border-top-0 " width="15%">{{'achieved' | translate}}</th>
                                            <th class="border-top-0 " width="15%">{{'target' | translate}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr (click)="gotoDetails(data)"
                                            *ngFor="let data of KpiStore.allItems| paginate: {currentPage:KpiStore.currentPage, itemsPerPage:KpiStore.itemsPerPage,totalItems:KpiStore.totalItems};let num = index"
                                            class="pointer edit-option">
                                            <td class="text-center">{{(KpiStore.currentPage - 1) * KpiStore.itemsPerPage
                                                + (num + 1)}}</td>
                                            <td>{{data.kpi_title ? data.kpi_title : AppStore.noContentText}}</td>
                                            <td>
                                                <div
                                                    class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
                                                    <div class="pointer">
                                                        <h6>{{data.objective_title}}</h6>
                                                        <span>{{data.strategy_profile_title}} |
                                                            {{data.focus_area_title}}</span>
                                                    </div>
                                                </div>
                                            </td>
                                            <td
                                                [ngClass]="(data.score  <= 30 ||  data.score == null) ? 'blinking' : (data.score <= 90)? 'text-yellow' : 'text-green'">
                                                {{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction
                                                ? (data.score ? data.score : '0') : data.score? (data.score | number :
                                                '1.0-0') : '0'}}{{data.score ? data.target_unit_title : ''}}
                                            </td>
                                            <td>{{data.target ? data.target :
                                                AppStore.noContentText}}{{data.target_unit_title ?
                                                data.target_unit_title : ''}}</td>
                                        </tr>
                                    </tbody>
                                </table>

                                <ng-container *mobxAutorun>
                                    <app-no-data *ngIf="KpiStore.loaded && KpiStore.allItems?.length == 0"
                                        [border]=false>
                                    </app-no-data>
                                </ng-container>
                            </div> -->
                            <!-- list view of kpi end here -->

                            <!-- grid view of kpi start here -->
                            <div class="row sm-row pointer" *ngIf="KpiStore.loaded && KpiStore.allItems.length > 0 ">
                                <div class="col-xl-6 col-lg-6 col-sm-12 sm-col" 
                                    *ngFor="let kpi of KpiStore.allItems| paginate: {currentPage:KpiStore.currentPage, itemsPerPage:KpiStore.itemsPerPage,totalItems:KpiStore.totalItems};let num = index">
                                    <div class="widg-padding-cmn-small bg-white btm-space-10 hover-shadow list-page-grid-box relative cmn-bdr border-radius">
                                        
                                        <div (click)="gotoDetails(kpi)">
                                            <div [attr.class]="'status-tag-new-two bg-'+kpi.strategy_profile_status_label"
                                                *ngIf="kpi.strategy_profile_status_title">
                                                {{kpi.strategy_profile_status_title}}
                                            </div>
                                        
                                            <!-- <div class="d-flex align-items-center mb-3">                                
                                                <div class="w-100 ml-3">
                                                    <h5 class="cmn-head-style mb-0" [attr.title]="kpi.kpi_title?.length > 25 ? kpi.kpi_title :''">{{kpi.kpi_title?.length > 25 ? kpi.kpi_title?.substring(0,25)+' ...' :kpi.kpi_title}} <span
                                                        [ngClass]="getAchievementPer(kpi) > 30 ? getAchievementPer(kpi) > 70 ? 'draft-tag draft-tag-green label-left-arow-tag': 'draft-tag draft-tag-orange label-left-arow-tag' : 'draft-tag draft-tag-red label-left-arow-tag'"
                                                            style="line-height: 16px; vertical-align: middle; margin-top: -4px; display: inline-block;">
                                                            {{getAchievementPer(kpi) | number : '1.0-0'}}%</span><br><span
                                                            class="text-14 font-normal elips-1">{{kpi.strategy_profile_title}}
                                                            {{kpi.objective_title ?
                                                            '|' : ''}} {{kpi.objective_title ?
                                                            kpi.objective_title : ''}}
                                                        </span>
                                                    </h5>
                                                </div>
                                            </div> -->
                                        
                                            <div class="issue-top-sec mb-3">
                                                <div class="clearfix">
                                                    <h5 class="d-inline-block cmn-head-style label-tag-style mr-2"
                                                        [attr.title]="kpi.kpi_title?.length > 25 ? kpi.kpi_title :''">{{kpi.kpi_title?.length > 25 ? kpi.kpi_title?.substring(0,25)+' ...' :kpi.kpi_title}}<span
                                                            class="draft-tag label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one"
                                                            [ngClass]="getAchievementPer(kpi) > 30 ? getAchievementPer(kpi) > 70 ? 'draft-tag-green' : 'draft-tag-orange' : 'draft-tag-red'">
                                                            {{getAchievementPer(kpi) | number : '1.0-0'}}%</span><br><span
                                                            class="text-14 font-normal elips-1">{{kpi.strategy_profile_title}}
                                                            {{kpi.objective_title ?'|' : ''}} {{kpi.objective_title ? kpi.objective_title : ''}}</span>
                                                    </h5>
                                                </div>
                                            </div>

                                            <div class="row sm-row">
                                                <div class="col-lg-6 col-sm-12 sm-col">
                                                    <h6>{{'achieved' | translate}}</h6>
                                                    <p
                                                        [ngClass]="(kpi.score  <= 30 ||  kpi.score == null) ? 'blinking' : (kpi.score <= 90)? 'text-yellow' : 'text-green'">
                                                        {{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction
                                                        ? (kpi.score ? kpi.score : '0') : kpi.score? (kpi.score | number : '1.0-0') :
                                                        '0'}} {{kpi.target_unit_title}}
                                                    </p>
                                                </div>
                                                <div class="col-lg-6 col-sm-12 sm-col">
                                                    <h6>{{'target' | translate}}</h6>
                                                    <p>{{kpi.target ? kpi.target : AppStore.noContentText}} {{kpi.target ?
                                                        kpi.target_unit_title : ''}}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row user-list-sm-pdg-remove">
                                            <div class="col-xl-12">
                                                <hr class="mb-2">
                                                <div class="d-flex flex-row user-list-sm align-items-center">
                                                    <app-user-popup-box [source]="getCreatedPopupDetails(kpi)" [showName]="true"
                                                        [activateButtons]="false"></app-user-popup-box>
                                                </div>
                                            </div>
                                        </div>
                            
                                    </div>
                                </div>
                            </div>
                            <ng-container *mobxAutorun>
                                <div *ngIf="!KpiStore.loaded">                                 
                                    <app-strategy-grid-view-loader></app-strategy-grid-view-loader>
                                </div>
                                <app-no-data *ngIf="KpiStore.loaded && KpiStore.allItems?.length == 0"
                                    [border]=false>
                                </app-no-data>
                            </ng-container>
                            
                            <div *ngIf="KpiStore.loaded && KpiStore.totalItems>KpiStore.itemsPerPage" class="col-sm-12">
                                <ul class="pagination justify-content-center mt-3">
                                    <div class="list">
                                        <pagination-controls [previousLabel]="'previous' | translate"
                                            [nextLabel]="'next' | translate" class="my-pagination"
                                            (pageChange)="getKpiList($event)">
                                        </pagination-controls>
                                    </div>
                                </ul>
                            </div>
                            <!-- grid view of kpi end here -->
                        </div>

                        
                        <div *ngIf="ObjectiveScoreStore.selectedTab =='action-plan'" class="tab-pane fade active show"
                            id="tab-one" role="tabpanel">
                            <!-- list view of action plan start here -->
                            <!-- <div
                                [ngClass]="ActionPlansStore.loaded && ActionPlansStore.allItems?.length == 0?'audit-form-table w-100 risk-form-mapping-table form-table-scroll':'audit-form-table w-100 risk-form-mapping-table form-table-scroll table-scroll-small-device'">
                                <table *ngIf=" ActionPlansStore.loaded && ActionPlansStore.allItems?.length > 0"
                                    class="table table-bordered ordinary-table audit-page-table mb-4 table-scroll">
                                    <thead>
                                        <tr>
                                            <th class="border-top-0" width="2%">#</th>
                                            <th class="border-top-0" width="33%">{{'title' | translate}}</th>
                                            <th class="border-top-0" width="31%">{{'objective' | translate}}</th>
                                            <th class="border-top-0" width="6%">{{'achieved' | translate}}</th>
                                            <th class="border-top-0" width="6%">{{'target' | translate}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr (click)='gotoActionPlanDetails(data)'
                                            *ngFor="let data of ActionPlansStore.allItems| paginate: {currentPage:ActionPlansStore.currentPage, itemsPerPage:ActionPlansStore.itemsPerPage,totalItems:ActionPlansStore.totalItems};let num = index"
                                            class="pointer edit-and-delete-main">
                                            <td>{{(ActionPlansStore.currentPage - 1) * ActionPlansStore.itemsPerPage +
                                                (num + 1)}}</td>
                                            <td>
                                                <div
                                                    class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
                                                    <div class="pointer">
                                                        <h6>{{data.title ? data.title : AppStore.noContentText}}</h6>
                                                        <span>{{data.strategy_initiative_title}}
                                                            {{data.strategy_initiative_milestone_title ?
                                                            '|' : ''}} {{data.strategy_initiative_milestone_title ?
                                                            data.strategy_initiative_milestone_title : ''}}</span>
                                                    </div>
                                                </div>
                                            </td>

                                            <td>
                                                <div
                                                    class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
                                                    <div class="pointer">
                                                        <h6>{{data.objective_title ? data.objective_title :
                                                            AppStore.noContentText}}</h6>
                                                        <span>{{data.strategy_profile_title}} |
                                                            {{data.focus_area_title}}</span>
                                                    </div>
                                                </div>
                                            </td>

                                            <td>{{data.actual_value ? data.actual_value :
                                                AppStore.noContentText}}{{data.actual_value ?
                                                data.target_unit_title : ''}}</td>
                                            <td>{{data.target ? data.target : AppStore.noContentText}}{{data.target ?
                                                data.target_unit_title : ''}}
                                                <div class="edit-option-show" style="margin: 30px 0 0 0">
                                                    <a (click)="openPlanMesureModal(data)"><i
                                                            class="fas fa-pen"></i></a>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                                <ng-container *mobxAutorun>
                                    <app-no-data
                                        *ngIf="ActionPlansStore.loaded && ActionPlansStore.allItems?.length == 0"
                                        [border]=false>
                                    </app-no-data>
                                </ng-container>
                            </div> -->
                            <!-- list view of action plan end here -->

                            <!-- grid view of action plan start here  -->
                            <div class="row sm-row pointer" *ngIf="ActionPlansStore.loaded && ActionPlansStore.allItems?.length > 0 ">
                                <div class="col-xl-6 col-lg-6 col-sm-12 sm-col" 
                                    *ngFor="let plan of ActionPlansStore.allItems| paginate: {currentPage:ActionPlansStore.currentPage, itemsPerPage:ActionPlansStore.itemsPerPage,totalItems:ActionPlansStore.totalItems};let num = index">
                                    <div class="widg-padding-cmn-small bg-white btm-space-10 hover-shadow list-page-grid-box relative edit-and-delete-main cmn-bdr border-radius">
                                        <div class="edit-option-show pointer" style="margin: 39px 0 0 0; ">
                                            <a (click)="openPlanMesureModal(plan)" [attr.title]="'update' | translate"><i class="fas fa-pen-alt"></i></a>
                                        </div>
                                        <div (click)='gotoActionPlanDetails(plan)'>
                                            <div [attr.class]="'status-tag-new-two bg-'+plan.strategy_initiative_action_plan_status_label"
                                                *ngIf="plan.strategy_initiative_action_plan_status">
                                                {{plan.strategy_initiative_action_plan_status}}
                                            </div>
                                        
                                            <!-- <div class="d-flex align-items-center mb-3"> 
                                                <div class="w-100 ml-3">
                                                    <h5 class="cmn-head-style mb-0" [attr.title]="plan?.title?.length > 25 ? plan?.title :''">{{plan?.title?.length > 25 ? plan?.title?.substring(0,25)+' ...' :plan?.title}}<span
                                                            [ngClass]="calculatePercentage(plan?.actual_value,plan?.target) > 30 ? calculatePercentage(plan?.actual_value,plan?.target) > 70 ? 'draft-tag draft-tag-green label-left-arow-tag' : 'draft-tag draft-tag-orange label-left-arow-tag' : 'draft-tag draft-tag-red label-left-arow-tag'"
                                                            style="line-height: 16px; vertical-align: middle; margin-top: -4px; display: inline-block;">
                                                            {{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction ?
                                                            calculatePercentage(plan?.actual_value,plan?.target) :
                                                            (calculatePercentage(plan?.actual_value,plan?.target) | number : '1.0-0')}}%</span><br><span
                                                            class="text-14 font-normal elips-1">{{plan.strategy_initiative_title}}
                                                            {{plan.strategy_initiative_milestone_title ?
                                                            '|' : ''}} {{plan.strategy_initiative_milestone_title ?
                                                            plan.strategy_initiative_milestone_title : ''}}</span></h5>
                                                </div>
                                            </div> -->
                                        
                                            <div class="issue-top-sec mb-3">
                                                <div class="clearfix">
                                                    <h5 class="d-inline-block cmn-head-style label-tag-style mr-2"
                                                        [attr.title]="plan?.title?.length > 25 ? plan?.title :''">{{plan?.title?.length > 25 ? plan?.title?.substring(0,25)+' ...' :plan?.title}}<span
                                                            class="draft-tag label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one"
                                                            [ngClass]="calculatePercentage(plan?.actual_value,plan?.target) > 30 ? calculatePercentage(plan?.actual_value,plan?.target) > 70 ? 'draft-tag-green' : 'draft-tag-orange' : 'draft-tag-red'">
                                                            {{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction ?
                                                                calculatePercentage(plan?.actual_value,plan?.target) :
                                                                (calculatePercentage(plan?.actual_value,plan?.target) | number : '1.0-0')}} %</span><br><span
                                                            class="text-14 font-normal elips-1">{{plan.strategy_initiative_title}}
                                                            {{plan.strategy_initiative_milestone_title ?
                                                            '|' : ''}} {{plan.strategy_initiative_milestone_title ?
                                                            plan.strategy_initiative_milestone_title : ''}}</span>
                                                    </h5>
                                                </div>
                                            </div>
                                            <div class="row sm-row">
                                                <div class="col-lg-4 col-sm-12 sm-col">
                                                    <h6>{{'profile' | translate}}</h6>
                                                    <p class="elips-1">{{plan.strategy_profile_title}}</p>
                                                </div>
                                                <div class="col-lg-4 col-sm-12 sm-col">
                                                    <h6>{{'achieved' | translate}}</h6>
                                                    <p>{{StrategyManagementSettingStore?.strategyManagementSettings?.is_weightage_fraction
                                                        ? (plan.actual_value ? plan.actual_value : '0') : plan.actual_value? (plan.actual_value | number :
                                                        '1.0-0') :
                                                        '0'}} {{plan.target_unit_title}}
                                                    </p>
                                                </div>
                                                <div class="col-lg-4 col-sm-12 sm-col">
                                                    <h6>{{'target' | translate}}</h6>
                                                    <p>{{plan.target ? plan.target : AppStore.noContentText}} {{plan.target ?
                                                        plan.target_unit_title : ''}}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row user-list-sm-pdg-remove">
                                            <div class="col-xl-12">
                                                <hr class="mb-2">
                                                <div class="d-flex flex-row user-list-sm align-items-center">
                                                    <app-user-popup-box [source]="getCreatedPopupDetails(plan)" [showName]="true"
                                                        [activateButtons]="false"></app-user-popup-box>
                                                </div>
                                            </div>
                                        </div>
                            
                                    </div>
                                </div>
                            </div>
                            <ng-container *mobxAutorun>
                                <div *ngIf="!ActionPlansStore.loaded">                                 
                                    <app-strategy-grid-view-loader></app-strategy-grid-view-loader>
                                </div>
                                <app-no-data
                                    *ngIf="ActionPlansStore.loaded && ActionPlansStore.allItems?.length == 0"
                                    [border]=false>
                                </app-no-data>
                            </ng-container>
                            <!-- grid view of action plan end here  -->
                            <div *ngIf="ActionPlansStore.loaded && ActionPlansStore.totalItems>ActionPlansStore.itemsPerPage" class="col-sm-12">
                                <ul class="pagination justify-content-center mt-3">
                                    <div class="list">
                                        <pagination-controls [previousLabel]="'previous' | translate"
                                            [nextLabel]="'next' | translate" class="my-pagination"
                                            (pageChange)="getActionPlans($event)">
                                        </pagination-controls>
                                    </div>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</main>

  <!-- responsible user popup -->
<div class="modal modal-style-1 popup-full-width fade" id="add-milestone-popup" data-keyboard="false"
    data-backdrop="static" #otherResponsibleUsers>
    <app-other-responsible-users-modal [source]="otherResponsibleUsersObject" *ngIf="otherResponsibleUsersObject.type">
    </app-other-responsible-users-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="add-new-notes-popup" data-keyboard="false"
    data-backdrop="static" #planMesure>
    <app-add-plans-measure *ngIf="planMesureObject.type" [source]="planMesureObject"></app-add-plans-measure>
</div>

