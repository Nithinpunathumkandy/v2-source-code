<app-report-accordion-loader *ngIf ="!CyberReportStore.loaded"></app-report-accordion-loader>
<ng-container *mobxAutorun>
    <!-- Empty Screen Content -->
    <app-no-data *ngIf = "!CyberReportStore.CyberReportDetails && CyberReportStore.loaded" [border]='false'></app-no-data>
</ng-container>
<ng-container *ngIf ="CyberReportStore.CyberReportDetails && CyberReportStore.loaded">
    <div class="report-book-height" *mobxAutorun>
        <div class="pdf-menu-accodion-main clearfix">
            <div class="pdf-menu-accodion cmn-bdr-right mCustomScrollbar">
                <div class="pdf-menu-accodion-inner">
    
                    <div class="panel-group panel-drop-sections panel-drop-white" id="jd" role="tablist" aria-multiselectable="true">
    
                        <div class="panel panel-default" *ngFor="let leftMenuData of CyberReportStore?.CyberReportDetails;let num=index">
                            <div [ngClass]="selectedItemId!=null && selectedItemId==leftMenuData.id?'panel-heading active':'panel-heading'" role="tab" (click)="setSelectedReportItem(leftMenuData)">
                                <div class="panel-title">
                                    <a role="button"  aria-expanded="false" aria-controls="collapseOne" class="collapsed">
                                        <h5 class="width96pc mt-0">{{leftMenuData.section}}.{{leftMenuData?.title}}  </h5>
                                    </a>
                                </div>
                            </div>
                            <!-- <div *ngIf="leftMenuData['ms_audit_audit_report_content_childrens'].length > 0"[ngClass]="selectedItemId!=null && selectedItemId==leftMenuData.id?'drop-detail-sec panel-collapse collapse in show':'drop-detail-sec panel-collapse collapse'"   role="tabpanel" aria-labelledby="headingOne" [attr.data-parent]="'#menu'+num+'_'+leftMenuData.id">
                                <div class="panel-body">
                                    <h5 *ngFor="let childrenContent of leftMenuData?.ms_audit_audit_report_content_childrens;let childrenNum=index" class="pdf-inner-title-accodion">{{childrenContent.section}}.{{childrenContent?.language[0]?.pivot?.title}}</h5>    
                                </div>
                            </div> -->
                        </div>
    
                    </div>
    
                </div>
    
            </div>
        </div>
        <!-- <div class="cmn-bdr bg-white p-3 pdf-zoom-header-main pdf-zoom-header d-flex">
            <div class="w-100">
                <form class="form-control issue-select-process-search bg-white search-popup-new">
                    <input type="text" placeholder="Search.." name="search" class="search-process" />
                    <button type="submit" style="width: 40px;"><i class="fa fa-search"></i></button>
                </form>
            </div>
        </div> -->
        <div class="pdf-v2-report-html pdf-v2-report-list-view-html clearfix pdf-new-style-pagination">
            <div class="pdf-right-contents main-container pdf-page-height">
                <div class="maindiv cover-page-fit">
                    <div class="holder cover-page-holder">
                        <div class="pdf-page-inner-new-content">

                            <div  class="pdf-page-section widg-padding-cmn-small relative" style="background: #fff;">

                                <div class="status-tag-new-two bg-green">{{CyberReportStore?.CyberReportDetails[1]['cyber_incident']?.status?.language[0]?.pivot?.title}}</div>


                                <div class="pdf-cover-inner-main db-md-screen-center">
                                    <div class="pdf-cover-inner text-center w-100">
                                        <div class="logo-project-pdf mb-3">
                                            <img src="assets/images/uca-logo-report-cover-page.svg" class="img-fluid">
                                        </div>
                                        <div class="text-center">
                                            <h3 class="text-26 font-extra-bold text-light-blue cmn-bdr-bottom d-inline-block">{{'cyber_incident_report'| translate}}</h3>
                                        </div>

                                        <!-- <p class="font-weight-600 mb-0">Mock Drill Type : Mock Drill Fire</p> -->
                                        <!-- <p class="font-weight-600 mb-0 text-light-blue">Mar 10, 2022 To Mar 31, 2022</p> -->
                                    </div>
                                </div>



                                <div class="row">
                                    <div class="col-sm-12">
                                        <p class="black-text mb-0">{{'created_by'|translate}} :</p>
                                        <hr class="mt-2 mb-2">
                                        <div class="label-and-user-pic mb-0">
                                            <app-user-popup-box [source]="getCreatedByProcessDetails(CyberReportStore?.CyberReportDetails[1]['cyber_incident']?.created_by)" [showName]="true">
                                            </app-user-popup-box>   
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="holder"   [attr.id]="CyberReportStore?.CyberReportDetails[0]['type']">

                        <div class="pdf-page-inner-new-content">


                            <div class="pdf-page-section db-md-screen-center">
                                <div class="row introduction-page w-100">
                                    <div class="col-md-2"></div>
                                    <div class="col-md-8">
                                        <h4 class="text-light-blue bold text-center text-20">CONTENTS </h4>


                                        <div class="clearfix pt-2 pb-2">
                                            <div class="page-list-sec clearfix">
                                                <p>{{'contents' | translate}}</p>
                                                <p>01</p>
                                            </div>
                                        </div>

                                        <div class="clearfix pt-2 pb-2">
                                            <div class="page-list-sec clearfix">
                                                <p>{{'incident' | translate}}</p>
                                                <p>02</p>
                                            </div>
                                        </div>

                                        <div class="clearfix pt-2 pb-2">
                                            <div class="page-list-sec clearfix">
                                                <p> {{'rca' | translate}}</p>
                                                <p>03</p>
                                            </div>
                                        </div>

                                        <div class="clearfix pt-2 pb-2">
                                            <div class="page-list-sec clearfix">
                                                <p> {{'impact_anaysis' | translate}}</p>
                                                <p>04</p>
                                            </div>
                                        </div>

                                        <div class="clearfix pt-2 pb-2">
                                            <div class="page-list-sec clearfix">
                                                <p>{{'corrective_action' | translate}}</p>
                                                <p>05</p>
                                            </div>
                                        </div>

                                        <div class="clearfix pt-2 pb-2">
                                            <div class="page-list-sec clearfix">
                                                <p>{{'conclusion' | translate}} </p>
                                                <p>06</p>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>

                    <div class="holder" [attr.id]="CyberReportStore?.CyberReportDetails[1]['type']">
                        <div class="pdf-page-inner-new-content">

                            <div class="pdf-page-section">

                                <div class="pdf-page-inner-height">

                                    <div class="row">
                                        <div class="col-sm-12">
                                            <h5 class="cmn-head-style pt-1 text-light-blue">{{'incident'|translate}}</h5>


                                            <div class="issue-top-sec">
                                                <div class="clearfix">
                                                    <h5 class="d-inline-block cmn-head-style label-tag-style mr-2">
                                                        <span class="issue-smoal-head-text">#{{CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.reference_code}}</span> 
                                                        {{CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.cyber_incident_title}}
                                                        <span class="'draft-tag draft-tag' + CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.status?.label +'tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one'">
                                                            {{CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.status?.language[0]?.pivot?.title}}
                                                        </span>
                                                        </h5>
                                                </div>
                                                <!-- <div class="clearfix">
                                                    <p class="label-tag-style mb-2"><i class="fas fa-calendar-alt date-pics-two"></i> Jan 12, 2022 9.00 Am to Jan 12, 2023 9.00 Am</p>
                                                </div> -->
                                                <p style="white-space:pre-line">
                                                    {{CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.details}}
                                                </p>
                                            </div>

                                            <div class="row">
                                                <div class="col-lg-6 col-sm-6">
                                                    <h6>{{'cyber_occured_date_time' | translate}} </h6>
                                                    <p>{{CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.occurred}}</p>
                                                </div>
                                                <div class="col-lg-6 col-sm-6">
                                                    <h6>{{'cyber_detected_date_time' | translate}} </h6>
                                                    <p>{{CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.detected}}</p>
                                                </div>
                                            
                                                <div class="col-lg-6 col-sm-12">
                                                    <h6>{{'cyber_information_assests_involved' | translate}} </h6>
                                                    <p>{{CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.cyber_incident_assets?.length?getArrayFormatedString('title',CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.cyber_incident_assets):AppStore.noContentText}} </p>
                                                </div>
                                                <div class="col-lg-6 col-sm-12">
                                                    <h6>{{'cyber_classification' | translate}}</h6>
                                                    <p [ngClass]="'font-normal dot-div-new dot-'+removeDot(CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.cyber_incident_classifications?.label)">
                                                        {{CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.cyber_incident_classifications?.language[0]?.pivot?.title}}
                                                    </p>
                                                </div>
                                                <div class="col-lg-6 col-sm-12" *ngIf="CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.cyber_incident_impacts.length">
                                                    <h6>{{'impact' | translate}} </h6>
                                                    <ul class="arrowlist mt-0 p-0" *ngIf="CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.cyber_incident_impacts?.length"> 
                                                        <li *ngFor="let row of CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.cyber_incident_impacts">{{row?.title}}</li>
                                                    </ul> 
                                                </div>
                                                <div class="col-lg-6 col-sm-12">
                                                    <h6 class="mt-2">{{'reporting_user' | translate}}</h6>
                                                    <ul class="arci-user-tab-dtl workflow-lst-pics-loop clearfix mb-3">
                                                        <li class="rounde-hov-bg" *ngFor="let users of CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.reporting_users;let i=index">
                                                            <app-user-popup-box [showName]="false"
                                                               [source]="getCreatedByProcessDetails(users)">
                                                            </app-user-popup-box>
                                                            
                                
                                                        <div
                                                            *ngIf="CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.reporting_users?.length==0">
                                                            {{ AppStore.noContentText }}
                                                        </div>
                                                    </ul>
                                                </div>
                                            </div>

                                            <div class="row" *ngIf="CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.documents.length">
                                                <div class="col-lg-12 col-sm-12">
                                                    <h6 class="mt-2">{{'attachements' | translate}}</h6>
                                                    <div class="thumb-pics-bg thumb-pics-col-4 accordion-inner-thump clearfix thumb-pics-fix-text"
            *ngIf="CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.documents.length > 0">
            <div class="thumb-pics"
                *ngFor="let docs of CyberReportStore?.CyberReportDetails[1]?.cyber_incident?.documents;let i = index">

                <div style="margin: 0 -25px 0 0;" *ngIf="!docs.document_id"
                    Class="upload-pics upload-pics-small edit-option pointer"
                    (click)="viewBrochureItem('cyber_incident',docs,docs.id)">
                    <div class="browse-form-pic"
                        [ngStyle]="{'background': 'url('+createImageUrl('cyber_incident',docs?.token)+') no-repeat'}">
                    </div>
                    <div class="browse-form-name clearfix">
                        <div class="float-left">
                            <h6>
                                {{docs.title?docs.title:docs.name?docs.name:docs.version_title?docs.version_title:"NA"}}
                            </h6>
                            <span class="mr-2 cmn-clr"><i class="fas fa-laptop"></i></span>
                            <span>{{docs.size/1048576 | number:'0.2-2'}}MB</span>
                        </div>
                        <div class="browse-logo">
                            <img *ngIf="checkExtension(docs.ext,'image') != -1" class="folder-picher"
                                src="/assets/images/jpg-icone.png">
                            <img *ngIf="checkExtension(docs.ext,'doc') != -1" class="folder-picher"
                                src="/assets/images/word-icone.png">
                            <img *ngIf="checkExtension(docs.ext,'pdf') != -1" class="folder-picher"
                                src="/assets/images/pdf-icone.png">
                            <img *ngIf="checkExtension(docs.ext,'excel') != -1" class="folder-picher"
                                src="/assets/images/excel-icone.png">
                            <img *ngIf="checkExtension(docs.ext,'video') != -1" class="folder-picher"
                                src="/assets/images/md-video.png">
                            <img *ngIf="checkExtension(docs.ext,'audio') != -1" class="folder-picher"
                                src="/assets/images/md-audio.png">
                            <img *ngIf="checkExtension(docs.ext,'ppt') != -1" class="folder-picher"
                                src="/assets/images/md-ppt.png">
                        </div>
                    </div>
                    <div class="edit-option-show-inner" style="margin: -2px -8px 0 0;">
                        <a
                        ><i
                                class="fas fa-download"
                                (click)="downloadDocumentFile('cyber_incident',docs)"></i></a>
                    </div>
                </div>


                <div class="upload-pics edit-option" style="margin: 0 -25px 0 0;"
                    *ngIf="docs.document_id">

                    <div *ngFor="let mainDoc of docs?.kh_document?.versions">
                        <div *ngIf="mainDoc.is_latest"
                            Class="upload-pics-small pointer"
                            (click)="viewBrochureItem('document-version',docs,mainDoc)">
                            <div class="browse-form-pic"
                                [ngStyle]="{'background': 'url('+createImageUrl('document-version',mainDoc?.token)+') no-repeat'}">
                            </div>
                            <div class="browse-form-name clearfix">
                                <div class="float-left">
                                    <h6>{{mainDoc.title}}.{{mainDoc.ext}}
                                    </h6>
                                    <span class="mr-2 cmn-clr"><i class="fas fa-book"></i></span>
                                    <span>{{mainDoc.size/1048576 | number:'0.2-2'}}MB</span>
                                </div>
                                <div class="browse-logo">
                                    <img *ngIf="checkExtension(mainDoc.ext,'image') != -1"
                                        class="folder-picher" src="/assets/images/jpg-icone.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'doc') != -1"
                                        class="folder-picher" src="/assets/images/word-icone.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'pdf') != -1"
                                        class="folder-picher" src="/assets/images/pdf-icone.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'excel') != -1"
                                        class="folder-picher" src="/assets/images/excel-icone.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'video') != -1"
                                        class="folder-picher" src="/assets/images/md-video.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'audio') != -1"
                                        class="folder-picher" src="/assets/images/md-audio.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'ppt') != -1"
                                        class="folder-picher" src="/assets/images/md-ppt.png">
                                </div>
                            </div>
                            <div class="edit-option-show-inner" style="margin: -2px -8px 0 0;">
                                <a
                                ><i
                                class="fas fa-download"
                                (click)="downloadDocumentFile('document-version',docs,mainDoc)"></i></a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
                                                   


                                                </div>
                                                

                                            </div>



                                        </div>
                                    </div>

                                </div>
                                <!-- <div class="page-count-page-end-report">
                                    <p class="mb-0">Page 2</p>
                                </div> -->
                            </div>

                        </div>
                    </div>

                    <div class="holder" [attr.id]="CyberReportStore?.CyberReportDetails[2]['type']">
                        <div class="pdf-page-inner-new-content">

                            <div class="pdf-page-section">

                                <div class="pdf-page-inner-height">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <h5 class="cmn-head-style text-light-blue pt-1">{{'rca'| translate}}</h5>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12">



                                            <div class="stup-root-cause-main rca-tab-stup-root-cause-main bg-white p-0">

                                                <div [ngClass]="{'line-bottom-remove': i == CyberReportStore?.CyberReportDetails[2]?.root_cause_analysis.length-1}" class="stup-root-cause pb-3 line-top-remove" 
                                                *ngFor="let row of CyberReportStore?.CyberReportDetails[2]?.root_cause_analysis
                                                ;let i=index">
                                                    <!-- one starts -->
                                                    <div class="clearfix d-flex">
                                                        <div class="round-question-bg" style="width: 100px;">
                                                            <div class="round-question">
                                                                <h2 class="pulse-effect">?</h2>
                                                                <h5>Why {{i+1}}</h5>
                                                            </div>
                                                        </div>
                                                        <div class="round-question-details bg-main widg-padding-cmn edit-and-delete-main w-100 border-radius">

                                                            <p style="white-space:pre-line">{{row?.description}}</p>
                                                            <div class="row">
                                                                <div class="col-sm-4">
                                                                    <div>
                                                                        <h6>{{'root_cause_category'| translate}}</h6>
                                                                        <p>{{row?.root_cause_category?.title}}</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-4">
                                                                    <div>
                                                                        <h6>{{'root_cause_sub_category'| translate}}</h6>
                                                                        <p>{{row?.root_cause_sub_category?.title}}</p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="created-info-sec created-info-sec-drop">
                                                                <hr>
                                                                <app-user-popup-box
                                                                 [source]="getCreatedByProcessDetails(row?.created_by,row?.created_at)">
                                                               </app-user-popup-box>
                                                                <!-- <div class="d-flex flex-row user-list-sm">
                                                                    <img src="images/round-1.png" width="30px" height="30px" class="rounded-circle">
                                                                    <div>
                                                                        <h6>Jasica Williams</h6>
                                                                        <span>Project Manger | Created on jan 31,2020 11:41:AM</span>
                                                                    </div>
                                                                </div> -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- one ends -->

                                                <!-- <div class="stup-root-cause pb-3 line-bottom-remove ">
                                                   
                                                    <div class="clearfix d-flex">
                                                        <div class="round-question-bg" style="width: 100px;">
                                                            <div class="round-question">
                                                                <h2 class="pulse-effect">?</h2>
                                                                <h5>Why 2</h5>
                                                            </div>
                                                        </div>
                                                        <div class="round-question-details bg-main widg-padding-cmn edit-and-delete-main w-100 border-radius">

                                                            <p>Procedure not aware</p>
                                                            <div class="row">
                                                                <div class="col-sm-4">
                                                                    <div>
                                                                        <h6>Root Cause Category</h6>
                                                                        <p>Method</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-4">
                                                                    <div>
                                                                        <h6>Root Cause Sub Category</h6>
                                                                        <p>Lack Of Resource</p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="created-info-sec created-info-sec-drop">
                                                                <hr>
                                                                <div class="d-flex flex-row user-list-sm">
                                                                    <img src="images/round-1.png" width="30px" height="30px" class="rounded-circle">
                                                                    <div>
                                                                        <h6>Jasica Williams</h6>
                                                                        <span>Project Manger | Created on jan 31,2020 11:41:AM</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div> -->
                                                <!-- two ends -->




                                            </div>


                                        </div>
                                    </div>


                                </div>
                                <!-- <div class="page-count-page-end-report">
                                    <p class="mb-0">Page 2</p>
                                </div> -->
                            </div>

                        </div>
                    </div>


                    <div class="holder" [attr.id]="CyberReportStore?.CyberReportDetails[3]['type']">
                        <div class="pdf-page-inner-new-content">

                            <div class="pdf-page-section">

                                <div class="pdf-page-inner-height">

                                    <div class="row">
                                        <div class="col-sm-12">
                                            <h5 class="cmn-head-style text-light-blue pt-1">{{'impact_anaysis' | translate}}</h5>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-12 ">


                                            <div class="full-width-table">
                                                <table class="table table-bordered ordinary-table audit-page-table cmn-table-style mb-0 impact-analysis-tbl table-scroll">
                                                    <tbody>
                                                        <tr>
                                                            <th rowspan="2" class="text-center" style="width: 10%;">#</th>
                                                            <th rowspan="2" class="text-center" style="width: 16%;">{{'category'|translate}}</th>
                                                            
                                                            <th colspan="6" class="text-center" style="width: 54%;">{{'quantitative'|translate}}</th>
                                                        </tr>
                                                        <tr>
                                                            <th colspan="2" class="text-center">{{'money'| translate}}</th>
                                                            <th colspan="2" class="text-center">{{'time'| translate}}</th>
                                                            <th colspan="2" class="text-center">{{'performance'| translate}}</th>
                                                        </tr>

                                                        <tr class="edit-and-delete-main" *ngFor="let row of CyberReportStore?.CyberReportDetails[3]['impact_analysis']?.data; let i=index">
                                                            <td class="text-center">{{i+1}}</td>

                                                            <td class="text-center">{{row?.title}}</td>

                                                            

                                                            <td colspan="2" class="text-center">{{row?.money?row?.money:'0.00'}}</td>

                                                            <td colspan="2" class="text-center">{{row?.performance?row?.performance:'0.00'}}</td>

                                                            <td colspan="2" class="text-center">{{row?.time?row?.time:'0.00'}}</td>
                                                        </tr>
                                                        
                                                       

                                                        <tr>
                                                            <th colspan="2">{{'total'| translate}}</th>
                                                            <td colspan="2" class="text-center bold"><span class="text-red">{{CyberReportStore?.CyberReportDetails[3]['impact_analysis']?.money_total}}</span></td>
                                                            <td colspan="2" class="text-center bold"><span class="text-red">{{CyberReportStore?.CyberReportDetails[3]['impact_analysis']?.total_time}}</span></td>
                                                            <td colspan="2" class="text-center bold"><span class="text-red">{{CyberReportStore?.CyberReportDetails[3]['impact_analysis']?.total_performance}}%</span></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <!-- <div class="page-count-page-end-report">
                                    <p class="mb-0">Page 3</p>
                                </div> -->
                            </div>

                        </div>
                    </div>


                    <div class="holder" [attr.id]="CyberReportStore?.CyberReportDetails[4]['type']">
                        <div class="pdf-page-inner-new-content">

                            <div class="pdf-page-section">

                                <div class="pdf-page-inner-height">

                                    <div class="row">
                                        <div class="col-sm-12">
                                            <h5 class="cmn-head-style text-light-blue pt-1">{{'corrective_action' | translate}}</h5>
                                        </div>
                                    </div>

                                    <div class="row" *ngFor="let row of CyberReportStore?.CyberReportDetails[4]?.corrective_action">
                                        <div class="col-lg-8 col-sm-12 padding-right-0">

                                            <div class="bg-white">
                                                <div class="issue-top-sec">
                                                    <div class="clearfix">
                                                        <h5 class="d-inline-block cmn-head-style label-tag-style">
                                                            <span class="issue-smoal-head-text">#{{row?.reference_code}}</span> {{row?.title}}
                                                            <span class="'draft-tag'+row?.cyber_incident_corrective_action_status?.label +'label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one'">
                                                                {{row?.cyber_incident_corrective_action_status?.languages[0]?.pivot?.title}}
                                                            </span>
                                                        </h5>
                                                    </div>
                                                    <div class="clearfix">
                                                        <p class="label-tag-style mb-2"><i class="fas fa-calendar-alt date-pics-two"></i> {{row?.start_date |  date:
                                                            OrganizationGeneralSettingsStore.organizationSettings?.date_format}} -  {{row?.target_date |  date:
                                                                OrganizationGeneralSettingsStore.organizationSettings?.date_format}}</p>
                                                    </div>
                                                    <p style="white-space: pre-wrap;">
                                                        {{row?.description?row?.description:AppStore.noContentText}}
                                                    </p>
                                                </div>


                                                <div class="row">
                                                    <div class="col-xl-4 col-lg-4 col-sm-6">
                                                        <div class="label-and-user-pic">
                                                            <h6>{{'responsible_user' | translate}}</h6>
                                                            <ul class="arci-user-tab-dtl workflow-lst-pics-loop clearfix mb-3">
                                                                <li class="rounde-hov-bg" *ngFor="let users of row?.responsible_user;let i=index">
                                                                    <app-user-popup-box [showName]="false"
                                                                       [source]="getCreatedByProcessDetails(users)">
                                                                    </app-user-popup-box>
                                                                    
                                        
                                                                <div
                                                                    *ngIf="row?.responsible_user?.length==0">
                                                                    {{ AppStore.noContentText }}
                                                                </div>
                                                            </ul>
                                                            <!-- <div class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
                                                                <img src="images/round-7.png" class="rounded-circle rounde-hov details-show-popup" width="40px" height="40px">

                                                                <div class="pointer new-size-text">
                                                                    <h6>Jasica Williams </h6>
                                                                    <span>Team Lead</span>
                                                                </div>
                                                            </div> -->
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row" *ngIf="row?.documents?.length">
                                                    <div class="col-sm-12">
                                                        <h6>{{'support_files' | translate}}</h6>

                                                        <div class="thumb-pics-bg thumb-pics-col-3 accordion-inner-thump clearfix thumb-pics-fix-text"
            *ngIf="row?.documents.length > 0">
            <div class="thumb-pics"
                *ngFor="let docs of row?.documents;let i = index">

                <div style="margin: 0 -25px 0 0;" *ngIf="!docs.document_id"
                    Class="upload-pics upload-pics-small edit-option pointer"
                    (click)="viewBrochureItem('corrective-action',docs,docs.id)">
                    <div class="browse-form-pic"
                        [ngStyle]="{'background': 'url('+createImageUrl('corrective-action',docs?.token)+') no-repeat'}">
                    </div>
                    <div class="browse-form-name clearfix">
                        <div class="float-left">
                            <h6>
                                {{docs.title?docs.title:docs.name?docs.name:docs.version_title?docs.version_title:"NA"}}
                            </h6>
                            <span class="mr-2 cmn-clr"><i class="fas fa-laptop"></i></span>
                            <span>{{docs.size/1048576 | number:'0.2-2'}}MB</span>
                        </div>
                        <div class="browse-logo">
                            <img *ngIf="checkExtension(docs.ext,'image') != -1" class="folder-picher"
                                src="/assets/images/jpg-icone.png">
                            <img *ngIf="checkExtension(docs.ext,'doc') != -1" class="folder-picher"
                                src="/assets/images/word-icone.png">
                            <img *ngIf="checkExtension(docs.ext,'pdf') != -1" class="folder-picher"
                                src="/assets/images/pdf-icone.png">
                            <img *ngIf="checkExtension(docs.ext,'excel') != -1" class="folder-picher"
                                src="/assets/images/excel-icone.png">
                            <img *ngIf="checkExtension(docs.ext,'video') != -1" class="folder-picher"
                                src="/assets/images/md-video.png">
                            <img *ngIf="checkExtension(docs.ext,'audio') != -1" class="folder-picher"
                                src="/assets/images/md-audio.png">
                            <img *ngIf="checkExtension(docs.ext,'ppt') != -1" class="folder-picher"
                                src="/assets/images/md-ppt.png">
                        </div>
                    </div>
                    <div class="edit-option-show-inner" style="margin: -2px -8px 0 0;">
                        <a
                        ><i
                                class="fas fa-download"
                                (click)="downloadDocumentFile('corrective-action',docs)"></i></a>
                    </div>
                </div>


                <div class="upload-pics edit-option" style="margin: 0 -25px 0 0;"
                    *ngIf="docs.document_id">

                    <div *ngFor="let mainDoc of docs?.kh_document?.versions">
                        <div *ngIf="mainDoc.is_latest"
                            Class="upload-pics-small pointer"
                            (click)="viewBrochureItem('document-version',docs,mainDoc)">
                            <div class="browse-form-pic"
                                [ngStyle]="{'background': 'url('+createImageUrl('document-version',mainDoc?.token)+') no-repeat'}">
                            </div>
                            <div class="browse-form-name clearfix">
                                <div class="float-left">
                                    <h6>{{mainDoc.title}}.{{mainDoc.ext}}
                                    </h6>
                                    <span class="mr-2 cmn-clr"><i class="fas fa-book"></i></span>
                                    <span>{{mainDoc.size/1048576 | number:'0.2-2'}}MB</span>
                                </div>
                                <div class="browse-logo">
                                    <img *ngIf="checkExtension(mainDoc.ext,'image') != -1"
                                        class="folder-picher" src="/assets/images/jpg-icone.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'doc') != -1"
                                        class="folder-picher" src="/assets/images/word-icone.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'pdf') != -1"
                                        class="folder-picher" src="/assets/images/pdf-icone.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'excel') != -1"
                                        class="folder-picher" src="/assets/images/excel-icone.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'video') != -1"
                                        class="folder-picher" src="/assets/images/md-video.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'audio') != -1"
                                        class="folder-picher" src="/assets/images/md-audio.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'ppt') != -1"
                                        class="folder-picher" src="/assets/images/md-ppt.png">
                                </div>
                            </div>
                            <div class="edit-option-show-inner" style="margin: -2px -8px 0 0;">
                                <a
                                ><i
                                class="fas fa-download"
                                (click)="downloadDocumentFile('document-version',docs,mainDoc)"></i></a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <!-- <div class="col-lg-4 col-sm-12">

                                            <div class="bg-white widg-padding-cmn-small mb-3 cmn-bdr">
                                                <h6>Corrective Action % Completed</h6>
                                                <hr class="mt-0 mb-3">

                                                <div [ngClass]="row?.percentage > 50 ?'progress-circle progress-circle-big-one over50 p'+row?.percentage:'progress-circle progress-circle-big-one p'+row?.percentage">
                                                    <span>{{row?.percentage?row?.percentage:'0'}}%</span>
                                                    <div class="left-half-clipper">
                                                        <div class="first50-bar"></div>
                                                        <div class="value-bar"></div>
                                                    </div>
                                                </div>

                                            </div>

                                            <div class="bg-white widg-padding-cmn-small mb-3 cmn-bdr">
                                                <h6 class="text-left">{{'days_remaining' | translate}}</h6>
                                                <hr class="mt-0 mb-3">

                                                <div class="clearfix">
                                                    <div class="mb-3">
                                                        <p class="dot-div-new font-normal mb-0 dot-green d-block">
                                                            {{'remaining_days'|translate}}
                                                            ({{row?.days_remaining}}{{' days'}})
                                                        </p>
                                                        <p class="dot-div-new font-normal mb-0 dot-red d-block">{{'total_days'|translate}}
                                                            ({{row?.total_days}}{{' days'}})
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="vertical-progress-v2">
                                                    <div class="progress-bg-sec">
                                                        <div class="progress-inner-color"
                                                            [style.height.%]="(row?.days_remaining/row?.total_days)*100">
                                                        </div>
                                                    </div>
                                                </div>


                                            </div>

                                        </div> -->
                                    </div>


                                </div>
                                <!-- <div class="page-count-page-end-report">
                                    <p class="mb-0">Page 4</p>
                                </div> -->
                            </div>

                        </div>
                    </div>

                    <div class="holder" [attr.id]="CyberReportStore?.CyberReportDetails[5]['type']">
                        <div class="pdf-page-inner-new-content">

                            <div class="pdf-page-section">

                                <div class="pdf-page-inner-height">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <h5 class="cmn-head-style text-light-blue pt-1">{{'conclusion' | translate}}</h5>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-12 edit-and-delete-main">
                                            <div class="edit-option-show" style="margin: 0px 20px 0 0;"><!-- edit-and-delete starts -->
                                                <a><i class="fas fa-pen"
                                                  (click)="editReport(CyberReportStore?.CyberReportDetails[5])"></i></a>
                                                </div>
                                            <p style="white-space: pre-line">
                                                {{CyberReportStore?.CyberReportDetails[5]['description']?CyberReportStore?.CyberReportDetails[5]['description']:AppStore.noContentText}}

                                            </p>
                                            
                                        </div>
                                    </div>

                                </div>
                                <!-- <div class="page-count-page-end-report">
                                    <p class="mb-0">Page 5</p>
                                </div> -->
                            </div>

                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>
</ng-container>
<div class="modal modal-style-1 fade" id="delete-popup" #confirmationPopUp>
    <app-delete-popup [source] = "popupObject"></app-delete-popup>
 </div>

 <div class="modal modal-style-1 popup-full-width fade popup-new-type" id="add-three-popup" data-keyboard="false"
    data-backdrop="static" #filePreviewModal *mobxAutorun>
    <button type="button" class="close" (click)="closePreviewModal($event)"><i class="lni-close"></i><span>{{'esc' |
            translate}}</span></button>
    <app-cyber-incident-file-preview *ngIf="previewObject" [source]="previewObject" (close)="closePreviewModal($event)">
    </app-cyber-incident-file-preview>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #conclusion>
    <app-add-report-conclusion [source]="commentObject" *ngIf="commentObject.type"></app-add-report-conclusion>
 </div>
