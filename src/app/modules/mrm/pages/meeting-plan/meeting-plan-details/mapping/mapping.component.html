<div *ngIf="MappingStore?.loaded && AuthStore.getActivityPermission(1600,'MEETING_PLAN_MAPPING_LIST')"
    class="tab-pane tab-edit-class" id="risk-mapping">

    <div class="common-tab-md tab-same-height clearfix" *mobxAutorun>
        <div class="tab-common-left-md">
            <div class=" issues-tab">
                <ul class="nav nav-tabs nav-tabs--vertical nav-tabs--left vertical-tab" role="navigation">
                    <li 
                    *ngIf="OrganizationModulesStore.checkOrganizationSubModulesPermission(100,21901)" 
                    class="nav-item"> <a (click)="gotoSection('issue')" href="#tab-one" class="nav-link active"
                            data-toggle="tab" role="tab" aria-controls="ipsum" aria-selected="false"> {{'issues' |
                            translate}}</a></li>
                    <li 
                    *ngIf="OrganizationModulesStore.checkOrganizationModules(600)"
                    class="nav-item"> <a (click)="gotoSection('process')" class="nav-link" data-toggle="tab"
                        role="tab" aria-controls="lorem" aria-selected="false">{{'process' | translate}}</a></li>
                    
                    <li 
                    *ngIf="OrganizationModulesStore.checkOrganizationModules(900)" 
                    class="nav-item"> <a (click)="gotoSection('risk')" class="nav-link" data-toggle="tab" role="tab"
                        aria-controls="lorem" aria-selected="false"> {{'risks' | translate}}</a></li>
                    
                    <li 
                    *ngIf="OrganizationModulesStore.checkOrganizationModules(600)" 
                    class="nav-item"> <a (click)="gotoSection('control')" class="nav-link" data-toggle="tab" role="tab"
                        aria-controls="lorem" aria-selected="false"> {{'controls' | translate}}</a></li>
                    
                    <li
                    *ngIf="OrganizationModulesStore.checkOrganizationModules(100)"
                    class="nav-item"> <a (click)="gotoSection('project')" class="nav-link" data-toggle="tab" role="tab"
                        aria-controls="lorem" aria-selected="false"> {{'projects' | translate}}</a></li>
                    
                    <li
                    *ngIf="OrganizationModulesStore.checkOrganizationModules(100)"
                    class="nav-item"> <a (click)="gotoSection('product')" class="nav-link" data-toggle="tab" role="tab"
                        aria-controls="lorem" aria-selected="false"> {{'products' | translate}}</a></li>
                    
                    <li
                    *ngIf="OrganizationModulesStore.checkOrganizationModules(100)"
                    class="nav-item"> <a (click)="gotoSection('customer')" class="nav-link" data-toggle="tab" role="tab"
                        aria-controls="lorem" aria-selected="false"> {{'customers' | translate}}</a></li>
                    
                    <li 
                    *ngIf="OrganizationModulesStore.checkOrganizationModules(100)"
                    class="nav-item"> <a (click)="gotoSection('objective')" class="nav-link" data-toggle="tab" role="tab"
                        aria-controls="lorem" aria-selected="false"> {{'strategic_objectives' | translate}}</a></li>
                    
                    <li
                    *ngIf="OrganizationModulesStore.checkOrganizationModules(3900)"
                    class="nav-item"> <a (click)="gotoSection('audit_finding')" class="nav-link" data-toggle="tab" role="tab"
                        aria-controls="lorem" aria-selected="false"> {{'audit_findings' | translate}}</a></li>
                    
                    <li
                    *ngIf="OrganizationModulesStore.checkOrganizationModules(3500)"
                    class="nav-item"> <a (click)="gotoSection('non-conformity')" class="nav-link" data-toggle="tab" role="tab"
                        aria-controls="lorem" aria-selected="false"> {{'non-conformity' | translate}}</a></li>
                </ul>
            </div>
        </div>


        <div class="tab-common-left-content-m bg-white cmn-bdr p-3 min-height-83">
            <div class="tab-content">

                <div *ngIf="selectedSection=='issue'" class="tab-pane fade active show" id="tab-one" role="tabpanel">
                    <div class="cmn-bdr p-3 d-flex mb-3 align-items-center" *ngIf="MappingStore.mappingDetails?.organization_issues?.length>0">
                        <h6 class="mb-0 w-100">{{'issues' | translate}}</h6>
                        <div class="text-right ml-2" style="width: 100px;">
                            <button *ngIf=" AuthStore.getActivityPermission(1600,'ISSUE_MEETING_PLAN_MAPPING_CREATE') && 
                            MappingStore.loaded && MappingStore.mappingDetails.organization_issues.length>0 &&
                            MappingStore.mappingDetails?.meeting_plan_status?.id!=4" type="button" (click)="selectIssues()"
                                class="btn btn-small" data-toggle="modal" data-target="#choose-process-popup"
                                style="margin: 0 !important;">{{'select' | translate}}</button>
                        </div>
                    </div>
                    <div class="audit-form-table w-100 not-fixed-table mb-3">
                        <table class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll"
                            *ngIf="MappingStore.loaded && MappingStore.mappingDetails.organization_issues.length>0">
                            <tr>
                                <th class="border-top-0 text-center" width="4%">#</th>
                                <th class="border-top-0" width="10%">{{'ref_id' | translate}}</th>
                                <th class="border-top-0" width="23%">{{'issue' | translate}}</th>
                                <th class="border-top-0" width="13%">{{'issue_types' | translate}}</th>
                                <th class="border-top-0" width="15%">{{'issue_categories' | translate}}</th>
                                <th class="border-top-0" width="20%">{{'issue_domains' | translate}}</th>
                                <th class="border-top-0" width="15%">{{'departments' | translate}}</th>
                            </tr>
                            <tr class="edit-and-delete-main"
                                *ngFor="let selected of MappingStore.mappingDetails.organization_issues; let list=index">
                                <td class="text-center">{{list+1}}</td>
                                <td>#{{selected.reference_code}}</td>
                                <td>{{selected.issues_title?selected.issues_title:selected.title}}</td>
                                <td *ngIf=" passOrganizationIssueIypes(selected.organization_issue_types)?.length>0">
                                    <span
                                        *ngFor="let types of passOrganizationIssueIypes(selected.organization_issue_types)"
                                        class="risk-type-bx risk-type-bx-drop">
                                        <i><img
                                                [attr.src]="types == 'Internal' ? 'assets/images/internal.svg' : 'assets/images/external.svg'" style="width: 15px;"></i>&nbsp;{{types}}
                                    </span>
                                </td>
                                <td *ngIf=" passOrganizationIssueIypes(selected.organization_issue_types)?.length==0">
                                    {{ AppStore.noContentText }}
                                </td>
                                <td>
                                    {{ passOrganizationIssueCategories(selected.organization_issue_categories)?
                                    passOrganizationIssueCategories(selected.organization_issue_categories):AppStore.noContentText}}
                                </td>
                                <td>
                                    {{
                                    passIssueDomains(selected.organization_issue_domains)?passIssueDomains(selected.organization_issue_domains):AppStore.noContentText}}
                                </td>
                                <td>
                                    {{passdepartments(selected.organization_issue_departments) }}
                                    <div *ngIf="MappingStore.mappingDetails?.meeting_plan_status?.id!=4" class="edit-option-show">
                                        <a *ngIf="AuthStore.getActivityPermission(1600,'DELETE_ISSUE_MEETING_PLAN_MAPPING')"
                                            (click)="deleteIssueMapping(selected.id)"
                                            [attr.title]="'delete' | translate"><i class="fas fa-trash pointer"></i></a>
                                    </div>
                                </td>
                            </tr>

                        </table>
                        <ng-container *mobxAutorun>
                            <app-no-data
                                *ngIf="MappingStore.loaded && MappingStore.mappingDetails.organization_issues.length == 0"
                                [border]='false'></app-no-data>
                        </ng-container>
                    </div>
                </div>

                <div *ngIf="selectedSection=='process'" class="tab-pane fade active show" id="tab-two" role="tabpanel">
                    <div class="no-fixed-table mb-4">
                        <div class="cmn-bdr p-3 d-flex mb-3 align-items-center"
                        *ngIf="MappingStore.mappingDetails.processes.length>0">
                          <h6 class="mb-0 w-100">{{'processes' | translate}}</h6>
                          <div class="text-right ml-2" style="width: 100px;">
                             <button *ngIf="AuthStore.getActivityPermission(1600,'PROCESS_MEETING_PLAN_MAPPING_CREATE') && MappingStore.mappingDetails.processes.length>0
                                && MappingStore.mappingDetails?.meeting_plan_status?.id!=4"
                             type="button" (click)="selectProcesses()" class="btn btn-small" data-toggle="modal"
                                data-target="#choose-process-popup" style="margin: 0 !important;">{{'select' | translate}}</button>
                          </div>
                    </div>

                        <table class="table table-bordered ordinary-table cmn-table-style mb-1 word-break"
                            *ngIf="MappingStore.loaded && MappingStore.mappingDetails.processes.length > 0">
                            <tr>
                                <th class="border-top-0 text-center" width="4%">#</th>
                                <th class="border-top-0" width="9%">{{'ref_id' | translate}}</th>
                                <th class="border-top-0" width="25%">{{'process_group' | translate}}</th>
                                <th class="border-top-0" width="33%">{{'process' | translate}}</th>
                                <th class="border-top-0" width="20%">{{'process_category' | translate}}</th>
                                <th class="border-top-0" width="24%">{{'departments' | translate}}</th>
                            </tr>
                            <tr class="edit-and-delete-main"
                                *ngFor="let selected of MappingStore.mappingDetails.processes; let list=index">
                                <td class="text-center">{{list+1}}</td>
                                <td>#{{selected?.reference_code}}</td>
                                <td>{{selected?.process_group?.title}}</td>
                                <td> {{selected?.title}}
                                </td>
                                <td>{{selected?.process_category?.title? selected?.process_category?.title: AppStore.noContentText}}</td>
                                <td>
                                    {{selected?.department?.title}}
                                    <div *ngIf="MappingStore.mappingDetails?.meeting_plan_status?.id!=4" class="edit-option-show">
                                        <a *ngIf="AuthStore.getActivityPermission(1600,'DELETE_PROCESS_MEETING_PLAN_MAPPING')"
                                            (click)="deleteProcessMapping(selected.id)"
                                            [attr.title]="'delete' | translate"><i class="fas fa-trash pointer"></i></a>
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <ng-container *mobxAutorun>
                            <app-no-data
                                *ngIf="MappingStore.loaded && MappingStore.mappingDetails.processes.length == 0"
                                [border]='false'></app-no-data>
                        </ng-container>

                    </div>
                </div>

                <div *ngIf="selectedSection=='risk'" class="tab-pane fade active show" id="tab-three" role="tabpanel">
                    <div class="no-fixed-table mb-4">
                        <div class="cmn-bdr p-3 d-flex mb-3 align-items-center" *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.risks?.length > 0">
                            <h6 class="mb-0 w-100">{{'risks' | translate}}</h6>
                            <div class="text-right ml-2" style="width: 100px;">
                                <button *ngIf=" AuthStore.getActivityPermission(1600,'RISK_MEETING_PLAN_MAPPING_CREATE')&& 
                                MappingStore.loaded && MappingStore.mappingDetails?.risks?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4" type="button" (click)="selectRisk()"
                                    class="btn btn-small" data-toggle="modal" data-target="#choose-process-popup"
                                    style="margin: 0 !important;">{{'select' | translate}}</button>
                            </div>
                        </div>
                        <!-- <div class="clearfix">
                            <button type="button" class="btn btn-small float-right mb-2" (click)="selectRisk()"
                                *ngIf=" AuthStore.getActivityPermission(1600,'RISK_MEETING_PLAN_MAPPING_CREATE')&& 
                                MappingStore.loaded && MappingStore.mappingDetails?.risks?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4">{{'select' | translate}}</button>
                        </div> -->
                        <table class="table table-bordered ordinary-table cmn-table-style mb-1 word-break"
                            *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.risks?.length > 0">
                            <tr>
                                <th class="border-top-0 text-center" width="4%">#</th>
                                <th class="border-top-0" width="9%">{{'ref_id' | translate}}</th>
                                <th class="border-top-0" width="25%">{{'risk' | translate}}</th>
                                <th class="border-top-0" width="25%">{{'department' | translate}}</th>
                                <th class="border-top-0" width="23%">{{'risk_category' | translate}}</th>
                                <th class="border-top-0" width="25%">{{'risk_type' | translate}}</th>
                            </tr>
                            <tr class="edit-and-delete-main" *ngFor="let selected of risk; let list=index">
                                <td class="text-center">{{list+1}}</td>
                                <td>{{selected.reference_code}}</td>
                                <td>{{selected.title}}</td>
                                <td> {{checkDepartment(selected.departments)}}
                                </td>
                                <td>{{ checkRiskCategory(selected.risk_category?.title
                                    ?selected.risk_category?.title:selected.risk_category_title)}}</td>
                                <td>{{checkRiskType(selected.risk_types)}}
                                    <div *ngIf="MappingStore.mappingDetails?.meeting_plan_status?.id!=4" class="edit-option-show">
                                        <a *ngIf="AuthStore.getActivityPermission(1600,'DELETE_RISK_MEETING_PLAN_MAPPING')"
                                            (click)="deleteRiskMapping(selected.id)"
                                            [attr.title]="'delete' | translate"><i class="fas fa-trash pointer"></i></a>
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <ng-container *mobxAutorun>
                            <app-no-data
                                *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.risks?.length == 0"
                                [border]='false'></app-no-data>
                        </ng-container>

                    </div>
                </div>

                <div *ngIf="selectedSection=='control'" class="tab-pane fade active show" id="tab-three" role="tabpanel">
                    <div class="no-fixed-table mb-4">
                        <div class="cmn-bdr p-3 d-flex mb-3 align-items-center" *ngIf="MappingStore.mappingDetails?.controls?.length>0">
                            <h6 class="mb-0 w-100">{{'controls' | translate}}</h6>
                            <div class="text-right ml-2" style="width: 100px;">
                                <button  *ngIf="AuthStore.getActivityPermission(1600,'CONTROL_MEETING_PLAN_MAPPING_CREATE') && 
                                MappingStore.loaded && MappingStore.mappingDetails?.controls?.length>0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4" type="button" (click)="selectControls()"
                                    class="btn btn-small" data-toggle="modal" data-target="#choose-process-popup"
                                    style="margin: 0 !important;">{{'select' | translate}}</button>
                            </div>
                        </div>
                        <!-- <div class="clearfix">
                            <button type="button" class="btn btn-small float-right mb-2" (click)="selectControls()"
                                *ngIf="AuthStore.getActivityPermission(1600,'CONTROL_MEETING_PLAN_MAPPING_CREATE') && 
                                MappingStore.loaded && MappingStore.mappingDetails?.controls?.length>0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4">{{'select' | translate}}</button>
                        </div> -->
                        <table class="table table-bordered ordinary-table cmn-table-style mb-1 word-break"
                            *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.controls?.length > 0">
                            <tr>
                                <th class="border-top-0 text-center" width="4%">#</th>
                                <th class="border-top-0" width="10%">{{'ref_id' | translate}}</th>
                                <th class="border-top-0" width="86%">{{'title' | translate}}</th>
                            </tr>
                            <tr class="edit-and-delete-main"
                                *ngFor="let cntrl of controls; let list=index">
                                <td class="text-center">{{list+1}}</td>
                                <td>{{cntrl.reference_code}}</td>
                                <td>
                                    {{cntrl.issues_title?cntrl.issues_title:cntrl.title}}
                                    <div *ngIf="MappingStore.mappingDetails?.meeting_plan_status?.id!=4" class="edit-option-show">
                                        <a *ngIf="AuthStore.getActivityPermission(1600,'DELETE_CONTROL_MEETING_PLAN_MAPPING')"
                                            (click)="deleteControlMapping(cntrl.id)"
                                            [attr.title]="'delete' | translate"><i class="fas fa-trash pointer"></i></a>
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <ng-container *mobxAutorun>
                            <app-no-data
                                *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.controls?.length == 0"
                                [border]='false'></app-no-data>
                        </ng-container>

                    </div>
                </div>

                <div *ngIf="selectedSection=='project'" class="tab-pane fade active show" id="tab-three" role="tabpanel">
                    <div class="no-fixed-table mb-4">
                        <div class="cmn-bdr p-3 d-flex mb-3 align-items-center" *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.projects?.length > 0">
                            <h6 class="mb-0 w-100">{{'projects' | translate}}</h6>
                            <div class="text-right ml-2" style="width: 100px;">
                                <button *ngIf=" AuthStore.getActivityPermission(1600,'PROJECT_MEETING_PLAN_MAPPING_CREATE') &&
                                MappingStore.loaded && MappingStore.mappingDetails?.projects?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4" type="button" (click)="selectProjects()"
                                    class="btn btn-small" data-toggle="modal" data-target="#choose-process-popup"
                                    style="margin: 0 !important;">{{'select' | translate}}</button>
                            </div>
                        </div>
                        <!-- <div class="clearfix">
                            <button type="button" class="btn btn-small float-right mb-2" (click)="selectProjects()"
                                *ngIf=" AuthStore.getActivityPermission(1600,'PROJECT_MEETING_PLAN_MAPPING_CREATE') &&
                                MappingStore.loaded && MappingStore.mappingDetails?.projects?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4">{{'select' | translate}}</button>
                        </div> -->
                        <table class="table table-bordered ordinary-table cmn-table-style mb-1 word-break"
                            *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.projects?.length > 0">
                            <tr>
                                <th class="border-top-0 text-center" width="4%">#</th>
                                <th class="border-top-0" width="31%">{{'title' | translate}}</th>
                                <th class="border-top-0" width="31%">{{'manager_name' | translate}}</th>
                                <th class="border-top-0" width="9%">{{'member_count' | translate}}</th>
                                <th class="border-top-0" width="9%">{{'location' | translate}} </th>
                            </tr>
                            <tr class="edit-and-delete-main"
                                *ngFor="let proj of projects; let list=index">
                                <td class="text-center">{{list+1}}</td>
                                <td> {{proj.title}}</td>
                                <td> <div class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg" *ngIf="proj.project_manager_first_name">
                                    <img
                                        [attr.src]="proj.image_token?createImageUrl(proj.image_token):getDefaultImage('user-logo')"
                                        width="30px" height="30px" class="rounded-circle">
                                    
                                    <div>
                                        <h6>{{proj?.project_manager_first_name}} {{proj?.project_manager_last_name}}</h6>
                                        <span>{{proj?.project_manager_designation?proj.project_manager_designation:AppStore.noContentText}} </span>
                                    </div>
                                </div> 
                                <p *ngIf="!proj.project_manager_first_name">{{AppStore.noContentText}}</p>
                                </td>
                                <td>{{proj.member_count?proj.member_count:AppStore.noContentText}}</td>
                                <td>
                                    {{proj.location_title?proj.location_title:AppStore.noContentText}}
                                    <div *ngIf="MappingStore.mappingDetails?.meeting_plan_status?.id!=4" class="edit-option-show">
                                        <a  *ngIf="AuthStore.getActivityPermission(1600,'DELETE_PROJECT_MEETING_PLAN_MAPPING')"
                                            (click)="deleteProjectMapping(proj.id)"
                                            [attr.title]="'delete' | translate"><i class="fas fa-trash pointer"></i></a>
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <ng-container *mobxAutorun>
                            <app-no-data
                                *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.projects?.length == 0"
                                [border]='false'></app-no-data>
                        </ng-container>

                    </div>
                </div>

                <div *ngIf="selectedSection=='product'" class="tab-pane fade active show" id="tab-three" role="tabpanel">
                    <div class="no-fixed-table mb-4">
                        <div class="cmn-bdr p-3 d-flex mb-3 align-items-center" *ngIf="MappingStore.mappingDetails?.products?.length > 0">
                            <h6 class="mb-0 w-100">{{'products' | translate}}</h6>
                            <div class="text-right ml-2" style="width: 100px;">
                                <button *ngIf=" AuthStore.getActivityPermission(1600,'PRODUCT_MEETING_PLAN_MAPPING_CREATE') && 
                                MappingStore.loaded && MappingStore.mappingDetails?.products?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4" type="button" (click)="selectProducts()"
                                    class="btn btn-small" data-toggle="modal" data-target="#choose-process-popup"
                                    style="margin: 0 !important;">{{'select' | translate}}</button>
                            </div>
                        </div>
                        <!-- <div class="clearfix">
                            <button type="button" class="btn btn-small float-right mb-2" (click)="selectProducts()"
                                *ngIf=" AuthStore.getActivityPermission(1600,'PRODUCT_MEETING_PLAN_MAPPING_CREATE') && 
                                MappingStore.loaded && MappingStore.mappingDetails?.products?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4">{{'select' | translate}}</button>
                        </div> -->
                        <table class="table table-bordered ordinary-table cmn-table-style mb-1 word-break"
                            *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.products?.length > 0">
                            <tr>
                                <th class="border-top-0 text-center" width="4%">#</th>
                                <th class="border-top-0" width="50%">{{'title' | translate}}</th>
                                <th class="border-top-0" width="46%">{{'description' | translate}}</th>
                            </tr>
                            <tr class="edit-and-delete-main"
                                *ngFor="let prod of products; let list=index">
                                <td class="text-center">{{list+1}}</td>
                                <td>{{prod.title}}</td>
                                <td>{{prod.description?prod.description:AppStore.noContentText}}
                                    <div *ngIf="MappingStore.mappingDetails?.meeting_plan_status?.id!=4" class="edit-option-show">
                                        <a  *ngIf="AuthStore.getActivityPermission(1600,'DELETE_PRODUCT_MEETING_PLAN_MAPPING')"
                                            (click)="deleteProductMapping(prod.id)"
                                            [attr.title]="'delete' | translate"><i class="fas fa-trash pointer"></i></a>
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <ng-container *mobxAutorun>
                            <app-no-data
                                *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.products?.length == 0"
                                [border]='false'></app-no-data>
                        </ng-container>

                    </div>
                </div>

                <div *ngIf="selectedSection=='customer'" class="tab-pane fade active show" id="tab-three" role="tabpanel">
                    <div class="no-fixed-table mb-4">
                        <div class="cmn-bdr p-3 d-flex mb-3 align-items-center" *ngIf="MappingStore.mappingDetails?.customers?.length > 0">
                            <h6 class="mb-0 w-100">{{'customers' | translate}}</h6>
                            <div class="text-right ml-2" style="width: 100px;">
                                <button *ngIf=" AuthStore.getActivityPermission(1600,'CUSTOMER_MEETING_PLAN_MAPPING_CREATE') && 
                                MappingStore.loaded && MappingStore.mappingDetails?.customers?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4" type="button" (click)="selectCustomers()"
                                    class="btn btn-small" data-toggle="modal" data-target="#choose-process-popup"
                                    style="margin: 0 !important;">{{'select' | translate}}</button>
                            </div>
                        </div>
                        <!-- <div class="clearfix">
                            <button type="button" class="btn btn-small float-right mb-2" (click)="selectCustomers()"
                                *ngIf=" AuthStore.getActivityPermission(1600,'CUSTOMER_MEETING_PLAN_MAPPING_CREATE') && 
                                MappingStore.loaded && MappingStore.mappingDetails?.customers?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4">{{'select' | translate}}</button>
                        </div> -->
                        <table class="table table-bordered ordinary-table cmn-table-style mb-1 word-break"
                            *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.customers?.length > 0">
                            <tr>
                                <th class="border-top-0 text-center" width="4%">#</th>
                                <th class="border-top-0" width="36%">{{'title' | translate}}</th>
                                <th class="border-top-0" width="30%">{{'contact_person' | translate}}</th>
                                <th class="border-top-0" width="30%">{{'address' | translate}}</th>
                            </tr>
                            <tr class="edit-and-delete-main"
                                *ngFor="let cust of customers; let list=index">
                                <td class="text-center">{{list+1}}</td>
                                <td> {{cust.title}}</td>
                                <td>{{cust.contact_person?cust.contact_person:AppStore.noContentText}}</td>
                                <td>
                                    {{cust.address?cust.address:AppStore.noContentText}}
                                    <div *ngIf="MappingStore.mappingDetails?.meeting_plan_status?.id!=4" class="edit-option-show">
                                        <a *ngIf="AuthStore.getActivityPermission(1600,'DELETE_CUSTOMER_MEETING_PLAN_MAPPING')"
                                            (click)="deleteCustomertMapping(cust.id)"
                                            [attr.title]="'delete' | translate"><i class="fas fa-trash pointer"></i></a>
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <ng-container *mobxAutorun>
                            <app-no-data
                                *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.customers?.length == 0"
                                [border]='false'></app-no-data>
                        </ng-container>

                    </div>
                </div>

                <div *ngIf="selectedSection=='objective'" class="tab-pane fade active show" id="tab-three" role="tabpanel">
                    <div class="no-fixed-table mb-4">
                        <div class="cmn-bdr p-3 d-flex mb-3 align-items-center" *ngIf="MappingStore.mappingDetails?.strategic_objectives?.length > 0">
                            <h6 class="mb-0 w-100">{{'strategic_objectives' | translate}}</h6>
                            <div class="text-right ml-2" style="width: 100px;">
                                <button *ngIf=" AuthStore.getActivityPermission(1600,'STRATEGIC_OBJECTIVE_MEETING_PLAN_MAPPING_CREATE') &&
                                MappingStore.loaded && MappingStore.mappingDetails?.strategic_objectives?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4" type="button" (click)="selectObjectives()"
                                    class="btn btn-small" data-toggle="modal" data-target="#choose-process-popup"
                                    style="margin: 0 !important;">{{'select' | translate}}</button>
                            </div>
                        </div>
                        <!-- <div class="clearfix">
                            <button type="button" class="btn btn-small float-right mb-2" (click)="selectObjectives()"
                                *ngIf=" AuthStore.getActivityPermission(1600,'STRATEGIC_OBJECTIVE_MEETING_PLAN_MAPPING_CREATE') &&
                                MappingStore.loaded && MappingStore.mappingDetails?.strategic_objectives?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4">{{'select' | translate}}</button>
                        </div> -->
                        <table class="table table-bordered ordinary-table cmn-table-style mb-1 word-break"
                            *ngIf=" MappingStore.loaded && MappingStore.mappingDetails?.strategic_objectives?.length > 0">
                            <tr>
                                <th class="border-top-0 text-center" width="4%">#</th>
                                <th class="border-top-0" width="96%">{{'title' | translate}}</th>
                            </tr>
                            <tr class="edit-and-delete-main"
                                *ngFor="let obj of strategic_objectives; let list=index">
                                <td class="text-center">{{list+1}}</td>
                                <td> 
                                    {{obj.title}}
                                    <div *ngIf="MappingStore.mappingDetails?.meeting_plan_status?.id!=4" class="edit-option-show">
                                        <a *ngIf="AuthStore.getActivityPermission(1600,'DELETE_STRATEGIC_OBJECTIVE_MEETING_PLAN_MAPPING')"
                                            (click)="deleteObjectivetMapping(obj.id)"
                                            [attr.title]="'delete' | translate"><i class="fas fa-trash pointer"></i></a>
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <ng-container *mobxAutorun>
                            <app-no-data
                                *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.strategic_objectives?.length == 0"
                                [border]='false'></app-no-data>
                        </ng-container>

                    </div>
                </div>

                <div *ngIf="selectedSection=='audit_finding'" class="tab-pane fade active show" id="tab-three" role="tabpanel">
                    <div class="no-fixed-table mb-4">
                        <div class="cmn-bdr p-3 d-flex mb-3 align-items-center" *ngIf="MappingStore.mappingDetails?.findings?.length > 0">
                            <h6 class="mb-0 w-100">{{'audit_findings' | translate}}</h6>
                            <div class="text-right ml-2" style="width: 100px;">
                                <button  *ngIf=" AuthStore.getActivityPermission(1600,'FINDINGS_MEETING_PLAN_MAPPING_CREATE') && 
                                MappingStore.loaded && MappingStore.mappingDetails?.findings?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4" type="button" (click)="selectFindings()"
                                    class="btn btn-small" data-toggle="modal" data-target="#choose-process-popup"
                                    style="margin: 0 !important;">{{'select' | translate}}</button>
                            </div>
                        </div>
                        <!-- <div class="clearfix">
                            <button type="button" class="btn btn-small float-right mb-2" (click)="selectFindings()"
                                *ngIf=" AuthStore.getActivityPermission(1600,'FINDINGS_MEETING_PLAN_MAPPING_CREATE') && 
                                MappingStore.loaded && MappingStore.mappingDetails?.findings?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4">{{'select' | translate}}</button>
                        </div> -->
                        <table class="table table-bordered ordinary-table cmn-table-style mb-1 word-break"
                            *ngIf=" MappingStore.loaded && MappingStore.mappingDetails?.findings?.length > 0">
                            <tr>
                                <th class="border-top-0 text-center" width="4%">#</th>
                                <th class="border-top-0" width="51%">{{'title' | translate}}</th>
                                <th class="border-top-0" width="15%">{{'audit_category' | translate}}</th>
                                <th class="border-top-0" width="15%">{{'risk' | translate}}</th>
                                <th class="border-top-0 text-center" width="15%">{{'status' | translate}}</th>
                            </tr>
                            <tr class="edit-and-delete-main"
                                *ngFor="let row of findings; let list=index">
                                <td class="text-center">{{list+1}}</td>
                                <td >{{row?.title? row?.title: AppStore.noContentText }}
                                </td>
                                <td >{{row?.finding_category?.title?row?.finding_category?.title:AppStore.noContentText}}</td>
                                <td >
                                    <div class="dot-div {{row?.risk_rating?.label}}-dot">{{row?.risk_rating?.language[0]?.pivot?.title}} </div>
                                </td>
                                <td>
                                    <div *ngIf="MappingStore.mappingDetails?.meeting_plan_status?.id!=4" class="edit-option-show">
                                        <a *ngIf="AuthStore.getActivityPermission(1600,'DELETE_FINDINGS_MEETING_PLAN_MAPPING')"
                                            (click)="deleteFindingsMapping(row.id)"
                                            [attr.title]="'delete' | translate"><i class="fas fa-trash pointer"></i></a>
                                    </div>
                                    <div class="dot-div {{row?.finding_status?.label}}">{{row?.finding_status?.language[0]?.pivot?.title}}</div>
                                </td>
                            </tr>
                        </table>

                        <ng-container *mobxAutorun>
                            <app-no-data
                                *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.findings?.length == 0"
                                [border]='false'></app-no-data>
                        </ng-container>

                    </div>
                </div>

                <div *ngIf="selectedSection=='non-conformity'" class="tab-pane fade active show" id="tab-three" role="tabpanel">
                    <div class="no-fixed-table mb-4">
                        <div class="cmn-bdr p-3 d-flex mb-3 align-items-center" *ngIf="MappingStore.mappingDetails?.noc_findings?.length > 0">
                            <h6 class="mb-0 w-100">{{'non_conformity' | translate}}</h6>
                            <div class="text-right ml-2" style="width: 100px;">
                                <button  *ngIf=" AuthStore.getActivityPermission(3655,'NON_CONFORMITY_MEETING_PLAN_MAPPING_CREATE') && 
                                MappingStore.loaded && MappingStore.mappingDetails?.noc_findings?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4" type="button" (click)="selectNonConformityFindings()"
                                    class="btn btn-small" data-toggle="modal" data-target="#choose-process-popup"
                                    style="margin: 0 !important;">{{'select' | translate}}</button>
                            </div>
                        </div>
                        <!-- <div class="clearfix">
                            <button type="button" class="btn btn-small float-right mb-2" (click)="selectNonConformityFindings()"
                                *ngIf=" AuthStore.getActivityPermission(3655,'NON_CONFORMITY_MEETING_PLAN_MAPPING_CREATE') && 
                                MappingStore.loaded && MappingStore.mappingDetails?.noc_findings?.length > 0 &&
                                MappingStore.mappingDetails?.meeting_plan_status?.id!=4">{{'select' | translate}}</button>
                        </div> -->
                        <table class="table table-bordered ordinary-table cmn-table-style mb-1 word-break"
                            *ngIf=" MappingStore.loaded && MappingStore.mappingDetails?.noc_findings?.length > 0">
                            <tr>
                                <th class="border-top-0 text-center" width="4%">#</th>
                                <th class="border-top-0" width="8%">{{'Ref. ID' | translate}}</th>
                                <th class="border-top-0" width="48%">{{'title' | translate}}</th>
                                <th class="border-top-0" width="20%">{{'category' | translate}}</th>
                                <th class="border-top-0" width="10%">{{'risk_rating' | translate}}</th>
                                <th class="border-top-0 text-center" width="10%">{{'status' | translate}}</th>
                            </tr>
                            <tr class="edit-and-delete-main"
                                *ngFor="let row of nonConformity; let list=index">
                                <td class="text-center">{{list+1}}</td>
                                <td>{{row.reference_code}}</td>
                                <td>{{row?.title? row?.title: AppStore.noContentText }}</td>
                                <td>{{row?.finding_category?.title}}</td>
                                <td >
                                    <div class="dot-div {{row?.risk_rating?.label}}-dot">{{row?.risk_rating?.language[0]?.pivot?.title}} </div>
                                </td>
                                <td>
                                    <div *ngIf="MappingStore.mappingDetails?.meeting_plan_status?.id!=4" class="edit-option-show">
                                        <a *ngIf="AuthStore.getActivityPermission(1600,'DELETE_NON_CONFORMITY_MEETING_PLAN_MAPPING')"
                                            (click)="deleteNonConformityMapping(row.id)"
                                            [attr.title]="'delete' | translate"><i class="fas fa-trash pointer"></i></a>
                                    </div>
                                    <div class="dot-div {{row?.finding_status?.label}}">{{row?.finding_status?.language[0]?.pivot?.title}}</div>
                                </td>
                            </tr>
                        </table>

                        <ng-container *mobxAutorun>
                            <app-no-data
                                *ngIf="MappingStore.loaded && MappingStore.mappingDetails?.noc_findings?.length == 0"
                                [border]='false'></app-no-data>
                        </ng-container>

                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- common-tab-md end -->

</div>
<ng-container *mobxAutorun>
    <div *ngIf="!MappingStore?.loaded">
        <app-plan-detail-mapping-loader></app-plan-detail-mapping-loader>
    </div>
</ng-container>

<div class="modal modal-style-1 popup-full-width fade" id="issue-popup" data-keyboard="false" data-backdrop="static"
    #issueFormModal *mobxAutorun>
    <app-issues-modal *ngIf="MappingStore.issue_select_form_modal" [issuesModalTitle]="modalObject">
    </app-issues-modal>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="process-popup" data-keyboard="false" data-backdrop="static"
    #processFormModal *mobxAutorun>
    <app-addprocess *ngIf="MappingStore.processes_select_form_modal" [processModalTitle]="modalObject">
    </app-addprocess>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="risk-popup" data-keyboard="false" data-backdrop="static"
    #riskFormModal *mobxAutorun>
    <app-add-risk-mapping *ngIf="MappingStore.risk_select_form_modal" [riskModalTitle]="modalObject">
    </app-add-risk-mapping>
</div>

<!-- Control Popup -->
<div class="modal modal-style-1 popup-full-width fade" id="process-popup" data-keyboard="false" data-backdrop="static"
    #controlFormModal *mobxAutorun>
    <app-control-popup *ngIf="MappingStore?.control_select_form_modal" [controlsModalTitle]="modalObject">
    </app-control-popup>
</div>

<!-- product mapping -->
<div class="modal modal-style-1 popup-full-width fade" id="project-popup" data-keyboard="false" data-backdrop="static"
    #productFormModal *mobxAutorun>
    <app-product-modal *ngIf="BusinessProductsStore.product_select_form_modal" [productModalTitle]="modalObject">
    </app-product-modal>
</div>

<!-- custom mapping -->
<div class="modal modal-style-1 popup-full-width fade" id="project-popup" data-keyboard="false" data-backdrop="static"
    #customerFormModal *mobxAutorun>
    <app-customer-modal *ngIf="BusinessCustomersStore.customer_select_form_modal" 
        [customerModalTitle]="modalObject"></app-customer-modal>
</div>

<!-- project mapping -->
<div class="modal modal-style-1 popup-full-width fade" id="project-popup" data-keyboard="false" data-backdrop="static"
    #projectFormModal *mobxAutorun>
    <app-projects-modal *ngIf="BusinessProjectsStore.project_select_form_modal"
        [projectsModalTitle]="modalObject"></app-projects-modal>
</div>

<!-- object mapping -->
<div class="modal modal-style-1 popup-full-width fade" id="project-popup" data-keyboard="false" data-backdrop="static"
    #objectiveFormModal *mobxAutorun>
    <app-strategic-objective-mapping *ngIf="StrategicObjectivesMasterStore?.objective_select_form_modal"
    [title]="true" [strategicModalTitle]="modalObject"></app-strategic-objective-mapping>
</div>

<!-- 9.object mapping -->
<div class="modal modal-style-1 popup-full-width fade" id="finding-popup" data-keyboard="false" data-backdrop="static"
    #findingFormModal *mobxAutorun>
    <app-finding-add-modal *ngIf="AuditFindingsStore.finding_select_form_modal"
    [strategicModalTitle]="modalObject"></app-finding-add-modal>
</div>

<!-- 9.Non Confomity mapping -->
<div class="modal modal-style-1 popup-full-width fade" id="non-conformity-popup" data-keyboard="false" data-backdrop="static"
    #nonConformityFormModal *mobxAutorun>
    <app-non-conformity-mapping *ngIf="FindingsStore.no_Conformity_finding_select_form_modal"
    [strategicModalTitle]="modalObject"></app-non-conformity-mapping>
</div>

<!------------------- Delete Confirmation Modal Start --------------------------->

<div class="modal modal-style-1 fade" id="delete-popup" #confirmationPopUp data-backdrop="static" data-keyboard="false">
    <app-delete-popup [source]="deleteObject"></app-delete-popup>
</div>