<nav class="edit-bar" data-toggle="affix" scrollPoint #navigationBar *mobxAutorun>
    <div class="module-name-block module-name-block-space float-left">
       <a class="dropdown module-title">{{'dashboard'|translate}}</a>
     </div>   
 </nav>

<main class="mt-3 acl-page cpf-space-adjust db-small-space-boxes" *mobxAutorun>
    <div class="container-fluid" *ngIf="MRMDashboardStore.dashboardLoaded">
        <app-filter-menu></app-filter-menu>
        <div class="row sm-row">
            <div class="col-lg-7 col-sm-12 sm-col">
                <div class="row sm-row">
                    <div class="col-lg-4 col-sm-4 sm-col pointer" (click)="gotoMeetingPlan()" *ngIf="OrganizationModulesStore.checkIndividualSubModule(1600,26501)">
                        <div
                            class="bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center">
                            <div class="text-center">
                                <h3 class="big-text-three">{{MRMDashboardStore.MRMCounts.mrm_plans_count?MRMDashboardStore.MRMCounts.mrm_plans_count:'0'}}</h3>
                                <p class="mb-0 elips-1">{{'mrm_plans' | translate}}</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-sm-4 sm-col pointer" (click)="gotoUpcomingMeeting()">
                        <div
                            class="bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center">
                            <div class="text-center">
                                <h3 class="big-text-three">{{MRMDashboardStore.MRMCounts.upcoming_meeting_count?MRMDashboardStore.MRMCounts.upcoming_meeting_count:'0'}}</h3>
                                <p class="mb-0 elips-1">{{'up_coming_meetings' | translate}}</p>
                            </div>
                        </div>
                    </div>



                    <div class="col-lg-4 col-sm-4 sm-col pointer" (click)="gotoMeeting()" *ngIf="OrganizationModulesStore.checkIndividualSubModule(1600,28101)">
                        <div
                            class="bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center">
                            <div class="text-center">
                                <h3 class="big-text-three">{{MRMDashboardStore.MRMCounts.meeting_count?MRMDashboardStore.MRMCounts.meeting_count:'0'}}</h3>
                                <p class="mb-0 elips-1">{{'mrm_meeting' | translate}}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-5 col-sm-12 sm-col pointer" *ngIf="OrganizationModulesStore.checkIndividualSubModule(1600,28301)">
                <div class="bg-white widg-padding-cmn btm-space-10 db-shadow">
                    <div class="row sm-row">
                        <div class="col-md-4 sm-col stg-main-db-box-two db-md-screen-center" (click)="gotoActionPlan('')">
                            <div class="text-center">
                                <h3 class="big-text-four">{{MRMDashboardStore.MRMCounts.meeting_action_plan_count?MRMDashboardStore.MRMCounts.meeting_action_plan_count:'0'}}</h3>
                                <p class="mb-0 elips-1">{{'mrm_actions' | translate}}</p>
                            </div>
                        </div>
                        <div class="col-md-8 sm-col cmn-bdr-left-md-top-mobile">
                            <div class="row sm-row">
                                <div class="col-lg-6 col-sm-6 sm-col stg-main-db-box-two db-md-screen-center"  (click)="gotoActionPlan('closed')">
                                    <div class="text-left">
                                        <h3 class="big-text-two">{{MRMDashboardStore.MRMCounts.closed_meeting_action_plan_count?MRMDashboardStore.MRMCounts.closed_meeting_action_plan_count:'0'}}</h3>
                                        <p class="dot-div-new dot-green mb-0 elips-1">{{'closed' | translate}}</p>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-sm-6 sm-col stg-main-db-box-two db-md-screen-center" (click)="gotoActionPlan('open')">
                                    <div class="text-left">
                                        <h3 class="big-text-two">{{MRMDashboardStore.MRMCounts.open_meeting_action_plan_count?MRMDashboardStore.MRMCounts.open_meeting_action_plan_count:'0'}}</h3>
                                        <p class="dot-div-new dot-red mb-0 elips-1">{{'open' | translate}}</p>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <div class="row sm-row">
            <div class="col-lg-6 col-sm-12 sm-col"  *ngIf="OrganizationModulesStore.checkIndividualSubModule(1600,28301)">
                <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-aut-four">
                    <h5 class="cmn-head-style m-0">{{'action_plans' | translate}}</h5>
                    <hr>

                    <!-- <div class="ceo-db-aut-sec-row-height"> -->
                        <div class="dpt-pic-ceo w-100" *ngIf="MRMDashboardStore.actionPlan.length!=0">
                            <div id="actionPlanDiv" style="width: 100%; height: 200px">
                                {{chart1?createPieChartForActionPlan(true):''}}
                            </div>
                        </div>
                        <div class="dpt-pic-ceo w-100" *ngIf="MRMDashboardStore.actionPlan.length==0">
                            <app-no-chart-data [source]="'pie'" style="width: 100%; height: 200px" ></app-no-chart-data>
                        </div>
                    <!-- </div> -->

                </div>
            </div>

            <div class="col-lg-6 col-sm-12 sm-col">
                <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-aut-four">
                    <h5 class="cmn-head-style m-0">{{'meeting_plan_status' | translate}}</h5>
                    <hr>

                    <!-- <div class="ceo-db-aut-sec-row-height"> -->
                        <div class="dpt-pic-ceo w-100" *ngIf="MRMDashboardStore.MeetingByStatus.length!=0">
                            <div id="meetingByStatusDiv" style="width: 100%; height: 200px">
                                {{chart2?createPieChartForMeetingBystatus(true):''}}
                            </div>
                        </div>
                        <div class="dpt-pic-ceo w-100" *ngIf="MRMDashboardStore.MeetingByStatus.length==0">
                            <app-no-chart-data [source]="'pie'" style="width: 100%; height: 200px"></app-no-chart-data>
                        </div>
                    <!-- </div> -->

                </div>
            </div>



        </div>

        <div class="row sm-row" *ngIf="OrganizationModulesStore.checkIndividualSubModule(1600,28101)"   >

            <div class="col-sm-12 sm-col">
                <div class="bg-white widg-padding-cmn btm-space-10 tab-with-text-db">
                    <div class="row widget-heading line-tab">
                        <div class="col-lg-6 col-md-12">
                            <h5 class="cmn-head-style m-0 pt-1"> {{'mrm_meeting' | translate}}</h5>
                        </div>
                        <div class="col-lg-6 col-md-12">

                            <ul class="nav nav-tabs float-right">
                                <li class="nav-item"> <a class="nav-link active show" data-toggle="tab"
                                    (click)="getMeetingByDepartments(false)" data-original-title="" title="">{{'by_department' | translate}}</a> </li>
                                <li class="nav-item"> <a class="nav-link" data-toggle="tab"
                                    (click)="getMeetingByCategory()" data-original-title="" title="">{{'by_category' | translate}}</a> </li>
                                <li class="nav-item"> <a class="nav-link" data-toggle="tab"
                                    (click)="getMeetingByYear()" data-original-title="" title="">{{'by_year' | translate}}</a> </li>
                                <li class="nav-item"> <a class="nav-link" data-toggle="tab"
                                    (click)="getMeetingVsActionplan()" data-original-title="" title=""> {{'meeting_vs_action_plans' | translate}}</a> </li>

                            </ul>
                        </div>
                    </div>

                    <div class="tab-content tab-content-body pt-3">
                        <div class="tab-pane active show" id="by-department">
                            <!-- <div class="ceo-db-aut-sec-row-height"> -->
            
                                <div class="dpt-pic-ceo w-100" *ngIf="!stackChart&&!showNoDataMap">
                                    <div id="barChart" style="width: 100%; height: 200px">
                                        {{chart3?createBarChart(1,true):''}}
                                    </div>
                                </div>
                                <div class="dpt-pic-ceo w-100" *ngIf="stackChart&&MRMDashboardStore.MeetingVsActionPlan.length!=0">
                                    <div id="barChartForMeetingVsActionPlan" style="width: 100%; height: 200px">
                                        
                                    </div>
                                </div>
                                <div class="dpt-pic-ceo w-100" *ngIf="(!stackChart&&showNoDataMap)||(stackChart&&MRMDashboardStore.MeetingVsActionPlan.length==0)">
                                    <app-no-chart-data [source]="'bar'" style="width: 100%; height: 200px"></app-no-chart-data>
                                </div>
                            <!-- </div> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <ng-container  *mobxAutorun>
        <app-dashborder-loader *ngIf="!MRMDashboardStore.dashboardLoaded"></app-dashborder-loader>
    </ng-container>
</main>