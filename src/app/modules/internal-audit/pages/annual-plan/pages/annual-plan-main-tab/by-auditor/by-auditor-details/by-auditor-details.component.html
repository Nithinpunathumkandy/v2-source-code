<div #plainDev></div>
<nav class="edit-bar" data-toggle="affix" #navigationBar>

    <app-breadcrumb-menu></app-breadcrumb-menu>
    <app-sub-menu></app-sub-menu>
    <!-- <app-sub-menu-drop-down></app-sub-menu-drop-down> -->

</nav>
    <div class="container-fluid">
        <div class="bg-white p-3" >
            <div class="row" *ngIf="AuditPlanStore?.loaded && AuditPlanStore.allItems.length>0">
                <div class="col-sm-12">
                    <div class="user-details-page mt-2">
                        <div class="right-block p-0">
                            <h5 class="mt-0"> <span>{{'auditor_wise_report' | translate}}</span> </h5>
                        </div>
                    </div>
                    <div class="box-annual-audit-plan">
                        <div class="auditor-wise-box clearfix">
                            <h5 class="auditor-wise-name">{{'annual-audit-plan' | translate}} <span>2017</span></h5>
                            <div class="users-page-list auditor-wise-report">
                                <div class="user-list-lg p-0">
                                    <div class="user-box-new animation-pulse rounde-hov-bg">
                                        <a role="button" data-toggle="collapse" data-parent="#accordionceo" href="#ceo2"
                                            aria-expanded="true" aria-controls="collapseOne">
                                            <!-- user-dtl-popup start -->
                                        </a>
                                        <div class="user-dtl-popup"><a role="button" data-toggle="collapse"
                                                data-parent="#accordionceo" href="#ceo2" aria-expanded="true"
                                                aria-controls="collapseOne">
                                            </a>
                                            <div class="user-dtl-popup-head"><a role="button" data-toggle="collapse"
                                                    data-parent="#accordionceo" href="#ceo2" aria-expanded="true"
                                                    aria-controls="collapseOne">
                                                </a><a  class="close-user-popup"><i
                                                        class="lni-close"></i></a>
                                                        <div class="user-detail-smol-dtl clearfix" style="width: 116%;">
                                                            <img  *ngIf="auditLeaderInfo?.audit_leader_image_token"
                                                            [attr.src]="createImagePreview('user-profile-picture',auditLeaderInfo?.audit_leader_image_token)" 
                                                            class="rounded-circle user-pic-new"
                                                            onerror = "this.src='/assets/images/user-demo2.png'">
                                                            <img  *ngIf="!auditLeaderInfo?.audit_leader_image_token"
                                                            [attr.src]="getDefaultImage('user-logo')" 
                                                            class="rounded-circle user-pic-new"
                                                            onerror = "this.src='/assets/images/user-demo2.png'">
        
                                                            <span class="online-user online"></span>
                                                            <div class="user-details">
                                                                <h6>{{auditLeaderInfo?.audit_leader_first_name}} &nbsp; {{auditLeaderInfo?.audit_leader_last_name}}</h6>
                                                                <span>{{auditLeaderInfo?.audit_leader_designation}}</span>
                                                            </div>
                                                        </div>
                                            </div>
                                            <!-- <ul>
                                                <li><a href="#"><i class="fas fa-user"></i> Audit Leader</a></li>
                                                <li><a href="#"><i class="fas fa-phone"></i> 980 9946 365</a></li>
                                                <li><a href="#"><i class="fas fa-envelope"></i>
                                                        farooque@excelledia.com</a></li>
                                            </ul> -->
                                            <div class="btn-bg-popup">
                                                <button type="button" data-toggle="modal" data-target="#signal-lost"
                                                    class="btn ordinary-btn mr-3 btn-active">{{'send_email' | translate}}</button>
                                                <button type="button" data-toggle="modal" data-target="#signal-lost"
                                                    class="btn ordinary-btn mr-3">{{'view_detail' | translate}}</button>
                                            </div>
                                        </div>
                                        <!-- user-dtl-popup end -->

                                        <a  class="d-flex flex-row user-list-lg ">
                                            <img  *ngIf="auditLeaderInfo?.audit_leader_image_token"
                                            [attr.src]="createImagePreview('user-profile-picture',auditLeaderInfo?.audit_leader_image_token)" 
                                            class="rounded-circle user-pic-new"
                                            onerror = "this.src='/assets/images/user-demo2.png'">
                                            <img  *ngIf="!auditLeaderInfo?.audit_leader_image_token"
                                            [attr.src]="getDefaultImage('user-logo')" 
                                            class="rounded-circle user-pic-new"
                                            onerror = "this.src='/assets/images/user-demo2.png'">
                                            <div class="user-details pt-2">
                                                <h6 title="{{auditLeaderInfo?.audit_leader_first_name }}&nbsp;{{auditLeaderInfo?.audit_leader_last_name}}">{{auditLeaderInfo?.audit_leader_first_name.length > 10 ? auditLeaderInfo?.audit_leader_first_name.substring(0,5)+' ...' : auditLeaderInfo?.audit_leader_first_name}}&nbsp; 
                                                    {{auditLeaderInfo?.audit_leader_last_name.length > 10 ? auditLeaderInfo?.audit_leader_last_name.substring(0,5)+' ...' : auditLeaderInfo?.audit_leader_last_name}}</h6>
                                                <span>{{auditLeaderInfo?.audit_leader_designation}}</span>

                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <app-no-data-list [source] = "byAuditorEmptyList" *ngIf="AuditPlanStore.allItems.length == 0 && AuditPlanStore.loaded == true">
                </app-no-data-list>
            </div>
            <div class="row">
                <div class="col-sm-12 audit-program-box audit-page-table-main full-width-table">
                    <table class="table table-bordered ordinary-table table-hover issue-list-table-org mb-4"
                        *ngIf="AuditPlanStore?.loaded && AuditPlanStore.allItems.length > 0 && AuthStore.getActivityPermission(1600,'ANUAL_PLAN_BY_AUDITOR_LIST')">
                        <tr>
                            <th style="width: 5%; text-align: center;">{{'sl' | translate}}</th>
                            <th style="width: 8%;">
                                <span>{{'ref_no' | translate}}</span>

                            </th>
                            <th style="width: 13%;">
                                <span>{{'audit_program' | translate}}</span>


                            </th>

                            <th style="width: 20%;">
                                <span>{{'title' | translate}}</span>

                                </th>
                                <th style="width: 18%;">{{'audit_leader' | translate}}</th>
                                <th style="width: 12%;">

                                    <span>{{'start_date' | translate}}</span>


                                </th>
                                <th style="width: 12%;">
                                    <span> {{'end_date' | translate}}</span>



                                </th>

                                <th style="width: 8%;">{{'status' | translate}}</th>


                        </tr>
                        <ng-container *mobxAutorun>
                            <tr (click)="gotToAuditPlanDetails(row.id)"
                                *ngFor="let row of AuditPlanStore.allItems| paginate: {currentPage:AuditPlanStore.currentPage, itemsPerPage:AuditPlanStore.itemsPerPage,totalItems:AuditPlanStore.totalItems};let num=index "
                                class="cursor-pointer tr-action edit-and-delete-main">
                                <td style="text-align: center;" class="cursor-pointer">
                                    {{(AuditPlanStore.currentPage - 1) * AuditPlanStore.itemsPerPage + (num + 1)}}
                                </td>


                                <td class="cursor-pointer">
                                    #{{row.audit_plan_reference}}</td>
                                <td class="cursor-pointer" title="{{row.audit_program_title}}">
                                    {{row.audit_program_title.length > 20 ? row.audit_program_title.substring(0,20)+'
                                    ...' : row.audit_program_title}}
                                </td>
                                <td class="cursor-pointer" title="{{row.title}}">

                                    {{row.title.length > 20 ? row.title.substring(0,30)+' ...' : row.title}}
                                </td>
                                <td>
                                    <div class="d-flex flex-row user-list-sm">
                                        <img *ngIf="row.audit_leader_image_token"
                                            [attr.src]="createImagePreview('user-profile-picture',row.audit_leader_image_token)"
                                            width="30px" height="30px" 
                                            class="rounded-circle"
                                            onerror = "this.src='/assets/images/user-demo2.png'">
                                        <img *ngIf="!row.audit_leader_image_token"
                                            [attr.src]="getDefaultImage('user-logo')" 
                                            width="30px" height="30px"
                                            class="rounded-circle"
                                            onerror = "this.src='/assets/images/user-demo2.png'">
                                        <div>
                                            <h6>{{row.audit_leader_first_name}}&nbsp;{{row.audit_leader_last_name}}
                                            </h6>
                                            <span _ngcontent-nws-c590=""
                                                wfd-id="801">{{row.audit_leader_designation}}</span>

                                        </div>
                                    </div>
                                </td>
                                <td style="padding:0.75rem;">
                                    {{row.start_date | date:
                                    OrganizationGeneralSettingsStore.organizationSettings?.date_format}}
                                </td>

                                <td style="padding:0.75rem;">
                                    {{row.end_date | date:
                                    OrganizationGeneralSettingsStore.organizationSettings?.date_format}}

                                </td>

                                <td *ngIf="row.audit_plan_status_id == 1" class="dot-div red-dot">{{row.audit_plan_status_language_title}}</td>
                                <td *ngIf="row.audit_plan_status_id == 2" class="dot-div green-dot">{{row.audit_plan_status_language_title}}</td>
                                <td *ngIf="row.audit_plan_status_id == 3" class="dot-div orange-dot">{{row.audit_plan_status_language_title}}</td>
                            </tr>
                        </ng-container>
                    </table>
                    <ng-container *mobxAutorun>
                        <div *ngIf="!AuditPlanStore.loaded">
                            <app-auditable-item-loader></app-auditable-item-loader>
                        </div>

                        <app-no-data-list [source] = "planEmptyList" *ngIf="AuditPlanStore.totalItems == 0 && AuditPlanStore.loaded == true">
                        </app-no-data-list>
                    </ng-container>


                    <div *ngIf="AuditPlanStore.totalItems>AuditPlanStore.itemsPerPage" class="col-sm-12">
                        <ul class="pagination justify-content-center mt-3">
                            <div class="list">
                                <pagination-controls (pageChange)="pageChange($event)" class="my-pagination">
                                </pagination-controls>
                            </div>
                        </ul>
                    </div>
                </div>
            </div>

        </div>

    </div>