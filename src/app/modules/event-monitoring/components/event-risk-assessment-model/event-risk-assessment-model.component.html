<button type="button" class="close" (click)="cancel()" data-dismiss="modal"><i
    class="lni-close"></i><span>esc</span></button>
<div class="modal-dialog step-popup-modal">
<div class="modal-content" *mobxAutorun>
    <!-- Modal body -->
    <div class="modal-body form-body">


        <!-- multistep form -->
        <div class="step-form-small">
            <form id="msform">
                <!-- progressbar -->
                <div class="small-step-progressbar-main">
                    <ul id="progressbar">
                        <li class="active"></li>
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                    </ul>
                </div>
                <!-- fieldsets -->
                <fieldset>
                    <h2 class="fs-title">{{'risk_context' | translate}}</h2>

                    <div class="mb-4">
                        <div class="issuue-new-style p-0">
                            <div class="issue-top-sec">
                                <div class="clearfix">
                                    <h5 class="d-inline-block cmn-head-style label-tag-style"><span
                                            class="issue-smoal-head-text bold">#{{EventRiskAssessmentStore.eventRiskDetails?.reference_code?EventRiskAssessmentStore.eventRiskDetails?.reference_code:'xxxx'}}</span>
                                        <span
                                            class="issue-smoal-head-text bold">{{EventRiskAssessmentStore.eventRiskDetails?.title?EventRiskAssessmentStore.eventRiskDetails?.title:AppStore.noContentText}}</span>
                                        <span *ngFor="let types of EventRiskAssessmentStore.eventRiskDetails?.risk_types"
                                            class="risk-type-bx in-ex-sec">
                                            <i><img [attr.src]="types.is_internal == 1 ? 'assets/images/internal.svg' : 'assets/images/external.svg'"
                                                    style="width: 15px;"></i>&nbsp;{{types.language[0].pivot.title}}&nbsp;
                                        </span>
                                    </h5>
                                </div>
                                <!-- <div class="pt-1"
                                    [innerHTML]="EventRiskAssessmentStore.eventRiskDetails?.risk_observation | safeHtml">
                                </div> -->

                            </div>
                        </div>

                        <!-- <div class="mb-2 mt-2"
                            *ngIf="OrganizationGeneralSettingsStore?.organizationSettings?.is_ms_type">
                            <label class="outline-tag"
                                *ngFor="let type of EventRiskAssessmentStore.eventRiskDetails?.ms_type_organizations">{{type.ms_type.title}}
                                <span>V.{{type.ms_type_version.title}}</span>
                            </label>
                        </div> -->

                        <div class="row">
                            <div class="col-md-12">
                                <h6>{{rm_risk_description|translate}}</h6>
                                <p style="white-space:pre-line">
                                    {{EventRiskAssessmentStore.eventRiskDetails?.description?EventRiskAssessmentStore.eventRiskDetails?.description:AppStore.noContentText}}
                                </p>
                            </div>
                        </div>
                        <div class="row">
                            <!-- <div class="col-md-4">
                                <h6>{{'impacts'|translate}}</h6>
                                <ul class="arrowlist pl-0 mt-2"
                                    *ngIf="EventRiskAssessmentStore.eventRiskDetails?.risk_impacts?.length>0">

                                    <li class="clearfix"
                                        *ngFor="let impact of EventRiskAssessmentStore.eventRiskDetails?.risk_impacts">
                                        <a>{{impact.title}}</a>
                                    </li>

                                </ul>
                                <p *ngIf="EventRiskAssessmentStore.eventRiskDetails?.risk_impacts?.length==0">
                                    {{AppStore.noContentText}}</p>

                            </div> -->
                            <!-- <div class="col-md-4">
                                <h6>{{risk_causes|translate}}</h6>
                                <ul class="arrowlist pl-0 mt-2"
                                    *ngIf="EventRiskAssessmentStore.eventRiskDetails?.risk_causes?.length>0">

                                    <li class="clearfix"
                                        *ngFor="let cause of EventRiskAssessmentStore.eventRiskDetails?.risk_causes">
                                        <a>{{cause.title}}</a>
                                    </li>

                                </ul>
                                <p *ngIf="EventRiskAssessmentStore.eventRiskDetails?.risk_causes?.length==0">
                                    {{AppStore.noContentText}}</p>

                            </div> -->
                            <!-- <div class="col-md-4">
                                <h6>{{'risk_source'|translate}}</h6>
                                <p>{{EventRiskAssessmentStore.eventRiskDetails?.risk_sources?.length>0?getArrayFormatedString('title',EventRiskAssessmentStore.eventRiskDetails?.risk_sources):AppStore.noContentText}}
                                </p>
                            </div> -->
                        </div>
                        <div class="row">
                            <!-- <div class="col-md-4">
                                <h6>{{'risk_category' | translate}}</h6>
                                <p>{{EventRiskAssessmentStore.eventRiskDetails?.risk_category?.title?EventRiskAssessmentStore.eventRiskDetails?.risk_category?.title:AppStore.noContentText}}
                                </p>
                            </div> -->
                            <div class="col-md-4">
                                <h6>{{'risk_types' | translate}}</h6>
                                <p *ngFor="let types of EventRiskAssessmentStore.eventRiskDetails?.risk_types"
                                    class="risk-type-bx risk-type-bx-drop">
                                    <i><img [attr.src]="types.is_internal == 1 ? 'assets/images/internal.svg' : 'assets/images/external.svg'"
                                            style="width: 15px;"></i>&nbsp;{{types.language[0]?.pivot?.title}}&nbsp;
                                </p>
                                <p *ngIf="EventRiskAssessmentStore.eventRiskDetails?.risk_types?.length==0">
                                    {{AppStore.noContentText}}</p>
                            </div>
                            <div class="col-md-4">
                                <h6>{{'risk_impact_areas'|translate}}</h6>
                                <ng-container >
                                    <p>
                                        {{EventRiskAssessmentStore.eventRiskDetails?.risk_impact_areas[0]?.language[0]?.pivot.title}}</p>
                                </ng-container>
                                <ng-container *ngIf="!EventRiskAssessmentStore.eventRiskDetails.risk_impact_areas||EventRiskAssessmentStore.eventRiskDetails.risk_impact_areas.length==0">
                                    <p>{{AppStore.noContentText}}</p>
                                </ng-container>
                            </div>
                            <!-- <div class="col-md-4">
                                <h6>{{'risk_areas' | translate}}</h6>
                                <p>{{EventRiskAssessmentStore.eventRiskDetails?.risk_areas.length>0?getArrayFormatedString('title',EventRiskAssessmentStore.eventRiskDetails?.risk_areas):AppStore.noContentText}}
                                </p>
                            </div> -->

                        </div>
                        <!-- <div class="row">
                            <div class="col-md-4">
                                <h6>{{'responsible_users' | translate}}</h6>
                                <div class="row">
                                    <div class="col-sm-2 animation-pulse"
                                        *ngFor="let user of EventRiskAssessmentStore.eventRiskDetails?.responsible_users;let i=index">



                                        <app-user-popup-box [source]="getPopupDetails(user)"
                                            [activateButtons]="false" [showName]=false>
                                        </app-user-popup-box>
                                    </div>
                                </div>
                                <p *ngIf="EventRiskAssessmentStore.eventRiskDetails?.responsible_users.length==0">
                                    {{AppStore.noContentText}}
                                </p>
                            </div>
                        </div> -->
                        <div class="row">
                            <div class="col-md-12">
                                <div class="label-and-user-pic">
                                    <h6>{{'risk_owner' | translate}}</h6>

                                    <div class="row" *ngIf="EventRiskAssessmentStore.eventRiskDetails?.risk_owner">
                                        <div class="col-sm-12 animation-pulse">
                                            <app-user-popup-box [activateButtons]="false"
                                                [source]="getOwnerPopupDetails(EventRiskAssessmentStore.eventRiskDetails?.risk_owner)">
                                            </app-user-popup-box>
                                        </div>
                                    </div>
                                </div>

                                <p *ngIf="!EventRiskAssessmentStore.eventRiskDetails?.risk_owner">
                                    {{AppStore.noContentText}}
                                </p>


                            </div>
                        </div>
                    </div>
                    <input type="button" name="next" class="next action-button btn-active" value="Next" />
                    <input type="button" name="cancel" (click)="cancel()" class="cancel action-button mr-2"
                        value="Cancel" />
                </fieldset>
                <fieldset>
                    <h2 class="fs-title">{{'impact' | translate}}</h2>

                    <div class="mb-5">
                        <div class="issuue-new-style p-0">
                            <div class="issue-top-sec">
                                <div class="clearfix">
                                    <h5 class="d-inline-block cmn-head-style label-tag-style"><span
                                            class="issue-smoal-head-text bold">#{{EventRiskAssessmentStore.eventRiskDetails?.reference_code?EventRiskAssessmentStore.eventRiskDetails?.reference_code:'xxxx'}}</span>
                                        <span
                                            class="issue-smoal-head-text bold">{{EventRiskAssessmentStore.eventRiskDetails?.title?EventRiskAssessmentStore.eventRiskDetails?.title:AppStore.noContentText}}</span>
                                        <span *ngFor="let types of EventRiskAssessmentStore.eventRiskDetails?.risk_types"
                                            class="risk-type-bx in-ex-sec">
                                            <i><img [attr.src]="types.is_internal == 1 ? 'assets/images/internal.svg' : 'assets/images/external.svg'"
                                                    style="width: 15px;"></i>&nbsp;{{types.language[0].pivot.title}}&nbsp;
                                        </span>
                                    </h5>
                                </div>
                                <div class="text-editor-content bullet-point-list pt-1"
                                    *ngIf="EventRiskAssessmentStore.eventRiskDetails?.description"
                                    [innerHTML]="EventRiskAssessmentStore.eventRiskDetails?.description | safeHtml"></div>
                            </div>
                        </div>
                        <div class="mb-2 mt-2"> <label
                                [ngClass]="activeImpact?.id == impact.id?'outline-tag pointer active':'outline-tag pointer'"
                                *ngFor="let impact of ImpactStore.impactDetails"
                                (click)="setActiveImpact(impact)">{{impact.risk_matrix_impact_title}}
                                ({{impact.score}})</label>
                        </div>

                        <h6>{{'description' | translate}}</h6>
                        <p
                            [innerHTML]="activeImpact?.risk_matrix_impact_description?activeImpact?.risk_matrix_impact_description:activeImpact?.language[0].pivot.description?activeImpact?.language[0].pivot.description:AppStore.noContentText">
                        </p>
                        <h6>{{'impact_guidelines' | translate}}</h6>
                        <p *ngFor="let categories of filterdOptions[0]?.risk_categories">
                            {{categories?.risk_category}}-{{categories?.description}}</p>
                        <div class="form-group">
                            <h6>{{'justification' | translate}}</h6>
                            <textarea rows="3" id="impactComment" class="form-control"
                                [(ngModel)]="impactJustification" placeholder="Enter your justification here"
                                name="impactJustification"></textarea>
                        </div>
                    </div>
                    <input type="button" name="next" [disabled]="activeImpact==null"
                        class="next action-button btn-active" value="Next" />
                    <input type="button" name="previous" class="previous action-button mr-2" value="Previous" />
                    <input type="button" name="cancel" (click)="cancel()" class="cancel action-button mr-2"
                        value="Cancel" />
                </fieldset>
                <fieldset>
                    <h2 class="fs-title">{{'assessment_likelihood' | translate}}</h2>

                    <div class="mb-5">
                        <div class="issuue-new-style p-0">
                            <div class="issue-top-sec">
                                <div class="clearfix">
                                    <h5 class="d-inline-block cmn-head-style label-tag-style"><span
                                            class="issue-smoal-head-text bold">#{{EventRiskAssessmentStore.eventRiskDetails?.reference_code?EventRiskAssessmentStore.eventRiskDetails?.reference_code:'xxxx'}}</span>
                                        <span
                                            class="issue-smoal-head-text bold">{{EventRiskAssessmentStore.eventRiskDetails?.title?EventRiskAssessmentStore.eventRiskDetails?.title:AppStore.noContentText}}</span>
                                        <span *ngFor="let types of EventRiskAssessmentStore.eventRiskDetails?.risk_types"
                                            class="risk-type-bx in-ex-sec">
                                            <i><img [attr.src]="types.is_internal == 1 ? 'assets/images/internal.svg' : 'assets/images/external.svg'"
                                                    style="width: 15px;"></i>&nbsp;{{types.language[0].pivot.title}}&nbsp;
                                        </span>
                                    </h5>
                                </div>
                                <div class="text-editor-content bullet-point-list pt-1"
                                    *ngIf="EventRiskAssessmentStore.eventRiskDetails?.description"
                                    [innerHTML]="EventRiskAssessmentStore.eventRiskDetails?.description | safeHtml"></div>



                            </div>
                        </div>
                        <div class="mb-3 mt-2"> <label
                                [ngClass]="activeLikelihood?.id == likelihood.id?'outline-tag active pointer':'outline-tag pointer'"
                                *ngFor="let likelihood of LikelihoodStore.likelihoodDetails"
                                (click)="setActiveLikelihood(likelihood)">{{likelihood.risk_matrix_likelihood_title}}
                                ({{likelihood.score}})</label>
                        </div>

                        <h6>{{'timeframe' | translate}} </h6>
                        <p>{{activeLikelihood?.risk_matrix_likelihood_timeframe?activeLikelihood?.risk_matrix_likelihood_timeframe:activeLikelihood?.language[0].pivot.timeframe}}
                        </p>

                        <h6>{{'probability' | translate}}</h6>
                        <p> {{activeLikelihood?.probability}}</p>

                        <div class="form-group">
                            <h6>{{'justification' | translate}}</h6>
                            <textarea class="form-control" rows="3" id="comment"
                                [(ngModel)]="likelihoodJustification" placeholder="Enter your justification here"
                                name="likelihoodJustification"></textarea>
                        </div>
                    </div>


                    <input type="button" name="next" [disabled]="activeLikelihood==null"
                        class="next action-button btn-active" value="Next" />
                    <input type="button" name="previous" class="previous action-button mr-2" value="Previous" />
                    <input type="button" name="cancel" (click)="cancel()" class="cancel action-button mr-2"
                        value="Cancel" />
                </fieldset>
                <fieldset>
                    <h2 class="fs-title">{{'risk_rating' | translate}}</h2>

                    <div class="mb-5">

                        <div class="bg-main cmn-bdr widg-padding-cmn-small mb-4 pb-2">
                            <div class="row">
                                <div class="col-lg-4 col-sm-6" *ngIf="activeLikelihood">
                                    <h4 class="head-three relative pr-4">
                                        {{activeLikelihood?.risk_matrix_likelihood_title?activeLikelihood?.risk_matrix_likelihood_title:activeLikelihood?.language[0]?.pivot?.title}}
                                        ({{activeLikelihood?.score}}) <a
                                            class="close-text-box">{{EventRiskAssessmentStore.calculationMethod?.is_addition?'+':EventRiskAssessmentStore.calculationMethod?.is_multiplication?'x':EventRiskAssessmentStore.calculationMethod?.is_substraction?'-':'/'}}</a>
                                    </h4>
                                    <h5>{{'likelihood' | translate}}</h5>
                                    <div class="small-text-p">
                                        <p>
                                            {{activeLikelihood?.risk_matrix_likelihood_timeframe?activeLikelihood?.risk_matrix_likelihood_timeframe:activeLikelihood?.language[0]?.pivot?.timeframe?activeLikelihood?.language[0].pivot.timeframe:''}}
                                            {{activeLikelihood?.probability}}</p>
                                    </div>

                                    <h5 style="font-size: 14px;" class="mt-2"
                                        *ngIf="likelihoodJustification && likelihoodJustification!=''">
                                        {{'justification'|translate}}
                                    </h5>
                                    <div class="small-text-p"
                                        *ngIf="likelihoodJustification && likelihoodJustification!=''">
                                        <p style="white-space: pre-line;">{{likelihoodJustification}}</p>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-sm-6" *ngIf="activeImpact">
                                    <h4 class="head-three relative pr-4">
                                        {{activeImpact?.risk_matrix_impact_title?activeImpact?.risk_matrix_impact_title:activeImpact?.language[0]?.pivot?.title}}
                                        ({{activeImpact?.score}}) </h4>
                                    <h5> {{'impact'|translate}}</h5>
                                    <p class="small-text-p"
                                        [innerHTML]="activeImpact?.risk_matrix_impact_description?activeImpact?.risk_matrix_impact_description:activeImpact?.language[0]?.pivot?.description?activeImpact?.language[0].pivot.description:''">

                                    </p>
                                    <h5 style="font-size: 14px;" class="mt-2"
                                        *ngIf="impactJustification && impactJustification!=''">
                                        {{'justification'|translate}}
                                    </h5>
                                    <div class="small-text-p"
                                        *ngIf="impactJustification && impactJustification!=''">
                                        <p style="white-space: pre-line;">{{impactJustification}}</p>
                                    </div>

                                </div>
                                <div class="col-lg-4 col-sm-12" *ngIf="activeImpact && activeLikelihood">
                                    <div class="small-rate-box">
                                        <div
                                            [ngClass]="'risk-rating-box mb-3 risk-rating-box-small risk-rating-box-color bg-'+getRiskClass(false)">
                                            <h3 class="text-white">
                                                {{getRiskClass(true)}}
                                                ({{EventRiskAssessmentStore.calculationMethod?.is_addition?activeImpact?.score+activeLikelihood?.score:EventRiskAssessmentStore.calculationMethod?.is_multiplication?activeImpact?.score*activeLikelihood?.score:EventRiskAssessmentStore.calculationMethod?.is_substraction?activeImpact?.score>activeLikelihood?.score?activeImpact?.score-activeLikelihood?.score:activeLikelihood?.score-activeImpact?.score:activeLikelihood?.score>activeImpact?.score?activeLikelihood?.score/activeImpact?.score:activeImpact?.score/activeLikelihood?.score}})
                                            </h3>
                                            <p class="text-white mb-0">{{'risk_rating'| translate}}
                                                ({{'risk_score'| translate}})</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="risk-score-box">
                            <h6 class="bold">{{'risk_score' | translate}} = ({{'likelihood' | translate}}
                                {{EventRiskAssessmentStore.calculationMethod?.is_addition?'+':EventRiskAssessmentStore.calculationMethod?.is_multiplication?'x':EventRiskAssessmentStore.calculationMethod?.is_substraction?'-':'/'}}
                                {{'impact' | translate}})</h6>
                            <h5 *ngFor="let rating of RiskRatingMasterStore.allItems"
                                [ngClass]="'font-normal risk-color-'+getScoreClass(rating)">
                                <div *ngIf="rating.risk_rating_values">
                                    <span
                                        [ngClass]="'risk-score-indication bg-'+rating.label"></span>{{rating.title}}
                                    ({{getFormatedValue(',',rating.risk_rating_values)}})

                                </div>
                            </h5>
                        </div>

                        <div class="risk-score-box mt-4">
                            <h6 class="bold">{{'risk_treatment' | translate}}</h6>
                            <h5 *ngFor="let rating of RiskRatingMasterStore.allItems"
                                [ngClass]="'font-normal risk-color-'+getScoreClass(rating)"><span
                                    *ngIf="rating.risk_rating_values"
                                    [ngClass]="'risk-score-indication bg-'+rating.label"></span>{{rating.risk_rating_values?rating.risk_treatment:''}}
                            </h5>
                        </div>
                    </div>
                    <input type="button" name="next" class="next action-button btn-active" value="Next" />
                    <input type="button" name="previous" class="previous action-button mr-2" value="Previous" />
                    <input type="button" name="cancel" (click)="cancel()" class="cancel action-button mr-2"
                        value="Cancel" />
                </fieldset>
                
                <fieldset>
                    <h2 class="fs-title">{{'preview_save' | translate}}</h2>
                    <div class="mb-5">
                        <div class="row">
                            <div class="col-lg-9 col-sm-12 padding-right-0">
                                <div class="issuue-new-style p-0">
                                    <div class="issue-top-sec">
                                        <div class="clearfix">
                                            <h5 class="d-inline-block cmn-head-style label-tag-style"><span
                                                    class="issue-smoal-head-text bold">#{{EventRiskAssessmentStore.eventRiskDetails?.reference_code?EventRiskAssessmentStore.eventRiskDetails?.reference_code:AppStore.noContentText}}</span>
                                                <span
                                                    class="issue-smoal-head-text bold">{{EventRiskAssessmentStore.eventRiskDetails?.title?EventRiskAssessmentStore.eventRiskDetails?.title:AppStore.noContentText}}</span>
                                                <span
                                                    *ngFor="let types of EventRiskAssessmentStore.eventRiskDetails?.risk_types"
                                                    class="risk-type-bx in-ex-sec">
                                                    <i><img [attr.src]="types.is_internal == 1 ? 'assets/images/internal.svg' : 'assets/images/external.svg'"
                                                            style="width: 15px;"></i>&nbsp;{{types.language[0].pivot.title}}&nbsp;
                                                </span>
                                            </h5>
                                        </div>
                                        <!-- <p
                                            [innerHTML]="EventRiskAssessmentStore.eventRiskDetails?.risk_observation | safeHtml">
                                        </p> -->

                                    </div>
                                </div>

                                

                                <div class="row">
                                    <div class="col-md-12">
                                        <!-- <h6>{{rm_risk_description|translate}}</h6> -->
                                        <p style="white-space:pre-line">
                                            {{EventRiskAssessmentStore.eventRiskDetails?.description?EventRiskAssessmentStore.eventRiskDetails?.description:AppStore.noContentText}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row">
                                   
                                </div>
                                <div class="row">
                                    <!-- <div class="col-md-4">
                                        <h6>{{'risk_category' | translate}}</h6>
                                        <p>{{EventRiskAssessmentStore.eventRiskDetails?.risk_category?.title?EventRiskAssessmentStore.eventRiskDetails?.risk_category?.title:AppStore.noContentText}}
                                        </p>
                                    </div> -->
                                    <div class="col-md-4">
                                        <h6>{{'risk_types' | translate}}</h6>
                                        <p *ngFor="let types of EventRiskAssessmentStore.eventRiskDetails?.risk_types"
                                            class="risk-type-bx risk-type-bx-drop">
                                            <i><img [attr.src]="types.is_internal == 1 ? 'assets/images/internal.svg' : 'assets/images/external.svg'"
                                                    style="width: 15px;"></i>&nbsp;{{types.language[0].pivot.title}}&nbsp;
                                        </p>
                                        <p *ngIf="EventRiskAssessmentStore.eventRiskDetails?.risk_types?.length==0">
                                            {{AppStore.noContentText}}</p>
                                    </div>
                                    
                                </div>
                                <div class="row">
                                    <div class="col-md-4">

                                        <h6>{{'responsible_users' | translate}}</h6>
                                        <div class="row">
                                            <div class="col-sm-2 animation-pulse"
                                                *ngFor="let user of EventRiskAssessmentStore.eventRiskDetails?.responsible_users;let i=index">
                                                <app-user-popup-box [source]="getPopupDetails(user)"
                                                    [activateButtons]="false" [showName]=false>
                                                </app-user-popup-box>
                                            </div>
                                        </div>
                                        <p *ngIf="EventRiskAssessmentStore.eventRiskDetails?.responsible_users.length==0">
                                            {{AppStore.noContentText}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="label-and-user-pic">
                                            <h6>{{'risk_owner' | translate}}</h6>
                                            <div class="row" *ngIf="EventRiskAssessmentStore.eventRiskDetails?.risk_owner">
                                                <div class="col-sm-12 animation-pulse">
                                                    <app-user-popup-box [activateButtons]="false"
                                                        [source]="getOwnerPopupDetails(EventRiskAssessmentStore.eventRiskDetails?.risk_owner)">
                                                    </app-user-popup-box>
                                                </div>
                                            </div>
                                            <p *ngIf="!EventRiskAssessmentStore.eventRiskDetails?.risk_owner">
                                                {{AppStore.noContentText}}
                                            </p>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-12">
                                <div class="risk-rating-box bg-white p-3 mb-3">
                                    <h6 class="text-left">{{'risk_analysis' | translate}}</h6>
                                    <hr class="mt-0 mb-3">
                                    <div
                                        [ngClass]="'risk-rating-box risk-rating-box-small w-100 risk-rating-box-color bg-'+getRiskClass(false)">
                                        <h3 class="text-white">
                                            {{getRiskClass(true)}}
                                            ({{EventRiskAssessmentStore.calculationMethod?.is_addition?activeImpact?.score+activeLikelihood?.score:EventRiskAssessmentStore.calculationMethod?.is_multiplication?activeImpact?.score*activeLikelihood?.score:EventRiskAssessmentStore.calculationMethod?.is_substraction?activeImpact?.score>activeLikelihood?.score?activeImpact?.score-activeLikelihood?.score:activeLikelihood?.score-activeImpact?.score:activeLikelihood?.score>activeImpact?.score?activeLikelihood?.score/activeImpact?.score:activeImpact?.score/activeLikelihood?.score}})
                                        </h3>
                                    </div>
                                    <div class="text-center mt-3">
                                        <p class="cmn-bdr d-inline-block mb-0 p-2 mr-2 mb-2">{{'likelihood' |
                                            translate}} :
                                            {{activeLikelihood?.risk_matrix_likelihood_title?activeLikelihood?.risk_matrix_likelihood_title:activeLikelihood?.language[0]?.pivot?.title}}
                                            <span>({{activeLikelihood?.score}})</span>
                                        </p>
                                        <p class="cmn-bdr d-inline-block mb-0 p-2 mr-2 mb-2">{{'impact' |
                                            translate}} :
                                            {{activeImpact?.risk_matrix_impact_title?activeImpact?.risk_matrix_impact_title:activeImpact?.language[0]?.pivot?.title}}
                                            <span>({{activeImpact?.score}})</span>
                                        </p>
                                    </div>



                                </div>
                            </div>

                        </div>
                        <div class="row" *ngIf="(!(EventRiskAssessmentStore.eventRiskDetails?.is_analysis_performed==1) && EventRiskAssessmentStore.eventRiskDetails?.processes.length==0 && EventRiskAssessmentStore.eventRiskDetails?.controls.length==0) || (EventRiskAssessmentStore.eventRiskDetails?.is_analysis_performed)">
                            <div class="col-md-12" >
                                
                            </div>
                        </div>
                    </div>
                    <input type="submit" name="submit" class="submit action-button btn-active"
                        (click)="savePerformAssessment()"
                        [value]="AppStore.loading?getButtonText('loading'):getButtonText('save')" />
                    <input type="button" name="previous" class="previous action-button mr-2"
                        [value]="AppStore.loading?getButtonText('loading'):getButtonText('previous')" />
                    <input type="button" name="cancel" (click)="cancel()" class="cancel action-button mr-2"
                        [value]="AppStore.loading?getButtonText('loading'):getButtonText('cancel')" />
                </fieldset>
            </form>
        </div>
    </div>
</div>
</div>

<div class="modal modal-style-1 fade" id="delete-popup" #cancelPopup>
<app-delete-popup *ngIf="cancelObject.type" [source]="cancelObject"></app-delete-popup>
</div>