<div #plainDev></div>
<nav class="edit-bar" data-toggle="affix" #navBar>
    <app-breadcrumb-menu></app-breadcrumb-menu>
    <app-sub-menu></app-sub-menu>
    <ul class="nav nav-pills float-left d-none d-lg-block" role="tablist">
        <li class="nav-item">
            <a class="nav-link nav-link-show"
                [routerLink]="['/event-monitoring/change-requests']"
                routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">{{'em_change_request' | translate}}</a>
        </li>

    </ul>
</nav>


<main class="audit-program-details-page mt-3">
    <div class="container-fluid" *mobxAutorun>
        <div class="row" *ngIf="EventChangeRequestStore.individualLoaded">
            <div class="col-sm-12">
                <div class="widget">

                    <div class="bg-white widg-padding-cmn">
                        <div class="min-height-64">

                            <div class="issue-top-sec">
                                <div class="clearfix">
                                    <h5 class="d-inline-block cmn-head-style label-tag-style"><span
                                            class="issue-smoal-head-text">{{EventChangeRequestStore.individualChangeRequestItem?.reference_code}}</span>
                                        {{EventChangeRequestStore.individualChangeRequestItem?.title}} <span
                                            [ngClass]="'dot-div '+EventChangeRequestStore.individualChangeRequestItem?.event_change_request_status?.label">
                                            {{EventChangeRequestStore.individualChangeRequestItem?.event_change_request_status?.language[0].pivot?.title}}</span>
                                    </h5>
                                </div>
                                
                                <p style="white-space: pre-wrap;">
                                    {{EventChangeRequestStore.individualChangeRequestItem?.reason ?
                                    EventChangeRequestStore.individualChangeRequestItem?.reason :
                                    AppStore.noContentText }} </p>
                                <div class="row">
                                    <div  class="col-xl-3 col-lg-4 col-sm-6"><h6>{{'change_request_type' | translate}}</h6>
                                        <p>{{EventChangeRequestStore?.individualChangeRequestItem?.eventChangeRequestType?.language[0]?.pivot?.title?EventChangeRequestStore?.individualChangeRequestItem?.eventChangeRequestType?.language[0]?.pivot?.title:AppStore.noContentText}}</p>
                                    </div>
                                </div>

                            </div>



                            <!-- common-tab-md starts -->
                            <div class="common-tab-md clearfix bg-body-color-menu tab-same-height">
                                <div class="tab-common-left-md">
                                    <div class=" issues-tab">
                                        <!-- tab menu start -->
                                        <ul class="nav nav-tabs nav-tabs--vertical nav-tabs--left vertical-tab"
                                            role="navigation">
                                            <li (click)="selectReqItems(i,req.id)"
                                                *ngFor="let req of sideTabMenu;let i = index"
                                                class="nav-item"> <a
                                                    [ngClass]="selectedItemPos == i ? 'nav-link active show' : 'nav-link'"
                                                    data-toggle="tab" role="tab" aria-controls="lorem"
                                                    aria-selected="false">{{req.name}} </a>
                                            </li>

                                        </ul>
                                    </div>
                                    <!-- tab menu end -->
                                </div>


                                <div
                                    class="tab-common-left-content-m bg-white cmn-bdr widg-padding-cmn-small min-height-64">
                                    <div class="tab-content"
                                        >
                                        <div *ngFor="let req of sideTabMenu;let i = index"
                                            [ngClass]="selectedItemPos == i ? 'tab-pane fade active show' : 'tab-pane fade'"
                                            id="tab-one" role="tabpanel">
                                            <div class="" *ngIf="req?.type=='event-date' ">

                                            <app-no-data
                                                *ngIf="!EventChangeRequestStore.individualChangeRequestItem?.event_date">
                                            </app-no-data>


                                            <div class="row text-right" *ngIf="(EventChangeRequestStore?.individualChangeRequestItem?.event_change_request_status?.type=='draft' || EventChangeRequestStore?.individualChangeRequestItem?.event_change_request_status?.type=='send-back') && EventChangeRequestStore.individualChangeRequestItem?.event_date">
                                                    <div class="col-lg-12 col-sm-12">
                                                        <a  (click)="editChangeRequestEventDate()" id="edit_modal"><i  class="far fa-edit"></i> Edit </a>
                                                    </div>
                                                    
                                                </div>
                                                <ng-container *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_date">
                                                    <div class="row"  >
                                                        <div class="col-lg-5 col-sm-12">
                                                            <h6>{{'em_cr_existing_date' | translate}}</h6>
                                                            <hr class="mt-0">
                                                            <div class="row sm-row">
                                                                <div class="col-sm-6 sm-col">
                                                                    <h6>{{'em_start_date' | translate}}</h6>
                                                                    <p>{{EventsStore.eventDetails?.start_date | date:
                                                                        OrganizationGeneralSettingsStore.organizationSettings?.date_format}}
                                                                    </p>
                                                                </div>
                                                                <div class="col-sm-6 sm-col">
                                                                    <h6>{{'em_end_date' | translate}}</h6>
                                                                    <p>{{EventsStore.eventDetails?.end_date | date:
                                                                        OrganizationGeneralSettingsStore.organizationSettings?.date_format}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-7 col-sm-12">
                                                            <h6>{{'em_cr_new_date' | translate}}</h6>
                                                            <hr class="mt-0">
                                                            <div class="row sm-row">
                                                                <ng-container >
                                                                    <app-context-no-data *ngIf="!EventChangeRequestStore.individualChangeRequestItem?.event_date?.new_start_date" 
                                                                    [sourceData] = "getNoDataSource('center','no new  date choosed')"></app-context-no-data>
                                                                </ng-container>
                                                                <div class="col-sm-6 sm-col" *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_date?.new_start_date">
                                                                    <h6>{{'em_cr_start_date' | translate}}<span
                                                                            [ngClass]="EventsStore.eventDetails?.start_date > EventChangeRequestStore.individualChangeRequestItem?.event_date?.new_start_date ? 'text-red font-normal small-text ml-1' : 'text-green font-normal small-text ml-1'">({{selectDaysDiffrence() | number: '1.0-0'}}
                                                                            {{EventChangeRequestStore.individualChangeRequestItem?.event_date?.new_start_date
                                                                            >
                                                                            EventsStore.eventDetails?.start_date
                                                                            ? 'more days added' : 'days shortened'}})</span>
                                                                    </h6>
                                                                    <p>{{EventChangeRequestStore.individualChangeRequestItem?.event_date?.new_start_date
                                                                        | date:
                                                                        OrganizationGeneralSettingsStore.organizationSettings?.date_format}}
                                                                    </p>
                                                                   
                                                                </div>
                                                                <div class="col-sm-6 sm-col" *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_date?.new_end_date">
                                                                    <h6>{{'em_cr_end_date' | translate}}<span
                                                                            [ngClass]="EventsStore.eventDetails?.end_date > EventChangeRequestStore.individualChangeRequestItem?.event_date?.new_end_date ? 'text-red font-normal small-text ml-1' : 'text-green font-normal small-text ml-1'">({{selectEndDaysDiffrence() | number: '1.0-0'}}
                                                                            {{EventChangeRequestStore.individualChangeRequestItem?.event_date?.new_end_date
                                                                            >
                                                                            EventsStore.eventDetails?.end_date
                                                                            ? 'more days added' : 'days shortened'}})</span>
                                                                    </h6>
                                                                    <p>{{EventChangeRequestStore.individualChangeRequestItem?.event_date?.new_end_date
                                                                        | date:
                                                                        OrganizationGeneralSettingsStore.organizationSettings?.date_format}}
                                                                    </p>
                                                                   
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <h6>{{'em_cr_justification' | translate}}</h6>
                                                <p style="white-space: pre-wrap;">
                                                    {{EventChangeRequestStore.individualChangeRequestItem?.event_date?.justification
                                                    ?
                                                    EventChangeRequestStore.individualChangeRequestItem?.event_date?.justification
                                                    : AppStore.noContentText}} </p>
                                                <!-----------Evidence File------->
                                                <h6 *ngIf = "durationFile.length > 0">{{'evidence' | translate}}</h6>
                                                <div class="thumb-pics-bg thumb-pics-col-5 accordion-inner-thump clearfix thumb-pics-fix-text">
                                                   <div class="thumb-pics" *ngFor="let docs of durationFile;let i = index">
                                                    <div [ngClass]="AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? 'upload-pics upload-pics-small edit-option pointer' : 'upload-pics upload-pics-small edit-option'" *ngIf="!docs.document_id"  (click) = "AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? viewBrochureItem('event-date',docs,docs.id): ''">
                                                        <div class="browse-form-pic"  [ngStyle]="{'background': 'url('+createImageUrl('event-date',docs?.token)+') no-repeat'}">
                                                        </div>
                                                         <div class="browse-form-name clearfix">
                                                          <div class="float-left">
                                                           <h6>{{docs.title?docs.title:docs.name?docs.name:docs.version_title?docs.version_title:"NA"}}.{{docs.ext}}
                                                           </h6>
                                                           <span class="mr-2 cmn-clr"><i class="fas fa-laptop"></i></span>
                                                           <span>{{docs.size/1048576 | number:'0.2-2'}}MB</span>
                                                          </div>
                                                          <div class="browse-logo">
                                                           <img *ngIf="checkExtension(docs.ext,'image') != -1"
                                                               class="folder-picher" src="/assets/images/jpg-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'doc') != -1"
                                                               class="folder-picher" src="/assets/images/word-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'pdf') != -1"
                                                               class="folder-picher" src="/assets/images/pdf-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'excel') != -1"
                                                               class="folder-picher" src="/assets/images/excel-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'video') != -1"
                                                               class="folder-picher" src="/assets/images/md-video.png">
                                                           <img *ngIf="checkExtension(docs.ext,'audio') != -1"
                                                               class="folder-picher" src="/assets/images/md-audio.png">
                                                           <img *ngIf="checkExtension(docs.ext,'ppt') != -1"
                                                               class="folder-picher" src="/assets/images/md-ppt.png">
                                                       </div>
                                                         </div>
                                                         <div class="edit-option-show-inner" *ngIf = "AuthStore.getActivityPermission(100,'DOWNLOAD_EVENT_CHANGE_REQUEST_FILE')">
                                                           <a [attr.title]="'download_document' | translate"><i class="fas fa-download" (click) = "downloadDocumentFile('event-date',docs)"></i></a>
                                                        </div>
                                                      </div> 
                       
                           <!-- System Files Starts Here -->
                              <!-- KnowledgeHub Files Starts Here -->
                              <!-- style="margin: -10px -25px 0 0;" -->
                                                      <div [ngClass]="AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? 'upload-pics upload-pics-small edit-option pointer' : 'upload-pics upload-pics-small edit-option'" *ngIf="docs.document_id">
                       
                                                        <div *ngFor="let mainDoc of docs.kh_document.versions" (click) = "AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ?viewBrochureItem('document-version',docs,mainDoc): ''">
                                                           <div *ngIf="mainDoc.is_latest">
                                                              <div  class="browse-form-pic"  [ngStyle]="{'background': 'url('+createImageUrl('document-version',mainDoc?.token)+') no-repeat'}">
                                                              </div>
                                                               <div class="browse-form-name clearfix">
                                                                <div class="float-left">
                                                                 <h6>{{mainDoc.title}}.{{mainDoc.ext}}
                                                                 </h6>
                                                                 <span class="mr-2 cmn-clr"><i class="fas fa-book"></i></span>
                                                                 <span>{{mainDoc.size/1048576 | number:'0.2-2'}}MB</span>                                     
                                                                </div>
                                                                <div class="browse-logo">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'image') != -1"
                                                                     class="folder-picher" src="/assets/images/jpg-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'doc') != -1"
                                                                     class="folder-picher" src="/assets/images/word-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'pdf') != -1"
                                                                     class="folder-picher" src="/assets/images/pdf-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'excel') != -1"
                                                                     class="folder-picher" src="/assets/images/excel-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'video') != -1"
                                                                     class="folder-picher" src="/assets/images/md-video.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'audio') != -1"
                                                                     class="folder-picher" src="/assets/images/md-audio.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'ppt') != -1"
                                                                     class="folder-picher" src="/assets/images/md-ppt.png">
                                                             </div>
                                                               </div>
                                                               <div class="edit-option-show-inner" *ngIf = "AuthStore.getActivityPermission(100,'DOWNLOAD_EVENT_CHANGE_REQUEST_FILE')">
                                                                 <a [attr.title]="'download_document' | translate"><i class="fas fa-download" (click) = "downloadDocumentFile('document-version',docs,mainDoc)"></i></a>
                                                              </div>
                                                           </div>
                                                        </div>
                                                      </div>
                          <!-- KnowledgeHub Files Ends Here -->
                                                    </div>
                                                </div>
                                                </ng-container>
                                                

                                                
                                                <!------------------------------->
                                            </div>

                                            <div class="" *ngIf="req?.type=='event-scope'">

                                                <app-no-data
                                                 *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_scope.length==0">
                                               </app-no-data>

                                                <div class="row text-right" *ngIf="(EventChangeRequestStore?.individualChangeRequestItem?.event_change_request_status?.type=='draft' || EventChangeRequestStore?.individualChangeRequestItem?.event_change_request_status?.type=='send-back') && EventChangeRequestStore.individualChangeRequestItem?.event_scope.length">
                                                    <div class="col-lg-12 col-sm-12">
                                                        <a  (click)="editChangeRequestEventScope()" id="edit_modal"><i  class="far fa-edit"></i> Edit </a>
                                                    </div>
                                                    
                                                </div>
                                               <ng-container *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_scope.length">
                                                <div class="row">
                                                    <div class="col-lg-6 col-sm-12 bdr-right-pc-sm-none">
                                                        <h6>{{'em_cr_existing_scope_of_work' | translate}}</h6>
                                                       
                                                        <hr class="mt-0">

                                                       
                                                        <ng-container *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_scope.length">
                                                            <h6>{{'em_scope' | translate}}</h6>
                                                            <ul class="arrowlist mt-0 p-0">
                                                                <li
                                                                    *ngFor="let scope of EventChangeRequestStore.individualChangeRequestItem?.event_scope">
                                                                    <!-- &&(scope.type=='new'||scope.type=='existing') -->
                                                                    <span
                                                                        [ngClass]="scope.is_deleted ? 'line-through text-red' :''"
                                                                        *ngIf="scope.scope_type =='scope' && scope.type == 'existing'">{{scope.title}}</span>
                                                                </li>
                                                                <p *ngIf = "checkScopeTypePresent('scope','scope_type',EventChangeRequestStore.individualChangeRequestItem?.event_scope) == -1">{{AppStore.noContentText}}</p>
                                                            </ul>

                                                            <h6>{{'em_exclusion' | translate}}</h6>
                                                            <ul class="arrowlist mt-0 p-0">
                                                                <li
                                                                    *ngFor="let scope of EventChangeRequestStore.individualChangeRequestItem?.event_scope">
                                                                    <!-- &&(scope.type=='new'||scope.type=='existing') -->
                                                                    <span
                                                                        [ngClass]="scope.is_deleted ? 'line-through text-red' : ''"
                                                                        *ngIf="scope.scope_type =='exclusion' && scope.type == 'existing'">{{scope.title}}</span>
                                                                </li>
                                                                <p *ngIf = "checkScopeTypePresent('exclusion','scope_type',EventChangeRequestStore.individualChangeRequestItem?.event_scope) == -1">{{AppStore.noContentText}}</p>
                                                            </ul>

                                                            <h6>{{'em_assumption' | translate}}</h6>
                                                            <ul class="arrowlist mt-0 p-0">
                                                                <li
                                                                    *ngFor="let scope of EventChangeRequestStore.individualChangeRequestItem?.event_scope">
                                                                    <!-- &&(scope.type=='new'||scope.type=='existing') -->
                                                                    <span
                                                                        [ngClass]="scope.is_deleted ? 'line-through text-red' : ''"
                                                                        *ngIf="scope.scope_type =='assumption' && scope.type == 'existing' ">{{scope.title}}</span>
                                                                </li>
                                                                <p *ngIf = "checkScopeTypePresent('assumption','scope_type',EventChangeRequestStore.individualChangeRequestItem?.event_scope) == -1">{{AppStore.noContentText}}</p>
                                                            </ul>
                                                        </ng-container>
                                                        <ng-container *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_scope.length==0">
                                                            <ul class="arrowlist mt-0 p-0">
                                                                <li
                                                                    *ngFor="let scope of EventChangeRequestStore.individualChangeRequestItem?.event?.event_scopes">
                                                                    <span
                                                                        
                                                                        *ngIf="scope.type =='scope'">{{scope.title}}</span>
                                                                       
                                                                </li>
                                                                <p *ngIf = "checkScopeTypePresent('scope','type',EventChangeRequestStore.individualChangeRequestItem?.event?.event_scopes) == -1">{{AppStore.noContentText}}</p>
                                                            </ul>
    
                                                            <h6>{{'em_exclusion' | translate}}</h6>
                                                            <ul class="arrowlist mt-0 p-0">
                                                                <li
                                                                    *ngFor="let scope of EventChangeRequestStore.individualChangeRequestItem?.event?.event_scopes">
                                                                    <span
                                                                       
                                                                        *ngIf="scope.type =='exclusion'">{{scope.title}}</span>
                                                                        <!-- &&(scope.type=='existing'||scope.type=='deleted') -->
                                                                </li>
                                                                <p *ngIf = "checkScopeTypePresent('exclusion','type',EventChangeRequestStore.individualChangeRequestItem?.event?.event_scopes) == -1">{{AppStore.noContentText}}</p>
                                                            </ul>
    
                                                            <h6>{{'em_assumption' | translate}}</h6>
                                                            <ul class="arrowlist mt-0 p-0">
                                                                <li
                                                                    *ngFor="let scope of EventChangeRequestStore.individualChangeRequestItem?.event?.event_scopes">
                                                                    <!-- [ngClass]="scope.type == 'deleted' ? 'line-through text-red' : ''" -->
                                                                    <span   *ngIf="scope.type =='assumption'">{{scope.title}}</span>
                                                                        <!-- &&(scope.type=='existing'||scope.type=='deleted') -->
                                                                </li>
                                                                <p *ngIf = "checkScopeTypePresent('assumption','type',EventChangeRequestStore.individualChangeRequestItem?.event?.event_scopes) == -1">{{AppStore.noContentText}}</p>
                                                            </ul>
                                                        </ng-container>
                                                        

                                                    </div>
                                                    <div class="col-lg-6 col-sm-12">
                                                        <h6>{{'em_cr_new_scope_of_work' | translate}}</h6>
                                                        <hr class="mt-0">

                                                        


                                                        <h6>{{'em_scope' | translate}}</h6>
                                                        <ul class="arrowlist mt-0 p-0">
                                                            <li
                                                                *ngFor="let scope of EventChangeRequestStore.individualChangeRequestItem?.event_scope">
                                                                <!-- &&(scope.type=='new'||scope.type=='existing') -->
                                                                <span
                                                                    [ngClass]="scope.type == 'new' ? 'text-green' : ''"
                                                                    *ngIf="scope.scope_type =='scope' && !scope.is_deleted">{{scope.title}}</span>
                                                            </li>
                                                            <!-- <p *ngIf = "checkScopeTypePresent('scope','scope_type',EventChangeRequestStore.individualChangeRequestItem?.event_scope) == -1">{{AppStore.noContentText}}</p> -->
                                                            <ng-container >
                                                                <app-context-no-data *ngIf="checkScopeTypePresent('scope','scope_type',EventChangeRequestStore.individualChangeRequestItem?.event_scope) == -1" 
                                                                [sourceData] = "getNoDataSource('left','no scope added')"></app-context-no-data>
                                                            </ng-container>
                                                        </ul>

                                                        <h6>{{'em_exclusion' | translate}}</h6>
                                                        <ul class="arrowlist mt-0 p-0">
                                                            <li
                                                                *ngFor="let scope of EventChangeRequestStore.individualChangeRequestItem?.event_scope">
                                                                <!-- &&(scope.type=='new'||scope.type=='existing') -->
                                                                <span
                                                                    [ngClass]="scope.type == 'new' ? 'text-green' : ''"
                                                                    *ngIf="scope.scope_type =='exclusion' && !scope.is_deleted">{{scope.title}}</span>
                                                            </li>
                                                            <ng-container >
                                                                <app-context-no-data *ngIf = "checkScopeTypePresent('exclusion','scope_type',EventChangeRequestStore.individualChangeRequestItem?.event_scope) == -1" 
                                                                [sourceData] = "getNoDataSource('left','no exclusion added')"></app-context-no-data>
                                                            </ng-container>
                                                            <!-- <p *ngIf = "checkScopeTypePresent('exclusion','scope_type',EventChangeRequestStore.individualChangeRequestItem?.event_scope) == -1">{{AppStore.noContentText}}</p> -->
                                                        </ul>

                                                        <h6>{{'em_assumption' | translate}}</h6>
                                                        <ul class="arrowlist mt-0 p-0">
                                                            <li
                                                                *ngFor="let scope of EventChangeRequestStore.individualChangeRequestItem?.event_scope">
                                                                <!-- &&(scope.type=='new'||scope.type=='existing') -->
                                                                <span
                                                                    [ngClass]="scope.type == 'new' ? 'text-green' : ''"
                                                                    *ngIf="scope.scope_type =='assumption' && !scope.is_deleted">{{scope.title}}</span>
                                                            </li>
                                                            <ng-container >
                                                                <app-context-no-data *ngIf = "checkScopeTypePresent('assumption','scope_type',EventChangeRequestStore.individualChangeRequestItem?.event_scope) == -1" 
                                                                [sourceData] = "getNoDataSource('left','no assumption added')"></app-context-no-data>
                                                            </ng-container>
                                                            <!-- <p *ngIf = "checkScopeTypePresent('assumption','scope_type',EventChangeRequestStore.individualChangeRequestItem?.event_scope) == -1">{{AppStore.noContentText}}</p> -->
                                                        </ul>

                                                    </div>
                                                </div>

                                                <h6>{{'em_cr_justification' | translate}}</h6>
                                                <p style="white-space: pre-wrap;">
                                                    {{EventChangeRequestStore.individualChangeRequestItem?.event_scope.length > 0
                                                    ?
                                                    EventChangeRequestStore.individualChangeRequestItem?.event_scope[0].justification
                                                    : AppStore.noContentText}} </p>
                                                <!-----------Evidence File------->
                                                <h6  *ngIf = "scopeFiles.length > 0">{{'evidence' | translate}}</h6>
                                                <div class="thumb-pics-bg thumb-pics-col-5 accordion-inner-thump clearfix thumb-pics-fix-text">
                                                   <div class="thumb-pics" *ngFor="let docs of scopeFiles;let i = index">
                                                    <div [ngClass]="AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? 'upload-pics upload-pics-small edit-option pointer' : 'upload-pics upload-pics-small edit-option'" *ngIf="!docs.document_id"  (click) = "AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? viewBrochureItem('event-scope',docs,docs.id): ''">
                                                        <div class="browse-form-pic"  [ngStyle]="{'background': 'url('+createImageUrl('event-scope',docs?.token)+') no-repeat'}">
                                                        </div>
                                                         <div class="browse-form-name clearfix">
                                                          <div class="float-left">
                                                           <h6>{{docs.title?docs.title:docs.name?docs.name:docs.version_title?docs.version_title:"NA"}}.{{docs.ext}}
                                                           </h6>
                                                           <span class="mr-2 cmn-clr"><i class="fas fa-laptop"></i></span>
                                                           <span>{{docs.size/1048576 | number:'0.2-2'}}MB</span>
                                                          </div>
                                                          <div class="browse-logo">
                                                           <img *ngIf="checkExtension(docs.ext,'image') != -1"
                                                               class="folder-picher" src="/assets/images/jpg-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'doc') != -1"
                                                               class="folder-picher" src="/assets/images/word-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'pdf') != -1"
                                                               class="folder-picher" src="/assets/images/pdf-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'excel') != -1"
                                                               class="folder-picher" src="/assets/images/excel-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'video') != -1"
                                                               class="folder-picher" src="/assets/images/md-video.png">
                                                           <img *ngIf="checkExtension(docs.ext,'audio') != -1"
                                                               class="folder-picher" src="/assets/images/md-audio.png">
                                                           <img *ngIf="checkExtension(docs.ext,'ppt') != -1"
                                                               class="folder-picher" src="/assets/images/md-ppt.png">
                                                       </div>
                                                         </div>
                                                         <div class="edit-option-show-inner" *ngIf = "AuthStore.getActivityPermission(100,'DOWNLOAD_EVENT_CHANGE_REQUEST_FILE')">
                                                           <a [attr.title]="'download_document' | translate"><i class="fas fa-download" (click) = "downloadDocumentFile('event-scope',docs)"></i></a>
                                                        </div>
                                                      </div> 
                       
                           <!-- System Files Starts Here -->
                              <!-- KnowledgeHub Files Starts Here -->
                              <!-- style="margin: -10px -25px 0 0;" -->
                                                      <div [ngClass]="AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? 'upload-pics upload-pics-small edit-option pointer' : 'upload-pics upload-pics-small edit-option'" *ngIf="docs.document_id">
                       
                                                        <div *ngFor="let mainDoc of docs.kh_document.versions" (click) = "AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ?viewBrochureItem('document-version',docs,mainDoc): ''">
                                                           <div *ngIf="mainDoc.is_latest">
                                                              <div  class="browse-form-pic"  [ngStyle]="{'background': 'url('+createImageUrl('document-version',mainDoc?.token)+') no-repeat'}">
                                                              </div>
                                                               <div class="browse-form-name clearfix">
                                                                <div class="float-left">
                                                                 <h6>{{mainDoc.title}}.{{mainDoc.ext}}
                                                                 </h6>
                                                                 <span class="mr-2 cmn-clr"><i class="fas fa-book"></i></span>
                                                                 <span>{{mainDoc.size/1048576 | number:'0.2-2'}}MB</span>                                     
                                                                </div>
                                                                <div class="browse-logo">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'image') != -1"
                                                                     class="folder-picher" src="/assets/images/jpg-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'doc') != -1"
                                                                     class="folder-picher" src="/assets/images/word-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'pdf') != -1"
                                                                     class="folder-picher" src="/assets/images/pdf-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'excel') != -1"
                                                                     class="folder-picher" src="/assets/images/excel-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'video') != -1"
                                                                     class="folder-picher" src="/assets/images/md-video.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'audio') != -1"
                                                                     class="folder-picher" src="/assets/images/md-audio.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'ppt') != -1"
                                                                     class="folder-picher" src="/assets/images/md-ppt.png">
                                                             </div>
                                                               </div>
                                                               <div class="edit-option-show-inner" *ngIf = "AuthStore.getActivityPermission(100,'DOWNLOAD_EVENT_CHANGE_REQUEST_FILE')">
                                                                 <a [attr.title]="'download_document' | translate"><i class="fas fa-download" (click) = "downloadDocumentFile('document-version',docs,mainDoc)"></i></a>
                                                              </div>
                                                           </div>
                                                        </div>
                                                      </div>
                          <!-- KnowledgeHub Files Ends Here -->
                                                    </div>
                                                </div>
                                                </ng-container>
                                                
                                                <!------------------------------->

                                            </div>
                                            <div *ngIf="req?.type=='event-deliverable'">
                                                <app-no-data
                                                *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_change_request_deliverable.length==0">
                                              </app-no-data>

                                                <div class="row text-right" *ngIf="(EventChangeRequestStore?.individualChangeRequestItem?.event_change_request_status?.type=='draft' || EventChangeRequestStore?.individualChangeRequestItem?.event_change_request_status?.type=='send-back') && EventChangeRequestStore.individualChangeRequestItem?.event_change_request_deliverable.length">
                                                    <div class="col-lg-12 col-sm-12">
                                                        <a  (click)="editChangeRequestEventDeliverable()" id="edit_modal"><i  class="far fa-edit"></i> Edit </a>
                                                    </div>
                                                    
                                                </div>

                                             <ng-container *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_change_request_deliverable.length">
                                                <div class="row">
                                                    <div class="col-lg-6 col-sm-12 bdr-right-pc-sm-none">
                                                        <h6>{{'em_cr_existing_deliverables' | translate}}</h6>
                                                       
                                                        <hr class="mt-0">

                                                       
                                                        <ng-container *ngIf="EventChangeRequestStore?.individualChangeRequestItem?.event_change_request_deliverable.length">
                                                           
                                                            <ul class="arrowlist mt-0 p-0">
                                                                <li
                                                                    *ngFor="let del of EventChangeRequestStore.individualChangeRequestItem?.event_change_request_deliverable">
                                                                    <!-- &&(scope.type=='new'||scope.type=='existing') -->
                                                                    <span
                                                                        [ngClass]="del.is_deleted ? 'line-through text-red' :''"
                                                                        *ngIf="del.type == 'existing'">{{del.title}}</span>
                                                                </li>
                                                               
                                                            </ul>

                                                            

                                                            
                                                           
                                                        </ng-container>
                                                        <ng-container *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_change_request_deliverable.length==0">
                                                            <ul class="arrowlist mt-0 p-0">
                                                                <li
                                                                    *ngFor="let deliverables of EventChangeRequestStore.individualChangeRequestItem?.event?.event_deliverables">
                                                                    <span
                                                                        
                                                                       >{{deliverables.title}}</span>
                                                                       
                                                                </li>
                                                               
                                                            </ul>
    
                                                        </ng-container>
                                                        

                                                    </div>
                                                    <div class="col-lg-6 col-sm-12">
                                                        <h6>{{'em_cr_new_deliverables' | translate}}</h6>
                                                        <hr class="mt-0">
                                                        <ng-container >
                                                            <app-context-no-data *ngIf = "EventChangeRequestStore.individualChangeRequestItem?.event_change_request_deliverable.length==0"
                                                            [sourceData] = "getNoDataSource('left','no deliverables added')"></app-context-no-data>
                                                        </ng-container>

                                                        <!-- <p *ngIf = "EventChangeRequestStore.individualChangeRequestItem?.event_change_request_deliverable.length==0">{{AppStore.noContentText}}</p> -->
                                                        <ul class="arrowlist mt-0 p-0" *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_change_request_deliverable.length">
                                                            <li
                                                                *ngFor="let del of EventChangeRequestStore.individualChangeRequestItem?.event_change_request_deliverable">
                                                                <!-- &&(scope.type=='new'||scope.type=='existing') -->
                                                                <span
                                                                    [ngClass]="del.type == 'new' ? 'text-green' : ''"
                                                                    *ngIf="!del.is_deleted">{{del.title}}</span>
                                                            </li>
                                                            
                                                        </ul>


                                                    </div>
                                                </div>

                                                <h6>{{'em_cr_justification' | translate}}</h6>
                                                <p style="white-space: pre-wrap;">
                                                    {{EventChangeRequestStore.individualChangeRequestItem?.event_change_request_deliverable.length > 0
                                                    ?
                                                    EventChangeRequestStore.individualChangeRequestItem?.event_change_request_deliverable[0].justification
                                                    : AppStore.noContentText}} </p>
                                                <!-----------Evidence File------->
                                                <h6  *ngIf = "deliverableFiles.length > 0">{{'evidence' | translate}}</h6>
                                                <div class="thumb-pics-bg thumb-pics-col-5 accordion-inner-thump clearfix thumb-pics-fix-text">
                                                   <div class="thumb-pics" *ngFor="let docs of deliverableFiles;let i = index">
                                                    <div [ngClass]="AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? 'upload-pics upload-pics-small edit-option pointer' : 'upload-pics upload-pics-small edit-option'" *ngIf="!docs.document_id"  (click) = "AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? viewBrochureItem('event-scope',docs,docs.id): ''">
                                                        <div class="browse-form-pic"  [ngStyle]="{'background': 'url('+createImageUrl('event-scope',docs?.token)+') no-repeat'}">
                                                        </div>
                                                         <div class="browse-form-name clearfix">
                                                          <div class="float-left">
                                                           <h6>{{docs.title?docs.title:docs.name?docs.name:docs.version_title?docs.version_title:"NA"}}.{{docs.ext}}
                                                           </h6>
                                                           <span class="mr-2 cmn-clr"><i class="fas fa-laptop"></i></span>
                                                           <span>{{docs.size/1048576 | number:'0.2-2'}}MB</span>
                                                          </div>
                                                          <div class="browse-logo">
                                                           <img *ngIf="checkExtension(docs.ext,'image') != -1"
                                                               class="folder-picher" src="/assets/images/jpg-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'doc') != -1"
                                                               class="folder-picher" src="/assets/images/word-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'pdf') != -1"
                                                               class="folder-picher" src="/assets/images/pdf-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'excel') != -1"
                                                               class="folder-picher" src="/assets/images/excel-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'video') != -1"
                                                               class="folder-picher" src="/assets/images/md-video.png">
                                                           <img *ngIf="checkExtension(docs.ext,'audio') != -1"
                                                               class="folder-picher" src="/assets/images/md-audio.png">
                                                           <img *ngIf="checkExtension(docs.ext,'ppt') != -1"
                                                               class="folder-picher" src="/assets/images/md-ppt.png">
                                                       </div>
                                                         </div>
                                                         <div class="edit-option-show-inner" *ngIf = "AuthStore.getActivityPermission(100,'DOWNLOAD_EVENT_CHANGE_REQUEST_FILE')">
                                                           <a [attr.title]="'download_document' | translate"><i class="fas fa-download" (click) = "downloadDocumentFile('event-scope',docs)"></i></a>
                                                        </div>
                                                      </div> 
                       
                           <!-- System Files Starts Here -->
                              <!-- KnowledgeHub Files Starts Here -->
                              <!-- style="margin: -10px -25px 0 0;" -->
                                                      <div [ngClass]="AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? 'upload-pics upload-pics-small edit-option pointer' : 'upload-pics upload-pics-small edit-option'" *ngIf="docs.document_id">
                       
                                                        <div *ngFor="let mainDoc of docs.kh_document.versions" (click) = "AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ?viewBrochureItem('document-version',docs,mainDoc): ''">
                                                           <div *ngIf="mainDoc.is_latest">
                                                              <div  class="browse-form-pic"  [ngStyle]="{'background': 'url('+createImageUrl('document-version',mainDoc?.token)+') no-repeat'}">
                                                              </div>
                                                               <div class="browse-form-name clearfix">
                                                                <div class="float-left">
                                                                 <h6>{{mainDoc.title}}.{{mainDoc.ext}}
                                                                 </h6>
                                                                 <span class="mr-2 cmn-clr"><i class="fas fa-book"></i></span>
                                                                 <span>{{mainDoc.size/1048576 | number:'0.2-2'}}MB</span>                                     
                                                                </div>
                                                                <div class="browse-logo">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'image') != -1"
                                                                     class="folder-picher" src="/assets/images/jpg-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'doc') != -1"
                                                                     class="folder-picher" src="/assets/images/word-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'pdf') != -1"
                                                                     class="folder-picher" src="/assets/images/pdf-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'excel') != -1"
                                                                     class="folder-picher" src="/assets/images/excel-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'video') != -1"
                                                                     class="folder-picher" src="/assets/images/md-video.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'audio') != -1"
                                                                     class="folder-picher" src="/assets/images/md-audio.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'ppt') != -1"
                                                                     class="folder-picher" src="/assets/images/md-ppt.png">
                                                             </div>
                                                               </div>
                                                               <div class="edit-option-show-inner" *ngIf = "AuthStore.getActivityPermission(100,'DOWNLOAD_EVENT_CHANGE_REQUEST_FILE')">
                                                                 <a [attr.title]="'download_document' | translate"><i class="fas fa-download" (click) = "downloadDocumentFile('document-version',docs,mainDoc)"></i></a>
                                                              </div>
                                                           </div>
                                                        </div>
                                                      </div>
                          <!-- KnowledgeHub Files Ends Here -->
                                                    </div>
                                                </div>
                                            </ng-container>
                                                


                                            </div>
                                            <div *ngIf="req?.type=='event-budget'">
                                                <app-no-data
                                                *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_budget.length==0">
                                              </app-no-data>

                                                <div class="row text-right" 
                                                *ngIf="(EventChangeRequestStore?.individualChangeRequestItem?.event_change_request_status?.type=='draft' || EventChangeRequestStore?.individualChangeRequestItem?.event_change_request_status?.type=='send-back') && EventChangeRequestStore.individualChangeRequestItem?.event_budget.length">
                                                    <div class="col-lg-12 col-sm-12">
                                                        <a  (click)="editChangeRequestEventBudget()" id="edit_modal"><i  class="far fa-edit"></i> Edit </a>
                                                    </div>
                                                    
                                                </div>

                                            <ng-container *ngIf="EventChangeRequestStore.individualChangeRequestItem?.event_budget.length">
                                                <h6>{{'em_cr_budget' | translate}}</h6>
                                                

                                                <div class="audit-form-table w-100 not-fixed-table mb-3">
                                                    <table
                                                        class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll text-center">
                                                        <thead>
                                                            <tr>
                                                                <th class="border-top-0" width="4%">#</th>
                                                                <th class="border-top-0" width="32%">{{'year' | translate}}</th>
                                                                <th class="border-top-0" width="32%">{{'em_cr_existing_budget' | translate}}
                                                                </th>
                                                                <th class="border-top-0" width="32%">{{'em_cr_new_budget' | translate}}</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr
                                                                *ngFor="let budget of EventChangeRequestStore.individualChangeRequestItem?.event_budget;let num=index">
                                                                <!-- budget.type=='deleted'? 'red' : '' -->
                                                                <td
                                                                    [ngStyle]="{color: (budget.type=='existing' && budget.is_deleted)? 'red' : budget.type == 'new' ? 'green' : ''}">
                                                                    {{num+1}}</td>
                                                                <td
                                                                    [ngStyle]="{color: (budget.type=='existing' && budget.is_deleted)? 'red' : budget.type == 'new' ? 'green' : ''}">
                                                                    {{budget.year}}</td>
                                                                <td
                                                                    [ngStyle]="{color: (budget.type=='existing' && budget.is_deleted)? 'red' : budget.type == 'new' ? 'green' : ''}">
                                                                    {{budget.existing_amount}}</td>
                                                                <td
                                                                    [ngStyle]="{color: (budget.type=='existing' && budget.is_deleted)? 'red' : budget.type == 'new' ? 'green' : ''}">
                                                                    {{budget.new_amount?budget.new_amount:'0'}} <span *ngIf="budget.new_amount>0"
                                                                        [ngClass]="budget.new_amount >= budget.existing_amount ? 'text-green' : 'text-red'">(
                                                                        {{budget.new_amount > budget.existing_amount ?
                                                                        '+' : ''}} {{budget.new_amount -
                                                                        budget.existing_amount }} )</span></td>
                                                            </tr>

                                                            <tr>
                                                                <td colspan="2">{{'total' | translate}}</td>
                                                                <td>{{getExistingTotal()}}</td>
                                                                <td>{{getNewAmountTotal()}}<span *ngIf="getNewAmountTotal() -getExistingTotal()>0"
                                                                        [ngClass]="getNewAmountTotal() >= getExistingTotal() ? 'text-green' : 'text-red'">(
                                                                        {{getNewAmountTotal() > getExistingTotal() ? '+'
                                                                        : ''}} {{getNewAmountTotal() -
                                                                        getExistingTotal()}} )</span></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>

                                                <h6>{{'em_cr_justification' | translate}}</h6>
                                                <p style="white-space: pre-wrap;">
                                                    {{EventChangeRequestStore.individualChangeRequestItem?.event_budget.length > 0
                                                    ?
                                                    EventChangeRequestStore.individualChangeRequestItem?.event_budget[0]?.justification
                                                    : AppStore.noContentText }} </p>
                                                <!-----------Evidence File------->
                                                <h6 *ngIf = "budgetFiles.length > 0">{{'evidence' | translate}}</h6>
                                                <div class="thumb-pics-bg thumb-pics-col-5 accordion-inner-thump clearfix thumb-pics-fix-text">
                                                   <div class="thumb-pics" *ngFor="let docs of budgetFiles;let i = index">
                                                    <div [ngClass]="AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? 'upload-pics upload-pics-small edit-option pointer' : 'upload-pics upload-pics-small edit-option'" *ngIf="!docs.document_id"  (click) = "AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? viewBrochureItem('event-budget',docs,docs.id): ''">
                                                        <div class="browse-form-pic"  [ngStyle]="{'background': 'url('+createImageUrl('event-budget',docs?.token)+') no-repeat'}">
                                                        </div>
                                                         <div class="browse-form-name clearfix">
                                                          <div class="float-left">
                                                           <h6>{{docs.title?docs.title:docs.name?docs.name:docs.version_title?docs.version_title:"NA"}}.{{docs.ext}}
                                                           </h6>
                                                           <span class="mr-2 cmn-clr"><i class="fas fa-laptop"></i></span>
                                                           <span>{{docs.size/1048576 | number:'0.2-2'}}MB</span>
                                                          </div>
                                                          <div class="browse-logo">
                                                           <img *ngIf="checkExtension(docs.ext,'image') != -1"
                                                               class="folder-picher" src="/assets/images/jpg-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'doc') != -1"
                                                               class="folder-picher" src="/assets/images/word-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'pdf') != -1"
                                                               class="folder-picher" src="/assets/images/pdf-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'excel') != -1"
                                                               class="folder-picher" src="/assets/images/excel-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'video') != -1"
                                                               class="folder-picher" src="/assets/images/md-video.png">
                                                           <img *ngIf="checkExtension(docs.ext,'audio') != -1"
                                                               class="folder-picher" src="/assets/images/md-audio.png">
                                                           <img *ngIf="checkExtension(docs.ext,'ppt') != -1"
                                                               class="folder-picher" src="/assets/images/md-ppt.png">
                                                       </div>
                                                         </div>
                                                         <div class="edit-option-show-inner" *ngIf = "AuthStore.getActivityPermission(100,'DOWNLOAD_EVENT_CHANGE_REQUEST_FILE')">
                                                           <a [attr.title]="'download_document' | translate"><i class="fas fa-download" (click) = "downloadDocumentFile('event-budget',docs)"></i></a>
                                                        </div>
                                                      </div> 
                       
                           <!-- System Files Starts Here -->
                              <!-- KnowledgeHub Files Starts Here -->
                              <!-- style="margin: -10px -25px 0 0;" -->
                                                      <div [ngClass]="AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? 'upload-pics upload-pics-small edit-option pointer' : 'upload-pics upload-pics-small edit-option'" *ngIf="docs.document_id">
                       
                                                        <div *ngFor="let mainDoc of docs.kh_document.versions" (click) = "AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ?viewBrochureItem('document-version',docs,mainDoc): ''">
                                                           <div *ngIf="mainDoc.is_latest">
                                                              <div  class="browse-form-pic"  [ngStyle]="{'background': 'url('+createImageUrl('document-version',mainDoc?.token)+') no-repeat'}">
                                                              </div>
                                                               <div class="browse-form-name clearfix">
                                                                <div class="float-left">
                                                                 <h6>{{mainDoc.title}}.{{mainDoc.ext}}
                                                                 </h6>
                                                                 <span class="mr-2 cmn-clr"><i class="fas fa-book"></i></span>
                                                                 <span>{{mainDoc.size/1048576 | number:'0.2-2'}}MB</span>                                     
                                                                </div>
                                                                <div class="browse-logo">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'image') != -1"
                                                                     class="folder-picher" src="/assets/images/jpg-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'doc') != -1"
                                                                     class="folder-picher" src="/assets/images/word-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'pdf') != -1"
                                                                     class="folder-picher" src="/assets/images/pdf-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'excel') != -1"
                                                                     class="folder-picher" src="/assets/images/excel-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'video') != -1"
                                                                     class="folder-picher" src="/assets/images/md-video.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'audio') != -1"
                                                                     class="folder-picher" src="/assets/images/md-audio.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'ppt') != -1"
                                                                     class="folder-picher" src="/assets/images/md-ppt.png">
                                                             </div>
                                                               </div>
                                                               <div class="edit-option-show-inner" *ngIf = "AuthStore.getActivityPermission(100,'DOWNLOAD_EVENT_CHANGE_REQUEST_FILE')">
                                                                 <a [attr.title]="'download_document' | translate"><i class="fas fa-download" (click) = "downloadDocumentFile('document-version',docs,mainDoc)"></i></a>
                                                              </div>
                                                           </div>
                                                        </div>
                                                      </div>
                          <!-- KnowledgeHub Files Ends Here -->
                                                    </div>
                                                </div>
                                            </ng-container>
                                                
                                                <!------------------------------->
                                            </div>

                                            <div class="edit-option" *ngIf="req?.type=='event-status'">
                                                <div class="row">
                                                    <div class="col-lg-6 col-sm-12 bdr-right-pc-sm-none">
                                                        <h6>{{'em_cr_existing_status' | translate}}</h6>
                                                        <hr class="mt-0">
                                                        <div class="row">
                                                            <div class="col-sm-12">
                                                               <p [ngClass]="'line-through text-'+getStatusColor(EventChangeRequestStore.individualChangeRequestItem?.event?.event_status?.label)">{{EventChangeRequestStore.individualChangeRequestItem?.event?.event_status?.language[0].pivot.title}}</p>
                                                            </div>
                                                         </div>
                                                    </div>
                                                    <div class="col-lg-6 col-sm-12">
                                                        <h6>{{'em_cr_new_status' | translate}}</h6>
                                                        <hr class="mt-0">
                                                        <div class="row">
                                                            <div class="col-sm-12">
                                                                <p [ngClass]="'text-'+getStatusColor(EventChangeRequestStore.individualChangeRequestItem?.event_status?.new_event_status?.label)">{{EventChangeRequestStore.individualChangeRequestItem?.event_status?.new_event_status?.language[0].pivot.title}}</p>
                                                            </div>
                                                         </div>
                                                    </div>
                                                </div>

                                                <h6>{{'em_cr_justification' | translate}}</h6>
                                                <p style="white-space: pre-wrap;">
                                                    {{EventChangeRequestStore.individualChangeRequestItem?.event_status ?
                                                    EventChangeRequestStore.individualChangeRequestItem?.event_status?.justification
                                                    : AppStore.noContentText}} </p>
                                                <!-----------Evidence File------->
                                                <h6 *ngIf = "statusFiles.length > 0">{{'evidence' | translate}}</h6>
                                                <div class="thumb-pics-bg thumb-pics-col-5 accordion-inner-thump clearfix thumb-pics-fix-text">
                                                   <div class="thumb-pics" *ngFor="let docs of statusFiles;let i = index">
                                                    <div [ngClass]="AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? 'upload-pics upload-pics-small edit-option pointer' : 'upload-pics upload-pics-small edit-option'" *ngIf="!docs.document_id"  (click) = "AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? viewBrochureItem('event-status',docs,docs.id): ''">
                                                        <div class="browse-form-pic"  [ngStyle]="{'background': 'url('+createImageUrl('event-status',docs?.token)+') no-repeat'}">
                                                        </div>
                                                         <div class="browse-form-name clearfix">
                                                          <div class="float-left">
                                                           <h6>{{docs.title?docs.title:docs.name?docs.name:docs.version_title?docs.version_title:"NA"}}.{{docs.ext}}
                                                           </h6>
                                                           <span class="mr-2 cmn-clr"><i class="fas fa-laptop"></i></span>
                                                           <span>{{docs.size/1048576 | number:'0.2-2'}}MB</span>
                                                          </div>
                                                          <div class="browse-logo">
                                                           <img *ngIf="checkExtension(docs.ext,'image') != -1"
                                                               class="folder-picher" src="/assets/images/jpg-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'doc') != -1"
                                                               class="folder-picher" src="/assets/images/word-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'pdf') != -1"
                                                               class="folder-picher" src="/assets/images/pdf-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'excel') != -1"
                                                               class="folder-picher" src="/assets/images/excel-icone.png">
                                                           <img *ngIf="checkExtension(docs.ext,'video') != -1"
                                                               class="folder-picher" src="/assets/images/md-video.png">
                                                           <img *ngIf="checkExtension(docs.ext,'audio') != -1"
                                                               class="folder-picher" src="/assets/images/md-audio.png">
                                                           <img *ngIf="checkExtension(docs.ext,'ppt') != -1"
                                                               class="folder-picher" src="/assets/images/md-ppt.png">
                                                       </div>
                                                         </div>
                                                         <div class="edit-option-show-inner" *ngIf = "AuthStore.getActivityPermission(100,'DOWNLOAD_EVENT_CHANGE_REQUEST_FILE')">
                                                           <a  [attr.title]="'download_document' | translate"><i class="fas fa-download" (click) = "downloadDocumentFile('event-status',docs)"></i></a>
                                                        </div>
                                                      </div> 
                       
                           <!-- System Files Starts Here -->
                              <!-- KnowledgeHub Files Starts Here -->
                              <!-- style="margin: -10px -25px 0 0;" -->
                                                      <div [ngClass]="AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ? 'upload-pics upload-pics-small edit-option pointer' : 'upload-pics upload-pics-small edit-option'" *ngIf="docs.document_id">
                       
                                                        <div *ngFor="let mainDoc of docs.kh_document.versions" (click) = "AuthStore.getActivityPermission(100,'PREVIEW_EVENT_CHANGE_REQUEST_FILE') ?viewBrochureItem('document-version',docs,mainDoc): ''">
                                                           <div *ngIf="mainDoc.is_latest">
                                                              <div  class="browse-form-pic"  [ngStyle]="{'background': 'url('+createImageUrl('document-version',mainDoc?.token)+') no-repeat'}">
                                                              </div>
                                                               <div class="browse-form-name clearfix">
                                                                <div class="float-left">
                                                                 <h6>{{mainDoc.title}}.{{mainDoc.ext}}
                                                                 </h6>
                                                                 <span class="mr-2 cmn-clr"><i class="fas fa-book"></i></span>
                                                                 <span>{{mainDoc.size/1048576 | number:'0.2-2'}}MB</span>                                     
                                                                </div>
                                                                <div class="browse-logo">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'image') != -1"
                                                                     class="folder-picher" src="/assets/images/jpg-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'doc') != -1"
                                                                     class="folder-picher" src="/assets/images/word-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'pdf') != -1"
                                                                     class="folder-picher" src="/assets/images/pdf-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'excel') != -1"
                                                                     class="folder-picher" src="/assets/images/excel-icone.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'video') != -1"
                                                                     class="folder-picher" src="/assets/images/md-video.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'audio') != -1"
                                                                     class="folder-picher" src="/assets/images/md-audio.png">
                                                                 <img *ngIf="checkExtension(mainDoc.ext,'ppt') != -1"
                                                                     class="folder-picher" src="/assets/images/md-ppt.png">
                                                             </div>
                                                               </div>
                                                               <div class="edit-option-show-inner" *ngIf = "AuthStore.getActivityPermission(100,'DOWNLOAD_EVENT_CHANGE_REQUEST_FILE')">
                                                                 <a [attr.title]="'download_document' | translate"><i class="fas fa-download" (click) = "downloadDocumentFile('document-version',docs,mainDoc)"></i></a>
                                                              </div>
                                                           </div>
                                                        </div>
                                                      </div>
                          <!-- KnowledgeHub Files Ends Here -->
                                                    </div>
                                                </div>
                                                <!------------------------------->
                                                
                                            </div>

                                        </div>

                                    </div>
                                </div>
                            </div><!-- common-tab-md end -->









                        </div>

                        <div class="row">
                            <div class="col-xl-12">
                                <hr class="mb-2">
                                <div class="d-flex flex-row user-list-sm align-items-center">
                       
                                    <app-user-popup-box
                                        [source]="getPopupDetails(EventChangeRequestStore.individualChangeRequestItem?.created_by,true)"
                                        [showName]="true" [activateButtons]="false"></app-user-popup-box>
                                </div>
                            </div>
                        </div>

                    </div>



                </div>
            </div>
        </div>
        <ng-container *ngIf="!EventChangeRequestStore.individualLoaded">
            <app-event-change-management-details-loader></app-event-change-management-details-loader>
        </ng-container>
    </div>
</main>



<div class="modal modal-style-1 fade" id="delete-popup" #confirmationPopUp data-backdrop="static" data-keyboard="false">
    <app-delete-popup [source]="popupObject"></app-delete-popup>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #commentModal>
    <app-add-event-workflow-comment *ngIf="workFlowCommentModalOpened">
    </app-add-event-workflow-comment>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="process-popup" data-keyboard="false" data-backdrop="static"
  #workflowHistory *mobxAutorun>
  <app-event-worflow-history *ngIf="workflowHistoryOpened == true"></app-event-worflow-history>
</div>
  
<div class="modal modal-style-1 popup-full-width fade" id="process-popup" data-keyboard="false" data-backdrop="static"
  #workflowModal *mobxAutorun>
  <app-event-workflow-popup *ngIf="workflowModalOpened == true"></app-event-workflow-popup>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #changeRequestModal>
    <app-create-event-change-request [source]="changeRequestObject" *ngIf="changeRequestObject.type">
    </app-create-event-change-request>
</div>
<div class="modal modal-style-1 popup-full-width fade popup-new-type" id="add-three-popup" data-keyboard="false"
data-backdrop="static" #filePreviewModal *mobxAutorun>
<button type="button" class="close"  (click)="closePreviewModal($event)"><i
    class="lni-close"></i><span>esc</span></button>
<app-ca-image-preview *ngIf="previewObject" [source]="previewObject" (close)="closePreviewModal($event)">
</app-ca-image-preview>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #changeRequestEventDateModal>
    <app-edit-event-date-change-request [source]="changeRequestEventdateObject" *ngIf="changeRequestEventdateObject.type">
    </app-edit-event-date-change-request>
</div>
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #changeRequestEventBudgetModal>
    <app-edit-event-budget-change-request [source]="changeRequestEventBudgetObject" *ngIf="changeRequestEventBudgetObject.type">
    </app-edit-event-budget-change-request>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #changeRequestEventScopeModal>
    <app-edit-event-scope-change-request [source]="changeRequestEventScopeObject" *ngIf="changeRequestEventScopeObject.type">
    </app-edit-event-scope-change-request>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #changeRequestEventDeliverableModal>
    <app-edit-event-deliverables-change-request [source]="changeRequestEventDeliverableObject" *ngIf="changeRequestEventDeliverableObject.type">
    </app-edit-event-deliverables-change-request>
</div>