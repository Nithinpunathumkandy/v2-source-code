<ng-container *mobxAutorun>
    <app-template-loader *ngIf="!AmAuditDocumentStore.loaded"></app-template-loader>
</ng-container>

<div class="tab-pane tab-edit-class show active" id="grid-view-file" *mobxAutorun>

    <!-- <div class="row clearfix" *ngIf="AmAuditDocumentStore.loaded && AmAuditDocumentStore.auditDocuments?.length>0">
        <div class="col-xl-3 col-lg-4 col-sm-6"
            *ngFor="let doc of AmAuditDocumentStore.auditDocuments | paginate: {currentPage:AmAuditDocumentStore?.currentPage, itemsPerPage:AmAuditDocumentStore?.itemsPerPage,totalItems:AmAuditDocumentStore?.totalItems}; let num = index">
            <div class="license-box-bg-main edit-and-delete-main">
                <div class="edit-option-show" style="margin: 30px 5px 0 0;">
                    <a><i class="fas fa-download"
                            (click)="!doc.document_id?downloadDocumentFile('audit-document',doc):downloadDocumentFile('document-version',doc)"></i></a>
                    <a><i class="fas fa-pen" (click)="editAuditDocument(doc.id)"></i></a>
                    <a><i class="fas fa-trash" (click)="deleteAuditDocument(doc.id)"></i></a>

                </div>

                <div class="license-box-bg blue-shadow pointer">
                    <div class="license-box" *ngIf="!doc.document_id" (click)="viewDocument('audit-document',doc,doc)"
                        [ngStyle]="{'background': 'url('+createImageUrl('audit-document',doc?.token)+') no-repeat'}">

                        <div class="license-blur-div"></div>
                    </div>
                    <ng-container *ngIf="doc.document_id">
                        <div class="license-box"
                            (click)="viewDocument('document-version',doc,doc.kh_document.versions[0])"
                            [ngStyle]="{'background': 'url('+createImageUrl('document-version',doc?.kh_token)+') no-repeat'}">

                            <div class="license-blur-div"></div>
                        </div>
                    </ng-container>
                    <div class="license-name-sec">
                        <div class="d-flex flex-row user-list-sm user-box-smol-round align-items-center">
                            <div class="pointer new-size-text w-100">
                                <h6 class="big-name mt-0 elips-1">{{doc.title?doc.title:doc.kh_document_title}}</h6>
                            </div>

                            <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'image') != -1" class="mr-0 ml-2"
                                width="30px" height="30px" src="/assets/images/jpg-icone.png">
                            <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'doc') != -1" class="mr-0 ml-2"
                                width="30px" height="30px" src="/assets/images/word-icone.png">
                            <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'pdf') != -1" class="mr-0 ml-2"
                                width="30px" height="30px" src="/assets/images/pdf-icone.png">
                            <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'excel') != -1" class="mr-0 ml-2"
                                width="30px" height="30px" src="/assets/images/excel-icone.png">
                            <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'video') != -1" class="mr-0 ml-2"
                                width="30px" height="30px" src="/assets/images/md-video.png">
                            <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'audio') != -1" class="mr-0 ml-2"
                                width="30px" height="30px" src="/assets/images/md-audio.png">
                            <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'ppt') != -1" class="mr-0 ml-2"
                                width="30px" height="30px" src="/assets/images/md-ppt.png">
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div> -->
    <div class="thumb-pics-bg thumb-pics-col-6 accordion-inner-thump clearfix thumb-pics-fix-text"
        *ngIf="AmAuditDocumentStore.loaded && AmAuditDocumentStore.auditDocuments?.length>0">
        <div class="thumb-pics pointer"
            *ngFor="let doc of AmAuditDocumentStore.auditDocuments | paginate: {currentPage:AmAuditDocumentStore?.currentPage, itemsPerPage:AmAuditDocumentStore?.itemsPerPage,totalItems:AmAuditDocumentStore?.totalItems}; let num = index">
            <div class="upload-pics upload-pics-small edit-option">
                <div class="browse-form-pic" *ngIf="!doc.document_id"
                (click)="viewDocument('audit-document',doc,doc)"
                [ngStyle]="{'background': 'url('+createImageUrl('audit-document',doc?.token)+') no-repeat'}">
                </div>
                <div class="browse-form-pic" *ngIf="doc.document_id"
                    (click)="viewDocument('document-version',doc,doc.kh_document.versions[0])"
                    [ngStyle]="{'background': 'url('+createImageUrl('document-version',doc?.kh_token)+') no-repeat'}">
                </div>
                <div class="browse-form-name clearfix">
                    <div class="float-left">
                        <h6>{{doc.title?doc.title:doc.kh_document_title}}</h6>
                        <span *ngIf="doc.size">{{doc.size/1048576 | number:'0.2-2'}}</span>
                        <span *ngIf="doc.kh_size"> {{doc.kh_size/1048576 | number:'0.2-2'}} MB</span>
                    </div>
                    <div class="browse-logo">
                        <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'image') != -1" class="mr-0 ml-2 img-fluid"
                            width="30px" height="30px" src="/assets/images/jpg-icone.png">
                        <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'doc') != -1" class="mr-0 ml-2 img-fluid"
                            width="30px" height="30px" src="/assets/images/word-icone.png">
                        <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'pdf') != -1" class="mr-0 ml-2 img-fluid"
                            width="30px" height="30px" src="/assets/images/pdf-icone.png">
                        <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'excel') != -1" class="mr-0 ml-2 img-fluid"
                            width="30px" height="30px" src="/assets/images/excel-icone.png">
                        <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'video') != -1" class="mr-0 ml-2 img-fluid"
                            width="30px" height="30px" src="/assets/images/md-video.png">
                        <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'audio') != -1" class="mr-0 ml-2 img-fluid"
                            width="30px" height="30px" src="/assets/images/md-audio.png">
                        <img *ngIf="checkExtension(doc.ext?doc.ext:doc.kh_ext,'ppt') != -1" class="mr-0 ml-2 img-fluid"
                            width="30px" height="30px" src="/assets/images/md-ppt.png">
                    </div>
                </div>
                <div class="edit-option-show-inner">
                    
                    <a><i class="fas fa-download"
                        (click)="downloadFile(doc)"></i></a>
                    <a *ngIf="AmAuditsStore.editAccessUser() && AmAuditsStore?.individualAuditDetails?.am_audit_field_work_status?.type!='completed'"><i class="fas fa-pen" (click)="editAuditDocument(doc.id)"></i></a>
                    
                    <a *ngIf="AmAuditsStore.editAccessUser() && AmAuditsStore?.individualAuditDetails?.am_audit_field_work_status?.type!='completed'"><i class="fas fa-trash" (click)="deleteAuditDocument(doc.id)"></i></a>
                </div>
            </div>
        </div>
        <div *ngIf="AmAuditDocumentStore.totalItems>AmAuditDocumentStore.itemsPerPage"
            class="col-sm-12">
            <ul class="pagination justify-content-center mt-3">
                <div class="list">
                    <pagination-controls [previousLabel]="'previous' | translate"
                        [nextLabel]="'next' | translate" (pageChange)="pageChange($event)"
                        class="my-pagination"></pagination-controls>
                </div>
            </ul>
        </div>

    </div>
    <ng-container *ngIf="AmAuditDocumentStore.loaded && AmAuditDocumentStore.auditDocuments?.length==0">

        <app-no-data [border]="false">
        </app-no-data>

    </ng-container>

</div>


<div class="modal modal-style-1 popup-full-width fade" style="overflow: hidden auto; z-index: 999999;"
    data-keyboard="false" data-backdrop="static" #formModal *mobxAutorun>
    <app-am-audit-document-modal *ngIf="documentObject.type" [source]="documentObject">
    </app-am-audit-document-modal>
</div>

<div class="modal modal-style-1 fade" id="delete-popup" #deletePopup data-backdrop="static" data-keyboard="false">
    <app-delete-popup [source]="deleteObject"></app-delete-popup>
</div>

<div class="modal modal-style-1 popup-full-width fade popup-new-type" id="add-three-popup" data-keyboard="false"
    data-backdrop="static" #filePreviewModal *mobxAutorun>
    <button type="button" class="close" (click)="closePreviewModal($event)"><i
            class="lni-close"></i><span>esc</span></button>
    <app-am-preview-modal *ngIf="previewObject" [source]="previewObject" (close)="closePreviewModal($event)">
    </app-am-preview-modal>
</div>