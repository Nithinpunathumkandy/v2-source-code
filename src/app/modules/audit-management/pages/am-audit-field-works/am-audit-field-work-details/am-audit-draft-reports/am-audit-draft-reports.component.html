<div class="tab-pane tab-edit-class assessment-tab-user fade show pdf-menu-accodion-main-full-width"
    id="preliminery-report" *mobxAutorun>



    <!-- <div class="cmn-bdr bg-white p-3 pdf-zoom-header-main  d-flex report-top-approve-sec"
        *ngIf="AmDraftReportStore.loaded && AmDraftReportStore.reportDetails?.id">
        <div class="bg-white w-100">



            <div class="resolved-accepted-box p-0">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="d-flex flex-row user-list-sm">
                            <img src="/assets/images/user-gate.jpg" class="rounded-circle" width="30px" height="30px">
                            <div>
                                <h6>Mathew Alexander</h6>
                                <span>02-03-2019 1:00 PM</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="accept-reject-btns clearfix d-flex justify-content-end w-100">
                            <button type="button" class="btn btn-green">Approve</button>
                            <button type="button" class="btn btn-yellow">Revert</button>
                            <button type="button" class="btn btn-red">Reject</button>
                        </div>
                    </div>
                    <div class="col-sm-12">
                        <hr class="mt-1">
                    </div>
                </div>
                <div class="resolved-accepted-para">
                    <p>Please change the title of commencement notification</p>
                </div>



            </div>

        </div>
    </div> -->

    <!-- <div class="cmn-bdr bg-white p-3 pdf-zoom-header-main pdf-zoom-header d-flex"
        *ngIf="AmDraftReportStore.loaded && AmDraftReportStore.reportDetails?.id">
        <div class="w-100">
            <form class="form-control issue-select-process-search bg-white search-popup-new">
                <input type="text" placeholder="Search.." name="search" class="search-process" />
                <button type="submit" style="width: 40px;"><i class="fa fa-search"></i></button>
            </form>
        </div>
    </div> -->

    <div class="pdf-v2-report-html pdf-v2-report-list-view-html clearfix pdf-new-style-pagination"
        *ngIf="AmDraftReportStore.loaded && AmDraftReportStore.reportDetails?.id">


        <!-- <div class="pdf-right-contents target"> -->
        <div class="pdf-right-contents main-container">
            <div class="maindiv cover-page-fit">
                <div class="holder cover-page-holder" id="1" style="height: 0px;">
                    <div class="pdf-page-inner-new-content">
                        <div class="pdf-page-section widg-padding-cmn-small" style="background: #e7fff4;">
                            <!-- <div class="cover-top-left-logo">
                                <img src="/assets/images/qcb-report-logo.png" class="img-fluid" width="150" />
                            </div> -->

                            <div class="row align-items-center mt-4 mb-4">
                                <div class="col-lg-8 col-sm-12">
                                    <h6 class="bold">{{AmDraftReportStore.reportDetails?.am_individual_audit_plan_department?.am_individual_audit_plan_department?.departments[0]?.title}}</h6>
                                    
                                    <!-- <p class="bold">#0198</p> -->
                                    <h3 class="bold"> Internal Audit Report - Draft <span
                                            [ngClass]="'draft-tag draft-tag-'+AmDraftReportStore.reportDetails?.workflow_status?.label+' label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one'">{{AmDraftReportStore.reportDetails?.workflow_status?.language[0]?.pivot?.title && AmDraftReportStore.reportDetails?.workflow_status?.type!='pending'?AmDraftReportStore.reportDetails?.workflow_status?.language[0]?.pivot?.title:getButtonText(getStatus())}}</span>
                                    </h3>


                                    <!-- <div class="top-border-40 pt-2 mt-3">
                                        <p><span class="bold">V</span> 01</p>
                                    </div> -->
                                </div>
                                <div class="col-lg-4 col-sm-12">
                                    <div class="report-cover-right-pic">
                                        <img src="/assets/images/report-cover-one.png" class="img-fluid" />
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12">
                                    <p class="black-text mb-0">Prepared By</p>
                                    <hr class="mt-2 mb-2" />
                                    <div class="label-and-user-pic mb-0">
                                        <!-- <div
                                            class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg"> -->
                                        <app-user-popup-box
                                            [source]=" getCreatedByPopupDetails(AmDraftReportStore.reportDetails?.created_by)">
                                        </app-user-popup-box>
                                        <!-- </div> -->
                                    </div>
                                </div>
                            </div>
                        </div>





                    </div>
                </div>

                <div class="holder" id="2" style="height: 0px;">
                    <div class="pdf-inner-no-border-accodion">
                        <div class="panel-group" id="accordion01" role="tablist" aria-multiselectable="true">

                            <div class="pdf-page-section mb-0"
                                *ngFor="let report of AmDraftReportStore.reportDetails?.draft_report_contents;let rep=index">
                                <div class="introduction-page intro-right">
                                    <div class="panel panel-default">
                                        <div class="panel-heading active edit-and-delete-main" role="tab"
                                            id="heading03">
                                            <h4 class="panel-title">
                                                <a role="button" data-toggle="collapse" data-parent="#accordion01"
                                                    [attr.href]="'#collapse03'+rep" aria-expanded="true"
                                                    [attr.aria-controls]="'collapse03'+rep">
                                                    {{report.section}} {{report.title}}
                                                </a>
                                            </h4>
                                            <div class="edit-option-show" style="margin: 30px 0 0 0; "
                                                *ngIf="report.type!='audit-team-members' && AmDraftReportStore.reportDetails?.submitted_by==null">
                                                <!-- edit-and-delete starts -->
                                                <a (click)="editDraftReport(report)" class="d-inline-block"><i
                                                        class="fas fa-pen"></i></a>
                                                <a (click)="deleteDraftReport(report.id)" class="d-inline-block"><i
                                                        class="fas fa-trash"></i></a>
                                            </div>
                                        </div>
                                        <div [attr.id]="'collapse03'+rep" class="panel-collapse collapse in show"
                                            role="tabpanel" aria-labelledby="heading03">
                                            <div class="panel-body">
                                                <p *ngIf="report.type!='audit-team-members'" class="image-width-texteditor table table-bordered border-none text-editor-content bullet-point-list ordinary-table mb-3"
                                                    [innerHTML]="report.description?report.description:AppStore.noContentText">
                                                </p>
                                                <div class="row pt-2" *ngIf="report.type=='audit-team-members'">

                                                    <div class="col-xl-3 col-lg-4 col-sm-12">
                                                        <div class="label-and-user-pic">
                                                            <h6>{{'am_audit_manager'|translate}}</h6>
                                                            <app-user-popup-box
                                                                [source]=" getPopupDetails(AmDraftReportStore.reportDetails?.am_audit_details?.am_individual_audit_plan_auditors?.audit_manager)">
                                                            </app-user-popup-box>

                                                        </div>
                                                    </div>
                                                    <div class="col-xl-9 col-lg-8 col-sm-12">
                                                        <h6>Auditors</h6>
                                                        <div class="row">
                                                            <div class="col-xl-3 col-lg-4 col-sm-6"
                                                                *ngFor="let auditor of AmDraftReportStore.reportDetails?.am_audit_details?.am_individual_audit_plan_auditors?.auditors;let num=index">
                                                                <div class="label-and-user-pic">
                                                                    <app-user-popup-box
                                                                        [source]=" getAuditorPopupDetails(auditor)">
                                                                    </app-user-popup-box>

                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="introduction-page intro-right ml-3"
                                                    *ngIf="report.type!='audit-team-members'">
                                                    <div
                                                        class="pdf-inner-no-border-accodion headding-style-no-border-accodion">
                                                        <div class="panel-group" id="inner-accordion02" role="tablist"
                                                            aria-multiselectable="true">

                                                            <div class="panel panel-default mb-3"
                                                                *ngFor="let child of report.am_audit_report_content_childrens;let ch=index">
                                                                <div class="panel-heading active edit-and-delete-main"
                                                                    role="tab" id="dheading02">
                                                                    <h4 class="panel-title sub-text-head-report">
                                                                        <a role="button" data-toggle="collapse"
                                                                            data-parent="#inner-accordion02"
                                                                            [attr.href]="'#inner-collapse02'+rep+'-'+ch"
                                                                            aria-expanded="true"
                                                                            [attr.aria-controls]="'inner-collapse02'+rep+'-'+ch"
                                                                            class="text-16">
                                                                            {{child.section}} {{child.title}}
                                                                            <span *ngIf="child.am_finding_risk_rating_status_title"
                                                                       [ngClass]="'draft-tag draft-tag-'+child?.am_finding_risk_rating_status_label+' label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one'">{{child.am_finding_risk_rating_status_title}}</span>
                                                                        </a>
                                                                    </h4>
                                                                    
                                                                    <div class="edit-option-show"
                                                                        style="margin: 30px 0 0 0; "
                                                                        *ngIf="AmDraftReportStore.reportDetails?.submitted_by==null">
                                                                        <!-- edit-and-delete starts -->
                                                                        <a (click)="editDraftReport(child)"
                                                                            class="d-inline-block"><i
                                                                                class="fas fa-pen"></i></a>
                                                                        <a (click)="deleteDraftReport(child.id)"
                                                                            class="d-inline-block"><i
                                                                                class="fas fa-trash"></i></a>
                                                                    </div>
                                                                </div>
                                                                <div [attr.id]="'inner-collapse02'+rep+'-'+ch"
                                                                    class="panel-collapse collapse in show"
                                                                    role="tabpanel" aria-labelledby="heading02">
                                                                    <div class="panel-body">


                                                                        <p class="image-width-texteditor table table-bordered border-none text-editor-content bullet-point-list ordinary-table mb-3"
                                                                            [innerHTML]="child.description?child.description:AppStore.noContentText">
                                                                        </p>




                                                                        <div
                                                                            class="pdf-inner-no-border-accodion headding-style-no-border-accodion ml-3 mt-3">
                                                                            <div class="panel-group"
                                                                                id="inner-accordion03" role="tablist"
                                                                                aria-multiselectable="true">

                                                                                <div class="panel panel-default mb-3"
                                                                                    *ngFor="let innerChild of child.am_audit_report_content_childrens;let cd=index">
                                                                                    <div class="panel-heading active edit-and-delete-main"
                                                                                        role="tab" id="dheading02">
                                                                                        <h4
                                                                                            class="panel-title sub-text-head-report">
                                                                                            <a role="button"
                                                                                                data-toggle="collapse"
                                                                                                data-parent="#inner-accordion03"
                                                                                                [attr.href]="'#inner-collapse03'+rep+'-'+ch+'-'+cd"
                                                                                                aria-expanded="true"
                                                                                                [attr.aria-controls]="'inner-collapse03'+rep+'-'+ch+'-'+cd"
                                                                                                class="text-14">
                                                                                                {{innerChild.section}}
                                                                                                {{innerChild.title}}
                                                                                            </a>
                                                                                        </h4>
                                                                                        <div class="edit-option-show"
                                                                                            style="margin: 30px 0 0 0; "
                                                                                            *ngIf="AmDraftReportStore.reportDetails?.submitted_by==null">
                                                                                            <!-- edit-and-delete starts -->
                                                                                            <a (click)="editDraftReport(innerChild)"
                                                                                                class="d-inline-block"><i
                                                                                                    class="fas fa-pen"></i></a>
                                                                                            <a (click)="deleteDraftReport(innerChild.id)"
                                                                                                class="d-inline-block"><i
                                                                                                    class="fas fa-trash"></i></a>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div [attr.id]="'inner-collapse03'+rep+'-'+ch+'-'+cd"
                                                                                        class="panel-collapse collapse in show"
                                                                                        role="tabpanel"
                                                                                        aria-labelledby="heading02">
                                                                                        <div class="panel-body">


                                                                                            <p class="image-width-texteditor table table-bordered border-none text-editor-content bullet-point-list ordinary-table mb-3"
                                                                                                [innerHTML]="innerChild.description?innerChild.description:AppStore.noContentText">
                                                                                            </p>


                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                            </div>
                                                                        </div>








                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>



                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>
</div>


<ng-container *mobxAutorun>
    <app-no-data *ngIf="AmDraftReportStore.loaded && !AmDraftReportStore.reportDetails?.id"></app-no-data>
</ng-container>

<div class="modal modal-style-1 popup-full-width fade" style="overflow: hidden auto; z-index: 999999;"
    data-keyboard="false" data-backdrop="static" #formModal *mobxAutorun>
    <app-am-report-update-modal *ngIf="reportObject.content_id" [source]="reportObject">
    </app-am-report-update-modal>
</div>

<div class="modal modal-style-1 fade" id="delete-popup" data-backdrop="static" data-keyboard="false" #deletePopup>
    <app-delete-popup [source]="deleteObject"></app-delete-popup>
</div>


<div class="modal modal-style-1 popup-full-width fade" id="process-popup" data-keyboard="false" data-backdrop="static"
    #workflowModal *mobxAutorun>
    <app-am-draft-report-workflow *ngIf="workflowModalOpened == true"></app-am-draft-report-workflow>
</div>

<div class="modal modal-style-1 popup-full-width fade" id="process-popup" data-keyboard="false" data-backdrop="static"
    #workflowHistory *mobxAutorun>
    <app-am-draft-report-workflow-history *ngIf="workflowHistoryOpened == true">
    </app-am-draft-report-workflow-history>
</div>


<ng-container>
    <div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #commentModal>
        <app-am-draft-report-workflow-comment *ngIf="AmDraftReportWorkflowStore.commentForm">
        </app-am-draft-report-workflow-comment>
    </div>
</ng-container>