<div class="tab-pane active" id="info" *mobxAutorun>
   <ng-container>
      <app-am-audit-plan-info-loader *ngIf="!AmAuditFindingStore.individual_audit_finding_loaded">
      </app-am-audit-plan-info-loader>
  </ng-container>

   <div class="widget" *ngIf="AmAuditFindingStore.individual_audit_finding_loaded">
      <div class="row">
         <div class="col-lg-12 col-sm-12 tab-mbl-btm-space">
            <div class="bg-white widg-padding-cmn">
               <div class="min-height-64">
               <div class="issue-top-sec">
                  <div class="clearfix">
                     <h5 class="d-inline-block cmn-head-style label-tag-style"><span
                           class="issue-smoal-head-text">#{{AmAuditFindingStore.individualFindingDetails?.reference_code?AmAuditFindingStore.individualFindingDetails?.reference_code:AppStore.noContentText}}</span>
                        {{AmAuditFindingStore.individualFindingDetails?.title}} <span
                           [ngClass]="'draft-tag draft-tag-'+removeDot(AmAuditFindingStore.individualFindingDetails?.am_audit_finding_status?.label)+' label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one'">{{AmAuditFindingStore.individualFindingDetails?.am_audit_finding_status?.language[0]?.pivot?.title}}</span>
                     </h5>
                  </div>

                  <p style="white-space:pre-line">{{AmAuditFindingStore.individualFindingDetails?.description}}</p>
               </div>




               <h6>{{'risks'|translate}}</h6>
               <ul class="arrowlist mt-0 p-0"
                  *ngIf="AmAuditFindingStore.individualFindingDetails?.am_audit_finding_risks?.length>0">
                  <li *ngFor="let risk of AmAuditFindingStore.individualFindingDetails?.am_audit_finding_risks">
                     {{risk.title}}
                  </li>
               </ul>
               <p *ngIf="AmAuditFindingStore.individualFindingDetails?.am_audit_finding_risks?.length==0">
                  {{AppStore.noContentText}}</p>
                  <div class="row">

                   
                    
                     <div class="col-lg-4 col-sm-12">

                        <h6>{{'test_plan'|translate}}</h6>
                        <p>{{AmAuditFindingStore.individualFindingDetails?.am_audit_test_plan?.title?AmAuditFindingStore.individualFindingDetails?.am_audit_test_plan?.title:AppStore.noContentText}}
                        </p>
                     </div>


               <div class="col-lg-4 col-sm-12">

                  <h6>{{'risk_rating'|translate}}</h6>
                  <p  [attr.class]="'font-normal dot-div-new dot-'+AmAuditFindingStore.individualFindingDetails?.am_audit_finding_risk_rating?.label">{{AmAuditFindingStore.individualFindingDetails?.am_audit_finding_risk_rating?.language[0]?.pivot?.title?AmAuditFindingStore.individualFindingDetails?.am_audit_finding_risk_rating?.language[0]?.pivot?.title:AppStore.noContentText}}
                  </p>
               </div>
               <div class="col-lg-4 col-sm-12" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_subsidiary">

                  <h6>{{'organizations'|translate}}</h6>
                  <p>{{AmAuditFindingStore.individualFindingDetails?.organizations?.length>0?getArrayFormatedString('title',AmAuditFindingStore.individualFindingDetails?.organizations):AppStore.noContentText}}
                  </p>
               </div>
               <div class="col-lg-4 col-sm-12" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division">

                  <h6>{{'divisions'|translate}}</h6>
                  <p>{{AmAuditFindingStore.individualFindingDetails?.divisions?.length>0?getArrayFormatedString('title',AmAuditFindingStore.individualFindingDetails?.divisions):AppStore.noContentText}}
                  </p>
               </div>
               <div class="col-lg-4 col-sm-12" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_department">

                  <h6>{{'department'|translate}}</h6>
                  <p>{{AmAuditFindingStore.individualFindingDetails?.am_audit?.am_individual_audit_plan?.departments?.length>0?getArrayFormatedString('title',AmAuditFindingStore.individualFindingDetails?.am_audit?.am_individual_audit_plan?.departments):AppStore.noContentText}}
                  </p>
               </div>
               <div class="col-lg-4 col-sm-12" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_section">

                  <h6>{{'sections'|translate}}</h6>
                  <p>{{AmAuditFindingStore.individualFindingDetails?.sections?.length>0?getArrayFormatedString('title',AmAuditFindingStore.individualFindingDetails?.sections):AppStore.noContentText}}
                  </p>
               </div>

               <div class="col-lg-4 col-sm-12" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_sub_section">

                  <h6>{{'sub_sections'|translate}}</h6>
                  <p>{{AmAuditFindingStore.individualFindingDetails?.sub_sections?.length>0?getArrayFormatedString('title',AmAuditFindingStore.individualFindingDetails?.sub_sections):AppStore.noContentText}}
                  </p>
               </div>
               </div>

               <h6>Recommendations</h6>
               <p style="white-space:pre-line">{{AmAuditFindingStore.individualFindingDetails?.recommendation?AmAuditFindingStore.individualFindingDetails?.recommendation:AppStore.noContentText}}
               </p>
               <!-- <ul class="arrowlist mt-1 mb-0 p-0">
                        <li>Lorem ipsum dolor sit amet, consectetur</li>
                        <li>Lorem ipsum dolor sit amet, consectetur</li>
                    </ul> -->

               <h6>Department Response</h6>
               <p style="white-space:pre-line">{{AmAuditFindingStore.individualFindingDetails?.department_response?AmAuditFindingStore.individualFindingDetails?.department_response:AppStore.noContentText}}
               </p>

               <h6>{{'remarks'|translate}}</h6>
               <p style="white-space:pre-line">{{AmAuditFindingStore.individualFindingDetails?.remarks?AmAuditFindingStore.individualFindingDetails?.remarks:AppStore.noContentText}}
               </p>


               <h6>Files</h6>
               <div class="thumb-pics-bg thumb-pics-col-5 accordion-inner-thump clearfix thumb-pics-fix-text"
                  *ngIf="AmAuditFindingStore.individualFindingDetails?.documents?.length>0">
                  <div class="thumb-pics"
                     *ngFor="let docs of AmAuditFindingStore.individualFindingDetails?.documents;let j = index">

                     <!-- System Files Starts Here -->
                     <div class="upload-pics upload-pics-small edit-option" *ngIf="!docs?.document_id"
                        (click)="viewDocument('audit-finding-document',docs,docs)">
                        <div class="browse-form-pic"
                           [ngStyle]="{'background': 'url('+createImageUrl('audit-finding-document',docs?.token)+') no-repeat'}">
                        </div>
                        <div class="browse-form-name clearfix">
                           <div class="float-left">
                              <h6>
                                 {{docs.title?docs.title:docs.name?docs.name:docs.version_title?docs.version_title:"NA"}}
                              </h6>
                              <span>{{docs.size/1048576 |
                                 number:'0.2-2'}}MB</span><span class="text-blue bold pl-2">System</span>
                           </div>
                           <div class="browse-logo">
                              <img *ngIf="checkExtension(docs.ext,'image') != -1" class="folder-picher"
                                 src="/assets/images/jpg-icone.png">
                              <img *ngIf="checkExtension(docs.ext,'doc') != -1" class="folder-picher"
                                 src="/assets/images/word-icone.png">
                              <img *ngIf="checkExtension(docs.ext,'pdf') != -1" class="folder-picher"
                                 src="/assets/images/pdf-icone.png">
                              <img *ngIf="checkExtension(docs.ext,'excel') != -1" class="folder-picher"
                                 src="/assets/images/excel-icone.png">
                              <img *ngIf="checkExtension(docs.ext,'video') != -1" class="folder-picher"
                                 src="/assets/images/md-video.png">
                              <img *ngIf="checkExtension(docs.ext,'audio') != -1" class="folder-picher"
                                 src="/assets/images/md-audio.png">
                              <img *ngIf="checkExtension(docs.ext,'ppt') != -1" class="folder-picher"
                                 src="/assets/images/md-ppt.png">
                           </div>
                        </div>
                        <div class="edit-option-show-inner" style="margin: 0 -8px 0 0;">
                           <a><i class="fas fa-download"
                                 (click)="downloadDocumentFile('audit-finding-document',docs)"></i></a>
                        </div>
                     </div>

                     <!-- System Files Starts Here -->
                     <!-- KnowledgeHub Files Starts Here -->
                     <div class="upload-pics upload-pics-small edit-option" *ngIf="docs.document_id">

                        <div *ngFor="let mainDoc of docs?.kh_document?.versions"
                           (click)="viewDocument('document-version',docs,mainDoc)">
                           <div *ngIf="mainDoc.is_latest">
                              <div class="browse-form-pic"
                                 [ngStyle]="{'background': 'url('+createImageUrl('document-version',mainDoc?.token)+') no-repeat'}">
                              </div>
                              <div class="browse-form-name clearfix">
                                 <div class="float-left">
                                    <h6>{{mainDoc.title}}
                                    </h6>
                                    <span>{{mainDoc.size/1048576 |
                                       number:'0.2-2'}}MB</span><span class="text-blue bold pl-2">Knowledge
                                       Hub</span>
                                 </div>
                                 <div class="browse-logo">
                                    <img *ngIf="checkExtension(mainDoc.ext,'image') != -1" class="folder-picher"
                                       src="/assets/images/jpg-icone.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'doc') != -1" class="folder-picher"
                                       src="/assets/images/word-icone.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'pdf') != -1" class="folder-picher"
                                       src="/assets/images/pdf-icone.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'excel') != -1" class="folder-picher"
                                       src="/assets/images/excel-icone.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'video') != -1" class="folder-picher"
                                       src="/assets/images/md-video.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'audio') != -1" class="folder-picher"
                                       src="/assets/images/md-audio.png">
                                    <img *ngIf="checkExtension(mainDoc.ext,'ppt') != -1" class="folder-picher"
                                       src="/assets/images/md-ppt.png">
                                 </div>
                              </div>
                              <div class="edit-option-show-inner" style="margin: 0 -8px 0 0;">
                                 <a><i class="fas fa-download"
                                       (click)="downloadDocumentFile('document-version',docs,mainDoc)"></i></a>
                              </div>
                           </div>
                        </div>


                     </div>
                     <!-- KnowledgeHub Files Ends Here -->

                  </div>

               </div>
               <p *ngIf="AmAuditFindingStore.individualFindingDetails?.documents?.length==0">{{AppStore.noContentText}}
               </p>


               </div>
               <div class="row">
                  <div class="col-xl-12">
                     <hr class="mb-2">
                     <app-user-popup-box
                        [source]=" getCreatedByDetails(AmAuditFindingStore.individualFindingDetails?.created_by)">
                     </app-user-popup-box>
                  </div>
               </div>






            </div>
         </div>
         <!-- <div class="col-lg-4 col-sm-12">
            <div class="risk-rating-box bg-white p-3 mb-3">
               <h6 class="text-left">Quick Correction</h6>
               <hr class="mt-0 mb-3">
               <button type="button" class="btn mr-0">Add</button>

            </div>

            <div class="risk-rating-box bg-white p-3 mb-3">
               <h6 class="text-left">Impact Analyisis</h6>
               <hr class="mt-0 mb-3">

               <div class="vertical-progress-main clearfix audit-findings-impact-chart">

                  <div class="vertical-progress">
                     <div class="progress">
                        <div class="progress-bar bg-green" role="progressbar" style="height: 90%;" aria-valuenow="80"
                           aria-valuemin="0" aria-valuemax="100"><span class="impact-Analyisis-text">Money</span>
                        </div>
                     </div>
                  </div>

                  <div class="vertical-progress vertical-progress-bottom">
                     <div class="progress">
                        <div class="progress-bar bg-red" role="progressbar" style="height: 70%;" aria-valuenow="80"
                           aria-valuemin="0" aria-valuemax="100"><span class="impact-Analyisis-text">Count</span>
                        </div>
                     </div>
                  </div>

                  <div class="vertical-progress">
                     <div class="progress">
                        <div class="progress-bar bg-green" role="progressbar" style="height: 80%;" aria-valuenow="80"
                           aria-valuemin="0" aria-valuemax="100"><span class="impact-Analyisis-text">Time</span>
                        </div>
                     </div>
                  </div>


               </div>
               <h6 class="text-center mt-2">Impact</h6>

            </div>

            <div class="risk-rating-box bg-white p-3 mb-3">
               <h6 class="text-left">Finding Resolve Cycle Time</h6>
               <hr class="mt-0 mb-3">
               <div class="text-center">
                  <img src="images/graph-meter.png" class="img-fluid">
               </div>

            </div>

            <div class="risk-rating-box bg-white p-3 mb-3">
               <h6 class="text-left">Total Money</h6>
               <hr class="mt-0 mb-3">
               <div class="risk-score-box-new text-center">
                  <h3 class="text-light-blue">$7,000</h3>
               </div>

            </div>




         </div> -->
      </div>

   </div>

</div>


<div class="modal modal-style-1 popup-full-width fade" id="new-audit-programme-popup" data-keyboard="false"
   data-backdrop="static" #formModal style=" overflow: hidden auto;">


   <app-am-audit-finding-modal *ngIf="findingObject.type" [source]="findingObject">

   </app-am-audit-finding-modal>

</div>

<div class="modal modal-style-1 popup-full-width fade popup-new-type" id="add-three-popup" data-keyboard="false"
   data-backdrop="static" #filePreviewModal *mobxAutorun>
   <button type="button" class="close" data-dismiss="modal" (click)="closePreviewModal($event)"><i
         class="lni-close"></i><span>esc</span></button>
   <app-am-preview-modal *ngIf="previewObject" [source]="previewObject" (close)="closePreviewModal($event)">
   </app-am-preview-modal>
</div>

<!------------------- Delete Confirmation Modal Start --------------------------->

<div class="modal modal-style-1 fade" id="delete-popup" data-backdrop="static" data-keyboard="false" #deletePopup>
   <app-delete-popup [source]="deleteObject"></app-delete-popup>
</div>

<!------------------- Delete Confirmation Modal End --------------------------->