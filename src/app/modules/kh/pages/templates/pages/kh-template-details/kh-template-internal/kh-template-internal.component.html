<ng-container *mobxAutorun>
    <main class="audit-program-details-page mt-3" *ngIf="ContentStore._contentLoaded && ContentStore.ContentList.length > 0">
       <div class="container-fluid" *mobxAutorun>
          <div class="row">
             <div class="col-sm-12">
                <div class="widget">
                   <div class="tab-content">                     
                      <div class="tab-pane active" id="top-tab-right-one">
                         <!-- Left Side Main Menu Starts Here -->
                         <div class="pdf-menu-accodion-main clearfix">
                            <div class="pdf-menu-accodion cmn-bdr-right mCustomScrollbar">
                               <div class="pdf-menu-accodion-inner">
                                  <div class="panel-group panel-drop-sections panel-drop-white" id="jd" role="tablist" aria-multiselectable="true">
                                     <div class="panel panel-default" *ngFor="let row of ContentStore.ContentList;let num = index">
                                        <div [ngClass]="row.id==DocumentsStore.dataId?'panel-heading active':'panel-heading'" role="tab" id="headingOne">
                                           <div class="panel-title">
                                              <a role="button" data-toggle="collapse" (click)="setClass(row.id)" [attr.href]="'#menu'+num+'_'+row.id" aria-expanded="false" aria-controls="collapseOne" class="collapsed">
                                                 <h5 class="width96pc mt-0">{{row.clause_number}}. {{row.title}} <span *ngIf="row['children_content'].length > 0" class="drop-down-icone"><i class="fas fa-chevron-down"></i></span></h5>
                                              </a>
                                           </div>
                                        </div>
                                        <div [attr.id]="'menu'+num+'_'+row.id" *ngIf="row['children_content'].length > 0" class="drop-detail-sec panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne" [attr.data-parent]="'#menu'+num+'_'+row.id">
                                           <div class="panel-body">
                                              <!-- <h5 *ngIf="!(children_content.children.length>0)" (click)="setClass(children_content.id)" class="pdf-inner-title-accodion">{{children_content.clause_number}}. {{children_content.title}}</h5> -->
                                              <div class="panel-group panel-drop-sections panel-drop-white" id="jd-8"
                                                 role="tablist" aria-multiselectable="true">
                                                 <div class="panel panel-default" *ngFor="let children_content of row['children_content']">
                                                    <div [ngClass]="children_content.id==DocumentsStore.dataId?'panel-heading active':'panel-heading'" role="tab" id="headingOne-08-1">
                                                       <div class="panel-title">
                                                          <a role="button" data-toggle="collapse" (click)="setClass(children_content.id)" [attr.href]="'#menu'+num+'_'+children_content.id" aria-expanded="false" aria-controls="collapseOne" class="collapsed">
                                                             <h5 class="width96pc mt-0">{{children_content.clause_number}}.{{children_content.title}} 
                                                                <span *ngIf="children_content['children'].length > 0" class="drop-down-icone">
                                                                <i class="fas fa-chevron-down"></i></span>
                                                             </h5>
                                                          </a>
                                                       </div>
                                                    </div>
                                                    <div [attr.id]="'menu'+num+'_'+children_content.id" class="drop-detail-sec panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne-08-1" [attr.data-parent]="'#menu'+num+'_'+children_content.id">
                                                       <div class="panel-body">                                                      
                                                       </div>
                                                    </div>
                                                 </div>
                                              </div>
                                           </div>
                                        </div>
                                     </div>                                  
                                  </div>
                               </div>
                            </div>
                         </div>
                         <div class="cmn-bdr bg-white p-3 pdf-zoom-header-main pdf-zoom-header d-flex">
                            <div class="w-100">
                               <form class="form-control issue-select-process-search bg-white search-popup-new">
                                  <input type="text" placeholder="Search.." name="search" class="search-process">
                                  <button type="submit" style="width: 40px;"><i class="fa fa-search"></i></button>
                               </form>
                            </div>
                         </div>
 
                         <div class="pdf-v2-report-html pdf-v2-report-list-view-html clearfix pdf-new-style-pagination">
                            <!-- Content View Main Preview Starts Here -->
                            <div class="pdf-right-contents main-container">
 
                               <div class="maindiv relative">                                  
                                  <div class="holder" *ngFor="let row of ContentStore.ContentList;let num = index" [attr.id]="row.id">
                                     <div class="pdf-page-inner-new-content">
                                        <div class="pdf-inner-no-border-accodion">
                                           <div class="panel-group" id="accordion01" role="tablist" aria-multiselectable="true">
                                              <div class="pdf-page-section">
                                                 <div class="introduction-page intro-right">
                                                    <div class="panel panel-default">
                                                       <div class="panel-heading" role="tab">
                                                          <h4 class="panel-title">
                                                             <a role="button" data-toggle="collapse" aria-expanded="true" [attr.href]="'#collapseOne'+num+'_'+row.id">{{row.clause_number}}.{{row.title}}
                                                                <span *ngIf="row.comments?.length > 0" class="msg-nbr-tab-btn bg-light-blue">{{row.comments?.length}}</span>
                                                                <!-- <span
                                                                *ngIf="DocumentsStore.enableButtons && DocumentsStore.showNewDesign && DocumentsStore.documentDetails?.submitted_by"
                                                                [attr.title]="'comment' | translate"
                                                                (click)="openComment(row.id)"
                                                                class="ml-2 pointer text-light-blue"><i
                                                                   class="fas fa-comment-dots"></i></span> -->
                                                             </a>
                                                          </h4>
                                                       </div>
                                                       <div [attr.id]="'collapseOne'+num+'_'+row.id"
                                                          class="panel-collapse collapse show" role="tabpanel">
                                                          <div class="panel-body">
                                                             <div class="edit-option-btn edit-option-btn-main">
                                                                <div *ngIf="TemplateStore.enableButtons" class="arrowlist-edit-and-add arrowlist-edit-and-add-main" style="margin: -21px 20px 0 0;">
                                                                   <a><i class="fas fa-pen" (click)="editContent('Template',row.id)"></i></a>
                                                                   <a><i class="fas fa-trash" (click)="delete('Template',row.id,'Content')"></i></a>
                                                                </div>
                                                                <div [innerHTML]="row.description | safeHtml"></div>
                                                                <div class="hover-show-btn" *ngIf="TemplateStore.enableButtons">
                                                                   <button type="button" (click)="openForm('Child',row)" class="btn btn-small mt-1"><i class="fas fa-plus mr-2"></i>{{'add_sub_section' |translate}}</button>
                                                                   <button type="button" (click)="openNotesForm('Template',row.id)" class="btn btn-small mt-1"><i class="fas fa-plus mr-2"></i> {{'add_notes' | translate}}</button>
                                                                   <button *ngIf="row.is_checklist_applicable" type="button" (click)="openCheckListForm('Template',row.id,row.checklists)" class="btn btn-small mt-1"><i class="fas fa-plus mr-2"></i> {{'add_checklist' | translate}}</button>
                                                                   <!-- <button *ngIf="TemplateStore.enableButtons" type="button" (click)="openComment(row.id)" class="btn btn-small mt-1"><i class="fas fa-plus mr-2"></i> {{'add_comments' | translate}}</button> -->
                                                                </div>
 
                                                                <!-- !Notes Starts-->
                                                                <h6 *ngIf="row.notes.length > 0" class="mt-3">{{'notes' | translate}}</h6>
                                                                <div class="delete-bullet-point">
                                                                   <ul class="arrowlist ml-0 pl-0 mt-0 mb-0" *ngFor="let notes of row.notes">
                                                                      <li class="edit-delete-right-space">{{notes.title}}
                                                                         <div *ngIf="TemplateStore.enableButtons" class="edit-and-delete-small">
                                                                            <button type="button" (click)="editNotes('Template',notes,row.id)" class="btn-small-icon"><i class="fas fa-pen"></i></button>
                                                                            <button type="button" (click)="delete('Template',notes.id,'notes',row.id)" class="btn-small-icon"><i class="fas fa-trash"></i></button>
                                                                         </div>
                                                                      </li>
                                                                   </ul>
                                                                </div>
                                                                <!-- !Notes Ends Here -->
 
                                                                <!-- !CheckList Starts Here-->
                                                                <div *ngIf="row.is_checklist_applicable && displayData.type!='Request'">
                                                                   <h6 *ngIf="row.checklists.length > 0" class="mt-3">{{'checklists' | translate}}</h6>
                                                                   <div class="delete-bullet-point">
                                                                      <ul class="arrowlist ml-0 pl-0 mt-0 mb-0" *ngFor="let checklist of row.checklists">
                                                                         <li class="edit-delete-right-space">{{checklist.title}}
                                                                            <button *ngIf="TemplateStore.enableButtons" (click)="delete(displayData.type,checklist.id,'CheckList',row.id,checklist)" type="button" class="btn btn-small float-right btn-small-delete" style="border: none;"><i class="fas fa-trash"></i></button>
                                                                         </li>
                                                                      </ul>
                                                                   </div>
                                                                </div>
                                                                <!-- !CheckLists Ends Here -->
 
                                                                <!-- ! Parent Data Ends Here-->
                                                             </div>
                                                             <!-- !Child Data  Inner Accordion Starts Here -->
                                                             <div class="pdf-page-section">
                                                                <div class="introduction-page intro-right ml-3">
                                                                   <div class="pdf-inner-no-border-accodion headding-style-no-border-accodion">
                                                                      <div class="panel-group" id="inner-accordion01" role="tablist" aria-multiselectable="true">
                                                                         <div class="panel panel-default" *ngFor="let document_template of row['children_content'];let inner_num = index" [attr.id]="document_template.id">
                                                                            <div class="panel-heading active" role="tab" id="heading01">
                                                                               <h4 class="panel-title">
                                                                                  <a role="button" data-toggle="collapse" data-parent="#inner-accordion01" [attr.href]="'#innercollapseOne'+inner_num+'_'+document_template.id" aria-expanded="true" aria-controls="inner-collapse01">
                                                                                     {{document_template.clause_number}}.{{document_template.title}}
                                                                                     <span *ngIf="document_template?.comments?.length > 0" class="msg-nbr-tab-btn bg-light-blue">{{document_template.comments.length}}</span>
                                                                                  </a>
                                                                               </h4>
                                                                            </div>
                                                                            <div [attr.id]="'innercollapseOne'+inner_num+'_'+document_template.id" class="panel-collapse collapse in show" role="tabpanel" aria-labelledby="heading01">
                                                                               <div class="panel-body">
                                                                                  <div class="edit-option-btn edit-option-btn-main">
                                                                                     <div *ngIf="TemplateStore.enableButtons" class="arrowlist-edit-and-add arrowlist-edit-and-add-main" style="margin: -21px 20px 0 0;">
                                                                                        <a><i class="fas fa-pen" (click)="editContent('Template',document_template.id)"></i></a>
                                                                                        <a><i class="fas fa-trash" (click)="delete('Template',document_template.id,'Content')"></i></a>
                                                                                        <!-- <a  *ngIf="DocumentsStore.enableButtons && DocumentsStore.showNewDesign "  (click) = "openComment(document_template.id)"><i class="fas fa-comment-dots"></i></a> -->
                                                                                     </div>
                                                                                     <div [innerHTML]="document_template.description | safeHtml"></div>
                                                                                     <div class="hover-show-btn" *ngIf="TemplateStore.enableButtons">
                                                                                        <button type="button" (click)="openForm('Child',document_template)"class="btn btn-small mt-1">
                                                                                           <i class="fas fa-plus mr-2"></i>{{'add_sub_section' | translate}}
                                                                                        </button>
                                                                                        <button type="button" (click)="openNotesForm('Template',document_template.id)" class="btn btn-small mt-1">
                                                                                           <i class="fas fa-plus mr-2"></i>{{'add_notes' | translate}}
                                                                                        </button>
                                                                                        <button *ngIf="document_template.is_checklist_applicable" type="button" (click)="openCheckListForm(document_template.id,document_template.checklists)" class="btn btn-small mt-1">
                                                                                           <i class="fas fa-plus mr-2"></i>{{'add_checklist' | translate}}
                                                                                        </button>
                                                                                        <!-- <button *ngIf="TemplateStore.enableButtons" type="button" (click)="openComment(document_template.id)" class="btn btn-small mt-1">
                                                                                           <i class="fas fa-plus mr-2"></i>{{'add_comments' | translate}}
                                                                                        </button> -->
                                                                                     </div>
                                                                                     <!-- !Notes Inner Accordion Starts-->
                                                                                     <h6 *ngIf="document_template.notes.length > 0" class="mt-3">{{'notes' | translate}}</h6>
                                                                                     <div class="delete-bullet-point">
                                                                                        <ul class="arrowlist ml-0 pl-0 mt-0 mb-0" *ngFor="let notes of document_template.notes">
                                                                                           <li class="edit-delete-right-space"> {{notes.title}}
                                                                                              <div *ngIf="TemplateStore.enableButtons" class="edit-and-delete-small">
                                                                                                 <button type="button" (click)="editNotes('Template',notes,document_template.id)" class="btn-small-icon"><i class="fas fa-pen"></i></button>
                                                                                                 <button type="button" (click)="delete('Template',notes.id,'notes',document_template.id)" class="btn-small-icon"><i class="fas fa-trash"></i></button>
                                                                                              </div>
                                                                                           </li>
                                                                                        </ul>
                                                                                     </div>
                                                                                     <!-- !Notes Inner Accordion Ends Here -->
 
                                                                                     <!-- !CheckList Inner Accordion Starts Here-->
                                                                                     <div *ngIf="document_template.is_checklist_applicable && displayData.type!='Request'">
                                                                                        <h6 *ngIf="document_template.checklists.length > 0" class="mt-3">{{'checklists' | translate}}</h6>
                                                                                        <div class="delete-bullet-point">
                                                                                           <ul class="arrowlist ml-0 pl-0 mt-0 mb-0" *ngFor="let checklist of document_template.checklists">
                                                                                              <li class="edit-delete-right-space">{{checklist.title}}
                                                                                                 <button *ngIf="TemplateStore.enableButtons" (click)="delete(displayData.type,checklist.id,'CheckList',document_template.id,checklist)" type="button" class="btn btn-small float-right btn-small-delete" style="border: none;"><i class="fas fa-trash"></i></button>
                                                                                              </li>
                                                                                           </ul>
                                                                                        </div>
                                                                                     </div>
                                                                                     <!-- !CheckLists Inner Accordion Ends Here -->
 
                                                                                     <!-- !Child Inner Accordion Data Ends Here-->
                                                                                  </div>
                                                                               </div>
                                                                            </div>
                                                                            <app-template-child-data [childData]="document_template.children" *ngIf="document_template.children"> </app-template-child-data>
                                                                         </div>
                                                                      </div>
                                                                   </div>
                                                                </div>
                                                             </div>
                                                          </div>
                                                       </div>
                                                    </div>
                                                 </div>
                                              </div>
                                           </div>
                                        </div>
                                     </div>
 
                                  </div>
                                  <!-- Add Clause Button Starts Here-->
                                  <div class="text-center mt-3 mb-3" *ngIf="TemplateStore.enableButtons && ContentStore._contentLoaded && ContentStore.ContentList.length > 0">
                                     <a (click)="openForm('Parent')" class="view-more-pestel-box d-inline-block">{{'add_new_clause' | translate}}</a>
                                  </div>
                                  <!-- Add Clause Button Ends Here-->
                               </div>
                            </div>
                         </div>
                         <!-- Content View Main Preview Starts Here -->
                      </div>
                   </div>
                </div>
             </div>
          </div>
       </div>
    </main>
    <app-internal-document-details-loader *ngIf="!ContentStore._contentLoaded"></app-internal-document-details-loader>
    <app-no-data *ngIf="ContentStore._contentLoaded && ContentStore.ContentList.length == 0"></app-no-data>
 </ng-container>
 
 <!--------------------- !Clause Form Modal Starts Here----------->
 <div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" id="mainclause" data-backdrop="static" #clauseFormModal>
    <app-template-main-clause *ngIf="sourceParams" [source]="sourceParams"></app-template-main-clause>
 </div>
 <!-------------------- !Clause Form Modal Ends Here ---------------->
 
 <!------------------- Delete Confirmation Modal Start --------------------------->
 <div class="modal modal-style-1 fade" id="delete-popup" #deletePopup>
    <app-delete-popup [source]="deleteObject"></app-delete-popup>
 </div>
 <!------------------- Delete Confirmation Modal End --------------------------->
 
 <!------------------- Notes Form Start---------------->
 <div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" id="notesForm" data-backdrop="static" #notesForm>
    <app-template-notes *ngIf="NotesParam" [source]="NotesParam"></app-template-notes>
 </div>
 <!------------------- Notes Form End---------------->
 <div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #formModal>
   <app-kh-template-add *ngIf = "templateObject.type" [source]="templateObject" ></app-kh-template-add>
 </div>