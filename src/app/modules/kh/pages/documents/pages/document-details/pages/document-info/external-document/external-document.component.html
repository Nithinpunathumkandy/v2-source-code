
      <div class="row user-main-sec" *ngIf="DocumentsStore.documentDetailsLoaded">
         <div class="col-xl-3 col-lg-4 col-md-12 user-side-bar user-side-left mb-3" #userSideBar>
            <div class="organization-profile-sidebar pb-3">
               <div class="relative">
                  <a class="curve-toggle curv-2" (click)="collapseSide()"></a>
                  <!-- <div class="d-flex align-items-center mb-2">
                     <div class="left-pic-work-flow" *ngFor="let mainDoc of DocumentsStore?.documentDetails?.versions">
                        <div *ngIf="mainDoc.is_latest">
                           <img [attr.src]="createImageUrl('document-version',mainDoc.token,43,37)"
                              class="img-fluid cmn-bdr">
                        </div>
                     </div>
                     <div class="issue-top-sec issuue-new-style p-0 ml-2">
                        <div class="clearfix pt-2">
                           <h5 class="d-inline-block cmn-head-style mr-2" style="word-break: break-all;" >
                              #{{DocumentsStore.documentDetails?.reference_code}}<span
                                 class="draft-tag label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one ml-3">{{DocumentsStore.documentDetails?.document_status?.type
                                 | titlecase}}</span></h5>
                           <h5 class="cmn-head">{{DocumentsStore.documentDetails?.title}}</h5>
                        </div>
                     </div>

                  </div> -->
                  <div class="issue-top-sec">
                     <div class="clearfix">
                        <h5 class="d-inline-block cmn-head-style label-tag-style" style="word-break: break-all"><span class="issue-smoal-head-text">#{{DocumentsStore.documentDetails?.reference_code}}</span>  {{DocumentsStore.documentDetails?.title}}  <span class="draft-tag label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one">{{DocumentsStore.documentDetails?.document_status?.type
                           | titlecase}}</span></h5>
                     </div>
                     <div *ngIf="DocumentsStore.documentDetails?.description && !view_more_description"
                     style="white-space: pre-wrap;">
                     <p>{{DocumentsStore.documentDetails?.description.length > 350 ?
                        getStringData(DocumentsStore.documentDetails?.description) :
                        DocumentsStore.documentDetails?.description}}
                        <a *ngIf="(DocumentsStore.documentDetails?.description.length) > 200"
                           (click)="viewData('more','description')"
                           class="view-more-pestel-box pointer view-more-doted">...{{'view_more' | translate}}</a></p>
       
                  </div>
                  <div class="mb-3" *ngIf="DocumentsStore.documentDetails?.description && view_more_description"
                     style="white-space: pre-wrap;">
                     <p>
                        {{DocumentsStore.documentDetails?.description}}<a *ngIf="(DocumentsStore.documentDetails?.description.length) > 200"
                           (click)="viewData('less','description')"
                           class="view-more-pestel-box pointer view-more-doted">...{{'view_less' | translate}}</a>
                     </p>

                  </div>
                  
                  <p  *ngIf="!DocumentsStore.documentDetails?.description">{{AppStore.noContentText}}</p>

                  </div>

                  <div class="mb-3">
                     <a (click)="viewData('more','view_more')"
                        class="view-more-pestel-box pointer view-more-doted">{{'view_more_details' | translate}}</a>
                  </div>

                  <h6>{{'version' | translate}}</h6>
                  <div  class="labels mb-3">
                     <label *ngFor="let version of DocumentsStore.documentDetails?.versions" (click)="changeDocumentVersion(version)" class="outline-tag outline-tag-small">V{{version.version}}</label>
                  </div>

                  <h6>{{'document_type' | translate}}</h6>
                  <div class="labels mb-3" *ngIf="DocumentsStore.documentDetails?.document_type">
                     <label class="outline-tag outline-tag-small">{{DocumentsStore.documentDetails?.document_type.title}}</label>
                  </div>
                  <p *ngIf="!DocumentsStore?.documentDetails?.document_type?.title">{{AppStore.noContentText}}</p>

                  <!-- <h6>{{'ms_type' | translate}}</h6>
                  <div *ngIf="DocumentsStore.documentDetails?.ms_type_organization != null" class="labels pt-1">
                     <label class="outline-tag outline-tag-small">{{DocumentsStore.documentDetails?.ms_type_organization?.ms_type?.title}}
                        <span>V{{DocumentsStore.documentDetails?.ms_type_organization?.ms_type_version?.title}}</span>
                     </label>
                  </div>
                  <p *ngIf="DocumentsStore.documentDetails?.ms_type_organization == null">
                     {{AppStore.noContentText}}</p> -->

                  <h6>{{'related_ms_types' | translate}}</h6>
                  <div *ngIf="DocumentsStore.documentDetails?.ms_type_organizations.length > 0" class="labels pt-1">
                     <label *ngFor="let ms_type of DocumentsStore.documentDetails?.ms_type_organizations"
                        class="outline-tag">{{ms_type.ms_type.title}}
                        <span>V{{ms_type.ms_type_version.title}}</span></label>
                  </div>
                  <p *ngIf="!(DocumentsStore.documentDetails?.ms_type_organizations.length > 0)">
                     {{AppStore.noContentText}}</p>

                  <h6>{{'purpose' | translate}}</h6>
                  <div *ngIf="DocumentsStore.documentDetails?.purpose && !view_more_purpose"
                     style="white-space: pre-wrap;"><p>
                        {{DocumentsStore.documentDetails?.purpose.length > 350 ?
                           getStringData(DocumentsStore.documentDetails?.purpose) : DocumentsStore.documentDetails?.purpose}}
                           <a *ngIf="(DocumentsStore.documentDetails?.purpose.length) > 200"
                              (click)="viewData('more','purpose')" class="view-more-pestel-box pointer view-more-doted">
                              ...View More</a>
                     </p>
                  
                  </div>
                  <div *ngIf="DocumentsStore.documentDetails?.purpose && view_more_purpose"
                     style="white-space: pre-wrap;"><p>
                        {{DocumentsStore.documentDetails?.purpose}}
                        <a *ngIf="(DocumentsStore.documentDetails?.purpose.length) > 200"
                           (click)="viewData('less','purpose')" class="view-more-pestel-box pointer view-more-doted">...View
                           Less</a>
                     </p>
                  
                  </div>
                  <P *ngIf="!DocumentsStore.documentDetails?.purpose">{{AppStore.noContentText}}</P>

                  <h6>{{'category' | translate}}</h6>
                  <P *ngIf="DocumentsStore.documentDetailsLoaded">
                     {{getArrayFormatedString(DocumentsStore.documentDetails?.document_categories)}}</P>
                  <h6>{{'sub_category' | translate}}</h6>
                  <P *ngIf="DocumentsStore.documentDetailsLoaded">
                     {{getArrayFormatedString(DocumentsStore.documentDetails?.document_sub_categories)}}</P>
                  <h6>{{'further_sub_category' | translate}}</h6>
                  <P *ngIf="DocumentsStore.documentDetailsLoaded">
                     {{getArrayFormatedString(DocumentsStore.documentDetails?.document_sub_sub_categories)}}</P>
                  <h6>{{'industry' | translate}}</h6>
                  <P *ngIf="DocumentsStore.documentDetailsLoaded">
                     {{getArrayFormatedString(DocumentsStore.documentDetails?.industries)}}</P>
                  <h6>{{'region' | translate}}</h6>
                  <P *ngIf="DocumentsStore.documentDetailsLoaded">
                     {{getArrayFormatedString(DocumentsStore.documentDetails?.regions)}}</P>
                  <h6>{{'country' | translate}}</h6>
                  <P *ngIf="DocumentsStore.documentDetailsLoaded">
                     {{getArrayFormatedString(DocumentsStore.documentDetails?.countries)}}</P>
                  <h6>{{'family' | translate}}</h6>
                  <P *ngIf="DocumentsStore.documentDetailsLoaded">
                     {{getArrayFormatedString(DocumentsStore.documentDetails?.document_families)}}</P>


                  <!-- Support Files -->

                  <h6 class="mt-3" *ngIf="DocumentsStore.documentDetails?.files.length > 0">{{'support_file' |
                     translate}}</h6>
                  <div class="scroll-documents" #supportFileDetailArea>
                     <div class="thumb-pics-bg thumb-pics-col-1 thumb-pics-fix-text clearfix" style="padding-top: 0">
                        <div class="thumb-pics"
                           *ngFor="let docs of DocumentsStore.documentDetails?.files;let i = index">

                           <!-- System Files Starts Here -->
                           <div class="upload-pics edit-option" *ngIf="!docs.related_document_id"
                              (click)="viewDocument('document-file',docs,docs)">
                              <div class="browse-form-pic"
                                 [ngStyle]="{'background': 'url('+createImageUrl('document-file',docs?.token)+') no-repeat'}">
                              </div>
                              <div class="browse-form-name clearfix">
                                 <div class="float-left">
                                    <h6>
                                       {{docs.title?docs.title:docs.name?docs.name:docs.version_title?docs.version_title:"NA"}}.{{docs.ext}}
                                    </h6>
                                    <span>{{docs.size/1048576 | number:'0.2-2'}}MB</span><span
                                       class="text-blue bold pl-2">System</span>
                                 </div>
                                 <div class="browse-logo">
                                    <img *ngIf="checkExtension(docs.ext,'image') != -1" class="folder-picher"
                                       src="/assets/images/jpg-icone.png">
                                    <img *ngIf="checkExtension(docs.ext,'doc') != -1" class="folder-picher"
                                       src="/assets/images/word-icone.png">
                                    <img *ngIf="checkExtension(docs.ext,'pdf') != -1" class="folder-picher"
                                       src="/assets/images/pdf-icone.png">
                                    <img *ngIf="checkExtension(docs.ext,'excel') != -1" class="folder-picher"
                                       src="/assets/images/excel-icone.png">
                                    <img *ngIf="checkExtension(docs.ext,'video') != -1" class="folder-picher"
                                       src="/assets/images/md-video.png">
                                    <img *ngIf="checkExtension(docs.ext,'audio') != -1" class="folder-picher"
                                       src="/assets/images/md-audio.png">
                                    <img *ngIf="checkExtension(docs.ext,'ppt') != -1" class="folder-picher"
                                       src="/assets/images/md-ppt.png">
                                 </div>
                              </div>
                              <div class="edit-option-show">
                                 <a><i class="fas fa-download"
                                       (click)="downloadDocumentFile('document-file',docs)"></i></a>
                              </div>
                           </div>

                           <!-- System Files Ends Here -->
                           <!-- KnowledgeHub Files Starts Here -->
                           <div class="upload-pics  edit-option" *ngIf="docs.related_document_id">

                              <div *ngFor="let mainDoc of docs.kh_document.versions"
                                 (click)="viewDocument('document-version',docs,mainDoc)">
                                 <div *ngIf="mainDoc.is_latest">
                                    <div class="browse-form-pic"
                                       [ngStyle]="{'background': 'url('+createImageUrl('document-version',mainDoc?.token)+') no-repeat'}">
                                    </div>
                                    <div class="browse-form-name clearfix">
                                       <div class="float-left">
                                          <h6>{{mainDoc.title}}.{{mainDoc.ext}}
                                          </h6>
                                          <span>{{mainDoc.size/1048576 | number:'0.2-2'}}MB</span><span
                                             class="text-blue bold pl-2">Knowledge Hub</span>
                                       </div>
                                       <div class="browse-logo">
                                          <img *ngIf="checkExtension(mainDoc.ext,'image') != -1" class="folder-picher"
                                             src="/assets/images/jpg-icone.png">
                                          <img *ngIf="checkExtension(mainDoc.ext,'doc') != -1" class="folder-picher"
                                             src="/assets/images/word-icone.png">
                                          <img *ngIf="checkExtension(mainDoc.ext,'pdf') != -1" class="folder-picher"
                                             src="/assets/images/pdf-icone.png">
                                          <img *ngIf="checkExtension(mainDoc.ext,'excel') != -1" class="folder-picher"
                                             src="/assets/images/excel-icone.png">
                                          <img *ngIf="checkExtension(mainDoc.ext,'video') != -1" class="folder-picher"
                                             src="/assets/images/md-video.png">
                                          <img *ngIf="checkExtension(mainDoc.ext,'audio') != -1" class="folder-picher"
                                             src="/assets/images/md-audio.png">
                                          <img *ngIf="checkExtension(mainDoc.ext,'ppt') != -1" class="folder-picher"
                                             src="/assets/images/md-ppt.png">
                                       </div>
                                    </div>
                                    <div class="edit-option-show">
                                       <a><i class="fas fa-download"
                                             (click)="downloadDocumentFile('document-version',docs,mainDoc)"></i></a>
                                    </div>
                                 </div>
                              </div>


                           </div>
                           <!-- KnowledgeHub Files Ends Here -->

                        </div>
                     </div>
                  </div>
                  <!-------------- Footer Starts Here ---------- -->
                  <!-- <div class="row">
                     <div class="col-xl-12">
                        <hr>
                        <div class="d-flex flex-row user-list-sm" *ngIf="DocumentsStore.documentDetailsLoaded">
                           <app-user-popup-box [source]="getPopupDetails('footerData',DocumentsStore.documentDetails)"
                              [showName]="true"></app-user-popup-box>
                        </div>
                     </div>
                  </div> -->
                  <div class="row">
                     <div class="col-xl-12">
                         <hr class="mb-2">
                         <div class="d-flex flex-row user-list-sm">
                             <img [attr.src]="DocumentsStore.documentDetails?.created_by.image.token ? createImageUrl('user-profile-picture',DocumentsStore.documentDetails?.created_by.image.token) : getDefaultImage('user-logo')" width="40px" height="40px"
                             onerror = "this.src='/assets/images/user-demo2.png'" class="rounded-circle">
                             <div>
                                 <h6>{{DocumentsStore.documentDetails?.created_by.first_name}} {{DocumentsStore.documentDetails?.created_by.last_name}}</h6>
                                 <span>{{DocumentsStore.documentDetails?.created_by.designation}} | {{'created_on' | translate}} {{ getTimezoneFormatted(DocumentsStore.documentDetails?.created_at) | date: OrganizationGeneralSettingsStore.organizationSettings?.date_time_format }}</span>
                             </div>
                         </div>
                     </div>
                 </div>
                  <!-------------- Footer Ends Here ---------- -->
               </div>
            </div>
         </div>


         <div class="col-xl-9 col-lg-8 col-md-12 user-right-details user-right-fill work-flow-details-sec-right"
            #userRightDetails>

            <!-- Clauses View or Preview Starts Here -->

            <div class="inner-dtl">
               <div class="tab-content">

                  <!-- Profille -->
                  <div class="tab-pane bg-white p-3 active" id="profile">

                     <div class="work-flow-info-tab d-flex">
                        <div class="form-group has-search">
                        
                           <!-- <span *ngIf="!disableSearch && ContentStore.ContentList.length > 0" class="fa fa-search form-control-feedback text-search"></span>
                            <input *ngIf="!disableSearch && ContentStore.ContentList.length > 0" type="text" class="form-control" placeholder="Search"> -->
                        </div>

                        <div class="small-tab-icons">
                           <ul class="nav nav-tabs clearfix" role="navigation">
                              <li class="nav-item"> <a (click)="selectedTab('picture')"
                                    [ngClass]="[ showPDF?'nav-link active':'nav-link' ]" data-toggle="tab" role="tab"
                                    aria-controls="lorem" aria-selected="false"><i class="fas fa-file-pdf"></i></a>
                              </li>
                              <li class="nav-item"> <a (click)="selectedTab('content')"
                                    [ngClass]="[ showContent?'nav-link active':'nav-link' ]" data-toggle="tab"
                                    role="tab" aria-controls="ipsum" aria-selected="false"><i
                                       class="fas fa-list-alt"></i></a>
                              </li>
                   
                           </ul>
                        </div>
                     </div>

                     <div class="small-tab-content min-height-70">
                        <div class="tab-content">
                           <!-- !Picture Tab -->
                           <div [ngClass]="[showPDF?'tab-pane fade active show':'tab-pane fade']" role="tabpanel">
                              <div class="work-flow-pdf-preview mt-4" *mobxAutorun>
                                 <div class="row">
                                    <div class="col-lg-12 compliance-register-details-pdf-sec">
                                       <div class="text-editor-content" style="text-align:center">
                                          <iframe [attr.src]="previewUrl" height="1175px" width="100%"></iframe>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <!-- !Section Tab -->
                           <div [ngClass]="[showContent?'tab-pane fade active show':'tab-pane fade']" role="tabpanel">

                              <!-- Section Starts Here -->

                              <app-internal-document-details-loader *ngIf="!ContentStore._contentLoaded">
                              </app-internal-document-details-loader>
                              <app-no-data *ngIf="ContentStore._contentLoaded && ContentStore.ContentList.length == 0">
                              </app-no-data>
                             


                                    <div class="row mt-3" *ngIf="ContentStore._contentLoaded && ContentStore.ContentList.length > 0">
                                       <div class="col-sm-12">
                                          <div class="widget">
                                             <div class="tab-content">

                                                <div class="tab-pane active" id="top-tab-right-one">

                                                   <!-- Left Side Main Menu Starts Here -->

                                                   <div class="pdf-menu-accodion-main clearfix">
                                                      <div class="pdf-menu-accodion cmn-bdr-right" #innerScroll>
                                                         <div class="pdf-menu-accodion-inner">

                                                            <div
                                                               class="panel-group panel-drop-sections panel-drop-white"
                                                               id="jd" role="tablist" aria-multiselectable="true">

                                                               <div class="panel panel-default"
                                                                  *ngFor="let row of ContentStore.ContentList;let num = index">
                                                                  <div
                                                                     [ngClass]="row.id==DocumentsStore.dataId?'panel-heading active':'panel-heading'"
                                                                     role="tab" id="headingOne">
                                                                     <div class="panel-title">
                                                                        <a role="button" data-toggle="collapse"
                                                                           (click)="setClass(row.id)"
                                                                           [attr.href]="'#menu'+num+'_'+row.id"
                                                                           aria-expanded="false"
                                                                           aria-controls="collapseOne"
                                                                           class="collapsed">
                                                                           <h5 class="width96pc mt-0">
                                                                              {{row.clause_number}}. {{row.title}} <span
                                                                                 *ngIf="row['children_content'].length > 0"
                                                                                 class="drop-down-icone"><i
                                                                                    class="fas fa-chevron-down"></i></span>
                                                                           </h5>
                                                                        </a>
                                                                     </div>
                                                                  </div>
                                                                  <div [attr.id]="'menu'+num+'_'+row.id"
                                                                     *ngIf="row['children_content'].length > 0"
                                                                     class="drop-detail-sec panel-collapse collapse"
                                                                     role="tabpanel" aria-labelledby="headingOne"
                                                                     [attr.data-parent]="'#menu'+num+'_'+row.id">
                                                                     <div class="panel-body">

                                                                        <div
                                                                           class="panel-group panel-drop-sections panel-drop-white"
                                                                           id="jd-8" role="tablist"
                                                                           aria-multiselectable="true">
                                                                           <div class="panel panel-default"
                                                                              *ngFor="let children_content of row['children_content']">
                                                                              <div
                                                                                 [ngClass]="children_content.id==DocumentsStore.dataId?'panel-heading active':'panel-heading'"
                                                                                 role="tab" id="headingOne-08-1">
                                                                                 <div class="panel-title">
                                                                                    <a role="button"
                                                                                       data-toggle="collapse"
                                                                                       (click)="setClass(children_content.id)"
                                                                                       [attr.href]="'#menu'+num+'_'+children_content.id"
                                                                                       aria-expanded="false"
                                                                                       aria-controls="collapseOne"
                                                                                       class="collapsed">
                                                                                       <h5 class="width96pc mt-0">
                                                                                          {{children_content.clause_number}}.
                                                                                          {{children_content.title}}
                                                                                          <span
                                                                                             *ngIf="children_content['children'].length > 0"
                                                                                             class="drop-down-icone"><i
                                                                                                class="fas fa-chevron-down"></i></span>
                                                                                       </h5>
                                                                                    </a>
                                                                                 </div>
                                                                              </div>
                                                                              <div
                                                                                 [attr.id]="'menu'+num+'_'+children_content.id"
                                                                                 class="drop-detail-sec panel-collapse collapse"
                                                                                 role="tabpanel"
                                                                                 aria-labelledby="headingOne-08-1"
                                                                                 [attr.data-parent]="'#menu'+num+'_'+children_content.id">
                                                                                 <div class="panel-body">

                                                                                    <app-internal-document-left-menu
                                                                                       [recursiveData]="children_content.children"
                                                                                       *ngIf="children_content.children">
                                                                                    </app-internal-document-left-menu>

                                                                                 </div>
                                                                              </div>
                                                                           </div>

                                                                        </div>


                                                                     </div>
                                                                  </div>
                                                               </div>

                                                            </div>

                                                         </div>

                                                      </div>
                                                   </div>

                                                   <!-- Left Side Main Menu Ends Here -->
                                                   <div
                                                      class="cmn-bdr bg-white p-3 pdf-zoom-header-main report-top-approve-sec "
                                                      *ngIf="DocumentsStore.enableWorkflow">
                                                      <div class="bg-white w-100" *mobxAutorun>
                                                         <div class="resolved-accepted-box p-0">
                                                            <div class="row">
                                                               <div class="col-sm-6"
                                                                  *ngIf="DocumentsStore?.documentDetails?.next_review_user_level==1">
                                                                  <div class="d-flex flex-row user-list-sm">
                                                                     <app-user-popup-box
                                                                        [source]="getPopupDetails('firstLevel',AuthStore.user)"
                                                                        [showName]="false"></app-user-popup-box>
                                                                     <div style="margin-top: 3%;">
                                                                        <h6>{{AuthStore.user?.name}}
                                                                           {{AuthStore.user?.last_name}}</h6>
                                                                        <span>{{AuthStore.user?.designation?.title}}</span>
                                                                     </div>
                                                                  </div>
                                                               </div>
                                                               <div class="col-sm-6"
                                                                  *ngIf="DocumentsStore?.documentDetails?.next_review_user_level!=1">
                                                                  <div class="d-flex flex-row user-list-sm">
                                                                     <app-user-popup-box
                                                                        [source]="getPopupDetails('workflow')"
                                                                        [showName]="false"></app-user-popup-box>
                                                                     <!-- <img src="images/user-gate.jpg" class="rounded-circle" width="30px" height="30px">-->
                                                                     <div style="margin-top: 2%;">
                                                                        <h6>
                                                                           {{DocumentWorkflowStore?.documentWorkflowHistory[DocumentWorkflowStore?.documentWorkflowHistory?.length-1]?.reviewed_user_first_name}}
                                                                           {{DocumentWorkflowStore?.documentWorkflowHistory[DocumentWorkflowStore?.documentWorkflowHistory?.length-1]?.reviewed_user_last_name}}
                                                                        </h6>
                                                                        <span>{{DocumentWorkflowStore?.documentWorkflowHistory[DocumentWorkflowStore?.documentWorkflowHistory?.length-1]?.reviewed_user_designation}}</span>
                                                                     </div>
                                                                  </div>
                                                               </div>
                                                               <div class="col-sm-6">
                                                                  <div
                                                                     class="accept-reject-btns clearfix d-flex justify-content-end w-100">
                                                                     <button (click)="openWorkflowAction('approve')"
                                                                        type="button"
                                                                        class="btn btn-green">Approve</button>
                                                                     <button (click)="openWorkflowAction('revert')"
                                                                        type="button"
                                                                        class="btn btn-yellow">Revert</button>
                                                                     <button (click)="openWorkflowAction('reject')"
                                                                        type="button"
                                                                        class="btn btn-red">Reject</button>
                                                                  </div>
                                                               </div>
                                                               <div
                                                                  *ngIf="DocumentsStore?.documentDetails?.next_review_user_level!=1"
                                                                  class="col-sm-12">
                                                                  <hr class="mt-1">
                                                               </div>
                                                            </div>
                                                            <div
                                                               *ngIf="DocumentsStore?.documentDetails?.next_review_user_level!=1"
                                                               class="resolved-accepted-para">
                                                               <p>{{DocumentWorkflowStore?.documentWorkflowHistory[DocumentWorkflowStore?.documentWorkflowHistory?.length-1]?.comment}}
                                                               </p>
                                                            </div>
                                                         </div>

                                                      </div>
                                                   </div>

                                                   <div
                                                      class="cmn-bdr bg-white p-3 pdf-zoom-header-main pdf-zoom-header d-flex">
                                                      <div class="w-100 mr-3">
                                                         <form
                                                            class="form-control issue-select-process-search bg-white search-popup-new">
                                                            <input type="text" placeholder="Search.." name="search"
                                                               class="search-process">
                                                            <button type="submit" style="width: 40px;"><i
                                                                  class="fa fa-search"></i></button>
                                                         </form>
                                                         
                                                      </div>
                                                      <button *ngIf="DocumentsStore.documentDetails.document_template" type="button" (click)="generateToPDF()" style="width:200px;" class="btn btn-small">Generate To PDF</button>

                                                   </div>


                                                   <div
                                                      class="pdf-v2-report-html pdf-v2-report-list-view-html clearfix pdf-new-style-pagination">

                                                      <!-- Content View Main Preview Starts Here -->
                                                      <div class="pdf-right-contents main-container">

                                                         <div class="maindiv relative min-height-70">
                                                            <div *ngIf="DocumentsStore.documentDetailsLoaded"
                                                               [ngClass]="setStatusColor()">
                                                               {{DocumentsStore.documentDetails?.document_status?.language[0].pivot.title}}
                                                            </div>
                                                            <div class="holder"
                                                               *ngFor="let row of ContentStore.ContentList;let num = index"
                                                               [attr.id]="row.id" style="scroll-margin: 50px">

                                                               <div class="pdf-page-inner-new-content">

                                                                  <div class="pdf-inner-no-border-accodion">
                                                                     <div class="panel-group" id="accordion01"
                                                                        role="tablist" aria-multiselectable="true">
                                                                        <div class="pdf-page-section">
                                                                           <div class="introduction-page intro-right">
                                                                              <div  [ngClass]="DocumentsStore.dataId==row.id?'panel panel-default report-selected':'panel panel-default'">
                                                                                 <div class="panel-heading mb-3" role="tab">
                                                                                    <h4 class="panel-title" style="text-transform: none;">
                                                                                       <a role="button"
                                                                                          data-toggle="collapse"
                                                                                          aria-expanded="true"
                                                                                          [attr.href]="'#collapseOne'+num+'_'+row.id">
                                                                                          {{row.clause_number}}.{{row.title}}
                                                                                          <span
                                                                                             *ngIf="DocumentsStore.documentDetailsLoaded && row.comments.length > 0"
                                                                                             class="msg-nbr-tab-btn bg-light-blue">{{row.comments.length}}</span>
                                                                                       </a>
                                                                                    </h4>
                                                                                 </div>
                                                                                 <div
                                                                                    [attr.id]="'collapseOne'+num+'_'+row.id"
                                                                                    class="panel-collapse collapse show"
                                                                                    role="tabpanel">
                                                                                    <div class="panel-body">
                                                                                       <div
                                                                                          class="edit-option-btn edit-option-btn-main">
                                                                                          <div
                                                                                             *ngIf="DocumentsStore.enableButtons"
                                                                                             class="arrowlist-edit-and-add arrowlist-edit-and-add-main"
                                                                                             style="margin: -21px 20px 0 0;">
                                                                                             <a><i class="fas fa-pen"
                                                                                                   (click)="editSection(row.id)"></i></a>
                                                                                             <a><i class="fas fa-trash"
                                                                                                   (click)="delete(row.id,'Content')"></i></a>
                                                                                          </div>
                                                                                          <div
                                                                                             [innerHTML]="row.description | safeHtml">
                                                                                          </div>
                                                                                          <div class="hover-show-btn" >
                                                                                             <button type="button" *ngIf="DocumentsStore.enableButtons"
                                                                                                (click)="openSectionForm('Child',row)"
                                                                                                class="btn btn-small mt-1"><i
                                                                                                   class="fas fa-plus mr-2"></i>
                                                                                                {{'add_sub_section' |
                                                                                                translate}}</button>

                                                                                             <button type="button" *ngIf="DocumentsStore.enableButtons"
                                                                                             (click)="openBpmControlForm(row.id,row?.controls)"
                                                                                             class="btn btn-small mt-1"><i
                                                                                                class="fas fa-plus mr-2"></i> {{'add_controls' |
                                                                                             translate}}</button>
                                                                                             <button type="button" *ngIf="DocumentsStore.enableButtons"
                                                                                                (click)="openNotesForm(row.id)"
                                                                                                class="btn btn-small mt-1"><i
                                                                                                   class="fas fa-plus mr-2"></i>
                                                                                                {{'add_notes' |
                                                                                                translate}}</button>
                                                                                             <button
                                                                                                *ngIf="row.is_checklist_applicable && DocumentsStore.enableChecklistPopup"
                                                                                                type="button"
                                                                                                (click)="openCheckListForm(row.id,row.checklists)"
                                                                                                class="btn btn-small mt-1"><i
                                                                                                   class="fas fa-plus mr-2"></i>
                                                                                                {{'add_checklist' |
                                                                                                translate}}</button>
                                                                                             <button
                                                                                                *ngIf="DocumentsStore.enableButtons"
                                                                                                type="button"
                                                                                                (click)="openComment(row.id)"
                                                                                                class="btn btn-small mt-1"><i
                                                                                                   class="fas fa-plus mr-2"></i>
                                                                                                {{'add_comments' |
                                                                                                translate}}</button>
                                                                                          </div>

                                                                                          <!--control start-->

                                                                                          <div>

                                                                                             <h6 *ngIf="row?.controls?.length > 0" class="mt-3">
                                                                                                {{'controls' | translate}}</h6>
                                                                                             <div class="delete-bullet-point">
                                                                                                <ul class="arrowlist ml-0 pl-0 mt-0 mb-0"
                                                                                                   *ngFor="let controls of row.controls">
                                                                                                   <li class="edit-delete-right-space">
                                                                                                      {{controls.title}}
                                                                                                      <button *ngIf="DocumentsStore.enableButtons"
                                                                                                         (click)="delete(controls.id,'Controls',row.id,controls)"
                                                                                                         type="button"
                                                                                                         class="btn btn-small float-right btn-small-delete"
                                                                                                         style="border: none;"><i
                                                                                                            class="fas fa-trash"></i></button>
                                                                                                   </li>
                                                                                                </ul>
                                                                                             </div>


                                                                                          </div>
   
                                                                                           <!-- !Controls Ends-->


                                                                                          <!-- !Notes Starts-->


                                                                                          <h6 *ngIf="row.notes.length > 0"
                                                                                             class="mt-3">{{'notes' |
                                                                                             translate}}</h6>
                                                                                          <div
                                                                                             class="delete-bullet-point">
                                                                                             <ul class="arrowlist ml-0 pl-0 mt-0 mb-0"
                                                                                                *ngFor="let notes of row.notes">
                                                                                                <li
                                                                                                   class="edit-delete-right-space">
                                                                                                   {{notes.title}}
                                                                                                   <div
                                                                                                      *ngIf="DocumentsStore.enableButtons"
                                                                                                      class="edit-and-delete-small">
                                                                                                      <button
                                                                                                         type="button"
                                                                                                         (click)="editNotes(notes,row.id)"
                                                                                                         class="btn-small-icon"><i
                                                                                                            class="fas fa-pen"></i></button><button
                                                                                                         type="button"
                                                                                                         (click)="delete(notes.id,'notes',row.id)"
                                                                                                         class="btn-small-icon"><i
                                                                                                            class="fas fa-trash"></i></button>
                                                                                                   </div>
                                                                                                </li>
                                                                                             </ul>
                                                                                          </div>

                                                                                          <!-- !Notes Ends Here -->

                                                                                          <!-- !CheckList Starts Here-->

                                                                                          <div
                                                                                             *ngIf="row.is_checklist_applicable">

                                                                                             <h6 *ngIf="row.checklists.length > 0"
                                                                                                class="mt-3">
                                                                                                {{'checklists' |
                                                                                                translate}}</h6>
                                                                                             <div
                                                                                                class="delete-bullet-point">
                                                                                                <ul class="arrowlist ml-0 pl-0 mt-0 mb-0"
                                                                                                   *ngFor="let checklist of row.checklists">
                                                                                                   <li
                                                                                                      class="edit-delete-right-space">
                                                                                                      {{checklist.title}}
                                                                                                      <button
                                                                                                         *ngIf="DocumentsStore.enableButtons"
                                                                                                         (click)="delete(checklist.id,'CheckList',row.id,checklist)"
                                                                                                         type="button"
                                                                                                         class="btn btn-small float-right btn-small-delete"
                                                                                                         style="border: none;"><i
                                                                                                            class="fas fa-trash"></i></button>
                                                                                                   </li>
                                                                                                </ul>
                                                                                             </div>


                                                                                          </div>

                                                                                          <!-- !CheckLists Ends Here -->

                                                                                          <!-- ! Parent Data Ends Here-->

                                                                                       </div>
                                                                                       <!-- !Child Data  Inner Accordion Starts Here -->


                                                                                       <div class="pdf-page-section">
                                                                                          <div
                                                                                             class="introduction-page intro-right ml-3">
                                                                                             <div
                                                                                                class="pdf-inner-no-border-accodion headding-style-no-border-accodion">
                                                                                                <div class="panel-group"
                                                                                                   id="inner-accordion01"
                                                                                                   role="tablist"
                                                                                                   aria-multiselectable="true">
                                                                                                   <div
                                                                                                      class="panel panel-default"
                                                                                                      *ngFor="let document_template of row['children_content'];let inner_num = index"
                                                                                                      [attr.id]="document_template.id" style="scroll-margin: 50px">
                                                                                                      <div
                                                                                                         class="panel-heading active"
                                                                                                         role="tab"
                                                                                                         id="heading01">
                                                                                                         <h4
                                                                                                            class="panel-title" style="text-transform: none;">
                                                                                                            <a role="button"
                                                                                                               data-toggle="collapse"
                                                                                                               data-parent="#inner-accordion01"
                                                                                                               [attr.href]="'#innercollapseOne'+inner_num+'_'+document_template.id"
                                                                                                               aria-expanded="true"
                                                                                                               aria-controls="inner-collapse01">
                                                                                                               {{document_template.clause_number}}.{{document_template.title}}
                                                                                                               <span
                                                                                                                  *ngIf="DocumentsStore.documentDetailsLoaded && document_template?.comments?.length > 0"
                                                                                                                  class="msg-nbr-tab-btn bg-light-blue">{{document_template.comments.length}}</span>
                                                                                                            </a>

                                                                                                         </h4>
                                                                                                      </div>
                                                                                                      <div
                                                                                                         [attr.id]="'innercollapseOne'+inner_num+'_'+document_template.id"
                                                                                                         class="panel-collapse collapse in show"
                                                                                                         role="tabpanel"
                                                                                                         aria-labelledby="heading01">

                                                                                                         <div
                                                                                                            class="panel-body">
                                                                                                            <div
                                                                                                               class="edit-option-btn edit-option-btn-main">
                                                                                                               <div
                                                                                                                  *ngIf="DocumentsStore.enableButtons"
                                                                                                                  class="arrowlist-edit-and-add arrowlist-edit-and-add-main"
                                                                                                                  style="margin: -21px 20px 0 0;">
                                                                                                                  <a><i class="fas fa-pen"
                                                                                                                        (click)="editSection(document_template.id)"></i></a>
                                                                                                                  <a><i class="fas fa-trash"
                                                                                                                        (click)="delete(document_template.id,'Content')"></i></a>
                                                                                                                  <!-- <a  *ngIf="DocumentsStore.enableButtons && DocumentsStore.showNewDesign "  (click) = "openComment(document_template.id)"><i class="fas fa-comment-dots"></i></a> -->
                                                                                                               </div>

                                                                                                               <div
                                                                                                                  [innerHTML]="document_template.description | safeHtml">
                                                                                                               </div>
                                                                                                               <div
                                                                                                                  class="hover-show-btn"
                                                                                                                  *ngIf="DocumentsStore.enableButtons">
                                                                                                                  <button
                                                                                                                     type="button"
                                                                                                                     (click)="openSectionForm('Child',document_template)"
                                                                                                                     class="btn btn-small mt-1"><i
                                                                                                                        class="fas fa-plus mr-2"></i>
                                                                                                                     {{'add_sub_section'
                                                                                                                     |
                                                                                                                     translate}}</button>
                                                                                                                     <button type="button"
                                                                                                                     (click)="openBpmControlForm(document_template.id,document_template?.controls)"
                                                                                                                     class="btn btn-small mt-1"><i
                                                                                                                        class="fas fa-plus mr-2"></i> {{'add_controls' |
                                                                                                                     translate}}</button>
                                                                                                                  <button
                                                                                                                     type="button"
                                                                                                                     (click)="openNotesForm(document_template.id)"
                                                                                                                     class="btn btn-small mt-1"><i
                                                                                                                        class="fas fa-plus mr-2"></i>
                                                                                                                     {{'add_notes'
                                                                                                                     |
                                                                                                                     translate}}</button>
                                                                                                                  <button
                                                                                                                     *ngIf="document_template.is_checklist_applicable"
                                                                                                                     type="button"
                                                                                                                     (click)="openCheckListForm(document_template.id,document_template.checklists)"
                                                                                                                     class="btn btn-small mt-1"><i
                                                                                                                        class="fas fa-plus mr-2"></i>
                                                                                                                     {{'add_checklist'
                                                                                                                     |
                                                                                                                     translate}}</button>
                                                                                                                  <button
                                                                                                                     *ngIf="DocumentsStore.enableButtons"
                                                                                                                     type="button"
                                                                                                                     (click)="openComment(document_template.id)"
                                                                                                                     class="btn btn-small mt-1"><i
                                                                                                                        class="fas fa-plus mr-2"></i>
                                                                                                                     {{'add_comments'
                                                                                                                     |
                                                                                                                     translate}}</button>
                                                                                                               </div>

                                                                                                                <!--control start-->

                                                                                                                     <div
                                                                                                                     >
                                                                                                               
                                                                                                                     <h6 *ngIf="document_template?.controls?.length > 0"
                                                                                                                        class="mt-3">{{'controls' |
                                                                                                                        translate}}</h6>
                                                                                                                     <div class="delete-bullet-point">
                                                                                                                        <ul class="arrowlist ml-0 pl-0 mt-0 mb-0"
                                                                                                                           *ngFor="let controls of document_template.controls">
                                                                                                                           <li
                                                                                                                              class="edit-delete-right-space">
                                                                                                                              {{controls.title}}
                                                                                                                              <button *ngIf="DocumentsStore.enableButtons"
                                                                                                                                 (click)="delete(controls.id,'Controls',document_template.id,controls)"
                                                                                                                                 type="button"
                                                                                                                                 class="btn btn-small float-right btn-small-delete"
                                                                                                                                 style="border: none;"><i
                                                                                                                                    class="fas fa-trash"></i></button>
                                                                                                                           </li>
                                                                                                                        </ul>
                                                                                                                     </div>


                                                                                                                  </div>
                                                                                                                <!--control end-->


                                                                                                               <!-- !Notes Inner Accordion Starts-->


                                                                                                               <h6 *ngIf="document_template.notes.length > 0"
                                                                                                                  class="mt-3">
                                                                                                                  {{'notes'
                                                                                                                  |
                                                                                                                  translate}}
                                                                                                               </h6>
                                                                                                               <div
                                                                                                                  class="delete-bullet-point">
                                                                                                                  <ul class="arrowlist ml-0 pl-0 mt-0 mb-0"
                                                                                                                     *ngFor="let notes of document_template.notes">
                                                                                                                     <li
                                                                                                                        class="edit-delete-right-space">
                                                                                                                        {{notes.title}}
                                                                                                                        <div
                                                                                                                           *ngIf="DocumentsStore.enableButtons"
                                                                                                                           class="edit-and-delete-small">
                                                                                                                           <button
                                                                                                                              type="button"
                                                                                                                              (click)="editNotes(notes,document_template.id)"
                                                                                                                              class="btn-small-icon"><i
                                                                                                                                 class="fas fa-pen"></i></button><button
                                                                                                                              type="button"
                                                                                                                              (click)="delete(notes.id,'notes',document_template.id)"
                                                                                                                              class="btn-small-icon"><i
                                                                                                                                 class="fas fa-trash"></i></button>
                                                                                                                        </div>
                                                                                                                     </li>
                                                                                                                  </ul>
                                                                                                               </div>

                                                                                                               <!-- !Notes Inner Accordion Ends Here -->

                                                                                                               <!-- !CheckList Inner Accordion Starts Here-->

                                                                                                               <div
                                                                                                                  *ngIf="document_template.is_checklist_applicable">

                                                                                                                  <h6 *ngIf="document_template.checklists.length > 0"
                                                                                                                     class="mt-3">
                                                                                                                     {{'checklists'
                                                                                                                     |
                                                                                                                     translate}}
                                                                                                                  </h6>
                                                                                                                  <div
                                                                                                                     class="delete-bullet-point">
                                                                                                                     <ul class="arrowlist ml-0 pl-0 mt-0 mb-0"
                                                                                                                        *ngFor="let checklist of document_template.checklists">
                                                                                                                        <li
                                                                                                                           class="edit-delete-right-space">
                                                                                                                           {{checklist.title}}
                                                                                                                           <button
                                                                                                                              *ngIf="DocumentsStore.enableButtons"
                                                                                                                              (click)="delete(checklist.id,'CheckList',document_template.id,checklist)"
                                                                                                                              type="button"
                                                                                                                              class="btn btn-small float-right btn-small-delete"
                                                                                                                              style="border: none;"><i
                                                                                                                                 class="fas fa-trash"></i></button>
                                                                                                                        </li>
                                                                                                                     </ul>
                                                                                                                  </div>


                                                                                                               </div>

                                                                                                               <!-- !CheckLists Inner Accordion Ends Here -->

                                                                                                               <!-- !Child Inner Accordion Data Ends Here-->

                                                                                                            </div>
                                                                                                         </div>


                                                                                                      </div>

                                                                                                      <app-internal-document-section-recursive-modal
                                                                                                         [childData]="document_template.children"
                                                                                                         *ngIf="document_template.children">
                                                                                                      </app-internal-document-section-recursive-modal>
                                                                                                   </div>

                                                                                                </div>
                                                                                             </div>
                                                                                          </div>

                                                                                       </div>
                                                                                    </div>
                                                                                 </div>
                                                                              </div>
                                                                           </div>
                                                                        </div>

                                                                     </div>
                                                                  </div>
                                                               </div>

                                                            </div>
                                                            <!-- Add Clause Button Starts Here-->
                                                            <div class="text-center mt-3 mb-3"
                                                               *ngIf="DocumentsStore.enableButtons && ContentStore._contentLoaded && ContentStore.ContentList.length > 0">
                                                               <a (click)="openSectionForm('Parent')"
                                                                  class="view-more-pestel-box d-inline-block">{{'add_new_clause'
                                                                  | translate}}</a>
                                                            </div>
                                                            <!-- Add Clause Button Ends Here-->
                                                         </div>
                                                      </div>
                                                   </div>
                                                   <!-- Content View Main Preview Starts Here -->
                                                </div>
                                             </div>
                                          </div>
                                       </div>
                                    </div>

                                 

                              <!-- Section Ends Here -->

                           </div>
                        </div>


                     </div>
                  </div>
               </div>
            </div>

         </div>
      </div>
   
<app-external-document-details-loader *ngIf="!DocumentsStore.documentDetailsLoaded">
</app-external-document-details-loader>
<!-- !View More Popup Starts Here -->
<div class="modal modal-style-1 popup-full-width fade" id="doc-view-more-popup" data-keyboard="false"
   data-backdrop="static" #viewMore>
   <button type="button" class="close" data-dismiss="modal"><i class="lni-close"></i><span>{{'esc' |
         translate}}</span></button>
   <div class="modal-dialog modal-xl modal-dialog-centered">
      <div class="modal-content">
         <!-- Modal Header -->
         <div class="modal-header">
            <h4 class="modal-title">{{'document_details' | translate}}</h4>
         </div>
         <!-- Modal body -->
         <div class="modal-body form-body" *ngIf="DocumentsStore.documentDetailsLoaded">
            <hr class="mt-0">
            <div class="row">
               <div class="col-sm-7 docs-border-right">
                  <div class="issue-top-sec">
                     <div class="clearfix">
                        <h5 class="d-inline-block cmn-head-style label-tag-style"><span class="issue-smoal-head-text">#{{DocumentsStore.documentDetails?.reference_code}}</span>  {{DocumentsStore.documentDetails?.title}}  <span class="draft-tag label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one">{{DocumentsStore.documentDetails?.document_status?.type
                           | titlecase}}</span></h5>
                     </div>
                     <div *ngIf="DocumentsStore.documentDetails?.description && !view_more_description"
                     style="white-space: pre-wrap;">
                     <p>{{DocumentsStore.documentDetails?.description.length > 350 ?
                        getStringData(DocumentsStore.documentDetails?.description) :
                        DocumentsStore.documentDetails?.description}}
                        <a *ngIf="(DocumentsStore.documentDetails?.description.length) > 200"
                           (click)="viewData('more','description')"
                           class="view-more-pestel-box pointer view-more-doted">...{{'view_more' | translate}}</a></p>
       
                  </div>
                  <div class="mb-3" *ngIf="DocumentsStore.documentDetails?.description && view_more_description"
                     style="white-space: pre-wrap;">
                     <p>
                        {{DocumentsStore.documentDetails?.description}}<a *ngIf="(DocumentsStore.documentDetails?.description.length) > 200"
                           (click)="viewData('less','description')"
                           class="view-more-pestel-box pointer view-more-doted">...{{'view_less' | translate}}</a>
                     </p>

                  </div>
                  
                  <p  *ngIf="!DocumentsStore.documentDetails?.description">{{AppStore.noContentText}}</p>

                  </div>
                  <!-- <div class="clearfix d-flex mb-3">
                     <div class="left-pic-work-flow" *ngFor="let mainDoc of DocumentsStore.documentDetails?.versions">
                        <div *ngIf="mainDoc.is_latest">
                           <img [attr.src]="createImageUrl('document-version',mainDoc.token,43,37)" style="width: 37px;"
                              class="img-fluid cmn-bdr">
                        </div>
                     </div>


                     <div class="issue-top-sec issuue-new-style p-0 w-100 ml-2">
                        <div class="clearfix pt-0">
                           <h5 class="d-inline-block cmn-head-style label-tag-style bold pt-1 mb-0"> <span
                                 class="issue-smoal-head-text">#{{DocumentsStore.documentDetails?.reference_code}}</span>
                              {{DocumentsStore.documentDetails?.title}}
                              <span
                                 class="draft-tag label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one ml-3">{{DocumentsStore.documentDetails?.document_status?.type
                                 | titlecase}}</span>
                           </h5>
                        </div>
                        <span class="size-pic"><span class="bold">V{{DocumentsStore.versionNumber}}</span></span>
                     </div>

                  </div> -->

                  <div class="mt-2">
                     <div class="user-details-page mt-3">
                        <div class="right-block p-0">
                           <h5 class="bold mt-0 mb-3"> <span> {{'classification' | translate}} </span> </h5>
                        </div>
                     </div>

                     <!-- <h6 class="bold">{{'ms_type' | translate}}</h6>
                     <label *ngFor="let ms_type of DocumentsStore.documentDetails?.ms_type_organizations"
                        class="outline-tag">{{ms_type.ms_type.title}} <span>V{{ms_type.ms_type_version.title}}</span>
                     </label>
                     <p *ngIf="!(DocumentsStore.documentDetails?.ms_type_organizations.length > 0)">
                        {{AppStore.noContentText}}
                     </p> -->

                     <div class="row mt-2">
                        <div class="col-md-4">
                           <h6 class="bold">{{'category' | translate}}</h6>
                           <P *ngIf="DocumentsStore.documentDetailsLoaded">
                              {{getArrayFormatedString(DocumentsStore.documentDetails?.document_categories)}}</P>
                        </div>
                        <div class="col-md-4">
                           <h6 class="bold">{{'sub_category' | translate}}</h6>
                           <P *ngIf="DocumentsStore.documentDetailsLoaded">
                              {{getArrayFormatedString(DocumentsStore.documentDetails?.document_sub_categories)}}</P>
                        </div>
                        <div class="col-md-4">
                           <h6 class="bold">{{'further_sub_category' | translate}}</h6>
                           <P *ngIf="DocumentsStore.documentDetailsLoaded">
                              {{getArrayFormatedString(DocumentsStore.documentDetails?.document_sub_sub_categories)}}
                           </P>
                        </div>
                        <div class="col-md-4">
                           <h6 class="bold">{{'region' | translate}}</h6>
                           <P *ngIf="DocumentsStore.documentDetailsLoaded">
                              {{getArrayFormatedString(DocumentsStore.documentDetails?.regions)}}</P>
                        </div>
                        <div class="col-md-4">
                           <h6 class="bold">{{'country' | translate}}</h6>
                           <P *ngIf="DocumentsStore.documentDetailsLoaded">
                              {{getArrayFormatedString(DocumentsStore.documentDetails?.countries)}}</P>
                        </div>
                        <div class="col-md-4">
                           <h6 class="bold">{{'industry' | translate}}</h6>
                           <P *ngIf="DocumentsStore.documentDetailsLoaded">
                              {{getArrayFormatedString(DocumentsStore.documentDetails?.industries)}}</P>
                        </div>
                        <div class="col-md-4">
                           <h6 class="bold">{{'document_type' | translate}}</h6>
                           <div class="labels pt-1" *ngIf="DocumentsStore.documentDetails?.document_type">
                           <label class="outline-tag outline-tag-small">{{DocumentsStore.documentDetails?.document_type.title}}</label>
                        </div>
                        <p *ngIf="!DocumentsStore.documentDetails?.document_type">{{AppStore.noContentText}}</p>
                        </div>
                     </div>
                  </div>


                  <div class="mt-2">
                     <div class="user-details-page mt-3">
                        <div class="right-block p-0">
                           <h5 class="bold mt-0 mb-3"> <span> {{'document_mapping_info' | translate}} </span> </h5>
                        </div>
                     </div>

                     <!-- <h6 class="bold">{{'ms_type' | translate}}</h6>
                     <label *ngFor="let ms_type of DocumentsStore.documentDetails?.ms_type_organizations"
                        class="outline-tag">{{ms_type.ms_type.title}} <span>V{{ms_type.ms_type_version.title}}</span>
                     </label>
                     <p *ngIf="!(DocumentsStore.documentDetails?.ms_type_organizations.length > 0)">
                        {{AppStore.noContentText}}
                     </p> -->

                     <div class="row mt-2">
                        <div class="col-md-4" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_subsidiary">
                           <h6 class="bold">{{'document_organization' | translate}}</h6>
                           <P *ngIf="DocumentsStore.documentDetailsLoaded">
                              {{getArrayFormatedString(DocumentsStore.documentDetails?.document_organizations)}}</P>
                        </div>
                        <div class="col-md-4" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_section">
                           <h6 class="bold">{{'document_section' | translate}}</h6>
                           <P *ngIf="DocumentsStore.documentDetailsLoaded">
                              {{getArrayFormatedString(DocumentsStore.documentDetails?.document_sections)}}</P>
                        </div>
                        <div class="col-md-4" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_sub_section">
                           <h6 class="bold">{{'document_sub_section' | translate}}</h6>
                           <P *ngIf="DocumentsStore.documentDetailsLoaded">
                              {{getArrayFormatedString(DocumentsStore.documentDetails?.document_sub_sections)}}
                           </P>
                        </div>
                        <div class="col-md-4" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division">
                           <h6 class="bold">{{'document_division' | translate}}</h6>
                           <P *ngIf="DocumentsStore.documentDetailsLoaded">
                              {{getArrayFormatedString(DocumentsStore.documentDetails?.document_divisions)}}</P>
                        </div>
                        <div class="col-md-4">
                           <h6 class="bold">{{'document_department' | translate}}</h6>
                           <P *ngIf="DocumentsStore.documentDetailsLoaded">
                              {{getArrayFormatedString(DocumentsStore.documentDetails?.document_departments)}}</P>
                        </div>
                     </div>
                  </div>

                     <div class="row">

                        <!-- <div class="col-sm-6">
                           
                  <h6>{{'document_owner' | translate}}</h6>
                  <div *ngIf="DocumentsStore.documentDetails.owner" class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg p-0">
                     <img [attr.src]="DocumentsStore.documentDetails?.owner?.image?.token?getProfilePicture(DocumentsStore.documentDetails.owner.image.token):'/assets/images/user-demo.png'"
                 
                     class="rounded-circle rounde-hov" width="35px" height="35px"> 
                     <div class="pointer new-size-text text-left">
                         <p class="mb-0">{{DocumentsStore.documentDetails.owner.first_name}} {{DocumentsStore.documentDetails.owner.last_name}}  </p>
                         <span>{{DocumentsStore.documentDetails.owner.designation}}</span>
                     </div>
                     
                 </div>
                 <p *ngIf="!DocumentsStore.documentDetails?.owner">{{AppStore.noContentText}}</p>
                        </div> -->

                        <div class="col-sm-12">
                           <div class="label-and-user-pic">
                              <h6>{{'document_owner' | translate}}</h6>
                              <div>
                                  <app-user-popup-box
                                      [source]=" getEmployeePopupDetails(DocumentsStore.documentDetails?.owner)">
                                  </app-user-popup-box>
                              </div>
                           </div>
                
                       </div>
                        
                     <div class="col-sm-6 mt-1 mb-2">
                        <h6 class="bold">{{'tags' | translate}}</h6>
                        <label *ngFor="let tag of DocumentsStore.documentDetails?.tags"
                           class="outline-tag outline-tag-small">{{tag.title}}</label>
                        <p *ngIf="!(DocumentsStore.documentDetails?.tags.length > 0)">{{AppStore.noContentText}}</p>
                     </div>
                     </div>

                     <div class="row" *ngIf="DocumentsStore.documentDetails?.purpose">
                        <!-- <div class="col-md-6">
                           <h6 class="bold">{{'description' | translate}}</h6>
                           <p style="white-space: pre-wrap;">
                              {{DocumentsStore.documentDetails?.description?DocumentsStore.documentDetails?.description:AppStore.noContentText}}
                           </p>
                        </div> -->
                        <div class="col-md-12">
                           <!-- <h6 class="bold">{{'purpose' | translate}}</h6>
                           <p style="white-space: pre-wrap;">
                              {{DocumentsStore.documentDetails?.purpose?DocumentsStore.documentDetails?.purpose:AppStore.noContentText}}
                           </p> -->
                           <div *ngIf="DocumentsStore.documentDetails?.purpose && !view_more_purpose"
                           style="white-space: pre-wrap;"><p>
                              {{DocumentsStore.documentDetails?.purpose.length > 350 ?
                                 getStringData(DocumentsStore.documentDetails?.purpose) : DocumentsStore.documentDetails?.purpose}}
                                 <a *ngIf="(DocumentsStore.documentDetails?.purpose.length) > 200"
                                    (click)="viewData('more','purpose')" class="view-more-pestel-box pointer view-more-doted">
                                    ...View More</a>
                           </p>
                        
                        </div>
                        <div *ngIf="DocumentsStore.documentDetails?.purpose && view_more_purpose"
                           style="white-space: pre-wrap;"><p>
                              {{DocumentsStore.documentDetails?.purpose}}
                              <a *ngIf="(DocumentsStore.documentDetails?.purpose.length) > 200"
                                 (click)="viewData('less','purpose')" class="view-more-pestel-box pointer view-more-doted">...View
                                 Less</a>
                           </p>
                        
                        </div>
                        <P *ngIf="!DocumentsStore.documentDetails?.purpose">{{AppStore.noContentText}}</P>
                        </div>

                     </div>
                
               </div>
               <div class="col-sm-5 right-docs-popup">
                  <div class="user-details-page mt-3">
                     <div class="right-block p-0">
                        <h5 class="bold mt-0 mb-3"> <span> {{'access' | translate}} </span> </h5>
                     </div>
                  </div>

                  <div class="row">
                     <div class="col-md-12">
                        <div class="form-group clearfix">
                           <div class="box-cnt-one tab-type-btn-small float-left">
                              <label
                                 *ngIf="DocumentsStore.documentDetails?.document_access_type.is_shared"
                                 class="outline-tag active"><i
                                    class="fas fa-share-alt"></i>{{'share' | translate}}</label>
                              <label 
                                 *ngIf="DocumentsStore.documentDetails?.document_access_type.is_private"
                                 class="outline-tag active"><i
                                    class="fas fa-lock"></i>{{'private' | translate}}</label>
                              <label 
                                 *ngIf="DocumentsStore.documentDetails?.document_access_type.is_public"
                                 class="outline-tag active"><i
                                    class="fas fa-globe-americas"></i>{{'public' | translate}}</label>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="row" *ngIf="DocumentsStore.documentDetails?.document_access_type.is_shared">
                     <div class="col-md-6">
                        <h6 class="bold">{{'organizations' | translate}}</h6>
                        <P *ngIf="DocumentsStore.documentDetailsLoaded">
                           {{getArrayFormatedString(DocumentsStore.documentDetails?.organizations)}}</P>
                     </div>
                     <div class="col-md-6">
                        <h6 class="bold">{{'divisions' | translate}}</h6>
                        <P *ngIf="DocumentsStore.documentDetailsLoaded">
                           {{getArrayFormatedString(DocumentsStore.documentDetails?.divisions)}}</P>
                     </div>
                     <div class="col-md-6">
                        <h6 class="bold">{{'departments' | translate}}</h6>
                        <P *ngIf="DocumentsStore.documentDetailsLoaded">
                           {{getArrayFormatedString(DocumentsStore.documentDetails?.departments)}}</P>
                     </div>
                     <div class="col-md-6">
                        <h6 class="bold">{{'sections' | translate}}</h6>
                        <P *ngIf="DocumentsStore.documentDetailsLoaded">
                           {{getArrayFormatedString(DocumentsStore.documentDetails?.sections)}}</P>
                     </div>
                     <div class="col-md-6">
                        <h6 class="bold">{{'sub_sections' | translate}}</h6>
                        <P *ngIf="DocumentsStore.documentDetailsLoaded">
                           {{getArrayFormatedString(DocumentsStore.documentDetails?.sub_sections)}}</P>
                     </div>
                     <div class="col-md-12">
                        <h6 class="bold text-left">{{'users' | translate}}</h6>
                        <ul class="arci-user-tab-dtl workflow-lst-pics-loop clearfix">
                           <li class="rounde-hov-bg"
                              *ngFor="let userData of DocumentsStore.documentDetails?.users ; let i = index">
                              <app-user-popup-box [source]="assignUserValues(userData)" [showName]="false">
                              </app-user-popup-box>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- Support Files -->

                  <h6 class="mt-3" *ngIf="DocumentsStore.documentDetails?.files.length > 0">{{'support_file' |
                     translate}}</h6>
                  <div class="scroll-documents" #previewUploadArea>
                     <div class="thumb-pics-bg thumb-pics-col-2 thumb-pics-fix-text clearfix" style="padding-top: 0">
                        <div class="thumb-pics"
                           *ngFor="let docs of DocumentsStore.documentDetails?.files;let i = index">

                           <!-- System Files Starts Here -->
                           <div class="upload-pics edit-option" *ngIf="!docs.related_document_id"
                              (click)="viewDocument('document-file',docs,docs)">
                              <div class="browse-form-pic"
                                 [ngStyle]="{'background': 'url('+createImageUrl('document-file',docs?.token)+') no-repeat'}">
                              </div>
                              <div class="browse-form-name clearfix">
                                 <div class="float-left">
                                    <h6>
                                       {{docs.title?docs.title:docs.name?docs.name:docs.version_title?docs.version_title:"NA"}}.{{docs.ext}}
                                    </h6>
                                    <span>{{docs.size/1048576 | number:'0.2-2'}}MB</span><span
                                       class="text-blue bold pl-2">System</span>
                                 </div>
                                 <div class="browse-logo">
                                    <img *ngIf="checkExtension(docs.ext,'image') != -1" class="folder-picher"
                                       src="/assets/images/jpg-icone.png">
                                    <img *ngIf="checkExtension(docs.ext,'doc') != -1" class="folder-picher"
                                       src="/assets/images/word-icone.png">
                                    <img *ngIf="checkExtension(docs.ext,'pdf') != -1" class="folder-picher"
                                       src="/assets/images/pdf-icone.png">
                                    <img *ngIf="checkExtension(docs.ext,'excel') != -1" class="folder-picher"
                                       src="/assets/images/excel-icone.png">
                                    <img *ngIf="checkExtension(docs.ext,'video') != -1" class="folder-picher"
                                       src="/assets/images/md-video.png">
                                    <img *ngIf="checkExtension(docs.ext,'audio') != -1" class="folder-picher"
                                       src="/assets/images/md-audio.png">
                                    <img *ngIf="checkExtension(docs.ext,'ppt') != -1" class="folder-picher"
                                       src="/assets/images/md-ppt.png">
                                 </div>
                              </div>
                              <div class="edit-option-show">
                                 <a><i class="fas fa-download"
                                       (click)="downloadDocumentFile('document-file',docs)"></i></a>
                              </div>
                           </div>

                           <!-- System Files Ends Here -->
                           <!-- KnowledgeHub Files Starts Here -->
                           <div class="upload-pics edit-option" *ngIf="docs.related_document_id">

                              <div *ngFor="let mainDoc of docs.kh_document.versions"
                                 (click)="viewDocument('document-version',docs,mainDoc)">
                                 <div *ngIf="mainDoc.is_latest">
                                    <div class="browse-form-pic"
                                       [ngStyle]="{'background': 'url('+createImageUrl('document-version',mainDoc?.token)+') no-repeat'}">
                                    </div>
                                    <div class="browse-form-name clearfix">
                                       <div class="float-left">
                                          <h6>{{mainDoc.title}}.{{mainDoc.ext}}
                                          </h6>
                                          <span>{{mainDoc.size/1048576 | number:'0.2-2'}}MB</span><span
                                             class="text-blue bold pl-2">Knowledge Hub</span>
                                       </div>
                                       <div class="browse-logo">
                                          <img *ngIf="checkExtension(mainDoc.ext,'image') != -1" class="folder-picher"
                                             src="/assets/images/jpg-icone.png">
                                          <img *ngIf="checkExtension(mainDoc.ext,'doc') != -1" class="folder-picher"
                                             src="/assets/images/word-icone.png">
                                          <img *ngIf="checkExtension(mainDoc.ext,'pdf') != -1" class="folder-picher"
                                             src="/assets/images/pdf-icone.png">
                                          <img *ngIf="checkExtension(mainDoc.ext,'excel') != -1" class="folder-picher"
                                             src="/assets/images/excel-icone.png">
                                          <img *ngIf="checkExtension(mainDoc.ext,'video') != -1" class="folder-picher"
                                             src="/assets/images/md-video.png">
                                          <img *ngIf="checkExtension(mainDoc.ext,'audio') != -1" class="folder-picher"
                                             src="/assets/images/md-audio.png">
                                          <img *ngIf="checkExtension(mainDoc.ext,'ppt') != -1" class="folder-picher"
                                             src="/assets/images/md-ppt.png">
                                       </div>
                                    </div>
                                    <div class="edit-option-show">
                                       <a><i class="fas fa-download"
                                             (click)="downloadDocumentFile('document-version',docs,mainDoc)"></i></a>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <!-- KnowledgeHub Files Ends Here -->

                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="row">
               <div class="col-xl-12">
                  <hr>
                  <div class="d-flex flex-row user-list-sm">
                     <figure>
                        <img
                           [attr.src]="DocumentsStore.documentDetails?.created_by.image.token ? createImageUrl('user-profile-picture',DocumentsStore.documentDetails?.created_by.image.token) : getDefaultImage('user-logo')"
                           onerror="this.src='/assets/images/user-demo2.png'" width="30px" height="30px"
                           class="rounded-circle rounde-hov">
                     </figure>
                     <div>
                        <h6>
                           {{DocumentsStore.documentDetails?.created_by.first_name}}&nbsp;{{DocumentsStore.documentDetails?.created_by.last_name}}
                        </h6>
                        <span>{{DocumentsStore.documentDetails?.created_by.designation}} | Created on
                           {{DocumentsStore.documentDetails?.created_at| date :'medium'}}</span>
                     </div>
                  </div>
               </div>
            </div>
            <!-- Modal footer -->
         </div>
      </div>
   </div>
</div>
<!-- !View More Popup Ends Here -->

<div class="side-bar-round" (click)="unCollapseSide()" #sideBarRound>
   <figure class="w-100 d-block" *ngIf="DocumentsStore.documentDetailsLoaded">
      <img width="100"
         [attr.src]="DocumentsStore.documentDetails?.created_by.image.token ? createImageUrl('user-profile-picture',DocumentsStore.documentDetails?.created_by.image.token):getDefaultImage('user-logo')"
         class="d-block mx-auto img-fluid rounded-circle" onerror="this.src='/assets/images/user-demo2.png'">
   </figure>
</div>


<!-- ---------File Preview-------------- -->
<div class="modal modal-style-1 popup-full-width fade popup-new-type" id="add-three-popup" data-keyboard="false"
   data-backdrop="static" #filePreviewModal *mobxAutorun>
   <button type="button" class="close" data-dismiss="modal" (click)="closePreviewModal($event)"><i
         class="lni-close"></i><span>esc</span></button>
   <app-preview *ngIf="previewObject" [source]="previewObject" (close)="closePreviewModal($event)"></app-preview>
</div>
<!--------------- Ends Here ------------>


<!-- Required Forms Starts Here -->
<!-- Section Form Starts -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" id="mainclause" data-backdrop="static"
   #sectionFormModal>
   <app-add-section-component *ngIf="sourceParams" [source]="sourceParams"></app-add-section-component>
</div>
<!-- Section Form Ends -->
<!-- Notes Form Starts-->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" id="notesForm" data-backdrop="static"
   #notesFormModal>
   <app-add-notes-component *ngIf="NotesParam" [source]="NotesParam"></app-add-notes-component>
</div>
<!-- Notes Form Ends -->

<!-- Checklist Form Starts -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" id="checkListForm" data-backdrop="static"
   #checkListFormModal>
   <app-add-checklist-component *ngIf="CheckListParams" [source]='CheckListParams'></app-add-checklist-component>
</div>
<!-- Checklist Form Ends -->

<!-- Bpm Controls Form Starts -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" id="bpmConytrolListForm" data-backdrop="static"
#bpmControlListFormModal >
<!-- <app-control-popup *ngIf="bpmControlListParams" [source]='bpmControlListParams'></app-control-popup> -->
<app-control-popup *ngIf = "ProcessStore.add_control_form_modal" [controlsModalTitle] = "controlsModalTitle"></app-control-popup>
</div>
<!-- Bpm Controls Form Ends -->

<!-- Required Forms Ends Here -->

<!-- Delete Popup Starts -->
<div class="modal modal-style-1 fade" id="delete-popup" #deletePopup>
   <app-delete-popup [source]="deleteObject"></app-delete-popup>
</div>
<!-- Delete Popup Ends -->

<!-- Document Review Modal Starts -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #reviewUpdatePopup>
   <app-review-update-popup *ngIf="DocumentWorkflowStore.showReviewUpdatePopup"></app-review-update-popup>
</div>
<!-- Document Review Modal Ends -->

<!-- Activity Log Starts -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #activityPopup>
   <app-activity-log *ngIf="DocumentWorkflowStore.showActivity"></app-activity-log>
</div>
<!-- Activity Log Ends -->

<!-- Document Checkin Modal Starts -->

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static"
   #checkinDocumentPopup>
   <app-document-checkin-popup *ngIf="DocumentWorkflowStore.checkinForm"></app-document-checkin-popup>
</div>
<!-- Document Checkin Modal Ends -->

<!-- Workflow Action Popup Starts -->
<div class="modal modal-style-1 email-popup-new fade" data-keyboard="false" data-backdrop="static" #workflowSubmitPopup>
   <app-workflow-submit-popup [source]="submitObject" *ngIf="DocumentWorkflowStore.submitPopup">
   </app-workflow-submit-popup>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #workflowActionPopup>
   <app-workflow-action-popup *ngIf="DocumentWorkflowStore.workflowActionPopup"></app-workflow-action-popup>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" *mobxAutorun data-backdrop="static"
   #reviewHistoryPopup>
   <app-document-review-history *ngIf="DocumentWorkflowStore.showHistoryPopup"></app-document-review-history>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" *mobxAutorun data-backdrop="static"
   style="overflow: scroll;" #workflowPopup>
   <app-workflow-popup *ngIf="DocumentWorkflowStore.showWorkflowPopup"></app-workflow-popup>
</div>

<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static"
   #workflowHistoryPopup>
   <app-workflow-history-popup *ngIf="DocumentWorkflowStore.showHistory"></app-workflow-history-popup>
</div>
<!-- Workflow Action Popup Ends -->

<!-- Document Edit Popup Starts -->
<!-- <div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #documentEditPopup>
   <app-edit-file [source]="EditDocumentData" *ngIf="showDocumentEditPopup"></app-edit-file>
</div> -->
<!-- Document Edit Popup Ends -->
