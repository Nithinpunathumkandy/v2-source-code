<button type="button" class="close" (click)="closeFormModal()"><i class="lni-close"></i><span>{{'esc' | translate}}</span></button>
<div class="modal-dialog modal-lg modal-dialog-centered" #formModal>
    <div class="modal-content" *mobxAutorun>
       <!-- Modal Header -->
       <div class="modal-header">
          <h4 class="modal-title">{{'kh_review_document' | translate}}</h4>
       </div>
       <!-- Modal body -->
       <div class="modal-body form-body">
          <!-- <form > -->

    
          <!-- <p class="head-details">{{'review_document_message' | translate}}
          </p> -->

          <div class="row">
            <div class="col-sm-12">
                <div class="form-group">
                    <span style="float: right;"><p class="text-grey mb-0">{{commentText != null ? commentText.length : 0}} {{'characters' | translate}}</p></span>
                    <label>{{'enter_comment' | translate}}</label>
                    <textarea class="form-control" rows="4" id="comment11" [(ngModel)]="commentText"
                        placeholder="{{'kh_review_comment' | translate}}"></textarea>
                </div>
            </div>
        </div>

          <!-- <h6>Choose File<sup>*</sup></h6> -->
          <label class="label-style">{{'choose_file' | translate}}</label>
                <!-- Common File Upload Starts Here -->
                <!-- <div class="scroll-documents" #uploadArea>
                 <div class="thumb-pics-bg thumb-pics-col-3 clearfix thumb-pics-fix-text" style="padding-top: 0;">
                    <div class="thumb-pics">
  
                       <div class="form-group form-group-upload">
                          <div class="darag-dropifile-upload">
                             <div class="d-flex justify-content-center align-items-center text-center">
                                <div>
                                   <img src="/assets/images/drag-pic.png" alt="image" class="drag-pic-files">
                                   <div class="drag-file-name"> Select or Upload Your File Here </div>
                                   <div class="upload-btn-wrapper">
                                      <button (click)="openFileUploadModal()" type="button" class="btn">{{'browse_files' |
                                         translate}}</button>
                                   </div>
                                </div>
                             </div>
                          </div>
                       </div>
                    </div>
  
                    <div class="thumb-pics" *ngFor="let docs of fileUploadPopupStore.displayFiles ;let i = index">
                       <div class="upload-pics edit-option" data-toggle="modal">
                          <div *ngIf="docs.id && !docs.preview" class="browse-form-pic"
                             [ngStyle]="{'background': 'url('+createImageUrl('document-version',docs?.token)+') no-repeat'}">
                          </div>
                          <div *ngIf="docs.preview" class="browse-form-pic"
                             [ngStyle]="{'background': 'url(' + docs?.preview + ') no-repeat 0 0 / cover'}">
                          </div>
                          <div class="browse-form-name clearfix">
                             <div class="float-left">
                                <h6>
                                   {{docs.title?docs.title:docs.name?docs.name:docs.version_title?docs.version_title:"NA"}}.{{docs.ext}}
                                </h6>
                                <span *ngIf="docs.is_kh_document" class="mr-2 cmn-clr"><i class="fas fa-book"></i></span>
                                <span *ngIf="!docs.is_kh_document" class="mr-2 cmn-clr"><i
                                      class="fas fa-laptop"></i></span>
                                <span>{{docs.size/1048576 | number:'0.2-2'}}MB</span>
                             </div>
                             <div class="browse-logo">
                                <img *ngIf="checkExtension(docs.ext,'image') != -1" class="folder-picher"
                                   src="/assets/images/jpg-icone.png">
                                <img *ngIf="checkExtension(docs.ext,'doc') != -1" class="folder-picher"
                                   src="/assets/images/word-icone.png">
                                <img *ngIf="checkExtension(docs.ext,'pdf') != -1" class="folder-picher"
                                   src="/assets/images/pdf-icone.png">
                                <img *ngIf="checkExtension(docs.ext,'excel') != -1" class="folder-picher"
                                   src="/assets/images/excel-icone.png">
                                <img *ngIf="checkExtension(docs.ext,'video') != -1" class="folder-picher"
                                   src="/assets/images/md-video.png">
                                <img *ngIf="checkExtension(docs.ext,'audio') != -1" class="folder-picher"
                                   src="/assets/images/md-audio.png">
                                <img *ngIf="checkExtension(docs.ext,'ppt') != -1" class="folder-picher"
                                   src="/assets/images/md-ppt.png">
                             </div>
                          </div>
                          <div class="edit-option-show">
                           <a (click) = "deleteDocuments(docs)"><i class="fas fa-trash"></i></a>
                        </div>
                       </div>
                    </div>
  
  
                 </div>
              </div>
                 -->

                 <div class="scroll-documents" #uploadArea>
                  <div class="row m-0 upload-section" style="padding-top: 0">
                      <div class="col-lg-4 col-sm-4 costmz-logo-new mt-2">
   
                          <div class="question-circle-inp"  style="margin-right: 7px;">
                              <i class="far fa-question-circle"></i>
                              <div class="message-password-inp">
                                  <p class="mb-0">{{'allowed_file_types' | translate}}
                                      {{OrganizationGeneralSettingsStore.organizationSettings?.support_file_allowed_types.toString()}}</p>
                              </div>
                          </div>
                          <div class="form-group form-group-upload">
                              <div class="darag-dropifile-upload">
                                  <div class="d-flex justify-content-center align-items-center text-center">
                                      <div>
                                          <img src="assets/images/drag-pic.png" class="drag-pic-files">
                                          <div class="drag-file-name"> {{'drag_drop_file_here' | translate}} </div>
                                          <div class="upload-btn-wrapper">
                                              <input type="file" id="file" multiple name="myfile"
                                                  (change)="onFileChange($event,'brochure')"
                                                  [accept]="checkAcceptFileTypes('brochure')" 
                                                  [disabled] = "checkLogoIsUploading()"
                                                  />
                                              <button class="btn">{{'browse_files' | translate}}</button>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                              <!-- <p style="color: red;">
                              </p> -->
                          </div>
                      </div>
   
                      <div [ngClass]="files.success? 'col-sm-4 col-lg-4 up-pic-cf mt-2 hide_loader' : 'col-sm-4 col-lg-4 up-pic-cf mt-2'"
                          *ngFor="let files of fileUploadsArray">
                          <div class="upload-pics edit-option file-upload-loader">
                              <circle-progress class="browse-form-pic" [percent]=files.uploadProgress
                                  [title]=files.uploadProgress>
                              </circle-progress>
                          </div>
                      </div>
                      <!-- [ngClass]="MasterListDocumentStore.docDetails ? 'col-sm-3 col-lg-3 up-pic-cf mt-2 ':'col-sm-3 col-lg-3 up-pic-cf mt-2'" -->
                      <div [ngClass]="MasterListDocumentStore.docDetails?.is_deleted ? 'col-sm-4 col-lg-4 up-pic-cf mt-2 image_deleted':'col-sm-4 col-lg-4 up-pic-cf mt-2'" *ngIf = "MasterListDocumentStore.docDetails" >
                         
                          <div class="upload-pics edit-option">
                              <div *ngIf="MasterListDocumentStore.docDetails" class="browse-form-pic"
                                  [ngStyle]="{'background': 'url(' + MasterListDocumentStore.docDetails?.preview_url + ') no-repeat 0 0 / cover'}">
                              </div>
                              <div class="browse-form-name clearfix">
                                  <div class="float-left">
                                      <h6>{{MasterListDocumentStore.docDetails?.name.length>15?MasterListDocumentStore.docDetails?.name.substring(0,15)+' ...':MasterListDocumentStore.docDetails?.name}}</h6>
                                      <span>{{MasterListDocumentStore.docDetails?.size/1048576 | number:'0.2-2'}}MB</span>
                                  </div>
                                  <div class="browse-logo">
                                      <img *ngIf="checkExtension(MasterListDocumentStore.docDetails?.ext,'excel') != -1"
                                          src="/assets/images/md-xl.png">
                                      <img *ngIf="checkExtension(MasterListDocumentStore.docDetails?.ext,'image') != -1"
                                          src="/assets/images/md-jpg.png">
                                      <img *ngIf="checkExtension(MasterListDocumentStore.docDetails?.ext,'doc') != -1"
                                          src="/assets/images/md-doc.png">
                                      <img *ngIf="checkExtension(MasterListDocumentStore.docDetails?.ext,'pdf') != -1"
                                          src="/assets/images/md-pdf.png">
                                  </div>
                              </div>
                              <div class="edit-option-show">
                                  <a (click)="removeDocument(MasterListDocumentStore.docDetails?.token)"><i class="fas fa-trash"></i></a>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
             
          <div class="row">
            <div class="col-sm-12">
              <div class="d-block justify-content-left border-0 mt-3">
                <button type="submit" class="btn btn-active" (click)="saveFiles()"
                  [disabled]="AppStore.loading || validationCheck()">{{ AppStore.loading  ? 'Loading...' : 'Save' }}</button>
                <button type="button" data-toggle="modal" data-target="#signal-lost" class="btn"
                  (click)="saveFiles(true)"
                  [disabled]="AppStore.loading || validationCheck()">{{ AppStore.loading  ? 'Loading...' : 'Save & Close' }}</button>
                <button type="button" data-toggle="modal" data-target="#error-message" class="btn"
                  (click)="closeFormModal()">{{ AppStore.loading  ? 'Loading...' : 'Cancel' }}</button>
  
              </div>
            </div>
          </div>

         <!-- </form> -->

       </div>
       <!-- Modal footer -->
    </div>
 </div>

 <!-- * Documetn Attach/Upload Common Component Starts Here -->
<div class="modal modal-style-1 popup-full-width fade" data-keyboard="false" data-backdrop="static" #fileUploadModal>

    <app-file-upload-popup [khEnabled]=false *ngIf="fileUploadPopupStore.openPopup"></app-file-upload-popup>
 
 </div>
 <!-- * Documetn Attach/Upload Common Component Ends Here -->

