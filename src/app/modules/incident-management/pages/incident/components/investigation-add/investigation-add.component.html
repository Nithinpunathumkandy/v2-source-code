<div class=" popup-full-width small-step-form-popup" id="incident-details-step-popup">
	<button type="button" class="close" data-dismiss="modal" (click)="cancel()"><i class="lni-close"></i><span>{{'esc' |
			translate}}</span></button>
	<div class="modal-dialog step-popup-modal">
		<div class="modal-content">
			<!-- Modal body -->
			<div class="modal-body form-body">


				<!-- multistep form -->
				<div class="step-form-small">
					<form [formGroup]="form" id="msform">
						<!-- progressbar -->
						<div class="small-step-progressbar-main">
							<ul id="progressbar">
								<li class="active"></li>
								<li></li>
								<li></li>
								<li></li>
								<li></li>
							</ul>
						</div>
						<!-- fieldsets -->
						<fieldset>
							<h2 class="fs-title">{{'incident_details' | translate}}</h2>

							<div class="mb-4">

								<div class="row">
									<div class="col-lg-4 col-sm-6 edit-option">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#incidentTitle"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'incident' | translate}} </h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.title}}</p>
									</div>
									<div class="col-lg-4 col-sm-6 edit-option">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#addTypeDamage"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'type_of_damage' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.incident_damage_type_id?.title}}
										</p>
									</div>
									<div class="col-lg-4 col-sm-6 edit-option">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#incidentAt"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'date_time' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.incident_at?
											(IncidentInvestigationStore.investigationIncidentObjects?.incident_at | date
											:
											OrganizationGeneralSettingsStore.organizationSettings?.date_time_format) :
											AppStore.noContentText}}</p>
									</div>
									<div class="col-sm-12 edit-option">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#incidentDesc"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'description' | translate}}</h6>
										<p style="white-space: pre-wrap;">
											{{IncidentInvestigationStore.investigationIncidentObjects?.description ? IncidentInvestigationStore.investigationIncidentObjects?.description : AppStore.noContentText}}</p>
									</div>
									<div class="col-lg-4 col-sm-6 edit-option">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#incidentReported"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'reported_date_time' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.reported_at?
											(IncidentInvestigationStore.investigationIncidentObjects?.reported_at | date
											:
											OrganizationGeneralSettingsStore.organizationSettings?.date_time_format) :
											AppStore.noContentText }}</p>
									</div>
									<div class="col-lg-4 col-sm-6 edit-option">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#addCategory"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'category' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.incident_category_ids.length
											> 0
											?
											IncidentInvestigationStore.investigationIncidentObjects?.incident_category_ids[0]?.title
											: AppStore.noContentText }}</p>
									</div>
									<div class="col-lg-4 col-sm-6 edit-option">
										<div class="edit-option-show"
											*ngIf="IncidentInvestigationStore.investigationIncidentObjects?.incident_category_ids.length > 0"
											style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#addSubCategory"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'incident_sub_category' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.incident_sub_category_ids.length
											> 0
											?
											IncidentInvestigationStore.investigationIncidentObjects?.incident_sub_category_ids[0]?.title
											: AppStore.noContentText}}</p>
									</div>
									<div class="col-lg-4 col-sm-6 edit-option">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#addreportedBy"><i
													class="fas fa-pen"></i></a>
										</div>
										<div class="label-and-user-pic">
											<h6>{{'reported_by' | translate}}</h6>
											<div class="d-flex flex-row user-list-sm">
												<app-user-popup-box
												   [source]=" getCreatedByPopupDetails(IncidentInvestigationStore.investigationIncidentObjects?.reported_by,IncidentInvestigationStore.investigationIncidentObjects?.reported_by)">
												</app-user-popup-box>
											</div>
											<!-- <div
												class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg"> -->
												<!-- <img src="images/round-7.png" class="rounded-circle rounde-hov details-show-popup" width="35px" height="35px"> -->
												<!-- <img [attr.src]="IncidentStore.IncidentItemDetails?.reported_by ? createImageUrl(AuthStore.user?.image_token) : getDefaultImage('user-logo')" -->
												<!-- width="30px" height="30px" class="rounded-circle">  -->
												<!-- <div class="pointer new-size-text">
													<h6>
														{{IncidentInvestigationStore.investigationIncidentObjects?.reported_by?.first_name}}
														{{IncidentInvestigationStore.investigationIncidentObjects?.reported_by?.last_name}}
													</h6> -->
													<!-- <span>Team Lead</span> -->
												<!-- </div>
											</div> -->
										</div>
									</div>
									<div class="col-lg-4 col-sm-6 edit-option">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#addInvolvedParty"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'invoved_party' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.incident_stakeholder_ids.length
											> 0
											?
											IncidentInvestigationStore.investigationIncidentObjects?.incident_stakeholder_ids[0]?.title
											: AppStore.noContentText}}</p>
									</div>
									<div *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_subsidiary"
										class="col-lg-4 col-sm-6 edit-option">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#addSusidary"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'subsidiary' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.organization_ids.length
											> 0
											?
											IncidentInvestigationStore.investigationIncidentObjects?.organization_ids[0]?.title
											:
											AppStore.noContentText}}</p>
									</div>
									<div *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division"
										class="col-lg-4 col-sm-6 edit-option">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#addDivision"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'division' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.division_ids.length
											> 0
											?
											IncidentInvestigationStore.investigationIncidentObjects?.division_ids[0]?.title
											:
											AppStore.noContentText}}</p>
									</div>
									<div class="col-lg-4 col-sm-6 edit-option"
										*ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_department">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#addDepartment"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'department' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.department_ids.length
											> 0
											?
											IncidentInvestigationStore.investigationIncidentObjects?.department_ids[0]?.title
											:
											AppStore.noContentText}}</p>
									</div>
									<div class="col-lg-4 col-sm-6 edit-option"
										*ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_section">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#addSection"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'section' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.section_ids.length
											> 0
											?
											IncidentInvestigationStore.investigationIncidentObjects?.section_ids[0]?.title
											:
											AppStore.noContentText }}</p>
									</div>
									<div class="col-lg-4 col-sm-6 edit-option"
										*ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_sub_section">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#addSubSection"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'sub_section' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.sub_section_ids.length
											> 0
											?
											IncidentInvestigationStore.investigationIncidentObjects?.sub_section_ids[0]?.title
											:
											AppStore.noContentText}}</p>
									</div>
									<div class="col-lg-4 col-sm-6 edit-option">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#incidentAction"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'action_taken' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.action ?
											IncidentInvestigationStore.investigationIncidentObjects?.action :
											AppStore.noContentText }}</p>
									</div>
									<div class="col-lg-4 col-sm-6 edit-option">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#incidentLocation"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'location' | translate}}</h6>
										<p>{{IncidentInvestigationStore.investigationIncidentObjects?.location ?
											IncidentInvestigationStore.investigationIncidentObjects?.location :
											AppStore.noContentText }}</p>
									</div>
								</div>

								<div class="row edit-option">
									<div class="col-sm-12 ">
										<div class="edit-option-show" style="margin: 32px 0 0 0;">
											<a data-toggle="modal" data-target="#incidentEvidence"><i
													class="fas fa-pen"></i></a>
										</div>
										<h6>{{'evidence' | translate}}</h6>
										<p *ngIf="IncidentInvestigationStore?.investigationIncidentObjects?.documents?.length==0">
											{{AppStore.noContentText}}</p>
									</div>
									<div class="col-sm-12">
										<div class="thumb-pics-bg thumb-pics-col-5 clearfix">
											<div class="thumb-pics "
												*ngFor="let doc of IncidentInvestigationStore.investigationIncidentObjects?.documents">
												<div class="upload-pics edit-option">
													<div *ngIf="doc.preview" class="browse-form-pic"
														[ngStyle]="{'background': 'url(' + doc.preview + ') no-repeat 0 0 / cover'}">
													</div>
													<div *ngIf="!doc.preview" class="browse-form-pic"
														[ngStyle]="{'background': 'url(' + createImageUrl('investigation-item',doc.token) + '), url(' + getDefaultImage('no-preview') + ') no-repeat 0 0 / cover '}">
													</div>
													<div class="browse-form-name clearfix">
														<div class="float-left">
															<h6 *ngIf="!doc.preview" [attr.title]="doc.title">
																{{doc?.title?.length > 13 ? doc.title.substring(0,13)+'
																...': doc?.title}}
															</h6>
															<h6 *ngIf="doc.preview">{{doc?.name?.length>15 ?
																doc?.name.substring(0,15)+' ...':doc?.name}}</h6>
															<span>{{doc.size/1048576 | number:'0.2-2'}}MB</span>
														</div>
														<div class="browse-logo">
															<img *ngIf="checkExtension(doc.ext,'image') != -1"
																src="/assets/images/md-jpg.png">
															<img *ngIf="checkExtension(doc.ext,'doc') != -1"
																src="/assets/images/word-icone.png">
															<img *ngIf="checkExtension(doc.ext,'pdf') != -1"
																src="/assets/images/pdf-icone.png">
															<img *ngIf="checkExtension(doc.ext,'excel') != -1"
																src="/assets/images/excel-icone.png">
															<img *ngIf="checkExtension(doc.ext,'video') != -1"
																src="/assets/images/md-video.png">
															<img *ngIf="checkExtension(doc.ext,'audio') != -1"
																src="/assets/images/md-audio.png">
															<img *ngIf="checkExtension(doc.ext,'ppt') != -1"
																src="/assets/images/md-ppt.png">
														</div>
													</div>
													<!-- <div class="edit-option-show-inner" title="Download Document">
                                            <a><i class="fas fa-download"
                                                    ></i></a>
                                                    <a data-toggle="modal" data-target="#incidentEvidence"><i class="fas fa-pen"
                                                      ></i></a>
                                        </div> -->
												</div>
											</div>
										</div>
									</div>
								</div>








							</div>



							<input type="button" name="next" class="next action-button btn-active" value="Next" />
							<input type="button" name="cancel" (click)="cancel()" data-dismiss="modal" class="btn" value="Cancel" />
						</fieldset>
						<fieldset>
							<h2 class="fs-title">{{'investigation' | translate}}</h2>

							<div class="mb-5">

								<div class="row">
									<div class="col-lg-6 col-sm-12">
										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
													<h6>{{'were_safe_work_practices' | translate}} <br>{{'being_used' |
														translate}}
													</h6>
													<div class="Preview-block pt-0">
														<div class="Preview-checkbox clearfix d-inline-block mr-3">
															<label class="container2 remember-txt mb-0">
																<input type="checkbox" [(ngModel)]='yes'
																	[ngModelOptions]="{standalone: true}"
																	(change)="onCheckboxChange1($event,'1')">
																<span class="checkmark"></span> Yes</label>
														</div>
														<div class="Preview-checkbox clearfix d-inline-block mr-3">
															<label class="container2 remember-txt mb-0">
																<input type="checkbox" [(ngModel)]='no'
																	[ngModelOptions]="{standalone: true}"
																	(change)="onCheckboxChange2($event,'2')">
																<span class="checkmark"></span> No</label>
														</div>
													</div>
												</div>
											</div>
											<div class="col-md-12">
												<div class="form-group">
													<label>{{'incident_investigations' | translate}} </label>
													<!-- (click)="addIncidentDes()" -->
													<button type="button"
														class="btn btn-active btn-small ml-3" data-toggle="modal"
														data-target="#incident-investigations-popup"
														(click)="addIncidentDes()"> <i
															class="fas fa-plus mr-2"></i>Add</button>
													<ul class="arrowlist pl-0 mt-2 mb-0"
														*ngIf="IncidentStore.investigationsDes.length > 0">


														<li *ngFor="let row of IncidentStore.investigationsDes"
															class="clearfix">
															{{row}}
															<button type="button"
																(click)="deleteInvestigations(row)"
																class="btn btn-small float-right btn-small-delete"
																style="border: none;"><i
																	class="fas fa-trash"></i></button>
														</li>


													</ul>

													<p *ngIf="IncidentStore.investigationsDes.length == 0">{{
														AppStore.noContentText}}</p>
												</div>
											</div>
											<div class="col-md-12">
												<div class="form-group">
													<label>{{'recommendations' | translate}}</label>
													<button type="button"
														class="btn btn-active btn-small ml-3" data-toggle="modal"
														data-target="#recommendations-popup"> <i
															class="fas fa-plus mr-2"></i>Add</button>
													<ul class="arrowlist pl-0 mt-2 mb-0"
														*ngIf="IncidentStore.recommendationsDes.length > 0">


														<li *ngFor="let row of IncidentStore.recommendationsDes"
															class="clearfix">
															{{row}}
															<button type="button"
																(click)="deleteRecommendations(row)"
																class="btn btn-small float-right btn-small-delete"
																style="border: none;"><i
																	class="fas fa-trash"></i></button>
														</li>

													</ul>
													<p *ngIf="IncidentStore.recommendationsDes.length == 0">{{
														AppStore.noContentText}}</p>

												</div>
											</div>
											<!-- <div class="col-md-12">
                                        
                                      </div> -->
										</div>








									</div>
									<div class="col-lg-6 col-sm-12">
										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
													<label for="name">{{'investigation_root_causes' | translate}}
													</label>
													<div class="clearfix d-flex">
														<div class="multiple-plain-ngselect select-width-plus">
															<ng-select
																[placeholder]="'investigation_root_cause_placeholder' | translate"
																[multiple]="true"
																formControlName="investigation_root_cause_ids"
																bindLabel="title" (search)="searchRootCause($event)"
																(open)="getRootCause()">
																<ng-option [value]="item"
																	*ngFor="let item of IncidentRootCauseMasterStore.allItems">
																	{{item.title.length > 80 ?
																	item.title.substring(0,80)+' ...' :
																	item.title }}
																</ng-option>

																<!-- <ng-template ng-option-tmp let-item="item" let-index="index">
                                               <div class="user-post-department-div">
                                                   {{item.title | titlecase}}
                                                
                                               </div>
                                           </ng-template> -->

															</ng-select>
														</div>
													</div>
												</div>
											</div>
											<div class="col-md-12">
												<div class="form-group">
													<label>{{'significant_observations' | translate}} </label>
													<button type="button"
														class="btn btn-active btn-small ml-3" data-toggle="modal"
														data-target="#significant-observations-popup"> <i
															class="fas fa-plus mr-2"></i>Add</button>
													<ul class="arrowlist pl-0 mt-2 mb-0">



														<li *ngFor="let row of IncidentStore.significantObservationsDes"
															class="clearfix">{{row}}
															<button type="button"
																(click)="deleteObservations(row)"
																class="btn btn-small float-right btn-small-delete"
																style="border: none;"><i
																	class="fas fa-trash"></i></button>
														</li>

													</ul>
													<p *ngIf="IncidentStore.significantObservationsDes.length == 0">{{
														AppStore.noContentText}}</p>

												</div>
											</div>
											<div class="col-md-12">
												<div class="form-group">
													<label>{{'references' | translate}} </label>
													<button type="button"
														class="btn btn-active btn-small ml-3" data-toggle="modal"
														data-target="#references-popup"> <i
															class="fas fa-plus mr-2"></i>Add</button>
													<ul class="arrowlist pl-0 mt-2 mb-0">

														<li *ngFor="let row of IncidentStore.referencesDes"
															class="clearfix">{{row}}
															<button type="button"
																(click)="deleteReferences(row)"
																class="btn btn-small float-right btn-small-delete"
																style="border: none;"><i
																	class="fas fa-trash"></i></button>
														</li>
													</ul>
													<p *ngIf="IncidentStore.referencesDes.length == 0">{{
														AppStore.noContentText}}
													</p>

												</div>
											</div>
											<!-- <div class="col-md-12">
                                       
                                      </div> -->
										</div>


									</div>
								</div>
								<div class="row">
									<!-- <div class="col-lg-6 col-sm-12">
                                 <div class="form-group">
                                    <label for="name">Damage Type</label>
                                    <div class="clearfix d-flex">
                                        <div class="multiple-plain-ngselect select-width-plus">
                                         <ng-select 
                                         [placeholder]="'incident_damage_type'| translate" [multiple]="false"
                                         formControlName="incident_damage_type_id" bindLabel="title"
                                         (search)="searchIncidentType($event)"
                                         (open)="getIncidentType()">
                                         <ng-option [value]="item" *ngFor="let item of IncidentDamageTypeMasterStore.allItems">
                                           {{item.title | titlecase}}
                                        </ng-option>
                                    
                 
                                     </ng-select>
                                        </div>
                                    </div>
                                 </div>
                                </div> -->

									<div class="col-lg-6 col-sm-12">
										<div class="form-group">
											<label for="name">{{'investigation_damage_severity' | translate}}</label>
											<div class="multiple-plain-ngselect select-width-plus">
												<ng-select
													[placeholder]="'investigation_damage_severity_placeholder'| translate"
													[multiple]="false" formControlName="incident_damage_severity_id"
													bindLabel="title" (search)="searchDamageSeverity($event)"
													(open)="getDamageSeverityCause()">
													<ng-option [value]="item"
														*ngFor="let item of IncidentDamageSeverityMasterStore.allItems">
														{{item.title.length > 80 ? item.title.substring(0,80)+' ...' :
														item.title }}
													</ng-option>


												</ng-select>
											</div>
										</div>
									</div>
								</div>


							</div>



							
							<input type="button" name="next" class="next action-button btn-active" value="Next" />
							<input type="button" name="previous" class="previous action-button" value="Previous" />
							<input type="button" name="cancel" (click)="cancel()" data-dismiss="modal" class="btn" value="Cancel" />
						</fieldset>
						<fieldset>
							<h2 class="fs-title">{{'person_involved' | translate}}</h2>

							<div class="mb-5">

								<div class="common-tab-md clearfix">
									<div class="tab-common-left-md">
										<div class=" issues-tab active-right-border-none">
											<!-- tab menu start -->
											<ul class="nav nav-tabs nav-tabs--vertical nav-tabs--left vertical-tab"
												role="navigation">
												<li class="nav-item"> <a href="#step-inner-left-one"
														class="nav-link active" data-toggle="tab" role="tab"
														aria-controls="lorem" aria-selected="false">{{'employee' |
														translate}}</a>
												</li>
												<li class="nav-item"> <a href="#step-inner-left-two" class="nav-link"
														data-toggle="tab" role="tab" aria-controls="ipsum"
														aria-selected="false">{{'others' | translate}}</a>
												</li>
											</ul>
										</div><!-- tab menu end -->
									</div>

									<div
										class="tab-common-left-content-m bg-white cmn-bdr widg-padding-cmn min-height-590">
										<div class="tab-content">
											<div class="tab-pane fade active show" id="step-inner-left-one"
												role="tabpanel">

												<!-- <div class="clearfix mb-2">
													<button type="button"
														class="btn btn-small float-right" data-toggle="modal"
														data-target="#person-involved-employee-pop"
														style="margin-right: 0 !important;"> <i
															class="fas fa-plus mr-2"></i>Add</button>
												</div> -->
												<div class="cmn-bdr px-3 py-2 d-flex mb-3 align-items-center">
													<h6 class="mb-0 w-100">Add Employee</h6>
													<div class="text-right ml-2" style="width: 100px;">
														<button type="button" class="btn btn-small" data-toggle="modal" data-target="#person-involved-employee-pop"
															style="margin: 0 !important;">Add</button>
													</div>
												</div>

												<div class="audit-page-table-main">
													<div class="row">
														<div class="col-sm-12 full-width-table">
															<table
																class="table table-bordered ordinary-table audit-page-table mb-4 table-scroll"
																*ngIf="IncidentInvestigationStore.involvedOtherUserDetails?.length > 0">
																<thead>
																	<tr>
																		<th class="border-top-0 text-center" width="2%">
																			#</th>
																		<th class="border-top-0" width="28%">{{'users' |
																			translate}}</th>
																		<!-- <th class="border-top-0" width="70%">{{'	remarks' | translate}}</th> -->
																	</tr>
																</thead>
																<tbody>
																	<tr *ngFor="let involved of IncidentInvestigationStore.involvedOtherUserDetails;let num = index"
																		class="edit-and-delete-main">
																		<td class="text-center">{{num+1}}</td>
																		<td>
																			<div
																				class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
																				<!-- <img src="images/round-15.png" width="30px" height="30px" class="rounded-circle rounde-hov details-show-popup"> -->
																				<img *ngIf="involved.image?.token"
																					data-toggle="modal"
																					data-target="#user02"
																					data-ui-class="a-zoom"
																					[attr.src]="createImagePreview('user-profile-picture',involved.image?.token)"
																					width="30px" height="30px"
																					class="rounded-circle rounde-hov details-show-popup"
																					onerror="this.src='/assets/images/user-demo2.png'">
																				<img *ngIf="!involved.image?.token"
																					[attr.src]="getDefaultImage('user-logo')"
																					width="30px" height="30px"
																					class="rounded-circle"
																					onerror="this.src='/assets/images/user-demo2.png'">
																				<div>
																					<h6>{{involved.first_name}}
																						{{involved.last_name}}</h6>
																					<span>{{involved.designation?
																						involved.designation :
																						involved.designation_title
																						}}</span>

																				</div>
																			</div>
																			<div
																				class="edit-option-show"
																				style="margin: 38px 16px 0 0; ">
																				<!-- edit-and-delete starts -->
																				<!-- <a (click)="editInvolvedOthers(user,num)" data-toggle="modal" data-target="#person-involved-popup"><i class="fas fa-pen"></i></a> -->
																				<a
																					(click)="deleteOtherInvovedPerson(involved.first_name)"><i
																						class="fas fa-trash"></i></a>
																			</div>
																		</td>
																		<!-- <td>Lorem ipsum lorel ipsum lorel ipsum lorel ipsum lorel ipsum lorel ipsum </td> -->
																	</tr>
																</tbody>
															</table>

															<ng-container *mobxAutorun>
																<app-no-data-list [source]="investigationEmptyList"
																	*ngIf="IncidentInvestigationStore.involvedOtherUserDetails.length == 0 ">
																</app-no-data-list>
															</ng-container>
														</div>
													</div>

													<div class="row">
														<!-- <div class="col-sm-12">
                                            <ul class="pagination justify-content-center mt-0">
                                               <li class="page-item"><a class="page-link" href="javascript:void(0);"><i class="fas fa-chevron-left"></i></a></li>
                                               <li class="page-item"><a class="page-link active" href="javascript:void(0);">1</a></li>
                                               <li class="page-item"><a class="page-link" href="javascript:void(0);">2</a></li>
                                               <li class="page-item"><a class="page-link" href="javascript:void(0);"><i class="fas fa-chevron-right"></i></a></li>
                                               <li class="page-item"><input type="text" class="pagination-input" placeholder="100"></li>
                                               <li class="page-item"><a class="page-link per-page">Per Page</a></li>
                                            </ul>
                                         </div> -->
													</div>
												</div>



											</div>
											<div class="tab-pane fade" id="step-inner-left-two" role="tabpanel">

												<!-- <div class="clearfix mb-2">
													<button type="button"
														class="btn btn-small float-right" data-toggle="modal"
														data-target="#person-involved-popup"
														style="margin-right: 0 !important;"> <i
															class="fas fa-plus mr-2"></i>Add</button>
												</div> -->
												<div class="cmn-bdr px-3 py-2 d-flex mb-3 align-items-center">
													<h6 class="mb-0 w-100">Add other user</h6>
													<div class="text-right ml-2" style="width: 100px;">
														<button type="button" class="btn btn-small" data-toggle="modal" data-target="#person-involved-popup"
															style="margin: 0 !important;">Add</button>
													</div>
												</div>

												<div class="row"
													*ngIf="IncidentStore.involvedOtherUserDetails?.length > 0">
													<div class="col-lg-6 col-sm-12 edit-and-delete-main"
														*ngFor=" let user of  IncidentStore.involvedOtherUserDetails">
														<div class="hover-body-clr-bg cmn-bdr padding-bottom-none mb-4">
															<h6>{{user?.name}}</h6>
															<a class="call-and-mail-link mr-3 call-link"><i
																	class="fas fa-phone rotate-icon-call"></i>{{user.mobile}}</a>
															<a *ngIf="user?.email"
																class="call-and-mail-link mail-link"><i
																	class="fas fa-envelope"></i>{{user?.email}}</a>
															<hr>
															<div class="row">
																<div class="col-md-6">
																	<h6>{{'designation' | translate}}</h6>
																	<p>{{user?.designation?user.designation :
																		AppStore.noContentText }}</p>
																</div>
																<div class="col-md-6">
																	<h6>{{'company_name' | translate}}</h6>
																	<p>{{user.company?user.company :
																		AppStore.noContentText }}</p>
																</div>
																<div class="col-md-6">
																	<h6>{{'age' | translate}}</h6>
																	<p>{{user.age?user.age : AppStore.noContentText }}
																	</p>
																</div>
																<div class="col-md-6">
																	<h6>{{'gender' | translate}}</h6>
																	<p>{{user.gender?user.gender :
																		AppStore.noContentText }}</p>
																</div>
																<div class="col-md-12">
																	<h6>{{'remarks' | translate}}</h6>
																	<p class="elips-1" [title]="user.remarks">{{user.remarks?user.remarks :
																		AppStore.noContentText }}</p>
																</div>
															</div>

														</div>
														<div class="edit-option-show"
															style="margin: 38px 16px 0 0; ">
															<!-- edit-and-delete starts -->
															<!-- <a (click)="editInvolvedOthers(user,num)" data-toggle="modal" data-target="#person-involved-popup"><i class="fas fa-pen"></i></a> -->
															<a (click)="deleteOthersInvovedPersons(user.name)"><i
																	class="fas fa-trash"></i></a>
														</div>
													</div>

												</div>
												<ng-container *mobxAutorun>
													<app-no-data-list [source]="investigationEmptyList"
														*ngIf="IncidentStore.involvedOtherUserDetails.length == 0 ">
													</app-no-data-list>
												</ng-container>



											</div>
										</div>
									</div>

								</div>


							</div>
							<input type="button" name="next" class="next action-button btn-active" value="Next" />
							<input type="button" name="previous" class="previous action-button" value="Previous" />
							<input type="button" name="cancel" (click)="cancel()" data-dismiss="modal" class="btn" value="Cancel" />
							
						</fieldset>
						<fieldset>
							<h2 class="fs-title">{{'witness' | translate}}</h2>

							<div class="mb-5">

								<div class="common-tab-md clearfix">
									<div class="tab-common-left-md">
										<div class=" issues-tab active-right-border-none">
											<!-- tab menu start -->
											<ul class="nav nav-tabs nav-tabs--vertical nav-tabs--left vertical-tab"
												role="navigation">
												<li class="nav-item"> <a href="#step-inner-witness-one"
														class="nav-link active" data-toggle="tab" role="tab"
														aria-controls="lorem" aria-selected="false">{{'employee' |
														translate}}</a>
												</li>
												<li class="nav-item"> <a href="#step-inner-witness-two" class="nav-link"
														data-toggle="tab" role="tab" aria-controls="ipsum"
														aria-selected="false">{{'others' | translate}}</a>
												</li>
											</ul>
										</div><!-- tab menu end -->
									</div>

									<div
										class="tab-common-left-content-m bg-white cmn-bdr widg-padding-cmn min-height-590">
										<div class="tab-content">
											<div class="tab-pane fade active show" id="step-inner-witness-one"
												role="tabpanel">

												<!-- <div class="clearfix mb-2">
													<button type="button"
														class="btn btn-small float-right" data-toggle="modal"
														data-target="#witness-employee-pop"
														style="margin-right: 0 !important;"> <i
															class="fas fa-plus mr-2"></i>{{'add' | translate}}</button>
												</div> -->
												<div class="cmn-bdr px-3 py-2 d-flex mb-3 align-items-center">
													<h6 class="mb-0 w-100">Add Employee</h6>
													<div class="text-right ml-2" style="width: 100px;">
														<button type="button" class="btn btn-small" data-toggle="modal" data-target="#witness-employee-pop"
															style="margin: 0 !important;">Add</button>
													</div>
												</div>

												<div class="audit-page-table-main">
													<div class="row">
														<div class="col-sm-12 full-width-table">
															<table
																class="table table-bordered ordinary-table audit-page-table mb-4 table-scroll">
																<thead>
																	<tr>
																		<th class="border-top-0 text-center" width="2%">
																			#</th>
																		<th class="border-top-0" width="28%">{{'user' |
																			translate}}</th>
																		<!-- <th class="border-top-0" width="70%">{{'remarks' | translate}}</th> -->
																	</tr>
																</thead>
																<tbody>
																	<tr *ngFor="let witness of IncidentInvestigationStore.involvedWitnessUserDetails; let num = index"
																		class="edit-and-delete-main">
																		<td class="text-center">{{num+1}}</td>
																		<td>
																			<div
																				class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
																				<!-- <img src="images/round-15.png" width="30px" height="30px" class="rounded-circle rounde-hov details-show-popup"> -->
																				<img *ngIf="witness.image?.token"
																					data-toggle="modal"
																					data-target="#user02"
																					data-ui-class="a-zoom"
																					[attr.src]="createImagePreview('user-profile-picture',witness.image?.token)"
																					width="30px" height="30px"
																					class="rounded-circle rounde-hov details-show-popup"
																					onerror="this.src='/assets/images/user-demo2.png'">
																				<img *ngIf="!witness.image?.token"
																					[attr.src]="getDefaultImage('user-logo')"
																					width="30px" height="30px"
																					class="rounded-circle"
																					onerror="this.src='/assets/images/user-demo2.png'">
																				<div>
																					<h6>{{witness.first_name}}
																						{{witness.last_name}}</h6>
																					<span>{{witness.designation?
																						witness.designation :
																						witness.designation_title
																						}}</span>
																				</div>
																			</div>
																			<div
																				class="edit-option-show"
																				style="margin: 38px 16px 0 0; ">
																				<!-- edit-and-delete starts -->
																				<!-- <a (click)="editInvolvedOthers(user,num)" data-toggle="modal" data-target="#person-involved-popup"><i class="fas fa-pen"></i></a> -->
																				<a
																					(click)="deleteOtherWitnessPerson(witness.first_name)"><i
																						class="fas fa-trash"></i></a>
																			</div>
																		</td>
																		<!-- <td>Lorem ipsum lorel ipsum lorel ipsum lorel ipsum lorel ipsum lorel ipsum </td> -->
																	</tr>
																</tbody>
															</table>
															<ng-container *mobxAutorun>
																<app-no-data-list [source]="investigationEmptyList"
																	*ngIf="IncidentInvestigationStore.involvedWitnessUserDetails.length == 0 ">
																</app-no-data-list>
															</ng-container>
														</div>
													</div>

													<div class="row">
														<!-- <div class="col-sm-12">
                                            <ul class="pagination justify-content-center mt-0">
                                               <li class="page-item"><a class="page-link" href="javascript:void(0);"><i class="fas fa-chevron-left"></i></a></li>
                                               <li class="page-item"><a class="page-link active" href="javascript:void(0);">1</a></li>
                                               <li class="page-item"><a class="page-link" href="javascript:void(0);">2</a></li>
                                               <li class="page-item"><a class="page-link" href="javascript:void(0);"><i class="fas fa-chevron-right"></i></a></li>
                                               <li class="page-item"><input type="text" class="pagination-input" placeholder="100"></li>
                                               <li class="page-item"><a class="page-link per-page">Per Page</a></li>
                                            </ul>
                                         </div> -->
													</div>

												</div>



											</div>
											<div class="tab-pane fade" id="step-inner-witness-two" role="tabpanel">

												<!-- <div class="clearfix mb-2">
													<button type="button"
														class="btn btn-small float-right" data-toggle="modal"
														data-target="#other-involved-popup"
														style="margin-right: 0 !important;"> <i
															class="fas fa-plus mr-2"></i>{{'add' | translate}}</button>
												</div> -->
												<div class="cmn-bdr px-3 py-2 d-flex mb-3 align-items-center">
													<h6 class="mb-0 w-100">Add Other witness</h6>
													<div class="text-right ml-2" style="width: 100px;">
														<button type="button" class="btn btn-small" data-toggle="modal" data-target="#other-involved-popup"
															style="margin: 0 !important;">Add</button>
													</div>
												</div>

												<div class="row">
													<div class="col-lg-6 col-sm-12 edit-and-delete-main"
														*ngFor=" let user of  IncidentStore.involvedWitnessUserDetails">
														<div class="hover-body-clr-bg cmn-bdr padding-bottom-none mb-4"
															*ngIf="IncidentStore.involvedWitnessUserDetails.length != 0 ">
															<h6>{{user?.name? user.name : AppStore.noContentText}}</h6>
															<a class="call-and-mail-link mr-3 call-link"><i
																	class="fas fa-phone rotate-icon-call"></i>{{user?.mobile?
																user.mobile : AppStore.noContentText}}</a>
															<a *ngIf="user?.email"
																class="call-and-mail-link mail-link"><i
																	class="fas fa-envelope"></i>{{user?.email?
																user.email : AppStore.noContentText}}</a>
															<hr>
															<div class="row">
																<div class="col-md-6">
																	<h6>{{'designation' | translate}}</h6>
																	<p>{{user?.designation? user.designation :
																		AppStore.noContentText}}</p>
																</div>
																<div class="col-md-6">
																	<h6>{{'company_name' | translate}}</h6>
																	<p>{{user?.company? user.company :
																		AppStore.noContentText}}</p>
																</div>
															</div>

														</div>
														<div class="edit-option-show"
															style="margin: 38px 16px 0 0; ">
															<!-- edit-and-delete starts -->
															<!-- <a (click)="editInvolvedOthers(user,num)" data-toggle="modal" data-target="#person-involved-popup"><i class="fas fa-pen"></i></a> -->
															<a (click)="deleteOthersWitnessPersons(user.name)"><i
																	class="fas fa-trash"></i></a>
														</div>
													</div>



												</div>
												<ng-container *mobxAutorun>
													<app-no-data-list [source]="investigationEmptyList"
														*ngIf="IncidentStore.involvedWitnessUserDetails.length == 0 ">
													</app-no-data-list>
												</ng-container>


											</div>
										</div>
									</div>

								</div>


							</div>


							
							<input type="button" name="next" class="next action-button btn-active" value="Next" />
							<input type="button" name="previous" class="previous action-button" value="Previous" />
							<input type="button" name="cancel" (click)="cancel()" data-dismiss="modal" class="btn" value="Cancel" />
						</fieldset>

						<fieldset>
							<h2 class="fs-title">{{'preview_save' | translate}}</h2>

							<div class="mb-5">
								<div class="row">
									<div class="col-sm-12 col-lg-8 padding-right-0">
										<div class="bg-white">
											<div class="issue-top-sec">
												<div class="clearfix">
													<h5 class="d-inline-block cmn-head-style label-tag-style"><span
															class="issue-smoal-head-text">#{{IncidentStore.IncidentItemDetails?.reference_code}}</span>
														{{IncidentInvestigationStore.investigationIncidentObjects.title
														?IncidentInvestigationStore.investigationIncidentObjects.title
														:AppStore.noContentText}}<span
															class="border-left issue-smoal-head-text border-right-0 pl-2 ml-2">{{IncidentInvestigationStore.investigationIncidentObjects.incident_damage_type_id?IncidentInvestigationStore.investigationIncidentObjects.incident_damage_type_id.title:AppStore.noContentText}}</span>
													</h5>
												</div>
												<div class="clearfix">
													<p [ngClass]="IncidentInvestigationStore.investigationIncidentObjects?.description ? 'label-tag-style mb-2' : 'label-tag-style mb-3'"><i
															class="fas fa-calendar-alt date-pics-two"></i>{{IncidentInvestigationStore.investigationIncidentObjects?.incident_at
														?
														(IncidentInvestigationStore.investigationIncidentObjects?.incident_at
														| date :
														OrganizationGeneralSettingsStore.organizationSettings?.date_time_format)
														: AppStore.noContentText }}</p>
												</div>
												<p *ngIf="IncidentInvestigationStore.investigationIncidentObjects?.description">{{IncidentInvestigationStore.investigationIncidentObjects?.description
													?
													IncidentInvestigationStore.investigationIncidentObjects?.description:AppStore.noContentText}}
												</p>
											</div>

											<div class="row">
												<div class="col-lg-4 col-sm-6">
													<h6>{{'reported_date_time' | translate}}</h6>
													<p>{{IncidentInvestigationStore.investigationIncidentObjects?.reported_at
														?
														(IncidentInvestigationStore.investigationIncidentObjects?.reported_at
														| date :
														OrganizationGeneralSettingsStore.organizationSettings?.date_time_format)
														: AppStore.noContentText }}</p>
												</div>
												<div class="col-lg-4 col-sm-6">
													<h6>{{'category' | translate}} </h6>
													<p>{{IncidentInvestigationStore.investigationIncidentObjects.incident_category_ids.length>0
														?
														IncidentInvestigationStore.investigationIncidentObjects.incident_category_ids[0].title
														: AppStore.noContentText }}</p>
												</div>
												<div class="col-lg-4 col-sm-6">
													<h6>{{'incident_sub_category' | translate}}</h6>
													<p>{{IncidentInvestigationStore.investigationIncidentObjects.incident_sub_category_ids.length>0
														?
														IncidentInvestigationStore.investigationIncidentObjects.incident_sub_category_ids[0].title:AppStore.noContentText}}
													</p>
												</div>
												<div class="col-lg-4 col-sm-6">
													<div class="label-and-user-pic">
														<h6>{{'reported_by' | translate}}</h6>
														<div class="d-flex flex-row user-list-sm">
															<app-user-popup-box
															   [source]=" getCreatedByPopupDetails(IncidentInvestigationStore.investigationIncidentObjects?.reported_by,IncidentInvestigationStore.investigationIncidentObjects?.reported_by)">
															</app-user-popup-box>
														</div>
														<!-- <div
															class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg"> -->
															<!-- <img src="images/round-7.png" class="rounded-circle rounde-hov details-show-popup" width="35px" height="35px"> -->

															<!-- <div class="pointer">
																<h6>{{IncidentInvestigationStore.investigationIncidentObjects.reported_by?IncidentInvestigationStore.investigationIncidentObjects.reported_by.first_name:AppStore.noContentText}}
																	{{IncidentInvestigationStore.investigationIncidentObjects.reported_by?IncidentInvestigationStore.investigationIncidentObjects.reported_by.last_name:AppStore.noContentText}}
																</h6>
																<span>{{IncidentInvestigationStore.investigationIncidentObjects.reported_by?IncidentInvestigationStore.investigationIncidentObjects.reported_by.designation:AppStore.noContentText}}</span>
															</div>
														</div> -->
													</div>
												</div>
												<div class="col-lg-4 col-sm-6">
													<h6>{{'involved_party' | translate}}</h6>
													<p>{{IncidentInvestigationStore.investigationIncidentObjects.incident_stakeholder_ids.length
														> 0 ?
														IncidentInvestigationStore.investigationIncidentObjects.incident_stakeholder_ids[0].title
														: AppStore.noContentText}}</p>
												</div>
												<div class="col-lg-4 col-sm-6"
													*ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_subsidiary">
													<h6>{{'subsidiary' | translate}}</h6>
													<p>{{IncidentInvestigationStore.investigationIncidentObjects.organization_ids.length
														> 0 ?
														IncidentInvestigationStore.investigationIncidentObjects.organization_ids[0].title:AppStore.noContentText}}
													</p>
												</div>
												<div class="col-lg-4 col-sm-6"
													*ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division">
													<h6>{{'division' | translate}}</h6>
													<p>{{IncidentInvestigationStore.investigationIncidentObjects.division_ids.length
														> 0
														?IncidentInvestigationStore.investigationIncidentObjects.division_ids[0].title:AppStore.noContentText}}
													</p>
												</div>
												<div class="col-lg-4 col-sm-6"
													*ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_department">
													<h6>{{'department' | translate}}</h6>
													<p>{{IncidentInvestigationStore.investigationIncidentObjects.department_ids.length
														> 0 ?
														IncidentInvestigationStore.investigationIncidentObjects.department_ids[0].title:AppStore.noContentText}}
													</p>
												</div>
												<div class="col-lg-4 col-sm-6"
													*ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_section">
													<h6>{{'section' | translate}}</h6>
													<p>{{IncidentInvestigationStore.investigationIncidentObjects.section_ids.length
														> 0
														?IncidentInvestigationStore.investigationIncidentObjects.section_ids[0].title:AppStore.noContentText}}
													</p>
												</div>
												<div class="col-lg-4 col-sm-6"
													*ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_sub_section">
													<h6>{{'sub_section' | translate}}</h6>
													<p>{{IncidentInvestigationStore.investigationIncidentObjects.sub_section_ids.length
														> 0 ?
														IncidentInvestigationStore.investigationIncidentObjects.sub_section_ids[0].title:AppStore.noContentText}}
													</p>
												</div>
												<div class="col-lg-4 col-sm-6">
													<h6>{{'action_taken' | translate}}</h6>
													<p>{{IncidentInvestigationStore.investigationIncidentObjects.action?IncidentInvestigationStore.investigationIncidentObjects.action:AppStore.noContentText}}
													</p>
												</div>
												<div class="col-lg-4 col-sm-6">
													<h6>{{'incident_root_cause' | translate}} </h6>
													<p *ngFor="let cause of form.value.investigation_root_cause_ids">
														{{cause?.title ? cause?.title : AppStore.noContentText}}</p>
													<p *ngIf="form.value.investigation_root_cause_ids?.length == 0">{{AppStore.noContentText}}</p>
												</div>
												<div class="col-lg-4 col-sm-6">
													<h6>{{'were_safe_work_practices_being_used' | translate}}</h6>
													<p *ngIf="form.value.is_safe_work == 1">{{'yes' | translate}}</p>
													<p *ngIf="form.value.is_safe_work == 2">{{'no' | translate}}</p>

												</div>
												<div class="col-lg-4 col-sm-6">
													<h6>{{'incident_damage_types' | translate}}</h6>
													<p>{{IncidentInvestigationStore.investigationIncidentObjects.incident_damage_type_id?IncidentInvestigationStore.investigationIncidentObjects.incident_damage_type_id.title:AppStore.noContentText}}
													</p>
												</div>
												<div class="col-lg-4 col-sm-6">
													<h6>{{'incident_damage_severity' | translate}}</h6>
													<p>{{form.value.incident_damage_severity_id?.title ? form.value.incident_damage_severity_id?.title : AppStore.noContentText}}
													</p>
													
												</div>

											</div>

											<div class="row">
												<div class=" col-sm-12">
													<h6>{{'incident_investigations' | translate}}</h6>
													<ul class="arrowlist pl-0 mt-2"
													*ngIf="IncidentStore.investigationsDes?.length > 0">
														
														<li style="white-space: pre-wrap;"
															*ngFor="let row of IncidentStore.investigationsDes">{{row}}
														</li>
													</ul>
													<p *ngIf="IncidentStore.investigationsDes.length == 0">
														{{AppStore.noContentText}}</p>
												</div>
												<div class=" col-sm-12">
													<h6>{{'significant_observations' | translate}} </h6>
													<ul class="arrowlist pl-0 mt-2"
													*ngIf="IncidentStore.significantObservationsDes?.length > 0">
														
														<li style="white-space: pre-wrap;"
															*ngFor="let row of IncidentStore.significantObservationsDes">
															{{row}}</li>
													</ul>
													<p *ngIf="IncidentStore.significantObservationsDes.length == 0">
															{{AppStore.noContentText}}</p>
												</div>
												<div class=" col-sm-12">
													<h6>{{'recommendations' | translate}} </h6>
													<ul class="arrowlist pl-0 mt-2"
													*ngIf="IncidentStore.recommendationsDes?.length > 0">
														
														<li style="white-space: pre-wrap;"
															*ngFor="let row of IncidentStore.recommendationsDes">{{row}}
														</li>
													</ul>
													<p *ngIf="IncidentStore.recommendationsDes.length == 0">
														{{AppStore.noContentText}}</p>
												</div>
												<div class=" col-sm-12">
													<h6>{{'references' | translate}} </h6>
													<ul class="arrowlist pl-0 mt-2"
													*ngIf="IncidentStore.referencesDes?.length > 0">
													
														<li style="white-space: pre-wrap;"
															*ngFor="let row of IncidentStore.referencesDes">{{row}}</li>
													</ul>
													<p *ngIf="IncidentStore.referencesDes.length == 0">
														{{AppStore.noContentText}}</p>
												</div>
											</div>

										</div>
									</div>
									<div class="col-sm-12 col-lg-4">
										<h5 class="cmn-head-style">{{'person_involved' | translate}}</h5>
										<div class="risk-rating-box bg-white p-3 mb-3">
											<h6 class="text-left">{{'employee' | translate}}</h6>
											<hr class="mt-0 mb-3">

											<div class="row"
											*ngIf="IncidentInvestigationStore.investigationItemDetails?.investigation_involved_users > 0">
												<div class=" col-lg-6 col-sm-12 text-left"
												   *ngFor="let involved of IncidentInvestigationStore.investigationItemDetails?.investigation_involved_users; let isLast=last">
							  
													  <div
														 class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
														 <app-user-popup-box [source]="assignUserValues(involved)" [showName]="true">
														 </app-user-popup-box>
							  
													  </div>
												</div>
											 </div>
											 <p class="text-left" *ngIf="IncidentInvestigationStore.investigationItemDetails?.investigation_involved_users?.length == 0">
												 {{AppStore.noContentText}}
											 </p>

											<h6 class="text-left mt-3">{{'others' | translate}}</h6>
											<hr class="mt-0 mb-3">
											 <div *ngIf="IncidentStore.involvedOtherUserDetails?.length > 0">
												<div *ngFor="let data of involvedOthers()"
												class="name-and-position name-and-position-bdr cmn-bdr text-left">
												<div class="row">
													<div class="col-sm-12">
														<!-- <h6 >Description</h6> -->
														<p *ngIf="data.remarks">{{data?.remarks}} </p>
													</div>
													<div class="col-sm-12">
														<h6>{{data?.name ? data.name : AppStore.noContentText }} </h6>
														<span> {{data?.mobile ? data.mobile :
															AppStore.noContentText}}</span>
													</div>
													<div class="col-sm-6 col-lg-6">
														<h6 class="mt-3">Gender</h6>
														<span>{{data?.gender ? data.gender :
															AppStore.noContentText}}</span>
													</div>
													<div class="col-sm-6 col-lg-6">
														<h6 class="mt-3">Age</h6>
														<span>{{data?.age ? data.age : AppStore.noContentText }}</span>
													</div>
													<div class="col-sm-12 col-lg-6">
														<h6 class="mt-3">Designation</h6>
														<span>{{data?.designation ? data.designation:
															AppStore.noContentText}}</span>
													</div>
													<div class="col-sm-12">
														<h6 class="mt-3">Email</h6>
														<span>{{data?.email ? data.email :
															AppStore.noContentText}}</span>
													</div>
													<div class="col-sm-12">
														<h6 class="mt-3">Company Name</h6>
														<span>{{data?.company? data.company: AppStore.noContentText
															}}</span>
													</div>
												</div>
											</div>
											 </div>
											<p class="text-left" *ngIf="IncidentStore.involvedOtherUserDetails?.length == 0">
												{{AppStore.noContentText}}
											</p>

											<a class="view-more-pestel-box text-center"
												*ngIf="IncidentStore.involvedOtherUserDetails?.length > 2"
												data-toggle="modal" data-target="#others-popup"
												(click)="openOtherInvolvedPerson()">{{'view_more' | translate}}</a>

										</div>

										<h5 class="cmn-head-style mt-3">{{'witness' | translate}}</h5>
										<div class="risk-rating-box bg-white p-3 mb-3">
											<h6 class="text-left">{{'employee' | translate}}</h6>
											<hr class="mt-0 mb-3">
											<div class="row"
											*ngIf="IncidentInvestigationStore.investigationItemDetails?.investigation_witness_users?.length > 0">
												<div class=" col-lg-6 col-sm-12 text-left"
												   *ngFor="let witness of IncidentInvestigationStore.investigationItemDetails?.investigation_witness_users; let isLast=last">
							  
													  <div
														 class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg">
														 <app-user-popup-box [source]="assignUserValues(witness)" [showName]="true">
														 </app-user-popup-box>
							  
													  </div>
												</div>
											 </div>
											 <p class="text-left" *ngIf="IncidentInvestigationStore.investigationItemDetails?.investigation_witness_users?.length == 0">
												{{AppStore.noContentText}}
											</p>

											<h6 class="text-left mt-3">{{'others' | translate}}</h6>
											<hr class="mt-0 mb-3">
											<div *ngIf="IncidentStore.involvedWitnessUserDetails?.length > 0">
												<div *ngFor="let data of othersWitness()"
												class="name-and-position name-and-position-bdr cmn-bdr text-left">
												<div class="row">
													<div class="col-sm-12">
														<!-- <h6 >Description</h6> -->
														<p *ngIf="data?.remarks">{{data?.remarks? data?.remarks :
															AppStore.noContentText }} </p>
													</div>
													<div class="col-sm-12">
														<h6>{{data?.name ? data.name : AppStore.noContentText }} </h6>
														<span> {{data?.mobile ? data.mobile :
															AppStore.noContentText}}</span>
													</div>

													<div class="col-sm-12 col-lg-6">
														<h6 class="mt-3">{{'designation' | translate}}</h6>
														<span>{{data?.designation ? data.designation:
															AppStore.noContentText}}</span>
													</div>
													<div class="col-sm-12">
														<h6 class="mt-3">{{'email' | translate}}</h6>
														<span>{{data?.email ? data.email :
															AppStore.noContentText}}</span>
													</div>
													<div class="col-sm-12">
														<h6 class="mt-3">{{'company_name' | translate}}</h6>
														<span>{{data?.company? data.company: AppStore.noContentText
															}}</span>
													</div>
												</div>
											</div>
											</div>
											<p class="text-left" *ngIf="IncidentStore.involvedWitnessUserDetails?.length == 0">
												{{AppStore.noContentText}}
											</p>

											<a class="view-more-pestel-box text-center"
												*ngIf="IncidentStore.involvedWitnessUserDetails?.length > 2"
												data-toggle="modal" data-target="#others-popup"
												(click)="openOthersWitnessModel()">{{'view_more' | translate}}</a>

										</div>

										<h6>{{'evidence' | translate}}</h6>
										<p *ngIf="IncidentInvestigationStore?.investigationIncidentObjects?.documents?.length==0">
											{{AppStore.noContentText}}</p>
										<div class="thumb-pics-bg thumb-pics-col-2 thumb-pics-fix-text clearfix">
											<div class="thumb-pics"
												*ngFor="let doc of IncidentInvestigationStore.investigationIncidentObjects?.documents">
												<div class="upload-pics edit-option">
													<div *ngIf="doc.preview" class="browse-form-pic"
														[ngStyle]="{'background': 'url(' + doc.preview + ') no-repeat 0 0 / cover'}">
													</div>
													<div *ngIf="!doc.preview" class="browse-form-pic"
														[ngStyle]="{'background': 'url(' + createImageUrl('incident-item',doc.token) + '), url(' + getDefaultImage('no-preview') + ') no-repeat 0 0 / cover '}">
													</div>
													<div class="browse-form-name clearfix">
														<div class="float-left">
															<h6 *ngIf="!doc.preview" [attr.title]="doc.title">
																{{doc?.title?.length > 13 ? doc.title.substring(0,13)+'
																...': doc?.title}}
															</h6>
															<h6 *ngIf="doc.preview">{{doc?.name?.length>15 ?
																doc?.name.substring(0,15)+' ...':doc?.name}}</h6>
															<span>{{doc.size/1048576 | number:'0.2-2'}}MB</span>
														</div>
														<div class="browse-logo">
															<img *ngIf="checkExtension(doc.ext,'image') != -1"
																src="/assets/images/md-jpg.png">
															<img *ngIf="checkExtension(doc.ext,'doc') != -1"
																src="/assets/images/word-icone.png">
															<img *ngIf="checkExtension(doc.ext,'pdf') != -1"
																src="/assets/images/pdf-icone.png">
															<img *ngIf="checkExtension(doc.ext,'excel') != -1"
																src="/assets/images/excel-icone.png">
															<img *ngIf="checkExtension(doc.ext,'video') != -1"
																src="/assets/images/md-video.png">
															<img *ngIf="checkExtension(doc.ext,'audio') != -1"
																src="/assets/images/md-audio.png">
															<img *ngIf="checkExtension(doc.ext,'ppt') != -1"
																src="/assets/images/md-ppt.png">
														</div>
													</div>
													<!-- <div class="edit-option-show-inner" title="Download Document">
                                                  <a><i class="fas fa-download"
                                                          ></i></a>
                                              </div> -->
												</div>
											</div>
										</div>



									</div>
								</div>



							</div>

							<input (click)="sumbitInvestigation()" type="submit" name="submit"
								class="submit action-button btn-active"
								[value]="AppStore.loading?getButtonText('loading'):getButtonText('save')" />
							<input type="button" name="previous" class="previous action-button"
								[value]="AppStore.loading?getButtonText('loading'):getButtonText('previous')" />
							<input type="button" (click)="cancel()" name="cancel" data-dismiss="modal" class="cancel action-button"
								value="Cancel" />
							<!-- </div>
                                </div>
                            </div> -->
						</fieldset>
					</form>
				</div>


			</div>
			<!-- Modal footer -->
		</div>
	</div>
</div>
