<main class="mt-3 acl-page cpf-space-adjust db-small-space-boxes" *mobxAutorun>
    <div class="container-fluid" *ngIf="OrganizationDashboardStore.dashboardLoaded">
      <app-filter-menu></app-filter-menu>
          <div class="row five-col sm-row">
              <div class="col sm-col" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division">
                  <div [ngClass]="OrganizationDashboardStore.OrganizationCount?.total_divisions!=0?'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center pointer':'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center'"
                  (click)="redirectToListPage('divisions',OrganizationDashboardStore.OrganizationCount?.total_divisions)">
                      <div class="text-center">
                          <h3 class="big-text-three">{{OrganizationDashboardStore.OrganizationCount?.total_divisions}}</h3>
                          <p class="mb-0">{{'total_divisions'|translate}}</p>
                      </div>
                  </div>
              </div>

              <div class="col sm-col" *ngIf="AuthStore.getActivityPermission(100,'ORGANIZATION_DASHBOARD_ISUUE_COUNT_BY_DEPARTMENTS')">
                  <div [ngClass]="OrganizationDashboardStore.OrganizationCount?.total_departments!=0?'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center pointer':'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center'"
                  (click)="redirectToListPage('departments',OrganizationDashboardStore.OrganizationCount?.total_departments)">
                      <div class="text-center">
                          <h3 class="big-text-three">{{OrganizationDashboardStore.OrganizationCount?.total_departments}}</h3>
                          <p class="mb-0">{{'total_departments'|translate}}</p>
                      </div>
                  </div>
              </div>



              <div class="col sm-col" *ngIf = "OrganizationModulesStore.checkOrganizationSubModulesPermission(100,3301)">
                  <div [ngClass]="OrganizationDashboardStore.OrganizationCount?.total_ms_types!=0?'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center pointer':'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center'"
                  (click)="redirectToListPage('ms_types',OrganizationDashboardStore.OrganizationCount?.total_ms_types)">
                      <div class="text-center">
                          <h3 class="big-text-three">{{OrganizationDashboardStore.OrganizationCount?.total_ms_types}}</h3>
                          <p class="mb-0">{{'ms_type'|translate}}</p>
                      </div>
                  </div>
              </div>

              <div class="col sm-col" *ngIf = "OrganizationModulesStore.checkOrganizationSubModulesPermission(100,2901)">
                  <div [ngClass]="OrganizationDashboardStore.OrganizationCount?.total_produdcts!=0?'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center pointer':'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center'"
                  (click)="redirectToListPage('produdcts',OrganizationDashboardStore.OrganizationCount?.total_produdcts)">
                      <div class="text-center">
                          <h3 class="big-text-three">{{OrganizationDashboardStore.OrganizationCount?.total_produdcts}}</h3>
                          <p class="mb-0">{{'total_products'|translate}}</p>
                      </div>
                  </div>
              </div>
              <div class="col sm-col" *ngIf = "OrganizationModulesStore.checkOrganizationSubModulesPermission(100,3201)">
                  <div [ngClass]="OrganizationDashboardStore.OrganizationCount?.total_services!=0?'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center pointer':'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center'"
                  (click)="redirectToListPage('services',OrganizationDashboardStore.OrganizationCount?.total_services)">
                      <div class="text-center">
                          <h3 class="big-text-three">{{OrganizationDashboardStore.OrganizationCount?.total_services}}</h3>
                          <p class="mb-0">{{'total_services'|translate}}</p>
                      </div>
                  </div>
              </div>
         </div>
          <div class="row five-col sm-row">
              <div class="col sm-col" *ngIf = "OrganizationModulesStore.checkOrganizationSubModulesPermission(100,21301)">
                  <div [ngClass]="OrganizationDashboardStore.OrganizationCount?.total_projects!=0?'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center pointer':'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center'"
                  (click)="redirectToListPage('projects',OrganizationDashboardStore.OrganizationCount?.total_projects)">
                      <div class="text-center">
                          <h3 class="big-text-three">{{OrganizationDashboardStore.OrganizationCount?.total_projects}}</h3>
                          <p class="mb-0">{{'total_projects'|translate}}</p>
                      </div>
                  </div>
              </div>

              <div class="col sm-col" *ngIf = "OrganizationModulesStore.checkOrganizationSubModulesPermission(100,21901)">
                  <div [ngClass]="OrganizationDashboardStore.OrganizationCount?.total_issues!=0?'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center pointer':'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center'"
                  (click)="redirectToListPage('issues',OrganizationDashboardStore.OrganizationCount?.total_issues)">
                      <div class="text-center">
                          <h3 class="big-text-three">{{OrganizationDashboardStore.OrganizationCount?.total_issues}}</h3>
                          <p class="mb-0">{{'total_issues'|translate}}</p>
                      </div>
                  </div>
              </div>



              <div class="col sm-col" *ngIf = "OrganizationModulesStore.checkOrganizationSubModulesPermission(100,49701)">
                  <div [ngClass]="OrganizationDashboardStore.OrganizationCount?.total_business_applications!=0?'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center pointer':'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center'"
                  (click)="redirectToListPage('business_applications',OrganizationDashboardStore.OrganizationCount?.total_business_applications)">
                      <div class="text-center">
                          <h3 class="big-text-three">{{OrganizationDashboardStore.OrganizationCount?.total_business_applications}}</h3>
                          <p class="mb-0">{{'business_applications'|translate}}</p>
                      </div>
                  </div>
              </div>

              <div class="col sm-col" *ngIf = "OrganizationModulesStore.checkOrganizationSubModulesPermission(100,21201)">
                  <div [ngClass]="OrganizationDashboardStore.OrganizationCount?.total_customers!=0?'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center pointer':'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center'"
                  (click)="redirectToListPage('customer',OrganizationDashboardStore.OrganizationCount?.total_customers)">
                      <div class="text-center">
                          <h3 class="big-text-three">{{OrganizationDashboardStore.OrganizationCount?.total_customers}}</h3>
                          <p class="mb-0">{{'total_customers'|translate}}</p>
                      </div>
                  </div>
              </div>
              <div class="col sm-col" *ngIf = "OrganizationModulesStore.checkOrganizationSubModulesPermission(100,2301)">
                  <div [ngClass]="OrganizationDashboardStore.OrganizationCount?.total_branches!=0?'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center pointer':'bg-white widg-padding-cmn btm-space-10 db-shadow stg-main-db-box-one db-md-screen-center'"
                  (click)="redirectToListPage('branch',OrganizationDashboardStore.OrganizationCount?.total_branches)">
                      <div [ngClass]="OrganizationDashboardStore.OrganizationCount?.total_branches!=0?' text-center pointer':'text-center'">
                          <h3 class="big-text-three">{{OrganizationDashboardStore.OrganizationCount?.total_branches}}</h3>
                          <p class="mb-0">{{'total_branches'|translate}}</p>
                      </div>
                  </div>
              </div>
         </div>
          
        <div class="row sm-row h-100" *ngIf = "OrganizationModulesStore.checkIndividualSubModule(100,21401)">
           <div class="col-lg-5 col-sm-12 sm-col h-100">
             <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-aut-four">
                <h5 class="cmn-head-style m-0">{{'swot_analysis'|translate}}</h5>
                <hr>

                <div class="">
                  <div class="dpt-pic-ceo w-100" style="height: 280px;">
                    <div id="swotchart" style="width: 100%; height: 280px" *ngIf="!showPieNoDataMap" #swotchart></div>
                    <app-no-chart-data [source]="'pie'" style="width: 100%; height: 280px" *ngIf="showPieNoDataMap"></app-no-chart-data>
                  </div>
               </div>

             </div>
          </div>
          <div class="col-lg-7 sm-col h-100">
                    <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-aut-four" style="height: 350px;">
                       <h5 class="cmn-head-style m-0">{{'swot_latest_ten_issues'|translate}}</h5>
                       <hr> 
                       <owl-carousel-o [options]="clientOptions"
                       *ngIf="OrganizationDashboardStore.organizationIssueSwot.length!=0">
                        <ng-template carouselSlide>
                          <div class="item">
                            <div class="common-tab-md clearfix active-right-border-none hc-report-tab-style">
                              <div class="tab-common-left-md">
                                <div class=" issues-tab">
                                  <!-- tab menu start -->
                                  <ul class="nav nav-tabs nav-tabs--vertical nav-tabs--left vertical-tab" role="navigation">
                                    <li class="nav-item" *ngFor="let swot of OrganizationDashboardStore.organizationIssueSwot">
                                      <a (click)="getTopTenSwotFirst(swot.id, swot.title)"
                                        [ngClass]="selectedSection == swot.title ? 'nav-link border-right-none-sm active' : 'nav-link border-right-none-sm'"
                                        data-toggle="tab" role="tab" aria-controls="lorem" aria-selected="false">{{swot.title}}</a>
                                    </li>
                                  </ul>
                                </div>
                              </div>
                        
                        
                              <div class="tab-common-left-content-m cmn-bdr padding-bottom-none" style="min-height: 250px;">
                                <div class="tab-content" *ngIf="OrganizationDashboardStore.organizationTopTenSwotIssues.length != 0">
                                  <div class="tab-pane fade active show" id="jan2" role="tabpanel">
                                    <!-- <div class="d-flex border p-3 mb-1 pointer"
                                      *ngFor="let issue of OrganizationDashboardStore.organizationTopTenSwotIssues;let num=index"
                                      (click)="gotoIssueDetailsPage(issue.id)">
                                      <b class="mr-3">{{num+1}}</b>
                                      <p class="m-0">{{issue.title}}</p>
                                    </div> -->
                                    <ul class="arrowlist mt-0 p-0">
                                      <li *ngFor="let issue of OrganizationDashboardStore.organizationTopTenSwotIssues;let num=index"
                                      (click)="gotoIssueDetailsPage(issue.id)" class="elips-1 pointer">{{issue.title}}</li>
                                    </ul>
                                  </div>
                                </div>
                                <ng-container
                                  *ngIf="OrganizationDashboardStore.topTenLoaded && OrganizationDashboardStore.organizationTopTenSwotIssues.length == 0">
                                  <div class="no-policy-demo-text bg-white d-flex align-items-center w-100 mt-2 p-3 mr-4 border-0"
                                    style="min-height: 250px;">
                                    <div class="no-policy-demo">
                                      <img class="pointer"
                                        [attr.src]="ThemeStructureSettingStore.themeStructureObject.empty_screen ? ThemeStructureSettingStore.themeStructureObject.empty_screen : '/assets/images/empty_screen.png'"
                                        onerror="this.src='assets/images/empty_screen.png'" 
                                        style="width:180px;margin-left: 203px;" />
                                      <p class="bold mb-0">{{'no_data_found' | translate}}</p>
                                    </div>
                                  </div>
                                </ng-container>
                              </div>
                            </div>
                          </div>
                        </ng-template>
                        <!-- <ng-template carouselSlide *ngIf="slideShow">
                          <div class="item">
                            <div class="common-tab-md clearfix active-right-border-none hc-report-tab-style">
                              <div class="tab-common-left-md">
                                <div class=" issues-tab">
                                  <ul class="nav nav-tabs nav-tabs--vertical nav-tabs--left vertical-tab" role="navigation">
                                    <li class="nav-item" *ngFor="let swot of OrganizationDashboardStore.organizationIssueSwot"> <a
                                        (click)="getTopTenSwotSecond(swot.id, swot.title)"
                                        [ngClass]="selectedSection == swot.title ? 'nav-link border-right-none-sm active' : 'nav-link border-right-none-sm'"
                                        data-toggle="tab" role="tab" aria-controls="lorem" aria-selected="false">{{swot.title}}</a>
                                    </li>
                                  </ul>
                                </div>
                              </div>
                        
                        
                              <div class="tab-common-left-content-m cmn-bdr padding-bottom-none" style="min-height: 406px;">
                                <div class="tab-content" *ngIf="OrganizationDashboardStore.organizationTopTenSwotIssues.length != 0">
                                  <div class="tab-pane fade active show" id="jan2" role="tabpanel">
                                    <div class="d-flex border p-3 mb-1 pointer"
                                      *ngFor="let issue of OrganizationDashboardStore.organizationTopTenSecondSwotIssues;let num=index"
                                      (click)="gotoIssueDetailsPage(issue.id)">
                                      <b class="mr-3">{{num+1}}</b>
                                      <p class="m-0">{{issue.title}}</p>
                                    </div>
                                  </div>
                        
                                </div>
                                <ng-container *ngIf="OrganizationDashboardStore.organizationTopTenSwotIssues.length == 0">
                                  <div class="no-policy-demo-text bg-white d-flex align-items-center w-100 mt-2 p-3 mr-4"
                                    style="min-height: 406px;">
                                    <div class="no-policy-demo">
                                      <img class="pointer"
                                        [attr.src]="ThemeStructureSettingStore.themeStructureObject.empty_screen ? ThemeStructureSettingStore.themeStructureObject.empty_screen : '/assets/images/empty_screen.png'"
                                        onerror="this.src='assets/images/empty_screen.png'" style="width:200px;margin-left: 189px;" />
                                      <p class="bold mb-0">{{'no_data_found' | translate}}</p>
                                    </div>
                                  </div>
                                </ng-container>
                              </div>
                            </div>
                          </div>
                        </ng-template> -->
                       </owl-carousel-o>
                       <ng-container *ngIf="OrganizationDashboardStore.organizationIssueSwot.length == 0">
                        <div class = "no-policy-demo-text bg-white d-flex align-items-center w-100 mt-2 p-3 border-0" style="min-height: 475px;">
                           <div class="no-policy-demo">
                              <img class="pointer" 
                              [attr.src]="ThemeStructureSettingStore.themeStructureObject.empty_screen ? ThemeStructureSettingStore.themeStructureObject.empty_screen : '/assets/images/empty_screen.png'" 
                              onerror="this.src='assets/images/empty_screen.png'" 
                              style="width:200px"/>
                           </div>
                        </div>
                     </ng-container>
                   </div>
          </div>
        </div>
      

    

       <div class="row sm-row">
          <div class="col-lg-4 col-sm-12 sm-col">
             <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-aut-four">
                <h5 class="cmn-head-style m-0">{{'issues_by_category'|translate}}</h5>
                <hr>
                <div class="">
                    <div class="dpt-pic-ceo w-100" style="height: 200px;">
                      <div id="categorychart" style="width: 100%; height: 200px" *ngIf="!showIssueCategoryPieNoDataMap" #categorychart></div>
                      <app-no-chart-data [source]="'pie'" style="width: 100%; height: 200px" *ngIf="showIssueCategoryPieNoDataMap"></app-no-chart-data>
                    </div>
                 </div>
                <!-- <div class="ceo-db-aut-sec-row-height">
                   <div class="dpt-pic-ceo w-100" *ngIf="!showIssueCategoryPieNoDataMap">
                    <div id="categorychart" style="width: 100%; height: 406px"></div>
                   </div>
                   <div class="ceo-db-chart-pic-two ceo-db-chart-pic-height" *ngIf="showIssueCategoryPieNoDataMap" style="min-height: 280px;">
                    <app-no-chart-data [source]="issueCategoryPieChart">
                    </app-no-chart-data>
                   </div>
                </div> -->

             </div>
          </div>

          <div class="col-lg-4 col-sm-12 sm-col"  *ngIf = "OrganizationModulesStore.checkIndividualSubModule(100,21501)">
             <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-aut-four">
                <h5 class="cmn-head-style m-0">{{'pestel_analysis'|translate}}</h5>
                <hr>
                <div class="">
                    <div class="dpt-pic-ceo" style="height: 200px;">
                      <div id="pestelBarchart" style="width: 100%; height: 200px" *ngIf="!showIssuePestelNoDataMap" #pestelBarchart></div>
                      <app-no-chart-data [source]="'bar'" style="width: 100%; height: 200px" *ngIf="showIssuePestelNoDataMap"></app-no-chart-data>
                    </div>
                 </div>
                <!-- <div class="ceo-db-aut-sec-row-height">
                   <div class="dpt-pic-ceo w-100" *ngIf="!showIssuePestelNoDataMap">
                    <div id="pestelBarchart" style="width: 100%; height: 406px"></div>
                   </div>
                   <div class="ceo-db-chart-pic-two ceo-db-chart-pic-height" *ngIf="showIssuePestelNoDataMap" style="min-height: 280px;">
                    <app-no-chart-data [source]="IssuePestelBarChart">
                    </app-no-chart-data>
                   </div>
                </div> -->

             </div>
          </div>
          <div class="col-lg-4 col-sm-12 sm-col">
             <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-aut-four">
                <h5 class="cmn-head-style m-0">{{'Issues_by_domain'|translate}}</h5>
                <hr>
                <div class="">
                    <div class="dpt-pic-ceo w-100" style="height: 200px;">
                      <div id="domainchart" style="width: 100%; height: 200px" *ngIf="!showIssueDomainPieNoDataMap" #domainchart></div>
                      <app-no-chart-data [source]="'pie'" style="width: 100%; height: 200px" *ngIf="showIssueDomainPieNoDataMap"></app-no-chart-data>
                    </div>
                 </div>
                <!-- <div class="ceo-db-aut-sec-row-height">
                   <div class="dpt-pic-ceo w-100" *ngIf="!showIssueDomainPieNoDataMap">
                      <div id="domainchart" style="width: 100%; height: 406px"></div>
                   </div>
                   <div class="ceo-db-chart-pic-two ceo-db-chart-pic-height" *ngIf="showIssueDomainPieNoDataMap" style="min-height: 280px;">
                    <app-no-chart-data [source]="issueDomainPieChart">
                    </app-no-chart-data>
                   </div>
                </div> -->
             </div>
          </div>



       </div>

       <div class="row sm-row">

          <div class="col-sm-12 sm-col">
             <div class="bg-white widg-padding-cmn btm-space-10 ceo-db-aut-four">
                <h5 class="cmn-head-style m-0">{{'Issues_by_department'|translate}}</h5>
                <hr>
                <div class="">
                   <div class="dpt-pic-ceo w-100" *ngIf="!showOrganizationDepartmentNoDataMap">
                    <div id="barChartOrgDepartmenr" style="width: 100%; height: 250px" #barChartOrgDepartmenr></div>
                   </div>
                   <div class="ceo-db-chart-pic-two ceo-db-chart-pic-height" *ngIf="showOrganizationDepartmentNoDataMap" style="min-height: 250px;">
                    <app-no-chart-data [source]="organizationDepartmentBarChart">
                    </app-no-chart-data>
                   </div>
                </div>

             </div>
          </div>
       </div>
    </div>
    <ng-container *mobxAutorun>
        <div *ngIf="!OrganizationDashboardStore.dashboardLoaded">
            <app-dashboard-loader></app-dashboard-loader>
        </div>
     </ng-container>
 </main>
