<!-- <main class="audit-program-details-page mt-20 pl-0">
    <div class="container-fluid" *ngIf="IsmsRiskTreatmentStore?.individualTreatmentLoaded">
        <div class="widget"> -->
            <ng-container *mobxAutorun>
                <div class="row"
                *ngIf="IsmsRiskTreatmentStore?.individualTreatmentLoaded && IsmsRisksStore.individual_risk_loaded" id="risk-treatment">
                    <div class="col-lg-8 col-sm-12 padding-right-0">
                        <div class="bg-white widg-padding-cmn">
                            <div class="min-height-64">
                                <div class="issue-top-sec">
                                    <div class="clearfix">
                                        <h5 class="d-inline-block cmn-head-style label-tag-style"><span
                                                class="issue-smoal-head-text">#{{IsmsRiskTreatmentStore?.riskTreatmentDetails?.reference_code}}</span>
                                            {{IsmsRiskTreatmentStore?.riskTreatmentDetails?.title}}
                                            <span [ngClass]="'draft-tag draft-tag-'+IsmsRiskTreatmentStore?.riskTreatmentDetails?.risk_treatment_status?.label+' label-tag-style-tag label-left-arow-tag d-inline-block status-tag-new-one'">{{IsmsRiskTreatmentStore?.riskTreatmentDetails?.risk_treatment_status.language[0]?.pivot.title}}</span>
                                        </h5>
                                        <!-- <a
                                            [ngClass]="'draft-tag draft-tag-'+IsmsRiskTreatmentStore?.riskTreatmentDetails?.risk_treatment_status?.label+' label-tag-style-tag'">
                                            {{IsmsRiskTreatmentStore?.riskTreatmentDetails?.risk_treatment_status.language[0]?.pivot.title}}</a> -->
                                        <!-- <div class="box-cnt-one tab-type-btn-small float-right">
                                                        <label class="outline-tag" data-toggle="modal" data-target="#risk-update-popup" *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.risk_treatment_status.id != 6"
                                                            (click)="openUpdateModal()"><i class="fas fa-pen-alt"></i>{{'update' | translate}}</label>
                                                    </div> -->
                                    </div>
                                    <div class="clearfix d-inline-block">
                                        <label class="blinking mb-0 pr-2"
                                            *ngIf="IsmsRiskTreatmentStore.riskTreatmentDetails?.risk_treatment_status?.type!='resolved' && IsmsRiskTreatmentStore.riskTreatmentDetails?.risk_treatment_status?.type!='closed'">( {{IsmsRiskTreatmentStore?.riskTreatmentDetails?.days_remaining}}
                                            {{'days_remaining' | translate}} )</label>
                                        <span *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.percentage != null"
                                            class="small-text pt-2 pl-0 pb-2">{{IsmsRiskTreatmentStore?.riskTreatmentDetails?.percentage}}
                                            % {{'completed' | translate}}</span>
                                        <span class="ml-2 mr-2"
                                            *ngIf="IsmsRiskTreatmentStore.riskTreatmentDetails?.risk_treatment_status?.type!='resolved'&&IsmsRiskTreatmentStore.riskTreatmentDetails?.risk_treatment_status?.type!='closed'">|</span>
                                        <span
                                            *ngIf="IsmsRiskTreatmentStore.riskTreatmentDetails?.risk_treatment_status?.type!='resolved'&&IsmsRiskTreatmentStore.riskTreatmentDetails?.risk_treatment_status?.type!='closed' && IsmsRiskTreatmentStore.riskTreatmentDetails?.latest_risk_treatment_update?.revised_target_date!=null"
                                            [ngClass]="getDays(IsmsRiskTreatmentStore.riskTreatmentDetails?.latest_risk_treatment_update?.revised_target_date)>0?'bold text-red':'bold text-green'">
                                            {{getDays(IsmsRiskTreatmentStore.riskTreatmentDetails?.latest_risk_treatment_update?.revised_target_date)>0?getButtonText('overdue'):getButtonText('due')}}</span>
                                        <span
                                            *ngIf="IsmsRiskTreatmentStore.riskTreatmentDetails?.risk_treatment_status?.type!='resolved'&&IsmsRiskTreatmentStore.riskTreatmentDetails?.risk_treatment_status?.type!='closed' && IsmsRiskTreatmentStore.riskTreatmentDetails?.latest_risk_treatment_update?.revised_target_date==null"
                                            [ngClass]="getDays(IsmsRiskTreatmentStore.riskTreatmentDetails?.target_date)>0?'bold text-red':'bold text-green'">
                                            {{getDays(IsmsRiskTreatmentStore.riskTreatmentDetails?.target_date)>0?getButtonText('overdue'):getButtonText('due')}}</span>
                    
                                        <!-- <span *ngIf="IsmsRiskTreatmentStore.riskTreatmentDetails?.risk_treatment_status?.type!='resolved'&&IsmsRiskTreatmentStore.riskTreatmentDetails?.risk_treatment_status?.type!='closed'" 
                                                [ngClass]="IsmsRiskTreatmentStore.riskTreatmentDetails?.latest_risk_treatment_update?.revised_target_date?getDays(IsmsRiskTreatmentStore.riskTreatmentDetails?.revised_target_date)>0?'bold text-green':'bold text-red':getDays(IsmsRiskTreatmentStore.riskTreatmentDetails?.target_date)>0?'bold text-green':'bold text-red'">
                                                    {{IsmsRiskTreatmentStore.riskTreatmentDetails?.latest_risk_treatment_update?.revised_target_date?getDays(IsmsRiskTreatmentStore.riskTreatmentDetails?.latest_risk_treatment_update?<div class=""></div>revised_target_date)>0?'Due':'Overdue':getDays(IsmsRiskTreatmentStore.riskTreatmentDetails?.target_date)>0?'Due':'Overdue'}}</span>
                                        -->
                    
                                    </div>
                                    <div [ngClass]="IsmsRiskTreatmentStore.riskTreatmentDetails?.description ? 'clearfix' : 'clearfix mb-3'" >
                                        <!-- <h6>{{'treatment_description'|translate}}</h6> -->
                                        <p style="white-space: pre-line;" *ngIf="IsmsRiskTreatmentStore.riskTreatmentDetails?.description">
                                            {{IsmsRiskTreatmentStore.riskTreatmentDetails?.description}}
                                        </p>
                                    </div>
                    
                    
                                </div>
                    
                    
                                <div class="row">
                                    <div class="col-lg-4 col-sm-6">
                                        <div class="label-and-user-pic">
                                            <h6>{{'risk_treatment_owner'|translate}}</h6>
                                            <div class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg mb-2"
                                                *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.responsible_user != null">
                                                <app-user-popup-box [source]="getPopupDetails()"></app-user-popup-box>
                                            </div>
                                        </div>
                                        <p *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.responsible_user.length==0">
                                            {{AppStore.noContentText}}</p>
                                    </div>
                                    <div class="col-lg-4 col-sm-6">
                                        <div class="label-and-user-pic">
                                            <h6>{{'risk_owner'|translate}}</h6>
                                            <app-user-popup-box id="jd" *ngIf="IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.risk_owner"
                                                [source]="getRiskPopupDetails(IsmsRiskTreatmentStore.riskTreatmentDetails.risk?.risk_owner)">
                                            </app-user-popup-box>
                                        </div>
                                        <p *ngIf="!IsmsRiskTreatmentStore.riskTreatmentDetails.risk?.risk_owner">
                                            {{AppStore.noContentText}}</p>
                    
                                    </div>
                    
                    
                    
                    
                                </div>
                    
                    
                                <div class="row">
                                    <div class="col-md-12">
                                        <h6>{{'treatment_dependency'|translate}}</h6>
                                        <p style="white-space: pre-line;">
                                            {{IsmsRiskTreatmentStore.riskTreatmentDetails?.treatment_dependency?IsmsRiskTreatmentStore.riskTreatmentDetails?.treatment_dependency:AppStore.noContentText}}
                                        </p>
                                    </div>
                                </div>
                    
                                <div class="row">
                    
                                    <div class="col-lg-4 col-sm-6">
                                        <h6>{{'budget' | translate}}</h6>
                                        <p *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget != null">
                                            {{IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget}}</p>
                                        <p *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget == null">
                                            {{AppStore.noContentText}}</p>
                                    </div>
                                    <div class="col-lg-4 col-sm-6">
                                        <h6>{{'start_date' | translate}}</h6>
                                        <p *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.start_date != null">
                                            {{IsmsRiskTreatmentStore?.riskTreatmentDetails?.start_date}}</p>
                                        <p *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.start_date == null">
                                            {{AppStore.noContentText}}</p>
                                    </div>
                                    <div class="col-lg-4 col-sm-6">
                                        <h6>{{'target_date' | translate}}</h6>
                                        <p *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.target_date != null">
                                            {{IsmsRiskTreatmentStore?.riskTreatmentDetails?.target_date}}</p>
                                        <p *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.target_date == null">
                                            {{AppStore.noContentText}}</p>
                                    </div>
                                </div>
                    
                                <div class="row" *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.latest_risk_treatment_update">
                                    <div class="col-lg-4 col-sm-6"
                                        *ngIf="IsmsRiskTreatmentStore.riskTreatmentDetails.latest_risk_treatment_update?.actual_start_date">
                                        <h6>{{'actual_start_date' | translate}}</h6>
                                        <p>{{IsmsRiskTreatmentStore.riskTreatmentDetails.latest_risk_treatment_update?.actual_start_date|date:OrganizationGeneralSettingsStore.organizationSettings?.date_format}}
                                        </p>
                                    </div>
                                    <div class="col-lg-4 col-sm-6"
                                        *ngIf="IsmsRiskTreatmentStore.riskTreatmentDetails.latest_risk_treatment_update?.revised_target_date">
                                        <h6>{{'revised_due_date' | translate}}</h6>
                                        <p>{{IsmsRiskTreatmentStore.riskTreatmentDetails.latest_risk_treatment_update?.revised_target_date|date:OrganizationGeneralSettingsStore.organizationSettings?.date_format}}
                                        </p>
                                    </div>
                    
                                </div>
                    
                    
                    
                    
                    
                    
                                <div class="row">
                    
                                    <div class="col-md-12">
                                        <h6>{{'risk'|translate}}</h6>
                                        <p>#{{IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.reference_code}}
                                            {{IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.title?IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.title:AppStore.noContentText}}
                                        </p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <h6>{{'risk_description'|translate}}</h6>
                                        <p 
                                            [innerHTML]="IsmsRiskTreatmentStore?.riskTreatmentDetails?.risk?.description?IsmsRiskTreatmentStore?.riskTreatmentDetails?.risk?.description:AppStore.noContentText">
                                         </p>
                                    </div>
                                </div>
                                <div class="row">
                    
                                    <div class="col-lg-4 col-sm-6" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_subsidiary">
                                        <h6>{{'organizations' | translate}}</h6>
                                        <p>{{IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.organizations?.length>0?getArrayFormatedString('title',IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.organizations):AppStore.noContentText}}
                                        </p>
                                    </div>
                                    <div class="col-lg-4 col-sm-6" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_division">
                                        <h6>{{'divisions' | translate}}</h6>
                                        <p>{{IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.divisions.length>0?getArrayFormatedString('title',IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.divisions):AppStore.noContentText}}
                                        </p>
                                    </div>
                                    <div class="col-lg-4 col-sm-6" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_department">
                                        <h6>{{'departments' | translate}}</h6>
                                        <p>{{IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.departments.length>0?getArrayFormatedString('title',IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.departments):AppStore.noContentText}}
                                        </p>
                                    </div>
                    
                                </div>
                    
                                <div class="row">
                    
                                    <div class="col-lg-4 col-sm-6" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_section">
                                        <h6>{{'sections' | translate}}</h6>
                                        <p>{{IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.sections.length>0?getArrayFormatedString('title',IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.sections):AppStore.noContentText}}
                                        </p>
                                    </div>
                    
                                    <div class="col-lg-4 col-sm-6" *ngIf="OrganizationLevelSettingsStore.organizationLevelSettings?.is_sub_section">
                                        <h6>{{'sub_sections' | translate}}</h6>
                                        <p>{{IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.sub_sections.length>0?getArrayFormatedString('title',IsmsRiskTreatmentStore.riskTreatmentDetails?.risk?.sub_sections):AppStore.noContentText}}
                                        </p>
                                    </div>
                    
                                </div>
                    
                                <div class="row">
                                    <div class="col-md-12">
                                        <h6>{{'watchers' | translate}}</h6>
                                        <div class="pb-3" *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.watchers?.length > 3">
                                                        <ul class="arci-user-tab-dtl workflow-lst-pics-loop clearfix" >
                                                            <li class="rounde-hov-bg"
                                                            *ngFor=" let watchers of IsmsRiskTreatmentStore?.riskTreatmentDetails?.watchers">
                                                                <app-user-popup-box [source]="getPopupDetails(watchers)" [showName]="false"></app-user-popup-box>
                                                            </li>
                                                        </ul>
                                                    </div>
                                        <!-- <div class="pb-3"> -->
                                        <div class="row"  *ngIf="!(IsmsRiskTreatmentStore?.riskTreatmentDetails?.watchers?.length > 3)">
                                            <div class="col-xl-3 col-lg-4 col-sm-6 animation-pulse"
                                                *ngFor=" let watchers of IsmsRiskTreatmentStore?.riskTreatmentDetails?.watchers;let i=index">
                                                <div class="label-and-user-pic">
                                                <app-user-popup-box [source]="getPopupDetails(watchers)" >
                                                </app-user-popup-box>
                                            </div>
                                            </div>
                    
                                        </div>
                                        <p *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.watchers.length==0">
                                            {{AppStore.noContentText}}</p>
                                        <!-- </div> -->
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <h6>{{'treatment_updates' | translate}}</h6>
                                        <div class="audit-form-table w-100 table-align-top not-fixed-table mb-3"
                                            *ngIf="IsmsRiskTreatmentStore.treatmentUpdateDataLoaded && IsmsRiskTreatmentStore.historyData?.length>0">
                                            <table class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll">
                                                <thead>
                                                    <tr>
                                                        <th class="border-top-0 text-center" style="width: 4%;">#</th>
                                                        <th class="border-top-0" style="width: 28%;">{{'actions'|translate}}</th>
        
                                                        <!-- <th class="border-top-0" style="width: 8%;">Responsibility</th> -->
                                                        <th class="border-top-0" style="width: 15%;">%{{'completed'|translate}}</th>
                                                        <!-- <th class="border-top-0" style="width: 13%;">Proposed Start Date</th> -->
                                                        <th class="border-top-0" style="width: 20%;">{{'actual_start_date'|translate}}</th>
                                                        <!-- <th class="border-top-0" style="width: 8%;">Baseline Due Date</th> -->
                                                        <th class="border-top-0" style="width: 20%;">{{'revised_due_date'|translate}}</th>
                                                        <th class="border-top-0 text-center" style="width: 13%;">{{'status'|translate}}</th>
        
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr
                                                        *ngFor="let history of IsmsRiskTreatmentStore.historyData| paginate: {id:'historyTreatmentUpdate',currentPage:IsmsRiskTreatmentStore?.historyCurrentPage, itemsPerPage:IsmsRiskTreatmentStore?.historyItemsPerPage,totalItems:IsmsRiskTreatmentStore?.historyTotalItems};let num = index">
                                                        <td class="text-center">{{(IsmsRiskTreatmentStore?.historyCurrentPage - 1) * IsmsRiskTreatmentStore?.historyItemsPerPage + (num +1)}}</td>
                                                        <td>{{history.comment?history.comment:AppStore.noContentText}}</td>
                                                        <!-- <td></td> -->
                                                        <td>{{history.percentage?history.percentage:AppStore.noContentText}}
                                                        </td>
                                                        <td>{{history.actual_start_date?history.actual_start_date:AppStore.noContentText}}
                                                        </td>
                                                        <!-- <td></td> -->
                                                        <td>{{history.revised_target_date?history.revised_target_date:AppStore.noContentText}}
                                                        </td>
                                                        <!-- <td></td> -->
                    
                                                        <td class="text-center">
                                                            <div [ngClass]="'dot-div '+history.label+'-dot'">
                                                                {{history.risk_treatment_status_title}}</div>
                                                            <!-- <span
                                                                [ngClass]="'dot-div '+history.label+'-dot'"></span>{{history.risk_treatment_status_title}} -->
                                                        </td>
                                                        <!-- <td></td> -->
                    
                                                    </tr>
                    
                                                </tbody>
                                            </table>
                                            <ul class="pagination justify-content-center mt-3"
                                                *ngIf="IsmsRiskTreatmentStore?.historyTotalItems>IsmsRiskTreatmentStore?.historyItemsPerPage">
                                                <pagination-controls (pageChange)="historyPageChange($event)" class="my-pagination"
                                                    id="historyTreatmentUpdate"></pagination-controls>
                                            </ul>
                    
                                        </div>
                                    </div>
                                </div>
                    
                    
                                <!-- <div class="row"> -->
                    
                                <!-- </div> -->
                    
                    
                                <!-- <div class="row">
                    
                                                <div class="col-md-12"
                                                    *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.process_details.length != 0">
                                                    <h6 class="mt-3">{{'controls' | translate}}</h6>
                    
                                                    <div class="row process-form-tab">
                                                        <div class="col-sm-12">
                    
                                                            <div class="panel-group panel-drop-sections" id="jd" role="tablist"
                                                                aria-multiselectable="true">
                                                                <div class="panel panel-default"
                                                                    *ngFor="let row of IsmsRiskTreatmentStore?.riskTreatmentDetails?.process_details ;let num = index">
                                                                    <div [ngClass]="selectedIndex==num ? 'panel-heading active' : 'panel-heading'"
                                                                        role="tab" id="headingOne">
                                                                        <div class="panel-title">
                                                                            <a role="button" data-toggle="collapse" href="#ceo01"
                                                                                aria-expanded="false" aria-controls="collapseOne"
                                                                                class="collapsed" (click)="collapseControls(num)">
                                                                                <h5 class="width96pc mt-0"> {{row.process?.reference_code}}
                                                                                    - {{row.process?.title}} <span
                                                                                        class="indication-text indication-text-lg color-blue">{{'process' | translate}}</span><span
                                                                                        class="drop-down-icone"><i
                                                                                            class="fas fa-chevron-down"></i></span> </h5>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                    <div id="ceo01"
                                                                        [ngClass]="selectedIndex==num ? 'drop-detail-sec panel-collapse collapse show' : 'drop-detail-sec panel-collapse collapse'"
                                                                        role="tabpanel" aria-labelledby="headingOne" data-parent="#ceo01"
                                                                        style="">
                                                                        <div class="panel-body bg-white">
                                                                            <div *ngIf="row?.existing_controls">
                                                                                <h6 class="mb-1">{{'existing_controls' | translate}}</h6>
                                                                                <ul class="banking-issue"
                                                                                    *ngFor="let control of row.existing_controls ;let i = index">
                                                                                    <li class="clearfix"><a>{{control?.control?.title}}</a></li>
                                                                                </ul>
                                                                            </div>
                                                                            <div *ngIf="row?.new_controls">
                                                                                <h6 class="mb-1 mt-2">{{'new_controls' | translate}}</h6>
                                                                                <ul class="banking-issue"
                                                                                    *ngFor="let control of row.new_controls ;let i = index">
                                                                                    <li class="clearfix"><a>{{control?.control?.title}}</a>
                                                                                    </li>
                                                                                </ul>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div> -->
                    
                                <div class="row">
                    
                                    <div class="col-md-12">
                                        <h6 class="mt-0">{{'controls' | translate}}</h6>
                    
                                        <div class="row process-form-tab">
                                            <div class="col-sm-12">
                    
                                                <div class="panel-group panel-drop-sections" id="jd" role="tablist"
                                                    aria-multiselectable="true"
                                                    *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.process_details?.length>0 || IsmsRisksStore?.individualRiskDetails?.controls?.length>0">
                                                    <div class="panel panel-default"
                                                        *ngFor="let process of IsmsRiskTreatmentStore?.riskTreatmentDetails?.process_details"
                                                        (click)="collapseControls(process.process.id)">
                                                        <div [ngClass]="process.process.id==selectedIndex || openAll==true?'panel-heading active':'panel-heading'"
                                                            role="tab" id="headingOne">
                                                            <div class="panel-title">
                                                                <a role="button" data-toggle="collapse"
                                                                    [attr.href]="'#ceo'+process.process.id" aria-expanded="false"
                                                                    aria-controls="collapseOne" class="collapsed">
                                                                    <h5 class="width96pc mt-0">
                                                                        {{process.process.reference_code}} -
                                                                        {{process.process.title}} <span
                                                                            class="indication-text indication-text-lg color-blue">{{'process'
                                                                            | translate}}</span><span class="drop-down-icone"><i
                                                                                class="fas fa-chevron-down"></i></span>
                                                                    </h5>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div [attr.id]="'ceo'+process.process.id"
                                                            [ngClass]="process.process.id==selectedIndex || openAll==true?'drop-detail-sec panel-collapse collapse show':'drop-detail-sec panel-collapse collapse'"
                                                            role="tabpanel" aria-labelledby="headingOne" data-parent="#ceo01">
                                                            <div class="panel-body bg-white">
                                                                <h6 class="mb-1">{{'existing_controls'|translate}}</h6>
                                                                <ul class="banking-issue"
                                                                    *ngIf="getControlLength(process.existing_controls)">
                                                                    <li class="clearfix"
                                                                        *ngFor="let exControls of process.existing_controls;let c=index">
                                                                        <a>{{exControls?.control?.title}}</a>
                                                                    </li>
                    
                                                                    <!-- <li class="clearfix"><a href="#">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt.</a></li> -->
                                                                </ul>
                                                                <ng-container
                                                                    *ngIf="process.existing_controls?.length==0 || !getControlLength(process.existing_controls)">
                                                                    <p>{{AppStore.noContentText}}</p>
                                                                </ng-container>
                    
                    
                    
                                                                <h6 class="mb-1 mt-2">{{'new_controls' | translate}}</h6>
                                                                <ul class="banking-issue" *ngIf="getControlLength(process.new_controls)">
                                                                    <li class="clearfix" *ngFor="let newControls of process.new_controls">
                                                                        <a>{{newControls?.control?.title}}</a>
                                                                    </li>
                    
                                                                </ul>
                                                                <ng-container
                                                                    *ngIf="process.new_controls?.length==0 || !getControlLength(process.new_controls)">
                                                                    <p>{{AppStore.noContentText}}</p>
                                                                </ng-container>
                                                            </div>
                                                        </div>
                                                    </div>
                    
                                                    <div class="panel panel-default"
                                                        *ngIf="IsmsRisksStore?.individualRiskDetails?.controls?.length>0"
                                                        (click)="collapseControls('control')">
                                                        <div [ngClass]="'control'==selectedIndex || openAll==true?'panel-heading active':'panel-heading'"
                                                            role="tab" id="headingOne">
                                                            <div class="panel-title">
                                                                <a role="button" data-toggle="collapse" [attr.href]="'#ceocontrol'"
                                                                    aria-expanded="false" aria-controls="collapseOne" class="collapsed">
                                                                    <h5 class="width96pc mt-0">
                                                                        {{'other_controls'|translate}}<span class="drop-down-icone"><i
                                                                                class="fas fa-chevron-down"></i></span>
                                                                    </h5>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div [attr.id]="'ceocontrol'"
                                                            [ngClass]="'control'==selectedIndex || openAll==true?'drop-detail-sec panel-collapse collapse show':'drop-detail-sec panel-collapse collapse'"
                                                            role="tabpanel" aria-labelledby="headingOne" data-parent="#ceo01">
                                                            <div class="panel-body bg-white">
                                                                <!-- <h6 class="mb-1" >Existing Controls</h6> -->
                                                                <ul class="banking-issue">
                                                                    <li class="clearfix"
                                                                        *ngFor="let exControls of IsmsRisksStore?.individualRiskDetails?.controls;let c=index">
                                                                        <a>{{exControls?.title}}</a>
                                                                    </li>
                    
                                                                    <!-- <li class="clearfix"><a href="#">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt.</a></li> -->
                                                                </ul>
                    
                    
                    
                    
                    
                    
                                                            </div>
                                                        </div>
                                                    </div>
                    
                    
                    
                    
                                                </div>
                                                <ng-container>
                                                    
                                                    <p *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.process_details?.length==0 && IsmsRisksStore?.individualRiskDetails?.controls?.length==0">
                                                        {{AppStore.noContentText}}
                                                    </p>
                                                   
                                                </ng-container>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xl-12">
                                    <hr>
                                    <div class="d-flex flex-row user-list-sm">
                                        <img *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.created_by?.image?.token"
                                            [attr.src]="createImagePreview('user-profile-picture',IsmsRiskTreatmentStore?.riskTreatmentDetails?.created_by?.image?.token)"
                                            width="40px" height="40px" class="rounded-circle">
                                        <img *ngIf="!IsmsRiskTreatmentStore?.riskTreatmentDetails?.created_by?.image?.token"
                                            [attr.src]="getDefaultImage('user-logo')" width="40px" height="40px" class="rounded-circle">
                                        <div>
                                            <h6>{{IsmsRiskTreatmentStore?.riskTreatmentDetails?.created_by?.first_name}}
                                                {{IsmsRiskTreatmentStore?.riskTreatmentDetails?.created_by?.last_name}}</h6>
                                            <span>{{IsmsRiskTreatmentStore?.riskTreatmentDetails?.created_by?.designation}} |
                                                {{'created_on' | translate}}
                                                {{IsmsRiskTreatmentStore?.riskTreatmentDetails?.created_at|date:
                                                OrganizationGeneralSettingsStore?.organizationSettings?.date_format}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-12">
                        <div class="bg-white widg-padding-cmn-small mb-3">
                            <h6>{{'risk_treatment'|translate}} % {{'completed' | translate}}
                            </h6>
                            <!-- <h6 *ngIf="IsmsRiskTreatmentStore?.riskTreatmentDetails?.percentage == null">0 % {{'completed' | translate}}
                                        </h6> -->
            
                            <hr class="mt-0 mb-3">
            
                            <div
                                [ngClass]="IsmsRiskTreatmentStore?.riskTreatmentDetails?.percentage>50?'progress-circle progress-circle-big-one over50 p'+IsmsRiskTreatmentStore?.riskTreatmentDetails?.percentage:'progress-circle progress-circle-big-one p'+IsmsRiskTreatmentStore?.riskTreatmentDetails?.percentage">
                                <span>{{IsmsRiskTreatmentStore?.riskTreatmentDetails?.percentage>0?IsmsRiskTreatmentStore?.riskTreatmentDetails?.percentage:0}}%</span>
                                <div class="left-half-clipper">
                                    <div class="first50-bar"></div>
                                    <div class="value-bar"></div>
                                </div>
                            </div>
                        </div>
            
                        <!-- <div class="bg-white cmn-bdr mt-3 p-2 pb-4">
                                        <h6 >{{'budget_allocation_vs_used' | translate}}</h6>
                                            
                                        <hr class="mt-0 mb-3">
            
                                        <div
                                            [ngClass]="IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget_vs_used_percentage>50?'progress-circle over50 p'+IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget_vs_used_percentage:'progress-circle p'+IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget_vs_used_percentage">
                                            <span>{{IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget_vs_used_percentage}}%</span>
                                            <div class="left-half-clipper">
                                                <div class="first50-bar"></div>
                                                <div class="value-bar"></div>
                                            </div>
                                        </div>
                                        <h5 class="text-light-blue text-center pt-2">${{IsmsRiskTreatmentStore?.riskTreatmentDetails?.amount_used?IsmsRiskTreatmentStore?.riskTreatmentDetails?.amount_used:0}}/ ${{IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget>0?IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget:0}}</h5>
                                    </div> -->
                        <div class="bg-white widg-padding-cmn-small mb-3"
                            *ngIf="IsmsRiskSettingStore.loaded && IsmsRiskSettingStore.ismsRiskSettings.is_budget">
                            <h6>{{'budget_allocation_vs_used' | translate}}</h6>
                            <hr class="mt-0 mb-3">
            
                            <div class="progress-round-small btm-top-pdg w-100">
            
                                <div
                                    [ngClass]="IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget_vs_used_percentage>50?'progress-circle progress-circle-big-one over50 p'+IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget_vs_used_percentage:'progress-circle progress-circle-big-one p'+IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget_vs_used_percentage">
                                    <span>{{IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget_vs_used_percentage>0?IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget_vs_used_percentage:0}}%</span>
                                    <div class="left-half-clipper">
                                        <div class="first50-bar"></div>
                                        <div class="value-bar"></div>
                                    </div>
                                </div>
                                <!-- <p class="mb-0">{{document.assessment_count}} {{'assessments'|translate}}</p> -->
                            </div>
                            <h5 class="text-light-blue text-center pt-2">
                                {{OrganizationGeneralSettingsStore?.organizationSettings?.currency}}
                                {{IsmsRiskTreatmentStore?.riskTreatmentDetails?.amount_used?IsmsRiskTreatmentStore?.riskTreatmentDetails?.amount_used:0}}/
                                {{OrganizationGeneralSettingsStore?.organizationSettings?.currency}}
                                {{IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget>0?IsmsRiskTreatmentStore?.riskTreatmentDetails?.budget:0}}
                            </h5>
            
                        </div>
            
                        <!-- <div class="bg-white cmn-bdr mt-3 p-2 pb-3">
                                        <h6>30 Days Remaining</h6>
                                        <hr class="mt-0 mb-3">
                                        <img src="assets/images/risk-chart-3.png" class="img-fluid d-block mx-auto">
                                    </div> -->
            
                        <div class="bg-white widg-padding-cmn-small mb-3">
                            <h6>
                                {{'days_remaining' | translate}}</h6>
                            <!-- <hr class="mt-0 mb-3"> -->
                            <!-- <div id="chartdiv" style="width: 100%; height: 200px"></div> -->
                            <!-- <div class="attendance-chart-pic text-center">
                                        <div id="dayChartdiv"></div>
                                    </div> -->
                            <!-- <div class="bg-white cmn-bdr mt-3 p-2 pb-3"> -->
                            <!-- <h6>15 Days Remaining</h6> -->
                            <hr class="mt-0 mb-3">
                            <div class="clearfix">
                                <div class="mb-3">
                                    <p  class="dot-div-new font-normal mb-0 dot-green d-block">  {{'remaining_days'|translate}} ({{createDaysString(IsmsRiskTreatmentStore.riskTreatmentDetails.days_remaining)}}) </p>
                                    <p  class="dot-div-new font-normal mb-0 dot-red d-block"> {{'total_days'|translate}} ({{createDaysString(IsmsRiskTreatmentStore.riskTreatmentDetails.total_days)}}) </p>

                                    <!-- <span class="dot-div green-dot d-block">
                                        {{'remaining_days'|translate}}} ({{createDaysString(IsmsRiskTreatmentStore.riskTreatmentDetails.days_remaining)}})</span><span
                                        class="dot-div red-dot d-block">{{'total_days'|translate}} ({{createDaysString(IsmsRiskTreatmentStore.riskTreatmentDetails.total_days)}})</span> -->
                                </div>
                            </div>
                            <!-- <img src="images/risk-chart-3.png" class="img-fluid d-block mx-auto"> -->
            
                            <div class="vertical-progress-v2">
                                <div class="progress-bg-sec">
                                    <div class="progress-inner-color"
                                        [style.height.%]="(IsmsRiskTreatmentStore.riskTreatmentDetails.days_remaining/IsmsRiskTreatmentStore.riskTreatmentDetails.total_days)*100">
                                    </div>
                                </div>
                            </div>
            
            
            
                            <!-- </div> -->
            
                            <!-- <img src="/assets/images/risk-chart-3.png" class="img-fluid d-block mx-auto"> -->
            
            
                        </div>
                    </div>
                </div>



        </ng-container>
        <!-- -----------------Loader popup---------------- -->
        <div class="modal modal-style-1 image-download-popup-new fade" id="loadMe" aria-labelledby="loadMeLabel" tabindex="-1"
            role="dialog" #loaderPopUp>
            <app-loader [source]="downloadMessage"></app-loader>
        </div>
        <!-- ----------------------------------------- -->
        
        <!-- </div>
            </div> -->
        <div class="modal modal-style-1 popup-full-width fade show" data-keyboard="false" data-backdrop="static" #formModal>
            <app-isms-risk-treatment-update-modal [source]="updateObject" *ngIf="updateObject.id !=null">
            </app-isms-risk-treatment-update-modal>
        </div>
        
        <!-- </main> -->
        <!-- <ng-container *mobxAutorun>
                <div *ngIf="!IsmsRiskTreatmentStore?.individualTreatmentLoaded">
                    <app-risk-context-detail></app-risk-context-detail>
                </div>
            </ng-container> -->
        <div *ngIf="!IsmsRiskTreatmentStore?.individualTreatmentLoaded">
            <app-risk-context-detail></app-risk-context-detail>
        </div>
        <!------------------- Delete Confirmation Modal Start --------------------------->
        
        <div class="modal modal-style-1 fade" id="delete-popup" data-backdrop="static" data-keyboard="false" #deletePopup>
            <app-delete-popup [source]="deleteObject"></app-delete-popup>
        </div>
        
        <!------------------- Delete Confirmation Modal End --------------------------->