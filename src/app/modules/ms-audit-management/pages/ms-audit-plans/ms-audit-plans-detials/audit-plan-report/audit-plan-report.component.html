<div #plainDev></div>
<div class="tab-pane tab-edit-class smoal-left-tab-page" id="project-tab-twelve">
    <div class="report-main-div">
        <div class="pdf-menu-accodion-main clearfix">
            <div class="pdf-menu-accodion cmn-bdr-right mCustomScrollbar">
              <div class="pdf-menu-accodion-inner">
      
                <div class="panel-group panel-drop-sections panel-drop-white" id="jd" role="tablist"
                  aria-multiselectable="true">
                  <div class="panel panel-default">
                    <div [ngClass]="dataId=='collapse001' ? 'panel-heading active' :'panel-heading' " role="tab"
                      id="headingOne">
                      <div class="panel-title text-20">
                        <a (click)="setClass('collapse001')" role="button" data-toggle="collapse" aria-expanded="false"
                          aria-controls="collapseOne" class="collapsed">
                          <h5 class="width96pc mt-0">1. {{'audit_plan' | translate}}
                            <!-- <span class="drop-down-icone"><i class="fas fa-chevron-down"></i></span> -->
                          </h5>
                        </a>
                      </div>
                    </div>
      
                  </div>
                  <div class="panel panel-default">
                    <div [ngClass]="dataId=='collapse0011' ? 'panel-heading active' :'panel-heading' " role="tab"
                      id="headingOne">
                      <div class="panel-title text-20">
                        <a (click)="setClass('collapse0011')" role="button" data-toggle="collapse" aria-expanded="false"
                          aria-controls="collapseOne" class="collapsed">
                          <h5 class="width96pc mt-0">2. {{'audit_schedule' | translate}}
                            <!-- <span class="drop-down-icone"><i class="fas fa-chevron-down"></i></span> -->
                          </h5>
                        </a>
                      </div>
                    </div>
      
                  </div>
               
                  
                </div>
      
              </div>
      
            </div>
    </div>
    <div class="cmn-bdr bg-white p-3 pdf-zoom-header-main pdf-zoom-header d-flex">

    </div>
    <div class="pdf-v2-report-html pdf-v2-report-list-view-html clearfix pdf-new-style-pagination">
        <!-- <div class="pdf-right-contents target"> -->
        <div class="pdf-right-contents main-container ">
            <div class="maindiv">
                <div class="holder" id="1">
                    <div class="pdf-page-inner-new-content" >
                        <div class="pdf-page-section widg-padding-cmn-small relative" style="background: #fff;" >
                          <!-- <div class="status-tag-new-two bg-green">Completed</div> -->
                          <div class=" db-md-screen-center" style="min-height: 50vh;">
                                    <div class="pdf-cover-inner text-center w-100">
                                        <div class="logo-project-pdf mb-3">
                                            <img src="/assets/images/iso-logo.png" class="img-fluid">
                                        </div>
                                        <h3 class="text-26 font-extra-bold text-light-blue">{{'internal_audit_plan' | translate}}</h3>
                                        <!-- <p class="font-weight-600 mb-0">Mock Drill Type : Mock Drill Fire</p>
                                        <p class="font-weight-600 mb-0 text-light-blue">2021-11-17, 09:00 to 09:30</p> -->
                                    </div>
                            </div>
                            
                            <!-- <div class="cover-top-left-logo">
                              <img src="assets/images/iso-logo.png" class="img-fluid" width="150">
                            </div>
            
                            <div class="row align-items-center mt-4 mb-4">
                              <div class="col-lg-8 col-sm-12">
            
                                <p class="bold">#{{AuditPlanReportStore?.AuditPlanReportDetails?.reference_code?.data}}</p>
                                <h3 class="bold">{{AuditPlanReportStore?.AuditPlanReportDetails?.audit_plan_title?.data}}</h3>
            
                                <div class="top-border-40 pt-2 mt-3">
                                  <p><span class="bold">V</span> 01</p>
                                </div>
            
            
                              </div>
                              <div class="col-lg-4 col-sm-12">
                                <div class="report-cover-right-pic">
                                  <img src="assets/images/report-cover-one.png" class="img-fluid">
                                </div>
                              </div>
            
                            </div>
            
                            <div class="row">
                              <div class="col-xl-12">
                                <h6>{{'prepared_by' | translate}}</h6>
                                <hr class="mb-2">
                                <app-user-popup-box
                                  [source]=" getCreatedByPopupDetails(AuditPlanReportStore?.AuditPlanReportDetails?.created_by?.data,
                                  AuditPlanReportStore?.AuditPlanReportDetails?.created_at?.data)">
                                </app-user-popup-box>
                              </div>
                            </div> -->
                          </div>

                          <!-- <div class="pdf-page-section">
                            <div class="row introduction-page">
                              <div class="col-md-2"></div>
                              <div class="col-md-8">
                                <h4>Index</h4>
                                
            
                                <div class="clearfix pt-2 pb-2">
                                  <div class="page-list-sec clearfix">
                                    <p>{{'audit_plan' | translate}}</p>
                                    <p>01</p>
                                  </div>
                                </div>
            
                                <div class="clearfix pt-2 pb-2">
                                  <div class="page-list-sec clearfix">
                                    <p>{{'audit_schedule' | translate}}</p>
                                    <p>02</p>
                                  </div>
                                </div>
            
                                
            
            
                               
            
                              </div>
                            </div>
                          </div> -->
                    </div>
                    <div class="pdf-inner-no-border-accodion">
                        <div class="panel-group" id="accordion01" role="tablist" aria-multiselectable="true">
                            <div class="pdf-page-section" style="scroll-margin: 70px" id="collapse001">
                                <div class="introduction-page intro-right">
                                    <div class="panel panel-default">
                                        <div class="panel-heading active" role="tab" id="heading01">
                                            <h4 class="panel-title text-20">
                                              <a role="button" data-toggle="collapse" data-parent="#accordion01" href="#collapse01"
                                                aria-expanded="true" aria-controls="collapse01">
                                                1. {{'audit_plan' | translate}}
                                              </a>
                                            </h4>
                                          </div>
                                          <div id="collapse01" class="panel-collapse collapse in show" role="tabpanel"
                                aria-labelledby="heading01">
                          <div class="panel-body">
                            <div class="issue-top-sec">
                              <div class="clearfix">
                                <h5 class="d-inline-block cmn-head-style label-tag-style mr-2"><span
                                    class="issue-smoal-head-text">#{{AuditPlanReportStore?.AuditPlanReportDetails?.reference_code?.data}}</span>
                                    {{AuditPlanReportStore?.AuditPlanReportDetails?.audit_plan_title?.data}}
                                    <span
                                [ngClass]="'dot-div '+AuditPlanReportStore.AuditPlanReportDetails?.audit_plan_status?.data?.label+'-dot'">
                                {{AuditPlanReportStore.AuditPlanReportDetails?.audit_plan_status? AuditPlanReportStore.AuditPlanReportDetails?.audit_plan_status?.data?.language[0]?.pivot?.title : 'NA' }}</span>
                                </h5>
                              </div>
                              <div class="clearfix">
                                <p class="label-tag-style mb-2"><i
                                    class="fas fa-calendar-alt date-pics-two"></i>{{AuditPlanReportStore.AuditPlanReportDetails?.opening_meeting?.data | date :
                                                      OrganizationGeneralSettingsStore.organizationSettings?.date_time_format}} To
                                  {{AuditPlanReportStore.AuditPlanReportDetails?.closing_meeting?.data | date :
                                                          OrganizationGeneralSettingsStore.organizationSettings?.date_time_format}}
                                </p>
                              </div>
                              <!-- <p> {{AuditPlanReportStore.AuditPlanReportDetails?.opening_meeting?.closing_meeting}}</p> -->
                            </div>


                            <div class="row">
                             
                              <div class="col-xl-4 col-lg-4 col-sm-6">
                                <h6>{{'audit_program' | translate}}</h6>
                                <p>
                                 {{AuditPlanReportStore?.AuditPlanReportDetails?.audit_plan?.data?.ms_audit_program?.title}}
                                </p>
                              </div>
                              <div class="col-xl-4 col-lg-4 col-sm-6">
                                <h6>{{'audit_mode' | translate}}</h6>
                                <p>
                                    {{AuditPlanReportStore.AuditPlanReportDetails?.audit_mode?.data}}
                                </p>
                              </div>
                              <div class="col-xl-4 col-lg-4 col-sm-6">
                                <h6>{{'audit_category' | translate}} </h6>
                                <p>
                                    {{AuditPlanReportStore.AuditPlanReportDetails?.audit_category?.data}}
                                </p>
                              </div>
                              <!-- <div class="col-xl-4 col-lg-4 col-sm-6">
                                <h6>{{'team' | translate}} </h6>
                                <p>
                                    {{AuditPlanReportStore.AuditPlanReportDetails?.team?.data?.team?.title}}
                                </p>
                              </div> -->
                              
                              <div class="col-xl-4 col-lg-4 col-sm-6">
                                <h6>{{'department' | translate}}</h6>
                                <p>{{AuditPlanReportStore.AuditPlanReportDetails?.audit_plan_department?.data?.length?getArrayFormatedString('title',AuditPlanReportStore.AuditPlanReportDetails?.audit_plan_department?.data):AppStore.noContentText}} </p>
                              </div>
                              <div class="col-xl-4 col-lg-4 col-sm-6">
                               
                                <div class="mb-2 mt-2" [ngStyle] = "{display: !OrganizationGeneralSettingsStore?.organizationSettings?.is_ms_type ? 'none':'block'}"> 
                                    <h6 *ngIf="AuditPlanReportStore.AuditPlanReportDetails?.audit_plan?.data?.ms_type_organizations?.length>0">{{'ms_type' | translate}} </h6>
                                    <label *ngFor="let type of AuditPlanReportStore.AuditPlanReportDetails?.audit_plan?.data?.ms_type_organizations" class="outline-tag">{{type.ms_type.title}} <span>{{type.ms_type_version.title}}</span></label> 
                                </div>
                              </div>
                              <div class="col-xl-4 col-lg-4 col-sm-6">
                                <h6>{{'audit_leader' | translate}}</h6>
                                <div
                                class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol rounde-hov-bg p-0">
                                <app-user-popup-box [source]="getEmployeePopupDetails(AuditPlanReportStore?.AuditPlanReportDetails?.audit_plan?.data?.lead_auditor)"
                                   [showDepartment]='true'></app-user-popup-box>
                             </div>
                              </div>
                              <div class="col-xl-12 col-lg-12 col-sm-6">
                                <h6>{{'audit_scope' | translate}}</h6>
                                <p [innerHTML]="AuditPlanReportStore.AuditPlanReportDetails?.audit_plan?.data?.scope">
                                 
                                </p>
                              </div>
                              <div class="col-xl-12 col-lg-412 col-sm-6">
                                <h6>{{'audit_objective' | translate}} </h6>
                                <ul class="arrowlist ml-0 pl-0 mt-0 mb-0" *ngIf="AuditPlanReportStore.AuditPlanReportDetails?.audit_plan_objective?.data.length > 0"
                                 >
                                  <li
                                      *ngFor="let criteria of AuditPlanReportStore.AuditPlanReportDetails?.audit_plan_objective?.data">
                                      {{criteria.title}}
                                      
                                  </li>

                              </ul>
                              <div class="mt-3" *ngIf="AuditPlanReportStore.AuditPlanReportDetails?.audit_plan_objective?.data.length == 0">
                                <app-context-no-data [sourceData] = "{
                                  noData:'no_objective_found', border: false, imageAlign: 'left'}"></app-context-no-data>
                              </div>
                                  
                              </div>
                              <div class="col-xl-12 col-lg-12 col-sm-6">
                                <h6>{{'audit_criteria' | translate}}</h6>
                                <!-- <p [innerHTML]="AuditPlanReportStore.AuditPlanReportDetails?.audit_plan_criteria?.data">
                                    
                                </p> -->
                                <ul class="arrowlist ml-0 pl-0 mt-0 mb-0" *ngIf="AuditPlanReportStore.AuditPlanReportDetails?.audit_plan_criteria?.data.length > 0"
                                 >
                                  <li
                                      *ngFor="let criteria of AuditPlanReportStore.AuditPlanReportDetails?.audit_plan_criteria?.data">
                                      {{criteria.title}}
                                      
                                  </li>

                              </ul>
                              <div class="mt-3" *ngIf="AuditPlanReportStore.AuditPlanReportDetails?.audit_plan_criteria?.data.length == 0">
                                <app-context-no-data [sourceData] = "{
                                  noData:'no_criteria_found', border: false, imageAlign: 'left'}"></app-context-no-data>
                              </div>
                              </div>
                              
                            </div>

                           

                          </div>
                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="pdf-page-section" style="scroll-margin: 70px" id="collapse0011">
                            <div class="introduction-page intro-right">
                              <div class="panel panel-default">
                                <div class="panel-heading active" role="tab" id="heading03">
                                  <h4 class="panel-title text-20">
                                    <a role="button" data-toggle="collapse" data-parent="#accordion01" href="#collapse1011"
                                      aria-expanded="true" aria-controls="collapse1011">
                                      2. {{'audit_schedules' | translate}}
                                    </a>
                                  </h4>
                                </div>
                                <div id="collapse1011" class="panel-collapse collapse in show" role="tabpanel"
                                  aria-labelledby="heading03">
                                  <div class="panel-body">
                                   
                                    <app-context-no-data *ngIf="AuditPlanReportStore?.AuditPlanReportDetails?.audit_schedule?.data.length == 0"
                                    [sourceData]="getNoDataSource('center')"></app-context-no-data>

                                    <div class="audit-form-table w-100 not-fixed-table mb-0 pl-2"  *ngFor="let items of AuditPlanReportStore?.AuditPlanReportDetails?.audit_schedule?.data;let num=index" >
                                        <h4 class="panel-title  mt-2 mb-2">
                                            <a 
                                              >
                                              {{num+1}}. #{{items?.reference_code}} {{items?.title}}
                                            </a>
                                          </h4>
                                      <table
                                        class="table table-bordered ordinary-table audit-page-table mb-1 table-scroll">
                                        <thead>
                                          <tr>
                                            <th class="border-top-0 " width="40%">{{'department' | translate}}</th>
                                            <th class="border-top-0" width="40%">{{'audit_date' | translate}}</th>
                                           
                                            <th class="border-top-0 text-center" width="20%">{{'status' | translate}}
                                            </th>
                                            <!-- <th class="border-top-0 text-center" width="30%">
                                              {{'auditors' | translate}}</th>
                                            <th class="border-top-0 text-center" width="30%">{{'auditee' | translate}}
                                            </th>
                                            <th class="border-top-0 text-center" width="25%">{{'process' | translate}}
                                            </th> -->
                                          </tr>
                                        </thead>
        
                                        <tbody>
                                          <tr class="edit-and-delete-main"
                                           >
                                           <td >
                                            {{items?.department?.title }}
                                          </td>
                                            <td>
                                           
                                              {{ items?.start_date | date: OrganizationGeneralSettingsStore.organizationSettings?.date_time_format }} - 
                                              {{ items?.end_date | date: OrganizationGeneralSettingsStore.organizationSettings?.date_time_format }}

                                            </td>
                                           
                                            <td class="text-center">
                                                <span
                                                [ngClass]="'dot-div '+items?.schedule_status?.label+'-dot'">
                                                {{items?.schedule_status?items?.schedule_status?.language[0]?.pivot?.title : 'NA' }}</span>
                                            </td>
                                           
        
                                          </tr>
        
                                        </tbody>
                                      </table>

                                      <h6 *ngIf="items?.auditors?.length>0" class="mt-3">
                                        {{'auditors' | translate}}</h6>
                                     <div class="row" *ngIf="items?.auditors?.length">
                                        <div class="col-lg-3 col-sm-6" *ngFor="let user of items?.auditors">
                                           <div
                                              class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol p-0 mb-3">
                                              <app-user-popup-box 
                                              [source]="getEmployeePopupDetails(user.user,null,user?.is_present)" 
                                               [showDepartment]='true' [present]="true" [classIssue]="true">
                                              </app-user-popup-box>
                      
                                              <!-- <app-user-popup-box *ngIf="ReportStore.reportDetails?.mode_of_meeting?.is_unplanned" 
                                              [source]="getEmployeePopupDetails(user.user,null,1)" [showDepartment]='true' [present]="true" [classIssue]="true">
                                              </app-user-popup-box> -->
                                           </div>
                                        </div>
                                     </div>

                                     <h6 *ngIf="items?.auditors?.length>0" class="mt-3">
                                        {{'auditees' | translate}}</h6>
                                     <div class="row" *ngIf="items?.auditees?.length">
                                        <div class="col-lg-3 col-sm-6" *ngFor="let user of items?.auditees">
                                           <div
                                              class="d-flex flex-row user-list-sm user-box-smol-round user-box-smol-round-table-scrol p-0 mb-3">
                                              <app-user-popup-box 
                                              [source]="getEmployeePopupDetails(user.user,null,user?.is_present)" 
                                               [showDepartment]='true' [present]="true" [classIssue]="true">
                                              </app-user-popup-box>
                      
                                              <!-- <app-user-popup-box *ngIf="ReportStore.reportDetails?.mode_of_meeting?.is_unplanned" 
                                              [source]="getEmployeePopupDetails(user.user,null,1)" [showDepartment]='true' [present]="true" [classIssue]="true">
                                              </app-user-popup-box> -->
                                           </div>
                                        </div>
                                     </div>
        
                                    </div>
        
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<div class="modal modal-style-1 fade" id="delete-popup" #confirmationPopUp>
    <app-delete-popup [source] = "popupObject"></app-delete-popup>
 </div>